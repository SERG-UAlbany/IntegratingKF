(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{121:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAC4jAAAuIwF4pT92AAAGaGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDYtMjFUMTE6Mjc6NDYtMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA5LTEyVDE2OjU4OjM1LTA1OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA5LTEyVDE2OjU4OjM1LTA1OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjEyZTJiMzk4LThjNzQtNDE1OS1iNTRiLTQxNjNhZGNiNmY4MyIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmM5Y2JkYzI3LTEwYmMtOWQ0Yy05MjFmLTg1MGRjOTBmZTAwNiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjk3YjYxMzJlLTM1ZGItNDE3OS04MDMyLTYxMWRkMWYwNzVhYSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTdiNjEzMmUtMzVkYi00MTc5LTgwMzItNjExZGQxZjA3NWFhIiBzdEV2dDp3aGVuPSIyMDE4LTA2LTIxVDExOjI3OjQ2LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMmUyYjM5OC04Yzc0LTQxNTktYjU0Yi00MTYzYWRjYjZmODMiIHN0RXZ0OndoZW49IjIwMTgtMDktMTJUMTY6NTg6MzUtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE4IChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pia9hzQAAAD6SURBVFiF7dY/SgNBGIbx366LghqCf25kG1MJXsMDeAjxGFqaFCnU0kN4B1MZsDEW7sJImDVCxkkxT/OywzfwzAffzFYn149j3OJYPua4anCP3YwiMMBdjSazSEdV4z23Rcuizm0QUmRiFJkYRSZGkYlRZGIUmRhFJkaRibFNMoPU/7/PeMFyjdqPlDJPOPvLhpQyszYrDNvsYyelzGGbQ7xiv6e2wl5KmTrI0zXqp/8xTUssfql5wGgbRnuCMfnvmSnOu4+cMhOMwoVcMj860lHrH7lNEd7AKx0JZT4TCYSHPAhEVjrS0eASNzjasMy8zRpvvt+pi74NXzMDHXjf0mfDAAAAAElFTkSuQmCC"},122:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAC4jAAAuIwF4pT92AAAKp2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDYtMjFUMTE6Mjc6NDYtMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA5LTEyVDE4OjA1OjUwLTA1OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA5LTEyVDE4OjA1OjUwLTA1OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmExYzgwOTQwLTIzMjYtNDc4NS05ZTA0LWE0MDJjMDdiNDI2ZCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjcyNzMyNjhjLTE1OTEtYzA0Mi1iM2IxLWM5NjVhNzE5MzRkOCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjcwMTg5MDJiLTU5YjctNDNkNy1iODc1LTk5YmUyNTM2MWJiNCIgdGlmZjpPcmllbnRhdGlvbj0iMSIgdGlmZjpYUmVzb2x1dGlvbj0iMzAwMDAwMC8xMDAwMCIgdGlmZjpZUmVzb2x1dGlvbj0iMzAwMDAwMC8xMDAwMCIgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIgZXhpZjpDb2xvclNwYWNlPSIxIiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMTg3MSIgZXhpZjpQaXhlbFlEaW1lbnNpb249IjE4NzEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjcwMTg5MDJiLTU5YjctNDNkNy1iODc1LTk5YmUyNTM2MWJiNCIgc3RFdnQ6d2hlbj0iMjAxOC0wNi0yMVQxMToyNzo0Ni0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjBiYzRiZGFkLTVkNTQtNDAzYS1iNGIwLWY0ZmViZTgyNzM0YSIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQxODowMDozMi0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmMxM2M1OWI3LWE1MmItNDdkZC1hMmUwLTE3M2E1MGY3OGEyNCIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQxODowNTo1MC0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmExYzgwOTQwLTIzMjYtNDc4NS05ZTA0LWE0MDJjMDdiNDI2ZCIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQxODowNTo1MC0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmMxM2M1OWI3LWE1MmItNDdkZC1hMmUwLTE3M2E1MGY3OGEyNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3MDE4OTAyYi01OWI3LTQzZDctYjg3NS05OWJlMjUzNjFiYjQiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3MDE4OTAyYi01OWI3LTQzZDctYjg3NS05OWJlMjUzNjFiYjQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7C07tpAAAA+0lEQVRYhe3WMUoDQRSH8d+ui4IaguKBBNuYSvAatt5CPIaWJkUaLT2BlXcwlQEbY+EujIRZI2ScFPM1f3Z4A988eDNbvVyfjnGLY/mY46rBPXYzisAAdzWazCIdVY333BYtizq3QUiRiVFkYhSZGEUmRpGJUWRiFJkYRSbGNskMUv//PuEZyzVqP1LKPOLsLxtSyszarDBss4+dlDKHbQ7xiv2e2gp7KWXqIE/WqJ/+xzQtsfil5gGjbRjtCcbkv2emOO8+cspMMAoXcsn86EhHrX/kNkV4A690JJT5TCQQHvIgEFnpSEeDS9zgaMMy8zZrvPl+py76NnwBLFcduiEp6KQAAAAASUVORK5CYII="},123:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAJ/mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDE4LTA5LTEyVDIxOjI1OjE0LTA1OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0wOS0xMlQyMTo1MjozNC0wNTowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wOS0xMlQyMTo1MjozNC0wNTowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxYWYyNTA0Yy1hMDg0LTQwZDAtOTBjYi00N2VjOTM3MDk5MGIiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0NmM4MjBiYi01NGUyLTYxNDgtODE0Ny04ZGI2N2MxYjlkYzQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZTRlNGRmMi0zYjYwLTQ0OWQtOWY1OS1hZDBlZjExMWNlMDMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQyMToyNToxNC0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBpbWFnZS9wbmcgdG8gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6M2E4ZGZjNmQtZmVkNC00MzI4LTgzMjgtMzRmY2M2YjIyMzExIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjM4OjQ1LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MjZlZDljYjYtOGJlZi00NDllLWI2NzQtNzZiYzAzNDIxYjY0IiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjUyOjM0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MWFmMjUwNGMtYTA4NC00MGQwLTkwY2ItNDdlYzkzNzA5OTBiIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjUyOjM0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjZlZDljYjYtOGJlZi00NDllLWI2NzQtNzZiYzAzNDIxYjY0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu/x7K8AAAkXSURBVFiFvVhpkFxVFf7OuW/r6WV6m+7ZiBIlBAOCLGICkigVBUeBKiuSgCguP4JQSgGJCEFERYkkJD9iWSWLUJRYgiAoUQqK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"},124:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAJ/mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDE4LTA5LTEyVDIxOjI1OjE0LTA1OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0wOS0xMlQyMTo0ODoyNC0wNTowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wOS0xMlQyMTo0ODoyNC0wNTowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowZmU3NjVjNi01NjhmLTRhY2UtYTVlMi1kMjJmMDA5NDBiNmMiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpiODQwOTQzYS1iNjliLTdhNDItODNiZS0zOTY2YWEwNmIxMDQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZTRlNGRmMi0zYjYwLTQ0OWQtOWY1OS1hZDBlZjExMWNlMDMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQyMToyNToxNC0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBpbWFnZS9wbmcgdG8gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6M2E4ZGZjNmQtZmVkNC00MzI4LTgzMjgtMzRmY2M2YjIyMzExIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjM4OjQ1LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTdmMzAzOWEtODMwNC00MDhlLWI2ZDQtNjRhNTczZGZlNTNiIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjQ4OjI0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MGZlNzY1YzYtNTY4Zi00YWNlLWE1ZTItZDIyZjAwOTQwYjZjIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjQ4OjI0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTdmMzAzOWEtODMwNC00MDhlLWI2ZDQtNjRhNTczZGZlNTNiIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PotzvqwAAAlFSURBVFiFxVhpkF1FFf7O6b7v3vu2mSSTbTKTmYTJPkkGCISlCFjBsIiouEAoUNSSkooiGFNlJQiFSyRKAqXID1ZTilJlEbFY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"},125:function(e,t){e.exports="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAArCAYAAADyijE0AAAACXBIWXMAAC4jAAAuIwF4pT92AAAKp2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDYtMjFUMTE6Mjc6NDYtMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTExLTE4VDE1OjQyOjQ3LTA2OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTExLTE4VDE1OjQyOjQ3LTA2OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmJjZmIyYjEwLWEzZmEtNDEzNC04MTRlLWFkOTk1MzY0YWI2MSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjE4MzhiYWEzLTQ0OTEtODU0MC1hZDBkLTZlNDYxYjg1Y2FmNyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmMyZmRkYmUwLTkxNTktNDUzZi1hNTc0LTQyYWJlMjJmM2ViOCIgdGlmZjpPcmllbnRhdGlvbj0iMSIgdGlmZjpYUmVzb2x1dGlvbj0iMzAwMDAwMC8xMDAwMCIgdGlmZjpZUmVzb2x1dGlvbj0iMzAwMDAwMC8xMDAwMCIgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIgZXhpZjpDb2xvclNwYWNlPSIxIiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMTg3MSIgZXhpZjpQaXhlbFlEaW1lbnNpb249IjE4NzEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmMyZmRkYmUwLTkxNTktNDUzZi1hNTc0LTQyYWJlMjJmM2ViOCIgc3RFdnQ6d2hlbj0iMjAxOC0wNi0yMVQxMToyNzo0Ni0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjRjNTVlYzUyLTNhMmItNDU4NC04ZWJmLThhNWQ5ODFmNGNhYiIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xOFQxNTozOTozOC0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQzZjE3NmNiLWFhMGYtNDZkYS1iZTk1LTczZjUyNTI2MGZkOCIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xOFQxNTo0Mjo0Ny0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmJjZmIyYjEwLWEzZmEtNDEzNC04MTRlLWFkOTk1MzY0YWI2MSIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xOFQxNTo0Mjo0Ny0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQzZjE3NmNiLWFhMGYtNDZkYS1iZTk1LTczZjUyNTI2MGZkOCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpjMmZkZGJlMC05MTU5LTQ1M2YtYTU3NC00MmFiZTIyZjNlYjgiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjMmZkZGJlMC05MTU5LTQ1M2YtYTU3NC00MmFiZTIyZjNlYjgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7y32vAAAADuklEQVRYhe2YTWhjVRTHf/e+jzRtMglaW1tSptC0tpShC0EQKqUutG6qojgrF8Iwiu4GcSEuFXfqTgYd7FpBMLNxNkJFunDRLrIouugH/bax9pm2JO+93DuL5MUmmYQOzWu78L+5eSfn8n7v3nPOe/cIrTUAs7Oz1EkAt4BpQAIOcA/4vd4xUCaTafbXmWQ2sSeBB8BzdfbbwCfAZ+e662PAJIA/gaeAPeCryvgC8A7wKdAPfNBuGPkI290KyDzwLHAIjALfAS9XfN4HXgobpge4Wfn9IfAD8DXwEfArkALuACil3jVNk46ODrTWKKXaB1MoFJBSjmqtkVJmDMN4TWv9PDCvtb5VcfsmmBOJRJ45OjpiZWUF0zTp6upqH8zAwAD5fF7bto3jOEe7u7v9AK7rfuF53j2lVEZKKT3Pu1YoFDAMw8hms2xtbWHbNqVS6dwwYm5u7gngY63106urq/2Li4vTsVhs3TAMXSqVBoeGhuaHh4dXFhYWXtzY2Lg+MjKS3dzcvBGNRv+dmpr6CZCWZbnn5PgH+NwEXgfei0ajXd3d3eRyOfr6+q7PzMzgOA5CiKlEIjFlWRa5XI7p6ekbk5OT5PP5a7Ztv62Uake8nAB/mMC3AL7vo5RCCAGAYRhEIhG01ggh0FoTFEjLsrBtu8Z2TnUCd03ABWwhBL7vA6C1xvM8fN9Ha12NByEESil836/6tlGuBIrBValUqt78dEC6rovrukhZjnfP89oNAlCsZpPneViWhRACKWV1VQCKxSK2bSOlrFmpdqum6AUxUB8HpmkihKiuSAhb1AjTSgFgEOBXAiZMnRnmInS1YZRSmKaJZVn/OUmJZVkopULdroZsqrwoOT4+rtpd18VxHGzbDg2kASYej9Pb28vh4SHr6+tV+87ODnt7eySTSTo7O0PLqJrPzkgkQjqdJpvNsrS0xNraGkII9vf3UUoxMTFBMpkMbasavoHHxsYQQrC8vMzBwQFQjpl0Os34+DjRaJSTk5OLgQEYHR0lFouxvb0NQE9PD4ODg0A5fsJSs6MKqVSKVCrVYA/rVQBXvc5cpv6HaaarBBNvmk1t0s/Ab8BZqmQxTJgHwCuPMyFMmF8qowSepNzvaSUZJky8MiaAFcpno2YSgAgTRpwaY2fw//4isklTPr620o/AzauQ2hngDbj8OpMBXg0uLhOmBgQuD+Z+PQiUYVqlXLt0ugLfBxqazgHM+TuDj9bphwwafk1BoFyB3wS+pNyIbqf+rowS+ItyK/etVhMeAuZkZDAeOcH2AAAAAElFTkSuQmCC"},126:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAGAGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDktMTJUMjI6MDk6NDctMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA5LTEyVDIyOjIxOjM5LTA1OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA5LTEyVDIyOjIxOjM5LTA1OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjYxYmMzYjk1LWE4ZDItNDFjZC1iMTFhLTFjMzY3NWYxY2IyZiIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmUxMGM5NWJkLWI1NmEtNzI0Zi1hMzJlLTJjZTk1NDRmMDljNCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjhhZDQ5Y2Q5LWMyZGEtNGMxYi1iMmJhLTBiZDZiMjJmZmM5MyI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OGFkNDljZDktYzJkYS00YzFiLWIyYmEtMGJkNmIyMmZmYzkzIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIyOjA5OjQ3LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NjFiYzNiOTUtYThkMi00MWNkLWIxMWEtMWMzNjc1ZjFjYjJmIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIyOjIxOjM5LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6mqJQFAAADHklEQVRYhc2YTWhcVRSAv3Pfve/NNKbtdNKg0bQlFUOxakyVlnZR6EbQVTciFMSli26qBTei0B/cZO1OsHTjTkRcuZAKarASNG1J29CKEap2TJqQSTLv597r4iWDSnWmneFNDjzeD+ee93Huuefcc8V7z2YRKR85QbT/2Nuq8vgoNhY8RdIJJvJu6e7t5MqXE9qMHDird4+96xvL4KMCOZo4mOGn8Y3lIam+d8mLUvgsKR5kQwIDgALf8GncOxCALAFn1xTOpoj0FkYEvMtUbyn+Kbr5JAKioMilnnuk+U/d/GhTkAB0mCsUAWIzcFkewN6vwwSGiVf2Xnnj4K5nUmtrUEQMeUwQ7Pzkh1+nTn4xN04Wr8PYjKHtfXUAEwQ7CyBpyhPV/jo2BaAZwGmWhUVCbEiSZs1Mu6lWU9dgZq99ytLibx3Z6BrM4t3P+Xnmo45sdA1Gm3727fqO6W/eZKW+0FuYJDX8uZAwsPU2tZuvMjP92QPb0K0Urk5dRPvrxMm/M3P+LgJZllBWP1FfcaSZpxwpquUP+fHbSZ49dA6lgu7AlN3HlMKAsvrvrCwlYXXNkWUeJdCIHXGS8FhlitnLx4mq77DnySOdw6wlIWka41zrmrVR/DfutfmYvj5LOTnD5UvjvHj0g/8d3zpmfGelwTlPEICw2lK3pWe2lGKiUN/fMwLOepyHOHZY6/NCvK46sCOkvgL33Fu8cPSlzmEW0+Po+AaNv20GZX0enPOEYYCQoNwMoRGs9YShsH2r4c7CPkafP0up3N8SpC2Y8UMn2zI0+dUpqpWreJ975vfV13nu8Im2xrYN065EJp+W2V8GGBo9x3B1+IFtdA0mS+aZmRtj7PD5h7bRNZhtgy9TGTzQkY2uwTy1/7WObWzO/YzWOu0FgDG62cpqlNIozfzyagmqWOfuFQUSKFWpLa2UCAzYNJDq+1/nabNRx4sgOiqmdxLJ21rvINqCiBCEI+M7gsGRg3iHMmHeyKkCLlGINqA0UnqEbG76gk5vfX9a9VVqatuju12jIVDc+YwHxETYP27dSW5OTshmOrn6C2gfIpLerWS0AAAAAElFTkSuQmCC"},127:function(e,t,n){e.exports=n.p+"static/media/sample_view.e92880b7.gif"},137:function(e,t,n){e.exports=n(219)},182:function(e,t,n){},187:function(e,t,n){},188:function(e,t,n){},189:function(e,t,n){},190:function(e,t,n){},191:function(e,t,n){},195:function(e,t,n){},196:function(e,t,n){},198:function(e,t,n){},199:function(e,t,n){},200:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){},217:function(e,t,n){},219:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(21),i=n.n(r),c=(n(142),n(29)),s=n(96),l=n(14),u=n(12),d=n(63),m=n.n(d),p=n(15),h=n(16),b=n(10),f=n(18),g=n(17),v=n(28),I=n(230),y=n(128),E=n(6),A=n(4),N=n.n(A),j=n(11),O=n(25),w=n(7),S=n(19),k=n.n(S),C=localStorage.getItem("server"),Z="".concat(C,"/api");function M(e){k.a.defaults.headers.common.Authorization="Bearer ".concat(e)}var T=sessionStorage.getItem("token");T&&M(T);var G,D=function(){var e=Object(j.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("".concat(Z,"/users/me"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(e){return k.a.get("".concat(Z,"/communities/").concat(e))},L=function(){var e=Object(j.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("".concat(Z,"/communities/"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(j.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("".concat(Z,"/communities/").concat(t,"/groups"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(j.a)(N.a.mark((function e(t,n,a){var o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("".concat(Z,"/links/").concat(n,"/").concat(t));case 2:return o=(o=e.sent).data,a&&(o=o.filter((function(e){return e.type===a}))),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),x=function(){var e=Object(j.a)(N.a.mark((function e(t,n,a,o){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("".concat(Z,"/links"),{from:t,to:n,type:a,data:o});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,o){return e.apply(this,arguments)}}(),z=function(){var e=Object(j.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.delete("".concat(Z,"/links/").concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(j.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("".concat(Z,"/links/").concat(t,"/search"),{query:n});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V=function(){var e=Object(j.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("".concat(Z,"/objects/").concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(j.a)(N.a.mark((function e(t,n,a){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.put("".concat(Z,"/objects/").concat(n,"/").concat(a),t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),B=function(e,t){var n={communityId:e,type:"Attachment",title:"an Attachment",authors:[t],status:"unsaved",permission:"protected",data:{version:0}};return k.a.post("".concat(Z,"/contributions/").concat(e),n)},P=function(){var e=Object(j.a)(N.a.mark((function e(t,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("".concat(Z,"/contributions/").concat(t),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=Object(j.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("".concat(Z,"/communities/").concat(t,"/authors"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(j.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.get("".concat(Z,"/records/object/").concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(e,t){var n=new FormData;return n.append("file",e),k.a.post("".concat(Z,"/upload"),n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})};var X,_,K=Object(w.b)("ADD_USER"),q=Object(w.b)("ADD_AUTHORS"),ee=Object(w.c)({},(G={},Object(E.a)(G,K,(function(e,t){e[t.payload._id]=t.payload})),Object(E.a)(G,q,(function(e,t){t.payload.forEach((function(t){return e[t._id]=t}))})),G)),te=function(e){return function(){var t=Object(j.a)(N.a.mark((function t(n){var a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J(e);case 2:a=t.sent,n(q(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ne=Object(w.b)("REQUEST_SCAFFOLD"),ae=Object(w.b)("RECEIVE_SCAFFOLD"),oe=Object(w.c)({isFetching:!1,items:[],fetched:!1},(X={},Object(E.a)(X,ae,(function(e,t){e.items=t.payload,e.isFetching=!1,e.fetched=!0})),Object(E.a)(X,ne,(function(e,t){e.isFetching=!0})),X)),re=function(e,t){return function(n){n(ne);var a=R(e).then((function(e){return Promise.all(e.data.scaffolds.map((function(e){return V(e)})))}));return Promise.all([a,W(t,"from","uses")]).then(function(){var e=Object(j.a)(N.a.mark((function e(t){var a,o,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t[1].map((function(e){return e.to})),o=t[0].filter((function(e){return a.includes(e._id)})),e.next=4,Promise.all(o.map((function(e){return W(e._id,"from")})));case 4:r=e.sent,o=o.map((function(e,t){return e.supports=r[t],e})),n(ae(o));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},ie=Object(w.b)("SET_TOKEN"),ce=Object(w.b)("SET_CURRENT_LOGIN_FORM"),se=Object(w.b)("SET_COMMUNITY"),le=Object(w.b)("SET_COMMUNITY_ID"),ue=Object(w.b)("SET_CURRENT_SERVER"),de=Object(w.b)("SET_VIEW_ID"),me=Object(w.b)("SET_AUTHOR"),pe=Object(w.b)("SET_VIEW"),he=Object(w.b)("SET_AUTHOR"),be=Object(w.b)("SET_VIEWS"),fe=Object(w.b)("EDIT_COMMUNITY"),ge=Object(w.b)("SET_USERID"),ve=Object(w.b)("SET_ISAUTHENTICATED"),Ie=Object(w.b)("SET_COMMUNITIES"),ye=Object(w.b)("SET_USER_COMMUNITIES"),Ee={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0},Ae={token:sessionStorage.getItem("token"),currentLoginForm:"Login",communityId:null,currentServer:null,viewId:null,contextId:"",user:null,view:null,views:[],community:null,userId:"",isAuthenticated:!!sessionStorage.getItem("token"),communities:[],userCommunities:[],servers:[{id:0,key:"kf6.ikit.org",value:"https://kf6.ikit.org"},{id:1,key:"kf6-stage.ikit.org",value:"https://kf6-stage.ikit.org"},{id:2,key:"kf6-stage.rit.albany.edu",value:"https://kf6-stage.rit.albany.edu"},{id:3,key:"kf.rdc.nie.edu.sg",value:"https://kf.rdc.nie.edu.sg"},{id:4,key:"kf.rit.albany.edu",value:"https://kf6.rit.albany.edu"}]},Ne=Object(w.c)(Ae,(_={},Object(E.a)(_,ie,(function(e,t){e.token=t.payload,e.isAuthenticated=!!e.token,M(t.payload)})),Object(E.a)(_,ve,(function(e,t){e.isAuthenticated=!!e.token})),Object(E.a)(_,ce,(function(e,t){e.currentLoginForm=t.payload})),Object(E.a)(_,le,(function(e,t){e.communityId=t.payload})),Object(E.a)(_,ue,(function(e,t){var n;e.currentServer=t.payload,(n=t.payload).endsWith("/")&&(n=n.substring(0,n.length-1)),localStorage.setItem("server",n),Z="".concat(C=n,"/api")})),Object(E.a)(_,de,(function(e,t){e.viewId=t.payload})),Object(E.a)(_,ge,(function(e,t){e.userId=t.payload})),Object(E.a)(_,me,(function(e,t){e.user=t.payload})),Object(E.a)(_,pe,(function(e,t){e.view=t.payload})),Object(E.a)(_,be,(function(e,t){e.views=t.payload})),Object(E.a)(_,se,(function(e,t){e.community=t.payload,e.communityId=t.payload._id,e.contextId=t.payload.rootContextId})),Object(E.a)(_,fe,(function(e,t){e.community=Object(O.a)(Object(O.a)({},e.community),t.payload)})),Object(E.a)(_,Ie,(function(e,t){e.communities=t.payload})),Object(E.a)(_,ye,(function(e,t){e.userCommunities=t.payload})),Object(E.a)(_,he,(function(e,t){e.author=t.payload})),_)),je=function(e){return function(t){return function(e){return k.a.get("".concat(Z,"/authors/").concat(e,"/me"))}(e).then((function(e){t(he(e.data))}))}},Oe=n(27),we=n.n(Oe),Se=(n(93),n(74));function ke(e,t,n){var a={userName:e,password:t};return fetch(n+"auth/local",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return 200!==e.status&&(console.log("Error: "+n+"auth/local"),console.log(e)),e.json()})).then((function(e){return[e,n]})).catch((function(e){return console.log("Error: "+n+"auth/local"),console.log(e),[{error:"Error: server unavailable"},n]}))}function Ce(e,t,n,a,o,r){var i={email:a,firstName:t,lastName:n,password:r,userName:o};return fetch(e+"api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(t){return 200!==t.status&&(console.log("Error: "+e+"api/users"),console.log(t)),t.json()})).then((function(t){return[t,e]})).catch((function(t){return[{error:"Error: server unavailable"},e]}))}function Ze(e,t,n,a,o,r,i){var c={email:a,firstName:t,lastName:n,password:r,registrationKey:i,userName:o};return fetch(e+"api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(t){return 200!==t.status&&(console.log("Error: "+e+"api/users"),console.log(t)),t.json()})).then((function(t){return[t,e]})).catch((function(t){return[{error:"Error: server unavailable"},e]}))}var Me=[{name:"IKIT Stage",url:"https://kf6-stage.ikit.org/"},{name:"Albany Stage",url:"https://kf6-stage.rit.albany.edu/"},{name:"IKIT",url:"https://kf6.ikit.org/"},{name:"Albany",url:"https://kf6.rit.albany.edu/"},{name:"Singapore",url:"https://kf.rdc.nie.edu.sg/"}];function Te(e){for(var t in Me)if(Me[t].url===e)return Me[t].name;return"Error: server "+e+" does not exist"}function Ge(e){for(var t in Me)if(Me[t].name===e)return Me[t].url;return"Error: server "+e+" does not exist"}function De(e){var t=localStorage.getItem("Username"),n=JSON.parse(localStorage.getItem(t));for(var a in n)if(n[a][0]===e)return n[a][1]}function Re(e,t,n){var a=[];document.getElementById("refreshCheckbox").checked&&localStorage.clear();var o=JSON.parse(localStorage.getItem(e));if(null==o)for(var r in Me)a.push(ke(e,t,Me[r].url));else for(var i in o)a.push(ke(e,t,o[i][0]));Promise.all(a).then((function(t){!function(e,t,n){var a=!1,o="",r=[],i=JSON.parse(localStorage.getItem(e));for(var c in t)if(void 0!==t[c][0].token){var s=t[c][0].token,l=t[c][1];null===i&&!1===a?r.push([l,s,"active"]):null==i?r.push([l,s,"inactive"]):"active"===i[c][2]?r.push([l,s,"active"]):r.push([l,s,"inactive"]),a=!0}else{if(void 0!==t[c][0].message&&null!==i){var u=document.getElementById("uname").value,d=document.getElementById("pwd").value;localStorage.removeItem(u),Re(u,d,n);break}void 0!==t[c][0].message&&""===o||"This userName is not registered."===o&&"This password is not correct."===t[c][0].message?o=t[c][0].message:void 0!==t[c][0].error&&""===o&&(o=t[c][0].error)}a?(localStorage.setItem("Username",e),localStorage.setItem(e,JSON.stringify(r)),n.setState({response:JSON.stringify(r)}),n.props.history.push("/dashboard")):(document.getElementById("errorMessage").style.display="visible",n.setState({errorMessage:o}))}(e,t,n)})).catch((function(e){console.log(e)}))}n(94);var Le=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).inputChangeHandler=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(E.a)({},t,n))},a.formSubmitHandler=function(e){e.preventDefault();var t=a.state.uname,n=a.state.pwd;return document.getElementById("errorMessage").style.display="hidden",Re(t,n,Object(b.a)(a)),!1},a.openSignUpForm=function(e){a.props.setCurrentLoginForm("SignUp")},a.state={uname:null,pwd:null,errorMessage:null},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){we()('[data-toggle="tooltip"]').tooltip(),we()('[data-toggle="popover"]').popover(),we()(window).width()<=768&&document.getElementById("popover").setAttribute("data-trigger","focus")}},{key:"render",value:function(){return o.a.createElement("div",{className:"row login-form-row"},o.a.createElement("div",{className:"col-lg-8 col-md-10 col-sm-12 login-form-wrapper"},o.a.createElement("h1",null,"knowledgeforum.org"),o.a.createElement("form",{onSubmit:this.formSubmitHandler,className:"loginForm",id:"loginForm",autoComplete:"on"},o.a.createElement("div",{className:"login-input-wrapper"},o.a.createElement("i",{className:"fas fa-user"}),o.a.createElement("input",{type:"text",id:"uname",name:"uname",placeholder:"Username",required:!0,onChange:this.inputChangeHandler})),o.a.createElement("div",{className:"login-input-wrapper"},o.a.createElement("i",{className:"fas fa-lock"}),o.a.createElement("input",{type:"password",id:"pwd",name:"pwd",placeholder:"Password",required:!0,onChange:this.inputChangeHandler})),o.a.createElement("div",{className:"login-checkbox-wrapper"},o.a.createElement("input",{type:"checkbox",id:"refreshCheckbox",name:"refreshCheckbox"}),o.a.createElement("label",{htmlFor:"refreshCheckbox"},"Refresh my servers on login?"),o.a.createElement("span",{id:"popover",tabIndex:"0",role:"button","data-toggle":"popover","data-trigger":"hover","data-content":"Check this box if you have registered to any new knowledge forums servers since your last login."},o.a.createElement("i",{className:"far fa-question-circle"}))),o.a.createElement("div",null,o.a.createElement("p",{style:{display:"hidden",color:"red"},id:"errorMessage",name:"errorMessage"},this.state.errorMessage)),o.a.createElement("input",{className:"login-button",type:"submit",value:"Login"})),o.a.createElement("p",{className:"login-create-account-p",onClick:this.openSignUpForm},"Don't have an account? Sign up ",o.a.createElement("i",{className:"far fa-arrow-alt-circle-right"}))))}}]),n}(a.Component),Ye={setCurrentLoginForm:ce},We=Object(v.d)(l.g,Object(u.b)(null,Ye))(Le),xe=n(42),ze=n(133),Fe=(n(182),function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).inputChangeHandler=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(E.a)({},t,n))},a.serverSelectHandler=function(e){if(null===e)a.setState({servers:null}),a.setState({singaporeSelected:!1});else{for(var t=[],n=0;n<e.length;n++)t.push(e[n].value);t.includes(Ge("Singapore"))?a.setState({singaporeSelected:!0}):a.setState({singaporeSelected:!1}),a.setState({servers:t})}},a.formSubmitHandler=function(e){if(e.preventDefault(),a.state.password!==a.state.confirmPassword)return a.setState({errorMessage:"Passwords do not match."}),!1;for(var t=a.state.servers,n=[],o=0;o<t.length;o++)t[o]===Ge("Singapore")?n.push(Ze(t[o],a.state.firstname,a.state.lastname,a.state.email,a.state.username,a.state.password,a.state.registrationKey)):n.push(Ce(t[o],a.state.firstname,a.state.lastname,a.state.email,a.state.username,a.state.password));var r=Object(b.a)(a);return Promise.all(n).then((function(e){for(var t=!1,n=[],o=0;o<e.length;o++)"Singapore"===Te(e[o][1])&&void 0!==e[o][0].errorCode||(void 0===e[o][0].token||t?void 0!==e[o][0].token&&t?n.push([e[o][1],e[o][0].token,"inactive"]):void 0!==e[o][0].message?r.setState({errorMessage:e[o][0].message}):void 0!==e[o][0].error&&""===a.state.errorMessage?r.setState({errorMessage:e[o][0].error}):void 0!==e[o][0].errorCode&&""===a.state.errorMessage&&r.setState({errorMessage:e[o][0].errorCode}):(n.push([e[o][1],e[o][0].token,"active"]),t=!0));t?(localStorage.setItem("Username",a.state.username),localStorage.setItem(a.state.username,JSON.stringify(n)),r.props.history.push("/dashboard")):document.getElementById("errorMessage").style.display="visible"})),!1},a.openLoginForm=function(e){a.props.setCurrentLoginForm("Login")},a.state={servers:null,firstname:null,lastname:null,email:null,username:null,password:null,confirmPassword:null,registrationKey:null,errorMessage:null,singaporeSelected:!1},a}return Object(h.a)(n,[{key:"render",value:function(){var e;return e=this.state.singaporeSelected?o.a.createElement("div",{className:"login-input-wrapper"},o.a.createElement("i",{className:"fas fa-lock"}),o.a.createElement("input",{type:"text",id:"registrationKey",name:"registrationKey",placeholder:"Singapore Account Creation Key",required:!0,onChange:this.inputChangeHandler})):null,o.a.createElement("div",{className:"row login-form-row"},o.a.createElement("div",{className:"col-lg-8 col-md-10 col-sm-12 login-form-wrapper"},o.a.createElement("h1",null,"knowledgeforum.org"),o.a.createElement("form",{onSubmit:this.formSubmitHandler,className:"loginForm",id:"loginForm",autoComplete:"on"},o.a.createElement("div",{className:"login-input-wrapper signup-select-server"},o.a.createElement("i",{className:"fas fa-server"}),o.a.createElement("div",{className:"select-container"},o.a.createElement(xe.a,{isMulti:!0,options:Me.map((function(e){return{value:e.url,label:e.name}})),onChange:this.serverSelectHandler,components:Object(ze.a)(),className:"basic-multi-select",classNamePrefix:"select"})),o.a.createElement("div",{className:"clearFix"})),o.a.createElement("div",{className:"login-input-wrapper"},o.a.createElement("i",{className:"fas fa-user"}),o.a.createElement("input",{type:"text",id:"firstname",name:"firstname",placeholder:"First Name",required:!0,onChange:this.inputChangeHandler})),o.a.createElement("div",{className:"login-input-wrapper"},o.a.createElement("i",{className:"fas fa-user"}),o.a.createElement("input",{type:"text",id:"lastname",name:"lastname",placeholder:"Last Name",required:!0,onChange:this.inputChangeHandler})),o.a.createElement("div",{className:"login-input-wrapper"},o.a.createElement("i",{className:"fas fa-envelope"}),o.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"Email",required:!0,onChange:this.inputChangeHandler})),o.a.createElement("div",{className:"login-input-wrapper"},o.a.createElement("i",{className:"fas fa-user"}),o.a.createElement("input",{type:"text",id:"username",name:"username",placeholder:"Username",required:!0,onChange:this.inputChangeHandler})),o.a.createElement("div",{className:"login-input-wrapper"},o.a.createElement("i",{className:"fas fa-lock"}),o.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Password",required:!0,onChange:this.inputChangeHandler})),o.a.createElement("div",{className:"login-input-wrapper"},o.a.createElement("i",{className:"fas fa-lock"}),o.a.createElement("input",{type:"password",id:"confirmPassword",name:"confirmPassword",placeholder:"Confirm Password",required:!0,onChange:this.inputChangeHandler})),e,o.a.createElement("div",null,o.a.createElement("p",{style:{display:"hidden",color:"red"},id:"errorMessage",name:"errorMessage"},this.state.errorMessage)),o.a.createElement("input",{className:"login-button",type:"submit",value:"Create Account"})),o.a.createElement("p",{className:"login-create-account-p",onClick:this.openLoginForm},"Already have an account? Login ",o.a.createElement("i",{className:"far fa-arrow-alt-circle-right"}))))}}]),n}(a.Component)),Ve={setCurrentLoginForm:ce},Ue=Object(v.d)(l.g,Object(u.b)(null,Ve))(Fe),Be=n(64),Pe=n.n(Be),Je=n(100),Qe=n.n(Je),He=n(118),Xe=n.n(He),_e=n(119),Ke=n.n(_e),qe=n(120),$e=n.n(qe);function et(e,t,n){return fetch(n+"api/communities/"+t+"/views",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return 200!==e.status&&(console.log("Error: "+n+"api/communities/"+t+"/views"),console.log(e)),e.json()})).then((function(e){return e[0]})).catch((function(e){return e}))}function tt(e,t,n){return fetch(t+"api/objects/"+n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return 200!==e.status&&(console.log("Error: "+t+"api/objects/"+n),console.log(e)),e.json()})).then((function(e){return e})).catch((function(e){return e}))}function nt(e,t,n,a){var o,r,i=it(t._to.authors[0],a),c=ct(t.created);return void 0===t._to.data?(o=n.includes(t.to)?"read-note":"unread-note",r="note"):(o=n.includes(t.to)?"read-riseabove":"unread-riseabove",r="riseabove"),{group:"nodes",data:{id:e,name:t._to.title,author:i,date:c,kfId:t.to,type:r},classes:o,position:{x:t.data.x,y:t.data.y}}}function at(e,t,n,a,o,r){var i=it(o._to.authors[0],r),c=ct(o.created),s=st(a,o.to);return tt(t,e,o.to).then((function(t){if("image"===String(t.data.type).substring(0,5)){var a=(e+String(t.data.url).substring(1)).replace(/\s/g,"%20");"gif"===String(t.data.type).slice(-3)&&(a=a.substring(0,a.length-3)+"mp4");var r=n.rectangle({x:o.data.x,y:o.data.y,width:o.data.width,height:o.data.height});return{url:a,name:o._to.title,bounds:r,locked:!1}}return{group:"nodes",data:{id:s,name:o._to.title,author:i,date:c,kfId:o.to,type:o._to.type,download:e+t.data.url.substring(1)},classes:"attachment",position:{x:o.data.x,y:o.data.y}}}))}function ot(e,t,n,a,o,r){return tt(t,e,o.to).then((function(e){var t=(new DOMParser).parseFromString(e.data.svg,"image/svg+xml"),a=t.childNodes[0].attributes.width.value/t.childNodes[0].attributes.height.value,r=parseInt(o.data.width)/a,i=n.rectangle({x:o.data.x,y:o.data.y,height:r,width:parseInt(o.data.width)});return{url:"data:image/svg+xml;utf8,"+encodeURIComponent('<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg>'+e.data.svg),name:o._to.title,bounds:i,locked:!1}}))}function rt(e,t){return{group:"nodes",data:{id:st(e,t.to),name:t._to.title,kfId:t.to,type:t._to.type,communityId:t.communityId},classes:"view",position:{x:t.data.x,y:t.data.y}}}function it(e,t){for(var n=0;n<t.length;n++)if(e===t[n]._id)return t[n].firstName+" "+t[n].lastName;return"Author not found"}function ct(e){var t=e.substring(0,4),n=e.substring(5,7),a=e.substring(8,10),o=e.substring(11,13),r=e.substring(14,16),i=e.substring(17,19);return o<12?n+"/"+a+"/"+t+", "+o+":"+r+":"+i+" AM":n+"/"+a+"/"+t+", "+(o-12)+":"+r+":"+i+" PM"}function st(e,t){return e.has(t)?(e.set(t,e.get(t)+1),t+"-"+e.get(t)):(e.set(t,1),t+"-1")}n(187),n(188);var lt=n(121),ut=n.n(lt),dt=n(122),mt=n.n(dt),pt=n(123),ht=n.n(pt),bt=n(124),ft=n.n(bt),gt=n(125),vt=n.n(gt),It=n(126),yt=n.n(It);Pe.a.use(Xe.a),Pe.a.use(Ke.a),Pe.a.use($e.a);var Et=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={elements:{nodes:[],edges:[]}},a.loadElements=a.loadElements.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"loadElements",value:function(){var e,t,n,a=this;if(this.props.token&&this.props.server&&this.props.viewId&&this.props.communityId){console.log("loadElements");var o=this.cy.supportimages(),r=(e=this.props.token,t=this.props.server,n=this.props.viewId,fetch(t+"api/links/from/"+n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return 200!==e.status&&(console.log("Error: "+t+"api/links/from/"+n),console.log(e)),e.json()})).then((function(e){return e})).catch((function(e){return e}))),i=function(e,t,n,a){var o={query:a};return fetch(t+"api/links/"+n+"/search",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify(o)}).then((function(e){return 200!==e.status&&201!==e.status&&(console.log("Error: "+t+"api/links/"+n+"/search"),console.log(e)),e.json()})).then((function(e){return e})).catch((function(e){return e}))}(this.props.token,this.props.server,this.props.communityId,{type:"buildson"}),c=function(e,t,n,a){return fetch(t+"api/records/myreadstatusview/"+n+"/"+a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return 200!==e.status&&(console.log("Error: "+t+"api/records/myreadstatusview/"+n+"/"+a),console.log(e)),e.json()})).then((function(e){var t=[];for(var n in e)"read"===e[n].type&&t.push(e[n].to);return t})).catch((function(e){return e}))}(this.props.token,this.props.server,this.props.communityId,this.props.viewId),s=function(e,t,n){return fetch(n+"api/communities/"+t+"/authors",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return 200!==e.status&&(console.log("Error: "+n+"api/communities/"+t+"/authors"),console.log(e)),e.json()})).then((function(e){return e})).catch((function(e){return e}))}(this.props.token,this.props.communityId,this.props.server),l=this;Promise.all([r,i,c,s]).then((function(e){var t=new Map;o._private.supportImages=[],o._private.renderer.imageCache={};var n=function(e,t,n,a,o,r,i){for(var c=[],s=0;s<o.length;s++){var l=st(a,o[s].to);"Note"===o[s]._to.type&&""!==o[s]._to.title&&"active"===o[s]._to.status?c.push(nt(l,o[s],r,i)):"Attachment"===o[s]._to.type&&""!==o[s]._to.title&&"active"===o[s]._to.status?c.push(at(e,t,n,a,o[s],i)):"Drawing"===o[s]._to.type&&""!==o[s]._to.title&&"active"===o[s]._to.status?c.push(ot(e,t,n,a,o[s],i)):"View"===o[s]._to.type&&""!==o[s]._to.title&&"active"===o[s]._to.status&&c.push(rt(a,o[s]))}return c}(l.props.server,l.props.token,o,t,e[0],e[2],e[3]),r=function(e,t){for(var n=[],a=0;a<t.length;a++){var o=t[a];if("Note"===o._to.type&&"active"===o._to.status&&""!==o._to.title&&"Note"===o._from.type&&"active"===o._from.status&&""!==o._from.title){var r=e.get(o.from),i=e.get(o.to);if("undefined"!==r&&"undefined"!==i)for(var c=0;c<r;c++)for(var s=0;s<i;s++)n.push({group:"edges",data:{id:o._id+"-"+(parseInt(c)+1)+(parseInt(s)+1),source:o.from+"-"+(parseInt(c)+1),target:o.to+"-"+(parseInt(s)+1)}});else console.log(o.from+" fromCount: "+r+"\n"+o.to+" toCount: "+i)}}return n}(t,e[1]),i=a;Promise.all(n.concat(r)).then((function(e){for(var t={nodes:[],edges:[]},n=0;n<e.length;n++)"nodes"===e[n].group?t.nodes.push(e[n]):"edges"===e[n].group?t.edges.push(e[n]):e[n].url&&o.addSupportImage(e[n]);o.notify({type:"render"}),i.setState({elements:t})}))}))}}},{key:"componentDidMount",value:function(){var e=this.cy,t={zoomFactor:.05,zoomDelay:45,minZoom:.75,maxZoom:2,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit:function(){return!1},fitAnimationDuration:1e3,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"};e.panzoom(t),e.nodeHtmlLabel([{query:"node",halign:"center",valign:"bottom",halignBox:"right",valignBox:"bottom",cssClass:"cytoscape-label",tpl:function(e){return"note"===e.type||"riseabove"===e.type||"Attachment"===e.type?"<div>"+e.author+"<br>"+e.date+"</div>":""}}]),this.loadElements();var n=this;e.on("tap","node",(function(e){var t,a,o,r,i=this.data("kfId"),c=this.data("type");this.hasClass("image")?console.log("image"):this.hasClass("attachment")?console.log("attachment"):this.hasClass("view")?n.props.onViewClick(i):("riseabove"===c?(this.removeClass("unread-riseabove"),this.addClass("read-riseabove")):"note"===c&&(n.props.onNoteClick(i),this.removeClass("unread-note"),this.addClass("read-note")),t=n.props.token,a=n.props.server,o=n.props.communityId,r=i,fetch(a+"api/records/read/"+o+"/"+r,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){return 201!==e.status&&(console.log("Error: "+a+"api/records/read/"+o+"/"+r),console.log(e)),e.json()})).then((function(e){return e})).catch((function(e){return e})))}))}},{key:"componentDidUpdate",value:function(e,t){this.props.viewId===e.viewId&&this.props.communityId===e.communityId&&this.props.token===e.token&&this.props.server===e.server||this.loadElements()}},{key:"render",value:function(){var e=this;return o.a.createElement(Qe.a,{cy:function(t){e.cy=t},style:{width:"100%",height:"100vh"},elements:Qe.a.normalizeElements(this.state.elements),stylesheet:[{selector:"node",style:{label:"data(name)","font-size":"11px","text-halign":"right","text-valign":"center","text-margin-x":"-5",padding:"0","background-opacity":"0","background-clip":"none","background-width":"15px","background-height":"15px"}},{selector:"edge",style:{width:1,"line-color":"#29648f","target-arrow-color":"#29648f","target-arrow-shape":"triangle","curve-style":"bezier"}},{selector:".unread-note",style:{"background-image":[ut.a]}},{selector:".read-note",style:{"background-image":[mt.a]}},{selector:".unread-riseabove",style:{"background-image":[ht.a]}},{selector:".read-riseabove",style:{"background-image":[ft.a]}},{selector:".attachment",style:{"background-image":[vt.a]}},{selector:".view",style:{"background-image":[yt.a]}},{selector:".image",style:{label:""}},{selector:".drawing",style:{label:""}}],layout:{name:"grid"},hideEdgesonViewport:!1,autolock:!1,wheelSensitivity:.15,minZoom:.75,maxZoom:2})}}]),n}(a.Component),At=n(127),Nt=n.n(At),jt=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={demoToken:null,demoServer:"https://kf6-stage.ikit.org/",demoCommunityId:"5ea995a6cbdc04a6f53a1b5c",demoViewId:"5ea995a7cbdc04a6f53a1b5f",showModal:!1},a.handleShow=a.handleShow.bind(Object(b.a)(a)),a.handleClose=a.handleClose.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"handleShow",value:function(){this.setState({showModal:!0})}},{key:"handleClose",value:function(){this.setState({showModal:!1})}},{key:"componentDidMount",value:function(){we()('[data-toggle="tooltip"]').tooltip(),we()('[data-toggle="popover"]').popover(),we()(window).width()<=768&&document.getElementById("popover").setAttribute("data-trigger","focus");var e=this;(function(e,t,n){var a={userName:e,password:t};return fetch(n+"auth/local",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return 200!==e.status&&(console.log("Error: "+n+"auth/local"),console.log(e)),e.json()})).then((function(e){return e})).catch((function(e){return e}))})("demo1","demo1",this.state.demoServer).then((function(t){e.setState({demoToken:t.token})}))}},{key:"render",value:function(){var e;return"Login"===this.props.currentLoginForm?e=o.a.createElement(We,null):"SignUp"===this.props.currentLoginForm&&(e=o.a.createElement(Ue,null)),o.a.createElement("div",{className:"container-fluid login-main"},o.a.createElement("div",{className:"row login-row"},o.a.createElement("div",{className:"col-md-6 login-col login",id:"login"},e),o.a.createElement("div",{className:"col-md-6 login-about"},o.a.createElement("div",{className:"login-about-wrapper"},o.a.createElement("h1",null,"What is knowledgeforum.org?"),o.a.createElement("p",null,"A knowledge forum is an electronic group workspace designed to support the process of knowledge building. There are multiple installations of knowledge forums hosted by many universities and private entities all over the world. Knowledgeforum.org unites all of these installations and hence the stakeholders to help confluence knowledge building research, widen the reach of the tool & provide a central location for all global stakeholders."),o.a.createElement("div",{className:"login-overlay-container login-demo-image",onClick:this.handleShow,id:"demo-image-container"},o.a.createElement("img",{className:"d-block w-100",src:Nt.a,alt:"First slide"}),o.a.createElement("div",{className:"login-overlay"},o.a.createElement("div",{className:"login-overlay-text"},"Demo a Knowledge Forum"))),o.a.createElement(I.a,{show:this.state.showModal,onHide:this.handleClose},o.a.createElement(I.a.Header,{closeButton:!0},o.a.createElement(I.a.Title,null,"Knowledge Forum Demo")),o.a.createElement(I.a.Body,null,o.a.createElement(Et,{style:{width:"100%",height:"100%"},token:this.state.demoToken,server:this.state.demoServer,communityId:this.state.demoCommunityId,viewId:this.state.demoViewId})),o.a.createElement(I.a.Footer,null,o.a.createElement(y.a,{variant:"primary",onClick:this.handleClose},"Close")))))))}}]),n}(a.Component),Ot=Object(v.d)(l.g,Object(u.b)((function(e,t){return{currentLoginForm:e.globals.currentLoginForm}}),null))(jt);function wt(e,t){var n=De(e);(function(e,t){return fetch(t+"api/users/myRegistrations",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return 200!==e.status&&(console.log("Error: "+t+"api/users/myRegistrations"),console.log(e)),e.json()})).then((function(e){return e})).catch((function(e){return e}))})(n,e).then((function(n){n.sort((function(e,t){return Zt(e._community.title,t._community.title)})),function(e,t,n){for(var a=De(t),o=[],r=0;r<e.length;r++){var i=e[r].communityId,c=et(a,i,t);o.push(c)}Promise.all(o).then((function(t){for(var a=[],o=0;o<t.length;o++)t[o]&&t[o]._id&&a.push({title:e[o]._community.title,server:n.state.currentServerURL,token:n.state.token,communityId:t[o].communityId,welcomeViewId:t[o]._id});n.setState({userCommunityData:a})})).catch((function(e){console.log(e)}))}(n,e,t)})),function(e,t){return fetch(t+"api/users/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return 200!==e.status&&304!==e.status?(console.log("Error: "+t+"api/users/me"),console.log(e),{error:!0}):e.json()})).then((function(e){return e})).catch((function(e){return e}))}(n,e).then((function(e){!0===e.error?(alert("User authorization token expired"),kt()):(t.setState({name:e.firstName+" "+e.lastName}),t.setState({userId:e._id}))})),function(e,t){return fetch(t+"api/communities",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return 200!==e.status&&(console.log("Error: "+t+"api/communities"),console.log(e)),e.json()})).then((function(e){return e})).catch((function(e){return e}))}(n,e).then((function(e){e.sort((function(e,t){return Zt(e.title,t.title)})),function(e,t){for(var n=[],a=0;a<e.length;a++){var o=e[a].title,r=e[a]._id;n.push({title:o,communityId:r})}var i=n.map((function(e){return{value:e.communityId,label:e.title}}));t.setState({serverCommunityData:i})}(e,t)}))}function St(e,t,n,a,o){var r=De(t),i=o;(function(e,t,n,a,o){var r={communityId:t,registrationKey:o,userId:a};return fetch(n+"api/authors",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify(r)}).then((function(e){return 200!==e.status&&(console.log("Error: "+n+"api/authors"),console.log(e)),e.json()})).then((function(e){return[e,n]})).catch((function(e){return e}))})(r,a,t,e,n).then((function(e){e[0].error?(document.getElementById("communityKey").value="",i.setState({joinCommunityErrorMessage:"Registration key does not match or you are already registered."})):(document.getElementById("communityKey").value="",wt(t,i))}))}function kt(e){var t=localStorage.getItem("Username"),n=JSON.parse(localStorage.getItem(t));if(null===t||null===n)localStorage.clear();else{for(var a in n)n[a][1]="";localStorage.setItem(t,JSON.stringify(n)),localStorage.removeItem("Username")}e.props.history.push("/")}function Ct(){var e=document.getElementById("wrapper");"d-flex"===e.className?e.className="d-flex toggled":e.className="d-flex"}function Zt(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}n(189);var Mt,Tt,Gt=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).inputChangeHandler=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(E.a)({},t,n))},a.serverSelectHandler=function(e){var t=e.target,n=e.target.innerText,o=Ge(e.target.innerText),r=JSON.parse(localStorage.getItem(a.state.username));a.setState({currentServerURL:Ge(n)}),a.setState({currentServerName:n}),we()(t).addClass("active").siblings().removeClass("active");var i=Ge(n),c=[];for(var s in r){var l=r[s][0],u=r[s][1],d=l===i?"active":"inactive";l===i&&a.setState({token:r[s][1]}),c.push([l,u,d])}localStorage.setItem(a.state.username,JSON.stringify(c)),wt(o,Object(b.a)(a))},a.handleViewChange=function(e){a.setState({viewType:{value:e.value,label:e.label}})},a.handleCommunityDropDownChange=function(e){a.setState({selectedCommunityToJoin:{value:e.value,label:e.label}})},a.state={token:null,username:null,name:null,userId:null,currentServerURL:null,currentServerName:null,serverList:[],userCommunityData:[],serverCommunityData:[],selectedCommunityToJoin:null,communityRegistrationKey:null,joinCommunityErrorMessage:null,viewType:{value:"Classic",label:"Classic"}},a.enterCommunity=a.enterCommunity.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"enterCommunity",value:function(e){this.props.setGlobalToken(e.token),this.props.setCurrentServer(e.server),this.props.setCommunityId(e.communityId),this.props.setViewId(e.welcomeViewId),this.props.history.push({pathname:"/view/".concat(e.welcomeViewId)})}},{key:"componentDidMount",value:function(){!function(e){var t=localStorage.getItem("Username"),n=JSON.parse(localStorage.getItem(t)),a=[];e.setState({username:t});for(var o=0;o<n.length;o++){var r=Te(n[o][0]);"active"===n[o][2]?(e.setState({currentServerURL:n[o][0]}),e.setState({currentServerName:Te(n[o][0])}),e.setState({token:n[o][1]}),a.push({name:r,class:"active",url:n[o][0]}),wt(n[o][0],e)):a.push({name:r,class:"",url:n[o][0]})}e.setState({serverList:a})}(this)}},{key:"render",value:function(){var e,t=this;return"Classic"===this.state.viewType.value?e=this.state.userCommunityData.map((function(e){return o.a.createElement("li",{key:e.communityId},o.a.createElement("p",null,e.title),o.a.createElement("a",{href:e.server+"auth/jwt?token="+e.token+"&redirectUrl=/view/"+e.welcomeViewId,target:"_blank",rel:"noopener noreferrer"},o.a.createElement("button",{className:"dashboard-enterButton",type:"button"},o.a.createElement("i",{className:"far fa-arrow-alt-circle-right"}))))})):"Enhanced"===this.state.viewType.value&&(e=this.state.userCommunityData.map((function(e){return o.a.createElement("li",{key:e.communityId},o.a.createElement("p",null,e.title),o.a.createElement("button",{className:"dashboard-enterButton",type:"button",onClick:function(){return t.enterCommunity(e)}},o.a.createElement("i",{className:"far fa-arrow-alt-circle-right"})))}))),o.a.createElement("div",{className:"d-flex",id:"wrapper"},o.a.createElement("div",{className:"sidebar-custom dashboard-sidebar-custom",id:"sidebar-wrapper"},o.a.createElement("h1",{className:"sidebar-heading dashboard-sidebar-heading"},"Your Servers:"),o.a.createElement("div",{className:"list-group list-group-flush"},o.a.createElement("ul",{className:"dashboard-server-list",id:"server-list"},this.state.serverList.map((function(e){return o.a.createElement("li",{key:e.name,onClick:t.serverSelectHandler,className:e.class},e.name)}))),o.a.createElement("div",{className:"dashboard-viewDropDownContainer"},o.a.createElement("p",null,"View Type:"),o.a.createElement(xe.a,{isSearchable:!1,value:this.state.viewType,onChange:this.handleViewChange,options:[{value:"Classic",label:"Classic"},{value:"Enhanced",label:"Enhanced"}]})))),o.a.createElement("div",{id:"page-content-wrapper"},o.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light border-bottom dashboard-navbar"},o.a.createElement("button",{className:"d-none d-md-block btn btn-primary dashboard-select-server",id:"menu-toggle",onClick:Ct},"Select Server"),o.a.createElement("button",{className:"d-md-none btn btn-primary dashboard-select-server",id:"menu-toggle",onClick:Ct},o.a.createElement("i",{className:"fas fa-server"})),o.a.createElement("div",{className:"dashboard-currentInfo",id:"currentInfo"},this.state.name,o.a.createElement("div",null),this.state.currentServerName),o.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},o.a.createElement("span",{className:"navbar-toggler-icon"})),o.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},o.a.createElement("ul",{className:"navbar-nav ml-auto mt-2 mt-lg-0"},o.a.createElement("li",{className:"nav-item"},o.a.createElement("button",{className:"nav-link dashboard-nav-link btn btn-link",href:"",id:"logout",onClick:function(){return kt(t)}},"Logout"))))),o.a.createElement("div",{className:"container-fluid"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6 dashboard-mainContentCol"},o.a.createElement("h1",null,"My Knowledge Building Communities"),o.a.createElement("ul",{className:"dashboard-userCommunities",id:"userCommunities"},e)),o.a.createElement("div",{className:"col-md-6 dashboard-mainContentCol"},o.a.createElement("h1",null,"Join Community"),o.a.createElement("form",{className:"col-lg-8 col-md-10 col-sm-12 dashboard-joinCommunityForm",id:"joinCommunityForm",autoComplete:"off"},o.a.createElement("label",{htmlFor:"server"},"Community:"),o.a.createElement("br",null),o.a.createElement(xe.a,{value:this.state.selectedCommunityToJoin,className:"dashboard-communityChoiceDropdown",id:"communityChoiceDropdown",options:this.state.serverCommunityData,onChange:this.handleCommunityDropDownChange,required:!0}),o.a.createElement("br",null),o.a.createElement("label",{htmlFor:"communityKey"},"Community Registration Key:"),o.a.createElement("br",null),o.a.createElement("input",{className:"dashboard-communityKeyInput",type:"text",id:"communityKey",name:"communityRegistrationKey",required:!0,onChange:this.inputChangeHandler}),o.a.createElement("br",null),o.a.createElement("div",null,o.a.createElement("p",{style:{color:"red"},id:"errorMessage"},this.state.joinCommunityErrorMessage)),o.a.createElement("input",{className:"dashboard-joinButton",type:"button",value:"Join",onClick:function(){return St(t.state.userId,t.state.currentServerURL,t.state.communityRegistrationKey,t.state.selectedCommunityToJoin.value,t)},id:"joinCommunityButton"})))))))}}]),n}(a.Component),Dt={setGlobalToken:ie,setCurrentServer:ue,setCommunityId:le,setViewId:de},Rt=Object(u.b)(null,Dt)(Gt),Lt=n(39),Yt=Object(w.b)("OPEN_DIALOG"),Wt=Object(w.b)("CLOSE_DIALOG"),xt=Object(w.b)("OPEN_DRAW_DIALOG"),zt=Object(w.b)("CLOSE_DRAW_DIALOG"),Ft=Object(w.b)("FOCUS_DIALOG"),Vt=Object(w.b)("OPEN_ATTACH_PANEL"),Ut=Object(w.b)("CLOSE_ATTACH_PANEL"),Bt=0,Pt=Object(w.c)({dialogs:[],drawTool:null,focused:null,attachPanel:{}},(Mt={},Object(E.a)(Mt,Yt,(function(e,t){var n=e.dialogs.map((function(t){return t.id===e.focused&&(t.zIndex=1e3),t}));e.focused=Bt,e.dialogs=[].concat(Object(Lt.a)(n),[Object(O.a)({id:Bt++,zIndex:1100},t.payload)])})),Object(E.a)(Mt,Wt,(function(e,t){e.dialogs=e.dialogs.filter((function(e){return e.id!==t.payload}))})),Object(E.a)(Mt,xt,(function(e,t){e.drawTool=t.payload})),Object(E.a)(Mt,zt,(function(e,t){e.drawTool=null})),Object(E.a)(Mt,Vt,(function(e,t){e.attachPanel=t.payload})),Object(E.a)(Mt,Ut,(function(e,t){e.attachPanel={}})),Object(E.a)(Mt,Ft,(function(e,t){e.focused!==t.payload&&(e.dialogs=e.dialogs.map((function(n){return n.id===e.focused?n.zIndex=1e3:n.id===t.payload&&(n.zIndex=1100),n})),e.focused=t.payload)})),Mt)),Jt=function(e,t){var n="";return n+=" ",n+=t?'<span class="kfSupportStartMark kfTemplateStartMark"> &nbsp; </span>':'<span class="kfSupportStartMark"> &nbsp; </span>',n+=" ",n=t?n+'<span class="kfSupportStartLabel kfTemplateStartLabel">'+e+"</span>":n+'<span class="kfSupportStartLabel">'+e+"</span>",n+=" "},Qt=function(e){var t="";return t+=" ",t+=e?'<span class="kfSupportEndMark kfTemplateEndMark"> &nbsp; </span>':'<span class="kfSupportEndMark"> &nbsp; </span>',t+=" "},Ht=function(e,t,n,a){var o="";return a&&a.length>0&&(o=o+'<span class="KFReferenceQuote"><span>"</span><span class="KFReferenceText">'+a+'</span><span>"</span></span>'),o=(o=o+'<span> (<a href="contribution/'+e+'" target="'+e+'">')+'<img src="/manual_assets/kf4images/icon-note-unread-othr-.gif">"'+t+'"</a>',o+='<span class="KFReferenceAuthor"> by (missing authors)</span>)</span>',o+="</span>"},Xt=function(e,t,n){var a="<div>"+e+"</div>",o=we()(a),r=o.find(".KFSupportStart");r.addClass("mceNonEditable");for(var i=function(e){var n=r[e];if(!n.id.startsWith("supportid_")){var a=we()(n).hasClass("KFTemplateStart"),o=t.filter((function(e){return e._id===n.id}));o.length?n.innerHTML=Jt(o[0]._from.title,a):"Annotation"!==t&&(n.innerHTML=Jt("(missing link)",a))}},c=0;c<r.length;c++)i(c);var s=o.find(".KFSupportEnd");s.addClass("mceNonEditable");for(var l=0;l<s.length;l++){var u=s[l],d=we()(u).hasClass("KFTemplateEnd");u.innerHTML=Qt(d)}var m=o.find(".KFReference");m.addClass("mceNonEditable");for(var p=function(e){var t=s[e],a=n.filter((function(e){return e._id===t.id}));if(a.length){var o="";(a=a[0]).data&&(o=a.data.text),t.innerHTML=Ht(a.to,a._to.title,a._to.authors,o)}else t.innerHTML=Ht("","(missing link)",0,"")},h=0;h<m.length;h++)p(h);return o.html()},_t=function(){var e=Object(j.a)(N.a.mark((function e(t,n,a,o,r){var i,c,s,l,u,d,m,p,h,b,f,g,v,I,y,E,A,j,O,w;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i="<div>"+t+"</div>",c=we()(i),s={},l=a.filter((function(e){return"supports"===e.type})).map((function(e){return e._id})),u=c.find(".KFSupportStart"),d=c.find(".KFSupportEnd"),m=[],p=[],h=0;h<d.length;h++)(b=d[h]).innerHTML="",f=b.id,s[f]=b;for(g=function(e){var t=u[e],a=t.id;t.innerHTML="",a.startsWith("supportid_")&&(a=a.split("_")[1]),p.push(a),l.includes(a)||m.push(x(a,n,"supports").then((function(e){var n=t.id,a=e._id;t.id=a,s[n]&&(s[n].id=a)})))},v=0;v<u.length;v++)g(v);for(I=l.filter((function(e){return!p.includes(e)})).map((function(e){return z(e)})),y=o.filter((function(e){return"references"===e.type})).map((function(e){return e._id})),E=c.find(".KFReferenceText"),A=[],j=function(){var e=E[O],t={text:we()(e).find(".KFReferenceText").html()};e.innerHTML="";var a=e.id;A.push(a),y.includes(a)||m.push(x(n,a,"references",t).then((function(t){var n=e.id,a=t._id;e.id=a,s[n]&&(s[n].id=a)})))},O=0;O<E.length;O++)j();return w=y.filter((function(e){return!A.includes(e)})).map((function(e){return z(e)})),e.next=20,Promise.all(I);case 20:return e.next=22,Promise.all(w);case 22:return e.next=24,Promise.all(m);case 24:return e.abrupt("return",c);case 25:case"end":return e.stop()}}),e)})));return function(t,n,a,o,r){return e.apply(this,arguments)}}(),Kt={type:"success",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:5e3}},qt=function(e){return d.store.addNotification(Object(O.a)(Object(O.a)({},Kt),e))},$t=Object(w.b)("ADD_NOTE"),en=Object(w.b)("REMOVE_NOTE"),tn=Object(w.b)("EDIT_NOTE"),nn=Object(w.b)("ADD_DRAWING"),an=Object(w.b)("REMOVE_DRAWING"),on=Object(w.b)("EDIT_SVG"),rn=Object(w.b)("ADD_ATTACHMENT"),cn=Object(w.b)("REMOVE_ATTACHMENT"),sn=Object(w.b)("SET_ATTACHMENTS"),ln=Object(w.b)("SET_WORDCOUNT"),un=Object(w.b)("SET_CONNECTIONS"),dn=Object(w.b)("SET_RECORDS"),mn=Object(w.b)("REMOVE_CONTRIB_AUTHOR"),pn=Object(w.b)("ADD_CONTRIB_AUTHOR"),hn=Object(w.b)("SET_ANNOTATION"),bn=Object(w.b)("SET_ANNOTATIONS_LOADED"),fn=Object(w.b)("REMOVE_ANNOTATION"),gn=Object(w.b)("SET_VIEW_NOTES"),vn=Object(w.b)("ADD_VIEW_NOTE"),In=Object(w.b)("SET_CHECKED_NOTES"),yn=Object(w.b)("UPDATE_CHECKED_NOTES"),En=Object(w.b)("SET_VIEW_LINKS"),An=Object(w.b)("ADD_VIEW_LINK"),Nn=Object(w.b)("SET_BUILDS_ON"),jn=Object(w.b)("SET_SUPPORTS"),On=Object(w.b)("SET_RISEABOVE_VIEW_NOTES"),wn=Object(w.b)("SET_RISEABOVE_NOTES"),Sn=Object(w.b)("SET_READ_LINKS"),kn=Object(w.c)({drawing:"",attachments:{},viewNotes:{},checkedNotes:[],viewLinks:[],buildsOn:[],supports:[],riseAboveNotes:{},riseAboveViewNotes:{},readLinks:[]},(Tt={},Object(E.a)(Tt,$t,(function(e,t){e[t.payload._id]=t.payload})),Object(E.a)(Tt,en,(function(e,t){delete e[t.payload]})),Object(E.a)(Tt,tn,(function(e,t){var n=e[t.payload._id];e[t.payload._id]=Object.assign({},n,t.payload)})),Object(E.a)(Tt,nn,(function(e,t){e.drawing=t.payload})),Object(E.a)(Tt,an,(function(e,t){e.drawing=""})),Object(E.a)(Tt,on,(function(e,t){e[t.payload.noteId].editSvg=t.payload.svg})),Object(E.a)(Tt,rn,(function(e,t){e[t.payload.noteId].attachments.push(t.payload.attachment._id),e.attachments[t.payload.attachment._id]=t.payload.attachment})),Object(E.a)(Tt,cn,(function(e,t){var n=e[t.payload.noteId];n.attachments=n.attachments.filter((function(e){return e!==t.payload.attId})),delete e.attachments[t.payload.attId]})),Object(E.a)(Tt,sn,(function(e,t){e[t.payload.contribId].attachments=t.payload.attachments.map((function(e){return e._id})),t.payload.attachments.forEach((function(t){e.attachments[t._id]=t}))})),Object(E.a)(Tt,ln,(function(e,t){e[t.payload.contribId].wordCount=t.payload.wc})),Object(E.a)(Tt,un,(function(e,t){var n=e[t.payload.contribId];"from"===t.payload.direction?n.fromLinks=t.payload.links:n.toLinks=t.payload.links})),Object(E.a)(Tt,dn,(function(e,t){e[t.payload.contribId].records=t.payload.records})),Object(E.a)(Tt,pn,(function(e,t){var n=e[t.payload.contribId];n.authors=[].concat(Object(Lt.a)(n.authors),[t.payload.author])})),Object(E.a)(Tt,mn,(function(e,t){var n=e[t.payload.contribId];n.authors=n.authors.filter((function(e){return e!==t.payload.author}))})),Object(E.a)(Tt,hn,(function(e,t){e[t.payload.contribId].annos[t.payload.annotation._id]=t.payload.annotation})),Object(E.a)(Tt,bn,(function(e,t){e[t.payload.contribId].annotsFetched=t.payload.value})),Object(E.a)(Tt,fn,(function(e,t){delete e[t.payload.contribId].annos[t.payload.annoId]})),Object(E.a)(Tt,gn,(function(e,t){var n={};for(var a in t.payload)n[t.payload[a]._id]=t.payload[a];e.viewNotes=n})),Object(E.a)(Tt,In,(function(e,t){e.checkedNotes=t.payload})),Object(E.a)(Tt,yn,(function(e,t){t.payload.checked?e.checkedNotes.push(t.payload.noteId):e.checkedNotes=e.checkedNotes.filter((function(e){return e!==t.payload.noteId}))})),Object(E.a)(Tt,vn,(function(e,t){e.viewNotes[t.payload._id]=t.payload})),Object(E.a)(Tt,En,(function(e,t){e.viewLinks=t.payload})),Object(E.a)(Tt,An,(function(e,t){0===e.viewLinks.filter((function(e){return e._id===t.payload._id})).length&&e.viewLinks.push(t.payload)})),Object(E.a)(Tt,Nn,(function(e,t){e.buildsOn=t.payload})),Object(E.a)(Tt,jn,(function(e,t){e.supports=t.payload})),Object(E.a)(Tt,On,(function(e,t){e.riseAboveViewNotes[t.payload.noteId]=Object(Lt.a)(t.payload.notes)})),Object(E.a)(Tt,wn,(function(e,t){t.payload.forEach((function(t){return e.riseAboveNotes[t._id]=t}))})),Object(E.a)(Tt,Sn,(function(e,t){e.readLinks=t.payload})),Tt)),Cn=function(e,t,n,a){return function(o){var r={permission:e.permission,group:e.group,_groupMembers:e._groupMembers},i=function(e,t,n,a,o){if(o||(o=""),!n||n.permission){var r={};n&&"private"===n.permission?(r.permission=n.permission,r.group=n.group,r._groupMembers=n._groupMembers):(r.permission="protected",r.group=void 0,r._groupMembers=[]);var i={communityId:e,type:"Note",title:n&&n.title?n.title:"",authors:[t],status:n&&n.status?n.status:"unsaved",permission:r.permission,group:r.group,_groupMembers:r._groupMembers,data:{body:n&&n.body?n.body:""},buildson:a,langInNote:[]};if(n&&n.docId){i.docId=n.docId;var c=i.authors[0];if(n.coauthors)for(var s=n.coauthors.split(","),l=0;l<s.length;l++)s[l]!==c&&i.authors.push(s[l]);n.createdBy&&(i.createdBy=n.createdBy),i.docShared=[c],i.text4search=n.text4search}return i}window.alert("invalid mode object")}(t,n,r,a);return function(e,t){return k.a.post("".concat(Z,"/contributions/").concat(e),t)}(t,i).then((function(t){var n=Object(O.a)({attachments:[],fromLinks:[],toLinks:[],records:[],annos:{},group:null},t.data);a||x(e._id,n._id,"contains",{x:100,y:100}),o($t(n)),o(Yt({title:"New Note",confirmButton:"create",noteId:n._id,editable:!0}))}))}},Zn=function(e){return function(){var t=Object(j.a)(N.a.mark((function t(n){var a,o;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W(e,"from","attach");case 2:return a=t.sent,t.next=5,Promise.all(a.map((function(e){return V(e.to)})));case 5:o=t.sent,n(sn({contribId:e,attachments:o}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Mn=function(e,t){return function(){var n=Object(j.a)(N.a.mark((function n(a){var o,r;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,W(e,t);case 2:o=n.sent,a(un({contribId:e,direction:t,links:o})),"to"===t&&(r=o.filter((function(e){return"contains"===e.type}))[0],a(An(r)));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},Tn=function(e){return function(){var t=Object(j.a)(N.a.mark((function t(n,a){var o,r,i,s,l,u,d,m,p;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([V(e),W(e,"from"),W(e,"to")]);case 2:return o=t.sent,r=Object(c.a)(o,3),i=r[0],s=r[1],l=r[2],u=a().globals.author,d=Object(O.a)({attachments:[],fromLinks:s,toLinks:l,records:[],annos:{}},i),m=Xt(d.data.body,l,s),d.data.body=m,n($t(d)),n(Zn(e)),n(Yt({title:"Edit Note",confirmButton:"edit",noteId:d._id,editable:u&&(d.authors.includes(u._id)||"manager"===u.role),buildOn:!0})),p=l.filter((function(e){return"annotates"===e.type})),t.next=17,Promise.all(p.map((function(e){return V(e.from).then((function(t){return t.data.linkId=e._id,t.data.modelId=t._id,t}))})));case 17:t.sent.forEach((function(t){return n(hn({annotation:t,contribId:e}))})),n(bn({contribId:e,value:1})),"active"===d.status&&(h=d.communityId,b=d._id,k.a.post("".concat(Z,"/records/read/").concat(h,"/").concat(b)));case 21:case"end":return t.stop()}var h,b}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Gn=function(e){return function(){var t=Object(j.a)(N.a.mark((function t(n){var a,o;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(e,{type:"buildson"});case 2:a=(a=t.sent).reverse(),o=a.filter((function(e){return"Note"===e._to.type&&"active"===e._to.status&&"Note"===e._from.type&&"active"===e._from.status})),n(Nn(o));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Dn=(n(190),n(129)),Rn=n(225),Ln=n(134),Yn=(n(191),function(e){var t=Object(u.c)();return o.a.createElement("div",{className:"row"},o.a.createElement(Dn.a,{className:"ml-0 pl-2",md:"12",sm:"2",xs:"2"},o.a.createElement(Rn.a,{className:"circle-button",drop:"right",variant:"outline-info",title:o.a.createElement("i",{className:"fas fa-plus-circle"})},o.a.createElement(Ln.a.Item,{onClick:function(){return t(Cn(e.view,e.communityId,e.author._id))}},"New Note"))))}),Wn=n(135),xn=n(233),zn=(n(195),{zIndex:999,display:"flex"}),Fn=function(e){return o.a.createElement(Wn.a,{id:"contrib-dialog-".concat(e.id),className:"contrib-dialog",style:Object(O.a)(Object(O.a)({},zn),e.style),default:{x:400+window.pageXOffset,y:50+window.pageYOffset,width:920,height:500},onClick:e.onClick,onMouseDown:e.onMouseDown,dragHandleClassName:"dlg-card-header",bounds:"window"},o.a.createElement(xn.a,{className:"dlg-card"},o.a.createElement(xn.a.Header,{className:"dlg-card-header py-0",style:{alignItems:"center",display:"flex"}},o.a.createElement("span",null,e.title),o.a.createElement(y.a,{onClick:e.onClose,variant:"link",size:"sm",style:{marginLeft:"auto"}},"x")),o.a.createElement(xn.a.Body,{className:"dlg-card-body",style:{position:"relative"}},e.children),o.a.createElement(xn.a.Footer,{className:"dlg-card-footer py-0"},o.a.createElement(y.a,{size:"sm",className:"dlg-button",onClick:e.onConfirm,disabled:!e.editable},"Contribute"),e.buildon?o.a.createElement(y.a,{size:"sm",className:"dlg-button",onClick:e.onBuildOnClick},"Build-on"):"")))},Vn=n(232),Un=n(229),Bn=n(228),Pn=n(132),Jn=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(Pn.a,{value:this.props.value,apiKey:"arg05azt52qbujpnf831szuswhmyhoqute0q48btk5bqigoj",init:{setup:function(t){e.props.onEditorSetup(t)},content_css:"/editor.css",height:300,menubar:!1,statusbar:!1,media_live_embeds:!0,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code wordcount media help"],external_plugins:{drawingTool:"/drawing-tool/plugin.min.js"},toolbar:"styleselect | bold italic underline strikethrough | forecolor backcolor bullist numlist | link code | ltr rtl | charmap | drawingTool media"},onEditorChange:this.props.onEditorChange}))}}]),n}(o.a.Component),Qn=n(231),Hn=n(226),Xn=n(131),_n=(n(196),function(e){var t=Object(u.d)((function(e){return e.globals.author})),n=Object(u.c)(),r=Object(a.useState)(0),i=Object(c.a)(r,2),s=i[0],l=i[1],d=function(t){e.onClose()},m=function(){var e=Object(j.a)(N.a.mark((function e(t){var n,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(t),l(0),a=[],n.forEach(function(){var e=Object(j.a)(N.a.mark((function e(t){var n,o,r,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.type.indexOf("image/")>=0)){e.next=12;break}return n=window.URL||window.webkitURL,e.next=4,p(n.createObjectURL(t));case 4:o=e.sent,r=o.naturalWidth||o.width,i=o.naturalHeight||o.height,t.width=r,t.height=i,a.push(h(t,"image")),e.next=13;break;case 12:t.type.startsWith("video")?a.push(h(t,"video")):a.push(h(t,"link"));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=6,Promise.all(a);case 6:d(),qt({title:"Uploaded!",type:"success",message:"Attachments uploaded!"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){return new Promise((function(t,n){var a=document.createElement("img");a.onload=function(){return t(a)},a.onerror=n,a.src=e}))},h=function(){var a=Object(j.a)(N.a.mark((function a(o,r){var i,c,s,l,u,d,m,p;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,B(t.communityId,t._id);case 3:return i=a.sent,a.next=6,H(o,b);case 6:return c=a.sent,s=i.data,l=c.data,s.title=l.filename,s.status="active",l.version=s.data.version+1,s.data=l,s.tmpFilename=l.tmpFilename,a.next=16,U(s,t.communityId,s._id);case 16:return(u=a.sent).data.width=o.width,u.data.height=o.height,a.next=21,x(e.noteId,s._id,"attach");case 21:n(Mn(e.noteId,"from")),e.inlineAttach&&(d="".concat(C).concat(u.data.url),m=u.title,p="","image"===r?p='<img class="inline-attachment '+s._id+'" src="'+d+'" width="100px" alt="'+m+'" data-mce-src="'+d+'">':"video"===r?p='<video controls="controls" width="300" height="150"> <source src="'.concat(d,'" type="video/mp4" /></video>'):(p='<a class="inline-attachment '+s._id+'" href="'+d+'" target="_blank" download>',p+='<img src="'.concat(C,'/manual_assets/kf6images/03-toolbar-attachment.png" alt="')+m+'">'+m+"</a>"),e.onNewInlineAttach(p)),n(Zn(e.noteId)),a.next=29;break;case 26:a.prev=26,a.t0=a.catch(0),console.log(a.t0);case 29:return a.prev=29,a.finish(29);case 31:case"end":return a.stop()}}),a,null,[[0,26,29,31]])})));return function(e,t){return a.apply(this,arguments)}}(),b=function(e){var t=Math.round(100*e.loaded/e.total);l(t)};return o.a.createElement(I.a,{show:e.attachPanel,onHide:d},o.a.createElement(I.a.Header,{closeButton:!0},o.a.createElement(I.a.Title,null,"Insert Attachment File")),o.a.createElement(I.a.Body,null,o.a.createElement(Qn.a.File,{id:"custom-file"},o.a.createElement(Qn.a.File.Input,{onChange:function(e){m(e.target.files)}})),o.a.createElement("div",{style:{width:"100%",color:"black"}},o.a.createElement(Xn.FileDrop,{onFrameDragEnter:function(e){return console.log("onFrameDragEnter",e)},onFrameDragLeave:function(e){return console.log("onFrameDragLeave",e)},onFrameDrop:function(e){return console.log("onFrameDrop",e)},onDragOver:function(e){return console.log("onDragOver",e)},onDragLeave:function(e){return console.log("onDragLeave",e)},onDrop:function(e,t){return m(e)}},"or drop some files here!")),o.a.createElement(Hn.a,{now:s})),o.a.createElement(I.a.Footer,null,o.a.createElement(y.a,{variant:"primary",onClick:d},"Close")))}),Kn=n(227),qn=function(e,t){var n="";return n+=" ",n+=t?'<span class="kfSupportStartMark kfTemplateStartMark"> &nbsp; </span>':'<span class="kfSupportStartMark"> &nbsp; </span>',n+=" ",n=t?n+'<span class="kfSupportStartLabel kfTemplateStartLabel">'+e+"</span>":n+'<span class="kfSupportStartLabel">'+e+"</span>",n+=" "},$n=function(e){var t="";return t+=" ",t+=e?'<span class="kfSupportEndMark kfTemplateEndMark"> &nbsp; </span>':'<span class="kfSupportEndMark"> &nbsp; </span>',t+=" "},ea=function(e,t,n,a){return function(o){var r=(new Date).getTime().toString(),i='<span id="'+r+'"></span>'+o;a&&(i=" -&nbsp;"+i+"&nbsp;- ");var c="";return c+="<br>",c+="&nbsp;&nbsp;",c=n?c+'<span id="'+e+'" class="KFSupportStart KFTemplateStart mceNonEditable">':c+'<span id="'+e+'" class="KFSupportStart mceNonEditable">',c+=qn(t,n),c+="</span>",n&&(c+='<p class="kfTemplateContent">',c+="<br><br><br><br>"),c+=i,n&&(c+="</p>"),c=n?c+'<span id="'+e+'" class="KFSupportEnd KFTemplateEnd mceNonEditable">':c+'<span id="'+e+'" class="KFSupportEnd mceNonEditable">',c+=$n(n),c+="</span>",c+="&nbsp;&nbsp;",{tag:c+="<br>",supportContentId:r}}},ta=(n(198),function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).scaffoldSelected=function(e,t){if(a.props.returnSupport)a.props.onScaffoldSelected(t);else{var n=a.props.items[e],o=!0,r="",i=n.data&&n.data.isTemplate;i&&(o=!1,r="<br><br>");var c=t._to.title,s=ea(t.to,c,i,o);a.props.onScaffoldSelected(s,r)}},a.state={selected:e.initVal},a.onSelectChange=a.onSelectChange.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){if(!this.props.fetched){var e=this.props,t=e.communityId,n=e.contextId;this.props.fetchScaffolds(t,n)}}},{key:"onSelectChange",value:function(e){this.setState({selected:e.target.value})}},{key:"render",value:function(){var e=this,t=this.props.items,n=t.map((function(e,t){return o.a.createElement("option",{key:t,value:t},e.title)})),a="";return t.length&&t[this.state.selected].supports&&(a=t[this.state.selected].supports.map((function(t,n){return o.a.createElement(Dn.a,{className:"mt-1 p-0",key:n,md:12},o.a.createElement("div",{className:"KFSupportButton",size:"sm",onClick:function(){return e.scaffoldSelected(e.state.selected,t)}},t._to.title))}))),o.a.createElement(Kn.a,null,o.a.createElement(Bn.a,null,o.a.createElement(Dn.a,{className:"p-0"},o.a.createElement(Qn.a,null,o.a.createElement(Qn.a.Group,{className:"mb-1",controlId:"exampleForm.ControlSelect2"},o.a.createElement(Qn.a.Control,{className:"scaffold-select-input",size:"sm",as:"select",onChange:this.onSelectChange},n))))),o.a.createElement(Bn.a,null,a))}}]),n}(o.a.Component)),na={fetchScaffolds:re},aa=Object(u.b)((function(e,t){return Object(O.a)({communityId:e.globals.communityId,contextId:e.globals.contextId},e.scaffolds)}),na)(ta),oa=(n(199),function(e){var t=Object(u.d)((function(t){return e.attachments.map((function(e){return t.notes.attachments[e]}))})),n=Object(a.useState)([]),r=Object(c.a)(n,2),i=r[0],s=r[1];return o.a.createElement(Dn.a,null,o.a.createElement(Bn.a,null,o.a.createElement(Dn.a,null,o.a.createElement("span",{className:""},"Insert image or file: "),o.a.createElement(y.a,{className:"attach-button mx-2",size:"sm",variant:"outline-dark",onClick:function(){return e.onNewAttachClick(!0)}},"Inline"),o.a.createElement(y.a,{className:"attach-button mx-2",size:"sm",variant:"outline-dark",onClick:function(){return e.onNewAttachClick(!1)}},"As an attachment"),o.a.createElement(y.a,{className:"attach-button mx-2",size:"sm",variant:"outline-dark",onClick:function(){console.log("Add images");var t=Array.from(document.getElementById("attachbox-".concat(e.noteId)).getElementsByClassName("selected"));if(0!==t.length){var n="";console.log(t),t.forEach((function(e){var t=e.tagName,a=e.naturalWidth;if(a>200&&(a=200),"IMG"===t){var o=e.getAttribute("src"),r="";e.classList.forEach((function(e){24===e.length&&(r+=e+" ")})),n+='<img class="inline-attachment '+r+'" src="'+o+'" width="'+a+'px" alt="" data-mce-src="'+o+'">'}})),e.onNewInlineAttach(n)}},disabled:0===i.length},"Insert"))),o.a.createElement(Bn.a,{id:"attachbox-".concat(e.noteId),className:"attachment-box"},t.map((function(t){return o.a.createElement("div",{key:t._id,className:"attachment-inner-box col-auto"},o.a.createElement("div",{className:"attachment-thumbnail"},0===t.data.type.indexOf("image/")?o.a.createElement("img",{className:t._id+" "+(i.includes(t._id)?"selected":""),src:"".concat(C).concat(t.data.url),onClick:function(e){return n=t._id,void(i.includes(n)?s((function(e){return e.filter((function(e){return e!==n}))})):s((function(e){return[].concat(Object(Lt.a)(e),[n])})));var n},alt:"attachment"}):o.a.createElement("a",{href:"".concat(C).concat(t.data.downloadUrl||t.data.url),title:t.title,download:!0},o.a.createElement("img",{className:t._id,src:"".concat(C,"/manual_assets/kf6images/03-toolbar-attachment.png"),title:"{attachment.title}",alt:"attachment"}))),o.a.createElement("div",{className:"attachment-buttons"},o.a.createElement("p",null,o.a.createElement("a",{href:"".concat(C).concat(t.data.downloadUrl||t.data.url),title:t.title,download:!0},o.a.createElement("img",{className:"download-attachment",src:"".concat(C,"/manual_assets/kf6images/cloud-download-2x.png"),alt:"Download",height:"15px"}))),o.a.createElement("p",null,o.a.createElement("button",{className:"delete-attachment",onClick:function(){return n=t._id,void(window.confirm("Are you sure to delete the attachment?")&&e.onAttachDelete(n));var n}},o.a.createElement("img",{src:"".concat(C,"/manual_assets/kf6images/trash.png"),alt:"Delete attachment",width:"10px",height:"15px"})))),o.a.createElement("div",{className:"attachment-info"},o.a.createElement("p",{title:"{attachment.title}"},t.title),o.a.createElement("p",null,t.data.size)))}))))}),ra=(n(200),function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={inlineAttach:!0,attachPanel:!1},a.onScaffoldSelected=a.onScaffoldSelected.bind(Object(b.a)(a)),a.onNewAttachmentClick=a.onNewAttachmentClick.bind(Object(b.a)(a)),a.closeAttachPanel=a.closeAttachPanel.bind(Object(b.a)(a)),a.onNewInlineAttach=a.onNewInlineAttach.bind(Object(b.a)(a)),a.onAttachDelete=a.onAttachDelete.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"onScaffoldSelected",value:function(e,t){this.props.onChange({scaffold:{tagCreator:e,initialText:t}})}},{key:"onNewAttachmentClick",value:function(e){this.setState({inlineAttach:e,attachPanel:!0})}},{key:"onNewInlineAttach",value:function(e){this.props.onChange({attach:e})}},{key:"closeAttachPanel",value:function(){this.setState({attachPanel:!1})}},{key:"onAttachDelete",value:function(e){this.props.onChange({deleteAttach:e})}},{key:"render",value:function(){var e=this.props,t=e.note,n=e.onChange,a=e.onEditorSetup;return o.a.createElement(Kn.a,{className:"write-container p-0"},o.a.createElement(Bn.a,null,o.a.createElement(Dn.a,null,o.a.createElement(Qn.a.Group,{className:"write-title-form",controlId:"note-title"},o.a.createElement(Qn.a.Control,{type:"text",className:"write-tab-input",size:"sm",placeholder:"Enter title",value:t.title,onChange:function(e){n({title:e.target.value})}})))),o.a.createElement(Bn.a,null,o.a.createElement(Dn.a,{md:2,className:"pr-0"},o.a.createElement(aa,{initVal:0,onScaffoldSelected:this.onScaffoldSelected})),o.a.createElement(Dn.a,{md:10},o.a.createElement(Jn,{value:t.data.body,onEditorSetup:a,onEditorChange:function(e,t){return n({data:{body:e}})}}),o.a.createElement("div",{className:"wordcount-bar text-right"},t.wordCount," words"))),o.a.createElement(Bn.a,{className:"mt-2"},o.a.createElement(_n,Object.assign({noteId:t._id,onClose:this.closeAttachPanel,onNewInlineAttach:this.onNewInlineAttach},this.state)),o.a.createElement(oa,{noteId:t._id,attachments:t.attachments,onNewAttachClick:this.onNewAttachmentClick,onNewInlineAttach:this.onNewInlineAttach,onAttachDelete:this.onAttachDelete})))}}]),n}(o.a.Component)),ia=function(e){var t=e.records.reduce((function(e,t){return"read"===t.type?e[0].push(t):e[1].push(t),e}),[[],[]]),n=Object(c.a)(t,2),a=n[0],r=n[1];return o.a.createElement("div",null,o.a.createElement("h5",null,"Edit logs:"),o.a.createElement("p",{className:"mb-0"},r.length," edits"),o.a.createElement("ul",null,r.map((function(e){return o.a.createElement("li",{key:e._id},e.date,": ",e.author)}))),o.a.createElement("h5",null,"Read logs:"),o.a.createElement("p",{className:"mb-0"},a.length," reads"),o.a.createElement("ul",null,a.map((function(e){return o.a.createElement("li",{key:e._id},e.date,": ",e.author)}))))},ca=function(e){var t=function(t){e.onChange({permission:t.target.value})};return o.a.createElement("div",{className:"m-2"},o.a.createElement("div",null,o.a.createElement("label",{className:"mt-1 font-weight-bold"},"Permission:"),o.a.createElement("div",null,o.a.createElement("table",{className:"KFPermission table table-sm"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"\xa0"),o.a.createElement("th",null,"Authors"),o.a.createElement("th",null,"Group Members"),o.a.createElement("th",null,"Others"))),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("form",{action:""},o.a.createElement("div",{className:"form-check form-check-inline"},o.a.createElement("input",{className:"form-check-input",type:"radio",name:"permission",value:"private",id:"contrib-permission1",onChange:t,checked:"private"===e.contribution.permission}),o.a.createElement("label",{className:"form-check-label font-weight-normal",htmlFor:"contrib-permission1"},"\xa0private")))),o.a.createElement("td",null,"rw"),o.a.createElement("td",null,"rw"),o.a.createElement("td",null,"-")),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("form",{action:""},o.a.createElement("div",{className:"form-check form-check-inline"},o.a.createElement("input",{className:"form-check-input",type:"radio",value:"protected",id:"contrib-permission2",name:"permission",onChange:t,checked:"protected"===e.contribution.permission}),o.a.createElement("label",{className:"form-check-label font-weight-normal",htmlFor:"contrib-permission2"},"\xa0protected")))),o.a.createElement("td",null,"rw"),o.a.createElement("td",null,"rw"),o.a.createElement("td",null,"r")),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("form",{action:""},o.a.createElement("div",{className:"form-check form-check-inline"},o.a.createElement("input",{className:"form-check-input",type:"radio",value:"public",id:"contrib-permission3",name:"public",onChange:t,checked:"public"===e.contribution.permission}),o.a.createElement("label",{className:"form-check-label font-weight-normal",htmlFor:"contrib-permission3"},"\xa0public")))),o.a.createElement("td",null,"rw"),o.a.createElement("td",null,"rw"),o.a.createElement("td",null,"rw"))))),o.a.createElement("label",{className:"mt-1 font-weight-bold"},"Status:"),o.a.createElement("div",{className:"ml-2"},e.contribution.status),o.a.createElement("label",{className:"mt-2 font-weight-bold"},"Template:"),o.a.createElement("form",{className:"ml-2",action:""},o.a.createElement("div",{className:"form-check  form-check-inline"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"c-isTemplate",checked:e.contribution.data.isTemplate,onChange:function(t){e.onChange({data:{isTemplate:t.target.checked}})}}),o.a.createElement("label",{className:"form-check-label font-weight-normal",htmlFor:"c-isTemplate"},"isTemplate")))))},sa=function(e){var t=Object.entries(e.authors).map((function(e){return{value:e[1]._id,label:"".concat(e[1].firstName," ").concat(e[1].lastName)}})),n=Object(a.useState)(null),r=Object(c.a)(n,2),i=r[0],s=r[1];return o.a.createElement("div",null,o.a.createElement(Bn.a,null,o.a.createElement(Dn.a,null,o.a.createElement(xe.a,{options:t,onChange:function(e){s(e)},isClearable:!0})),o.a.createElement(Dn.a,{md:"auto"},o.a.createElement(y.a,{disabled:!i,onClick:function(){return e.onAuthorSelected(i)}},"Add"))),o.a.createElement("p",null,t.length," possible author(s) in this community."))},la=function(e){var t=Object(u.d)((function(t){return t.notes[e.contribId]})),n=Object(u.d)((function(e){return t.authors.map((function(t){return e.users[t]}))})),r=Object(u.d)((function(e){return e.users})),i=Object(u.d)((function(e){return e.globals.community.groups})).map((function(e){return{value:e.title,label:e.title}})),s=Object(a.useState)(t.group),l=Object(c.a)(s,2),d=l[0],m=l[1],p=Object(u.c)();return o.a.createElement("div",{className:"authorTab mt-2",style:{height:"100%"}},o.a.createElement(Bn.a,null,o.a.createElement(Dn.a,null,o.a.createElement("h5",null,"Authors:"),o.a.createElement("ul",null,n.map((function(t,n){return o.a.createElement("li",{key:t._id,style:{cursor:"move"}},t.firstName," ",t.lastName,o.a.createElement(y.a,{size:"sm",className:"ml-1",onClick:function(){return function(t,n){0!==n?n>=0&&p(mn({contribId:e.contribId,author:t._id})):qt({title:"Error!",type:"danger",message:"cannot remove the Primary Author"})}(t,n)}},"x"))})))),o.a.createElement(Dn.a,null,o.a.createElement("div",null,o.a.createElement("h5",null,"Add author:"),o.a.createElement(sa,{authors:r,onAuthorSelected:function(n){console.log(n),t.authors.includes(n.value)||p(pn({contribId:e.contribId,author:n.value}))}})))),o.a.createElement(Bn.a,null,o.a.createElement(Dn.a,null,o.a.createElement("h5",null,"Group:"),o.a.createElement("div",null,o.a.createElement("form",{method:"",id:"",action:""},o.a.createElement(xe.a,{value:d,options:i,onChange:function(e){m(e),p(tn({_id:t._id,group:e}))},isClearable:!0}))))))},ua=n(58),da=n.n(ua),ma=(n(201),n(203),n(205),n(207),n(209),n(211),n(213),function(e,t,n,a){Annotator.Plugin.KFPlugin=function(){return{pluginInit:function(){this.annotator.subscribe("annotationCreated",(function(e){t&&t.annotationCreated(e)})).subscribe("annotationUpdated",(function(e){t&&t.annotationUpdated(e)})).subscribe("annotationDeleted",(function(e){t&&t.annotationDeleted(e)})).subscribe("annotationEditorShown",(function(e,n){t&&t.displayEditor(e,n)})).subscribe("annotationViewerShown",(function(e,n){t&&t.displayViewer(e,n)})).subscribe("annotationEditorHidden",(function(e,n){t&&t.editorHidden(e,n)})),t&&t.annotatorInitialized(this.annotator)}}};var o={}.hasOwnProperty;Annotator.Plugin.RichText=function(e){!function(e,t){for(var n in t)o.call(t,n)&&(e[n]=t[n]);function a(){this.constructor=e}a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype}(n,Annotator.Plugin);var t="";function n(e,t){return n.__super__.constructor.apply(this,arguments)}return n.prototype.options={tinymce:{selector:"li.annotator-item textarea",content_css:"/editor.css",height:"170px",statusbar:!1,plugins:"media image insertdatetime link code",menubar:!1,toolbar_items_size:"small",extended_valid_elements:"iframe[src|frameborder|style|scrolling|class|width|height|name|align|id]",toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | code | mysidebar"}},n.prototype.pluginInit=function(){var e=this.annotator,t=this.annotator.editor;Annotator.supported()&&(e.editor.addField({type:"input",load:this.updateEditor}),e.viewer.addField({load:this.updateViewer}),e.subscribe("annotationEditorShown",(function(){})),e.subscribe("annotationEditorHidden",(function(){})),this.options.tinymce.setup=function(e){n.prototype.mceditor=e,e.on("change",(function(e){$(t.element).find("textarea")[0].value=da.a.activeEditor.getContent()})),e.on("Init",(function(e){$(".mce-container").css("z-index","3090000000000000000")})),e.on("remove",(function(){i.a.unmountComponentAtNode(n.prototype.scaffoldSidebar)})),e.ui.registry.addSidebar("mysidebar",{tooltip:"View Scaffold",icon:"settings",onSetup:function(e){var t=e.element();document.sidebar=t,t.style.width="200px",t.style.overflow="scroll",t.style.fontSize="0.7rem",i.a.render(a,t,null),n.prototype.scaffoldSidebar=t},onShow:function(e){},onHide:function(e){}})},da.a.init(this.options.tinymce))},n.prototype.updateEditor=function(e,n){var a="undefined"!==typeof n.text?n.text:"",o=da.a.editors.length;t=da.a.editors[o-2].id,da.a.get(t).setContent(a),$(e).remove()},n.prototype.updateViewer=function(e,t){var n=$(e.parentNode).find("div:first-of-type")[0];n.innerHTML=t.text,$(n).addClass("richText-annotation"),$(e).remove()},n}(),e.annotator("addPlugin","KFPlugin"),e.annotator("addPlugin","Tags"),e.annotator("addPlugin","RichText"),n&&e.annotator("addPlugin","Permissions",{user:n,permissions:{read:[n],update:[n],delete:[n],admin:[n]},showEditPermissionsCheckbox:!1})}),pa=function(e){var t=0===e.permissions.read.length;e.permission=t?"protected":"private";var n=e.ranges[0];return 0===n.start.indexOf("/div[1]")&&(n.start=n.start.substring(7)),0===n.end.indexOf("/div[1]")&&(n.end=n.end.substring(7)),e},ha=(n(215),Object(w.a)({reducer:{dialogs:Pt,notes:kn,scaffolds:oe,globals:Ne,users:ee},devTools:!0})),ba=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).contentRef=o.a.createRef(),a.annotatorInitialized=a.annotatorInitialized.bind(Object(b.a)(a)),a.annotationCreated=a.annotationCreated.bind(Object(b.a)(a)),a.annotationUpdated=a.annotationUpdated.bind(Object(b.a)(a)),a.annotator=null,a.displayEditor=a.displayEditor.bind(Object(b.a)(a)),a.displayViewer=a.displayViewer.bind(Object(b.a)(a)),a.fixPopupLocation=a.fixPopupLocation.bind(Object(b.a)(a)),a.editorHidden=a.editorHidden.bind(Object(b.a)(a)),a.loadAnnotations=a.loadAnnotations.bind(Object(b.a)(a)),a.onScaffoldSelected=a.onScaffoldSelected.bind(Object(b.a)(a)),a.dlg=null,a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=$(this.contentRef.current);e.annotator(),this.scaffoldElem=o.a.createElement(u.a,{store:ha},o.a.createElement(aa,{initVal:0,onScaffoldSelected:this.onScaffoldSelected})),ma(e,{annotationCreated:this.annotationCreated,annotationUpdated:this.annotationUpdated,annotationDeleted:this.props.onDelete,displayEditor:this.displayEditor,displayViewer:this.displayViewer,annotatorInitialized:this.annotatorInitialized,editorHidden:this.editorHidden},this.props.author.userName,this.scaffoldElem),this.dlg=$("#contrib-dialog-".concat(this.props.containerId))}},{key:"componentDidUpdate",value:function(e,t){1===this.props.annotsFetched&&this.props.annotsFetched!==e.annotsFetched&&this.loadAnnotations()}},{key:"componentWillUnmount",value:function(){this.annotator&&this.annotator.plugins.RichText.mceditor&&this.annotator.plugins.RichText.mceditor.remove()}},{key:"editorHidden",value:function(e,t){$(e.element.find(".annotator-controls")).off()}},{key:"loadAnnotations",value:function(){var e=Object.values(this.props.annots).map((function(e){var t=Object.assign({},e.data);return t.ranges=Object(Lt.a)(t.ranges),t.highlights=Object(Lt.a)(t.highlights),function(e){var t=Object.assign({},e.ranges[0]);t.start="/div[1]"+t.start,t.end="/div[1]"+t.end,e.ranges[0]=t}(t),t}));this.annotator.loadAnnotations(e),this.props.onAnnotsLoaded()}},{key:"annotatorInitialized",value:function(e){this.annotator=e,this.loadAnnotations();var t=$("div.annotator-adder");t.attr("title","Annotation"),t.addClass("tooltip1"),t.append('<span class="tooltiptext">Annotation</span>'),document.annotator=this.annotator;var n=e.adder.get(0);this.observer=new MutationObserver(function(t){var a,o=Object(Se.a)(t);try{for(o.s();!(a=o.n()).done;){if("attributes"===a.value.type&&"none"!==n.style.display)return this.fixPopupLocation(e.adder),void this.observer.takeRecords()}}catch(r){o.e(r)}finally{o.f()}}.bind(this)),this.observer.observe(n,{attributes:!0,attributeOldValue:!0})}},{key:"annotationCreated",value:function(e){this.props.onCreate(pa(e))}},{key:"annotationUpdated",value:function(e){this.props.onUpdate(pa(e))}},{key:"displayEditor",value:function(e,t){e.element.hasClass(e.classes.invert.y)||e.element.addClass(e.classes.invert.y)}},{key:"fixPopupLocation",value:function(e){var t=this.dlg.offset(),n=e.offset();e.offset({top:n.top-t.top,left:n.left-t.left})}},{key:"displayViewer",value:function(e,t){this.fixPopupLocation(e.element),e.element.addClass(e.classes.invert.y)}},{key:"onScaffoldSelected",value:function(e,t){var n=this.annotator.plugins.RichText.mceditor,a=n.selection.getContent(),o=e(a.length?a:t),r=o.tag,i=o.supportContentId;n.insertContent(r);var c=n.dom.get(i);c&&n.selection.setCursorLocation(c)}},{key:"render",value:function(){return o.a.createElement("div",{ref:this.contentRef},o.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.content}}))}}]),n}(o.a.Component),fa=(n(216),function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={riseAboveNotes:[]},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;if(this.props.riseAboveViewId){var t=this.props.riseAboveViewNotes[this.props.riseAboveViewId].map((function(t){return e.props.riseAboveNotes[t]}));this.setState({riseAboveNotes:t})}}},{key:"render",value:function(){var e=this;return o.a.createElement(Dn.a,null,o.a.createElement(Bn.a,null,o.a.createElement(Dn.a,{className:""},o.a.createElement(xn.a,{className:"pd-05"},o.a.createElement(xn.a.Title,null,"RiseAbove Notes"),o.a.createElement(xn.a.Body,{className:"mrg-05-top"},this.state.riseAboveNotes?o.a.createElement(o.a.Fragment,null,this.state.riseAboveNotes.map((function(t,n){return o.a.createElement(Bn.a,{key:n},o.a.createElement(y.a,{variant:"light",className:"min-width-10 rounded-pill pd-05",onClick:function(){return e.props.editNote(t._id)}},t.title))}))):null)))))}}]),n}(a.Component)),ga=Object(u.b)((function(e,t){return{riseAboveViewNotes:e.notes.riseAboveViewNotes,riseAboveNotes:e.notes.riseAboveNotes}}),{})(fa),va=(n(217),function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).editNote=function(e){a.props.openContribution(e)},a.state={riseAboveNotes:!1,selectedTab:a.props.mode?a.props.mode:"write"},a.onEditorSetup=a.onEditorSetup.bind(Object(b.a)(a)),a.onDrawingToolOpen=a.onDrawingToolOpen.bind(Object(b.a)(a)),a.addDrawing=a.addDrawing.bind(Object(b.a)(a)),a.onNoteChange=a.onNoteChange.bind(Object(b.a)(a)),a.wordCount=a.wordCount.bind(Object(b.a)(a)),a.onTabSelected=a.onTabSelected.bind(Object(b.a)(a)),a.onAnnotationCreated=a.onAnnotationCreated.bind(Object(b.a)(a)),a.onAnnotationDeleted=a.onAnnotationDeleted.bind(Object(b.a)(a)),a.onAnnotationUpdated=a.onAnnotationUpdated.bind(Object(b.a)(a)),a.editNote=a.editNote.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e,t,n){this.props.drawing&&e.drawing!==this.props.drawing&&this.props.drawTool===this.props.noteId&&(this.editor.insertContent(this.props.drawing),this.props.removeDrawing())}},{key:"onNoteChange",value:function(e){if(e.scaffold){var t=e.scaffold,n=t.tagCreator,a=t.initialText;this.addSupport(!0,a,n)}else e.attach?this.editor.insertContent(e.attach):e.deleteAttach?(this.props.deleteAttachment(this.props.noteId,e.deleteAttach),this.editor.dom.remove(this.editor.dom.select("."+e.deleteAttach))):(this.props.editNote(Object(O.a)({_id:this.props.noteId},e)),e.data&&e.data.body&&this.wordCount(e.data.body))}},{key:"wordCount",value:function(e){var t=this.editor.plugins.wordcount.getCount()-function(e){for(var t="<div>"+e+"</div>",n=we()(t).find(".kfSupportStartLabel"),a=0,o=0;o<n.length;o++)a+=n[o].innerHTML.split(" ").length;return a}(e);this.props.setWordCount({contribId:this.props.noteId,wc:t})}},{key:"onEditorSetup",value:function(e){e.onDrawButton=this.onDrawingToolOpen,this.editor=e}},{key:"onDrawingToolOpen",value:function(e){e?this.props.editSvgDialog(this.props.noteId,e):this.props.openDrawDialog(this.props.noteId)}},{key:"addDrawing",value:function(e){this.editor.insertContent(e)}},{key:"addSupport",value:function(e,t,n){var a=this.editor.selection.getContent(),o=n(a.length?a:t),r=o.tag,i=o.supportContentId;if(this.editor.insertContent(r),e){var c=this.editor.dom.get(i);c&&this.editor.selection.setCursorLocation(c)}}},{key:"onTabSelected",value:function(e){this.setState({selectedTab:e}),"history"===e&&this.props.fetchRecords(this.props.note._id),"author"===e&&this.props.fetchCommGroups(this.props.note.communityId)}},{key:"onAnnotationCreated",value:function(e){this.props.createAnnotation(this.props.note.communityId,this.props.note._id,this.props.noteAuthor._id,e)}},{key:"onAnnotationDeleted",value:function(e){e.linkId&&e.modelId&&this.props.deleteAnnotation(e.linkId,this.props.note._id,e.modelId)}},{key:"onAnnotationUpdated",value:function(e){if(e.linkId&&e.modelId){var t=Object.assign({},this.props.note.annos[e.modelId]);t?(t.data=e,this.props.modifyAnnotation(t,this.props.note.communityId,this.props.note._id)):console.error("ERROR! model couldn't find")}else console.error("ERROR! annoVM doesn't have id on update")}},{key:"render",value:function(){var e=this,t=new Intl.DateTimeFormat("default",Ee);return o.a.createElement("div",null,o.a.createElement("div",{className:"contrib-info"},"Created By: ",this.props.noteAuthor.firstName," ",this.props.noteAuthor.lastName," ",o.a.createElement("br",null),"Last modified: ",t.format(new Date(this.props.note.modified))),o.a.createElement(Vn.a,{activeKey:this.state.selectedTab,transition:!1,onSelect:this.onTabSelected},o.a.createElement(Un.a,{eventKey:"read",title:"read"},o.a.createElement(Bn.a,null,this.state.riseAboveNotes?o.a.createElement(o.a.Fragment,null,o.a.createElement(Dn.a,{md:"6"},o.a.createElement(ba,{containerId:this.props.dlgId,content:this.props.note.data.body,annots:this.props.note.annos,annotsFetched:this.props.note.annotsFetched,author:this.props.noteAuthor,onCreate:this.onAnnotationCreated,onUpdate:this.onAnnotationUpdated,onDelete:this.onAnnotationDeleted,onAnnotsLoaded:function(){return e.props.setAnnotationsLoaded({contribId:e.props.note._id,value:0})}})),o.a.createElement(Dn.a,{md:"5"},o.a.createElement(ga,{riseAboveViewId:this.props.note._id,editNote:this.editNote})),o.a.createElement(Dn.a,null)):o.a.createElement(Dn.a,null,o.a.createElement(ba,{containerId:this.props.dlgId,content:this.props.note.data.body,annots:this.props.note.annos,annotsFetched:this.props.note.annotsFetched,author:this.props.noteAuthor,onCreate:this.onAnnotationCreated,onUpdate:this.onAnnotationUpdated,onDelete:this.onAnnotationDeleted,onAnnotsLoaded:function(){return e.props.setAnnotationsLoaded({contribId:e.props.note._id,value:0})}})))),"read"!==this.props.mode?o.a.createElement(Un.a,{eventKey:"write",title:"write"},o.a.createElement(ra,{note:this.props.note,onScaffoldSelected:this.scaffoldSelected,onChange:this.onNoteChange,onEditorSetup:this.onEditorSetup})):"",o.a.createElement(Un.a,{eventKey:"author",title:"author(s)"},o.a.createElement(la,{contribId:this.props.noteId})),o.a.createElement(Un.a,{eventKey:"history",title:"history"},o.a.createElement(ia,{records:this.props.note.records})),o.a.createElement(Un.a,{eventKey:"properties",title:"properties"},o.a.createElement(ca,{contribution:this.props.note,onChange:this.onNoteChange}))))}}]),n}(o.a.Component)),Ia={editNote:tn,openDrawDialog:xt,setWordCount:ln,removeDrawing:an,editSvgDialog:function(e,t){return function(n){n(on({noteId:e,svg:t})),n(xt(e))}},fetchAttachments:Zn,fetchRecords:function(e){return function(){var t=Object(j.a)(N.a.mark((function t(n,a){var o,r,i;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a().users,t.next=3,Q(e);case 3:r=t.sent,i=new Intl.DateTimeFormat("default",Ee),r.forEach((function(e){if(o[e.authorId]){var t=o[e.authorId];e.author="".concat(t.firstName," ").concat(t.lastName)}else e.author="NA";e.date=i.format(new Date(e.timestamp))})),n(dn({contribId:e,records:r}));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},deleteAnnotation:function(e,t,n){return function(){var a=Object(j.a)(N.a.mark((function a(o){return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,z(e);case 2:return a.abrupt("return",o(fn({contribId:t,annoId:n})));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},fetchCommGroups:function(e){return function(){var t=Object(j.a)(N.a.mark((function t(n){var a;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(e);case 2:a=t.sent,n(fe({groups:a}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},createAnnotation:function(e,t,n,a){return function(){var o=Object(j.a)(N.a.mark((function o(r){var i,c,s;return N.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i={communityId:e,type:"Annotation",title:"an Annotation",authors:[n],status:"active",permission:"private",data:a},o.next=3,P(e,i);case 3:return c=o.sent,o.next=6,x(c._id,t,"annotates");case 6:s=o.sent,a.linkId=s._id,a.modelId=c._id,r(hn({contribId:t,annotation:c}));case 10:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()},modifyAnnotation:function(e,t,n){return function(){var a=Object(j.a)(N.a.mark((function a(o){var r;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,U(e,t,e._id);case 2:return r=a.sent,a.abrupt("return",o(hn({contribId:n,annotation:r})));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},setAnnotationsLoaded:bn,deleteAttachment:function(e,t){return function(){var n=Object(j.a)(N.a.mark((function n(a,o){var r,i,c;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=o(),i=r.notes[e],c=i.fromLinks.filter((function(e){return e.to===t}))[0],n.next=5,z(c._id);case 5:a(cn({attId:t,noteId:e})),a(Mn(e,"from"));case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},openContribution:Tn},ya=Object(u.b)((function(e,t){var n=e.notes[t.noteId];return{note:n,drawing:e.notes.drawing,drawTool:e.dialogs.drawTool,noteAuthor:n&&(e.users[n.authors[0]]||"NA"),riseAboveViewNotes:e.notes.riseAboveViewNotes,riseAboveNotes:e.notes.riseAboveNotes,currentAuthor:e.globals.author,editable:n&&n.authors.includes(e.globals.author._id)}}),Ia)(va),Ea=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).onConfirm=a.onConfirm.bind(Object(b.a)(a)),a.onLoad=a.onLoad.bind(Object(b.a)(a)),a.getIframeRef=a.getIframeRef.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"onConfirm",value:function(){var e=this.iframe_ref.contentWindow,t=e.svgCanvas.current_drawing_.all_layers[0],n=e.svgCanvas.current_drawing_.all_layers[1],a=n[1].getBBox().width,o=n[1].getBBox().height;e.svgCanvas.current_drawing_.svgElem_.setAttribute("width",a),e.svgCanvas.current_drawing_.svgElem_.setAttribute("height",o),t[1].childNodes[1].setAttribute("width",a),t[1].childNodes[1].setAttribute("height",o),e.svgCanvas.selectAllInCurrentLayer(),e.svgCanvas.groupSelectedElements(),e.svgCanvas.alignSelectedElements("l","page"),e.svgCanvas.alignSelectedElements("t","page"),e.svgCanvas.ungroupSelectedElement(),e.svgCanvas.clearSelection(),e.svgCanvas.current_drawing_.svgElem_.setAttribute("padding","2em"),e.svgCanvas.setResolution("fit",100);var r=e.svgCanvas.getSvgString(),i=document.createElement("canvas");i.width=a+4,i.height=o+4;var c=i.getContext("2d"),s=document.createElement("img");s.setAttribute("src","data:image/svg+xml;base64,"+btoa(r)),s.onload=function(){c.drawImage(s,0,0);var e=i.toDataURL("image/png"),t="<img alt='"+r+"' src='"+e+"'/>";this.props.onConfirm(t)}.bind(this)}},{key:"getIframeRef",value:function(e){e&&(this.iframe_ref=e)}},{key:"onLoad",value:function(e){var t=this.props.note.editSvg;t&&e.target.contentWindow.svgCanvas.setSvgString(t)}},{key:"render",value:function(){return o.a.createElement(Fn,{title:"DrawTool",style:{zIndex:3e3},onClose:this.props.onClose,onConfirm:this.onConfirm,editable:!0,confirmButton:"Add"},o.a.createElement("iframe",{onLoad:this.onLoad,title:"DrawingTool",src:"/drawing-tool/svg/index.html",ref:this.getIframeRef,width:"100%",height:"100%"}))}}]),n}(o.a.Component),Aa=Object(u.b)((function(e,t){return{note:e.notes[t.noteId]}}))(Ea),Na=function(e){var t=Object(u.d)((function(e){return e.dialogs})),n=Object(u.c)(),r=Object(a.useCallback)((function(e){n(Wt(e.id)),n(en(e.noteId))}),[n]),i=Object(a.useCallback)((function(e){var t,a;n((t=e.noteId,a=e.id,function(){var e=Object(j.a)(N.a.mark((function e(n,o){var r,i,c,s,l,u,d;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o(),i=r.notes[t],(i=Object.assign({},i)).data=Object.assign({},i.data),i.title){e.next=7;break}return qt({title:"Error Saving Note!",type:"danger",message:"Title is required"}),e.abrupt("return");case 7:if("Note"!==i.type){e.next=27;break}return c="active"===i.status,i.status="active",e.next=12,_t(i.data.body,i._id,i.toLinks,i.fromLinks);case 12:return s=e.sent,l=s.html(),u=i.data.body,i.data.body=l,e.next=18,U(i,i.communityId,i._id);case 18:(d=e.sent).data.body=u,n(tn(d)),n(vn(d)),n(Mn(t,"from")),n(Mn(t,"to")),void 0!==a&&n(Wt(a)),c||n(Gn(d.communityId)),qt({title:"Saved!",type:"success",message:"Contribution updated!"});case 27:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()))}),[n]),c=Object(a.useCallback)((function(e){return n(Ft(e))}),[n]),s=Object(a.useCallback)((function(){n(zt())}),[n]),l=Object(a.useCallback)((function(e){n(nn(e)),n(zt())}),[n]),d=Object(a.useCallback)((function(e){console.log("build on note"+e),n(function(e){return function(t,n){var a=n();t(Cn(a.globals.view,a.globals.communityId,a.globals.author._id,e))}}(e))}),[n]);return o.a.createElement("div",null,t.dialogs.map((function(e,t){return o.a.createElement(Fn,{key:e.id,id:e.id,onMouseDown:function(){return c(e.id)},title:e.title,style:{zIndex:e.zIndex},onClose:function(){return r(e)},onConfirm:function(){return i(e)},confirmButton:e.confirmButton,editable:e.editable,buildon:e.buildOn,onBuildOnClick:function(){return d(e.noteId)}},o.a.createElement(ya,{key:e.noteId,dlgId:e.id,noteId:e.noteId,mode:e.editable?"write":"read"}))})),null!==t.drawTool?o.a.createElement(Aa,{onClose:s,onConfirm:l,noteId:t.drawTool}):null)},ja=function(e){Object(f.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).onViewClick=a.onViewClick.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){if(this.props.viewId)this.props.fetchViewCommunityData(this.props.viewId);else{var e=this.props.match.params.viewId;this.props.setViewId(e)}}},{key:"componentDidUpdate",value:function(e,t){this.props.viewId&&this.props.viewId!==e.viewId&&this.props.fetchViewCommunityData(this.props.viewId)}},{key:"onViewClick",value:function(e){this.props.setViewId(e),this.props.history.push({pathname:"/view/".concat(e)})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"container-fluid"},o.a.createElement(Na,null),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col",id:"sticky-sidebar"},o.a.createElement(Yn,{communityId:this.props.communityId,view:this.props.view,author:this.props.author})),o.a.createElement("div",{className:"col",id:"main-canvas"},o.a.createElement(Et,{token:this.props.token,server:this.props.currentServer,communityId:this.props.communityId,viewId:this.props.viewId,onViewClick:this.onViewClick,onNoteClick:function(t){return e.props.openContribution(t,"write")}}))))}}]),n}(a.Component),Oa={setViewId:de,fetchViewCommunityData:function(e){return function(){var t=Object(j.a)(N.a.mark((function t(n){var a,o,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(function(){var e=Object(j.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L();case 2:n=e.sent,t(Ie(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.next=3,V(e);case 3:return a=t.sent,o=a.communityId,n(pe(a)),n(de(a._id)),t.next=9,R(o);case 9:r=t.sent.data,n(se(Object(O.a)({groups:[]},r))),n(je(o)),n(te(o)),n(re(o,r.rootContextId));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},openContribution:Tn},wa=Object(u.b)((function(e,t){return{token:e.globals.token,currentServer:e.globals.currentServer,communityId:e.globals.communityId,viewId:e.globals.viewId,view:e.globals.view,author:e.globals.author}}),Oa)(ja);n(136),n(218);var Sa=function(){var e=Object(u.c)(),t=function(){var e=localStorage.getItem("Username");if(e){var t,n=JSON.parse(localStorage.getItem(e)),a=Object(Se.a)(n);try{for(a.s();!(t=a.n()).done;){var o=t.value;if("active"===o[2])return o}}catch(r){a.e(r)}finally{a.f()}}return[null,null,null]}(),n=Object(c.a)(t,2),a=n[0],r=n[1];return r&&(e(ie(r)),e(ue(a)),e(function(){var e=Object(j.a)(N.a.mark((function e(t){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:n=e.sent,t(ge(n._id)),t(me(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),o.a.createElement("div",null,o.a.createElement(m.a,null),o.a.createElement(s.a,null,o.a.createElement(l.d,null,o.a.createElement(l.b,{exact:!0,path:"/",component:Ot}),o.a.createElement(l.b,{exact:!0,path:"/signup",component:Ue}),o.a.createElement(l.b,{exact:!0,path:"/dashboard",component:Rt}),o.a.createElement(l.b,{path:"/view/:viewId",component:wa}))))};i.a.render(o.a.createElement(u.a,{store:ha},o.a.createElement(Sa,null)),document.getElementById("root"))},94:function(e,t,n){}},[[137,1,2]]]);
//# sourceMappingURL=main.4cd3f4fb.chunk.js.map