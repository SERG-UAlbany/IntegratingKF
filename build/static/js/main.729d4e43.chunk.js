(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{110:function(e,t,n){},139:function(e,t,n){},159:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAC4jAAAuIwF4pT92AAAGaGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDYtMjFUMTE6Mjc6NDYtMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA5LTEyVDE2OjU4OjM1LTA1OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA5LTEyVDE2OjU4OjM1LTA1OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjEyZTJiMzk4LThjNzQtNDE1OS1iNTRiLTQxNjNhZGNiNmY4MyIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmM5Y2JkYzI3LTEwYmMtOWQ0Yy05MjFmLTg1MGRjOTBmZTAwNiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjk3YjYxMzJlLTM1ZGItNDE3OS04MDMyLTYxMWRkMWYwNzVhYSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTdiNjEzMmUtMzVkYi00MTc5LTgwMzItNjExZGQxZjA3NWFhIiBzdEV2dDp3aGVuPSIyMDE4LTA2LTIxVDExOjI3OjQ2LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMmUyYjM5OC04Yzc0LTQxNTktYjU0Yi00MTYzYWRjYjZmODMiIHN0RXZ0OndoZW49IjIwMTgtMDktMTJUMTY6NTg6MzUtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE4IChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pia9hzQAAAD6SURBVFiF7dY/SgNBGIbx366LghqCf25kG1MJXsMDeAjxGFqaFCnU0kN4B1MZsDEW7sJImDVCxkkxT/OywzfwzAffzFYn149j3OJYPua4anCP3YwiMMBdjSazSEdV4z23Rcuizm0QUmRiFJkYRSZGkYlRZGIUmRhFJkaRibFNMoPU/7/PeMFyjdqPlDJPOPvLhpQyszYrDNvsYyelzGGbQ7xiv6e2wl5KmTrI0zXqp/8xTUssfql5wGgbRnuCMfnvmSnOu4+cMhOMwoVcMj860lHrH7lNEd7AKx0JZT4TCYSHPAhEVjrS0eASNzjasMy8zRpvvt+pi74NXzMDHXjf0mfDAAAAAElFTkSuQmCC"},160:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAC4jAAAuIwF4pT92AAAKp2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDYtMjFUMTE6Mjc6NDYtMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA5LTEyVDE4OjA1OjUwLTA1OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA5LTEyVDE4OjA1OjUwLTA1OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmExYzgwOTQwLTIzMjYtNDc4NS05ZTA0LWE0MDJjMDdiNDI2ZCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjcyNzMyNjhjLTE1OTEtYzA0Mi1iM2IxLWM5NjVhNzE5MzRkOCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjcwMTg5MDJiLTU5YjctNDNkNy1iODc1LTk5YmUyNTM2MWJiNCIgdGlmZjpPcmllbnRhdGlvbj0iMSIgdGlmZjpYUmVzb2x1dGlvbj0iMzAwMDAwMC8xMDAwMCIgdGlmZjpZUmVzb2x1dGlvbj0iMzAwMDAwMC8xMDAwMCIgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIgZXhpZjpDb2xvclNwYWNlPSIxIiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMTg3MSIgZXhpZjpQaXhlbFlEaW1lbnNpb249IjE4NzEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjcwMTg5MDJiLTU5YjctNDNkNy1iODc1LTk5YmUyNTM2MWJiNCIgc3RFdnQ6d2hlbj0iMjAxOC0wNi0yMVQxMToyNzo0Ni0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjBiYzRiZGFkLTVkNTQtNDAzYS1iNGIwLWY0ZmViZTgyNzM0YSIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQxODowMDozMi0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmMxM2M1OWI3LWE1MmItNDdkZC1hMmUwLTE3M2E1MGY3OGEyNCIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQxODowNTo1MC0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmExYzgwOTQwLTIzMjYtNDc4NS05ZTA0LWE0MDJjMDdiNDI2ZCIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQxODowNTo1MC0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmMxM2M1OWI3LWE1MmItNDdkZC1hMmUwLTE3M2E1MGY3OGEyNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3MDE4OTAyYi01OWI3LTQzZDctYjg3NS05OWJlMjUzNjFiYjQiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3MDE4OTAyYi01OWI3LTQzZDctYjg3NS05OWJlMjUzNjFiYjQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7C07tpAAAA+0lEQVRYhe3WMUoDQRSH8d+ui4IaguKBBNuYSvAatt5CPIaWJkUaLT2BlXcwlQEbY+EujIRZI2ScFPM1f3Z4A988eDNbvVyfjnGLY/mY46rBPXYzisAAdzWazCIdVY333BYtizq3QUiRiVFkYhSZGEUmRpGJUWRiFJkYRSbGNskMUv//PuEZyzVqP1LKPOLsLxtSyszarDBss4+dlDKHbQ7xiv2e2gp7KWXqIE/WqJ/+xzQtsfil5gGjbRjtCcbkv2emOO8+cspMMAoXcsn86EhHrX/kNkV4A690JJT5TCQQHvIgEFnpSEeDS9zgaMMy8zZrvPl+py76NnwBLFcduiEp6KQAAAAASUVORK5CYII="},161:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAJ/mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDE4LTA5LTEyVDIxOjI1OjE0LTA1OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0wOS0xMlQyMTo1MjozNC0wNTowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wOS0xMlQyMTo1MjozNC0wNTowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxYWYyNTA0Yy1hMDg0LTQwZDAtOTBjYi00N2VjOTM3MDk5MGIiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0NmM4MjBiYi01NGUyLTYxNDgtODE0Ny04ZGI2N2MxYjlkYzQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZTRlNGRmMi0zYjYwLTQ0OWQtOWY1OS1hZDBlZjExMWNlMDMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQyMToyNToxNC0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBpbWFnZS9wbmcgdG8gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6M2E4ZGZjNmQtZmVkNC00MzI4LTgzMjgtMzRmY2M2YjIyMzExIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjM4OjQ1LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MjZlZDljYjYtOGJlZi00NDllLWI2NzQtNzZiYzAzNDIxYjY0IiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjUyOjM0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MWFmMjUwNGMtYTA4NC00MGQwLTkwY2ItNDdlYzkzNzA5OTBiIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjUyOjM0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjZlZDljYjYtOGJlZi00NDllLWI2NzQtNzZiYzAzNDIxYjY0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu/x7K8AAAkXSURBVFiFvVhpkFxVFf7OuW/r6WV6m+7ZiBIlBAOCLGICkigVBUeBKiuSgCguP4JQSgGJCEFERYkkJD9iWSWLUJRYgiAoUQqKUFAolBZCINEYIAskk+np6emeXub12+7xR/eIBYGaGOP3/937nfOdc893Ho2sXoeSKiIgBVNCBGTAkgABTBgIAQABmbDEh0cWLAkAAAoR2rBHSip3nQv7eEe8VwtSvSUh07/xyIISDY9M2BLAJxMsERQ0NBgMjYgUlEQIyYCCRjEcB+MQQBDY8KHBc/Zz8Ve71dCj03AWmQhTLjmn7OWBB97k4iMh1LE2fDAEApr1+bMmYyGAgQjjnFu9V/XvrFFyuUIECwEEBBMhDESoUfK8N7m4o8S573GX/P+MzMyFDYov3c+FF0cpvzaCYTvw3hE5QeB0yY1y/sZ9XPhHg3rOs6QTyH9N5i1J1PAY5e7ew4OPT8M5yYEPhehd0y8AFDQc8dGGNX8PDz4yyvn7I6i5Hek05FDIdCQJUebMVbvV4M4qJb9sIILVLejZwupKV+fEsr1qYGeJc2sYGg6C9yYjAAxEsCVAg+Kf2KeKfx2lwvoARsyBD4K8a0TvBkE3w+IjglIHKP+DN9TAtjrFP2OL/w7peOYDRwJE4MIY5+7cw4Nbmug51Ubng0PpiIOTIihEcOBjGs6CPTy4eZT77guh5tjSCRQgsCUhLISoUO/lu9TQzknq/arRLdojARMhTISYpNSKXWronxOcXmVKCBM+OCSjZ48a2HJA5TeFMHpnJDmSmOk6DeUc4PxPdquh532YeSWLV/5ylAsjcXHBR5jE28EQmIgwRclhn62TqXfN02IcYpccCYRkgAkSReDDLNHDgwaDIOC54ZtrXHIQQB3xWnk7CEAERotiOCocvVUtXHjqsyFZUZPinwxgQkH/37LkkwmAMSSlW+YHr1/LTU4iL1M/nKv3HZuWxh8CGAhgHDFCBCCEggcTSZl+aq7ed1K/rnynxXEoY/HXbnY5ZuR07S8ZNO4zEe3yyPqYS3aSIWDo7hGHT0JA8GDBQlgd0JUrB3X5m0mZLpU4t7jOyYvV9JIrn/RgXeKTmejR7SfS0ng5Lu4mAlItip0+Y34OFz4MCBhZqd8xrEsjOan/OSSFUdV30zhnf1Hj1Nmq/+OfP7fGqeE22Ysa1PNFAG8k4G5P68ZjDvynAjJPcOEMAoA6xAInCCIYCGAiIe1XBmTi0n6Z2GBL4E1weul+Lj48Sb1fiMCwEUKdsfDkLZMqu8wnMxmSka1TYnmb7A9ZCJ7LSGNbQqZvN0hPeWQvbsMyFfSsHJmA4JEJhSgqSnXNoC5fnJLmay7ZmVFV+NkY59d7ZBUBgAn1Y8LdK9SCRWdXLYo2anDBh3WaBqNN9oI6xy8PoabjcJ9L68bzcWnfIURDLXJO0FDvKV3HSilkpPnwsC6N5HX1USHCOGdXjqrC5jolThcQGBo5qd0zqCtLc7q6VeXOWpEP2GwVdHWzA//JEOr4gMyhiAyjwfFPt9AzwiSvJqW1PStTD1qIXvDIPMUlJ0+QLikCofN4+TARg7d3UE+sLErlBgderUap0/dz4dcVzlwWwrABII7pVwZ15ZIBXb5Ng3wNzit/yRVjLfSca8F/PCe17Um4dzBJ3YN1VgRl+mwO1Sl+qUfmsAP/qYw0tiVlehMD7JKzOIQBhnSfA0FeauuG9PhIEq3tLhzjAOc3lDh3u0vOHAAwEeqCVG8Y1uMXpaWxq0Wx7CgXHiqrzHpK3vCMiBBMBH6frq7p09VbLQSoU6K/zJmNNU5eqIUBAhzxJvt0dXVOpu60xMck9x5b4tz1Hqx5FoI9eV1bm5PaiwEMlDmzokbJdS7sQXQlSUnz93mpfSur67s9MlGh3svLnP2xBzMJItD86x64a5c66isxaSMihaRuvZCX2tVZPfW0EGGC0udVOL22hdj8mQ5JSmtLUVeuisHf2uQe1CiJtDSR0C24sI8Z58yGOiVGZgq5B+6evJ76dlam7lcSok7J00qcu61OPWcqCFyyMCcae1gtXHja5iYnTmhx7DhDIvhkDU5R8lKfzCFb/C0ZqW+Li/tTBU1tspZoKHhkHt3k+Mo2We+LwB6IYwHUiXWKrypz9p4WxeYBHRvbJ7Vbh3T5sxlpbG+TxSXOb9ivCnd6ZM1R3WUuI43HFwQ7l9P5q9aibPRhgtPLJym1wYPVr6ARkoIjXqVPV6/J6drdBiLUKT5vnHObpiixVAhQImBEYAg0CBHUvy1qSlrP5qV2RUZPbY2gUOHeC8ucWeeSM6wkggbDRlDN6Po1Oand1ReNQ33wzHNQVylYCLaldevnIEm6ZH+0M1FVT52TF7TJXsSkX8zo+o6ktO41EL3hk3VGQGZP5/rO/hRBwUbY6NcTVw9I5bKY+KU6x48+wPm7xzm3JoJKUZduRup3FWXygri4f4rIQEy7UPPO+BSanIAHEyZFflLcP8bgPRGSWuDDGmZotNn+QJ0S3wjINGPibclK46W4uJsE1OeRfUpnzjPS0rh3WErnZHX9GZdtlDlz/Rj3/XaaYsd19iVGXNpb+2Xykow0NgrRdEidoZzQTdDI6nUYM4rwYXY2ASEYCMEQ1Ch55QSnbw5g9Mws63FxX83r2qq8nnwkgoGSyh01RYkTU9LaUdDV15QEmOT00jJn1rmwP8zdZd9EGGakfmNWT/2IAbTJArrjRUFQDMfeykwE1fXAhJA6D34c7ecTcO8hSJ9LzokEQQgjN0WJ5T7ZCyLil01Eu0zSOx3xJgOo95dVbuM459aHUEXudlNamg8OSOX8JKZ/F5FCSAr/6QS4mxnj4AOuc0ibbJgI9w/qiS/FqX3fBPeuc+EsUNCYpN5lUxRf5oj/NwYmGxxL+zBOnXn8BAwH3ut5XVudlNZDERg+mZipmYON3IOSeYuUIOx6v4S4j8Uj97Eqp75bod6bhAAIwSX75LcHwdDo09W1vWhcb0kY+TBnNe9n/UvEIwMCIK+r35+jx47r1c1HO5XF3a2TEcBASppb5uixj+Sldi2AyJslkUMiMzMI27BgItwxrEufG9Lli2z4L4Uw6o54fx+S8a8P6fLZMfgveWR1Xf/s8S+0s1o+OdaCaQAAAABJRU5ErkJggg=="},162:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAJ/mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDE4LTA5LTEyVDIxOjI1OjE0LTA1OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0wOS0xMlQyMTo0ODoyNC0wNTowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wOS0xMlQyMTo0ODoyNC0wNTowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowZmU3NjVjNi01NjhmLTRhY2UtYTVlMi1kMjJmMDA5NDBiNmMiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpiODQwOTQzYS1iNjliLTdhNDItODNiZS0zOTY2YWEwNmIxMDQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZTRlNGRmMi0zYjYwLTQ0OWQtOWY1OS1hZDBlZjExMWNlMDMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQyMToyNToxNC0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBpbWFnZS9wbmcgdG8gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6M2E4ZGZjNmQtZmVkNC00MzI4LTgzMjgtMzRmY2M2YjIyMzExIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjM4OjQ1LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTdmMzAzOWEtODMwNC00MDhlLWI2ZDQtNjRhNTczZGZlNTNiIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjQ4OjI0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MGZlNzY1YzYtNTY4Zi00YWNlLWE1ZTItZDIyZjAwOTQwYjZjIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjQ4OjI0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTdmMzAzOWEtODMwNC00MDhlLWI2ZDQtNjRhNTczZGZlNTNiIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PotzvqwAAAlFSURBVFiFxVhpkF1FFf7O6b7v3vu2mSSTbTKTmYTJPkkGCISlCFjBsIiouEAoUNSSkooiGFNlJQiFSyRKAqXID1ZTilJlEbFYRAxgFSUIgjFBskwWMhMyM1kmM2/ee/e9d+/tPv54bxLWOKx+f+6Pru77ne/rPud009prL8HEhIVDglDoTd9YCIAgQYKKMFyujkEIIRhZCi+YooJVaY7bC1Z3dhv/liPW3eApC2sFHgvKluCSwIBgBGACrACaBJFUx2IQ+kIGY4QgABaEwCookuaZeuiB+U7u8ToOzwyF6rIcnTLXyT002xn6YwJmWiAaBgQa6Q+AkZMJRCESRqsOvjdXD3ZO4NLlkRBKokAAysIIRWE8lz87R+V2TNXFG60QAlGQWjAfiAwBiIQRiMZoDhfPVrmXp6n8zx1Yryga9g2RV5UDiqLAALWp/M2zde7VBg4vKkOhIvw/Cb0jmWFLiqKhSRrbdOH++U5uYx2HJxVFI8K7L0wA4trcFEWz5zm5R6ar/IMO2dbCWwIYEZmSKITCmKyD6zucwc5GDq4atuS9oCwKoRDGc/nS+Xqwc6ouroyEUHyXdY6SOWaJwigOz56jcy/OUEPrXLKpt1oyUhxTWEHDOm0q/5O5enBLgwrPD2oBv3FNPua1hiZpOEEX7prv5P42isNTiqLfNuH9gABEYBRFo56jufP04J+n6/wDLtmmN1rHFWFURKFRla7pcAY6mzj4xvuxZKQY3gKNXLr8RGews1kFy0PLKAuDHRK/3RnaOF0N3emSHfV+LRkp3nQ4YP02lb91XmLwOY/saH2SV7hvsgoWH7HOiPPBh0UqAiMSxkQun36Sp35HnSvPllgI8jGReCcIgAQJ2IJiBfm/kREAGgIBCW+tpFZmOEYC9mMnJAAcCOo4Rmfor1HtCzqeY+ZojAoXe2QRgz/yvSOoJjifYhARdpjM6n+XUys5pYBum179r2jUtAPWe9QjAw/mI1NJALiw8MjgsPWe2hTVz98dp1clFUEtX9TyoxQb3WP8lw5a7/cV8K4Um4UZirMW9KEdcwGgIEiSRRm6f49JX7crzlx3xDoHWnXprLEqXKpWnzPh6SzCKz2yySGrNx6w/iuD4vxSQNl6jk5L1Kz7oPDJgAnosf7d2+Psp/Yb/3mHLKY5xZtOUIX141R4rrr0jOlLxqtKc5aiM0er6HIAXUfE3XbQuk8URT/lkW3PcjyJqFqN34tKAiBRsyQn7uadJvOVPXH69pJwpUmVzp3pDG2YxOXLNAnKwlDtJ3c8Pd6JvuCTzbpkxjSoytIMm1llUX/vs97WfnHvicEDKYoXpSlOmBFYV92ggiQZROB4r02v6ozTVxy23u4MRfUzdP7ONl1clyYzAQBiUoObKtml6qyF7YMF8m5jwtgkmVMdABmK2hs4XJYgKeas848+47+QE+duJjTWczTPITmudR4ZOCQ4YP0N20z2wn0m+RhBMEUVr56p84+O5crpBMCAsN8k799pskt648QW9eUzp41m5tLrxn+8KPqvCbJzPLJNDokew+H59RxdaEA7+8Xd2me8DWXRL/lsTsxSNFZAR/vc4eSVJIu81Xt3mszVe+LMTUVRufFcOWWmLjzYooJlCbIeQBgQZ/Muk75yl0nfRoTQRTxa3Xx2Y+8oDi8oi/pLj/W29Vv3XkM0mCSzyCFxkhRPGqsqVyUpbgxEPdNnvVeP2MSvhAgZis9xqZosXbIQIuwz/s92mOxFh627NUuRatPFdW2qcG+WoxYAKIs2XTZ1w444e8Uh4+2p56h+hs4/NFmV1tLulYtEwaIkutxt/FXdJrWuBIUGLo+fzMHtE1T5Ml3LOgXR/XtNasV+499fFsZEVZneqoNVKcTTS1B79xn/lp7Y35wgg8m6fOlEDtZmKJ5EqF5VDlrvT/tM8ju9xu3yyaJJBd9sUcEtScR1lhj05Irz72lP5L9etAoOCQ7bxD+7TWp5j/WeZQiaVOmiZg7W1HM0myCwIPRbd+Nuk1xeEGdLli1G6xgDRmPQKGQRtbXo4tqxHF7MEBAEg5J47XWTXLHf+g+FljBOlRdMVcW1DRwuMkJIssGOKLVBzV3Q8VhGy5w6jmbH1YFJ41Xlqz6ZiSVRT/UZf+uAuHfGIEmT+YQmiyTFUxs4vCbFpllDKkTk+4jnjqPyiim6uL6eo5kEQSSMLptasyPOfLrPutvSZKhNF9bN0Pn70mRajBA0CXqt/8SL5exSuuXbn0eDCzSp8pcmcXBbiuLGWAgOWRRFH+oyqeX7jP+bSBgNXGmboot3jOPKeQTACCGubWIFgYat9rEADtvEs10m9a0+621xYNGoSl9sVcHaDMXNsRAUCQJRR/bb5Hf3G3/9wQpBXXjaLNRri0CcVw9Z7y4B0lmOFwKAJqTGceVzGY5PN+CX+6zX2W/d34ZQe5NkznDJpEztiBMAhwQlUUN7TPr6XSa7rCD6QANXWqfrwn1TVPFGh2ydAAAReq1/zx6T+UxOnOddsigZQC1ZOAsZLfDJIgKFh637RF6cJxOws5Jkmo0QMhy3jVOVZS6syovzTK94mwescwcBDRkyC3StzveJt74zzlzQY/1nU2zQqorfn6YKD9dxNNsKQREwaBObdpv0FT0m+QtFKHlkISDkDYHWXnsJJrq2egGXaoQVUbAAJqjytZM5WO2SSZmadQOS2LHPpFZ0x94jDgEtOmgaw9H8AXG2d8f+7kgIk1Rp8WQV3JqlqMPULCmLinqt/4P9xl9jAaTIYFhSI4SeCkOdV1NGU/XKMiw3iJCziRcGJPFrARoyHHdYAB7ZhnFcXpokM0sRtlSgXytyYmdJeMCjuKVVFW+fqovrXDITRAhEwAHr/WG3yVx82LqPJcgiQfZYOSEcXxmg2sErCCpgVIQxlitLmlVwax1Fc40QuPZMEoh+OSbVr2HrfcSnemQwfEry4uzqNskV/dZ9WJOFCwuL4XYCb1NGH6fe1dpCC0WCAes+mRNn3kQu39DEwQ8VhLhax04mREcDqJYGQpdJ/rTX+jeEwtaj+GjJOB5G3KgkyYAh6DbJH79i6mcesN4jCbJQBFRqDwEuWRyy7sZX4rqOLpNayRCbJDPitmPEZIY7tTTFqAh3bouzF2+Ps5cVRG9KkOQK0P/ZbjJf2x5nP1kUtTlFMd7rreO/jQ6xxai3LRoAAAAASUVORK5CYII="},163:function(e,t){e.exports="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAArCAYAAADyijE0AAAACXBIWXMAAC4jAAAuIwF4pT92AAAKp2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDYtMjFUMTE6Mjc6NDYtMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTExLTE4VDE1OjQyOjQ3LTA2OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTExLTE4VDE1OjQyOjQ3LTA2OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmJjZmIyYjEwLWEzZmEtNDEzNC04MTRlLWFkOTk1MzY0YWI2MSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjE4MzhiYWEzLTQ0OTEtODU0MC1hZDBkLTZlNDYxYjg1Y2FmNyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmMyZmRkYmUwLTkxNTktNDUzZi1hNTc0LTQyYWJlMjJmM2ViOCIgdGlmZjpPcmllbnRhdGlvbj0iMSIgdGlmZjpYUmVzb2x1dGlvbj0iMzAwMDAwMC8xMDAwMCIgdGlmZjpZUmVzb2x1dGlvbj0iMzAwMDAwMC8xMDAwMCIgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIgZXhpZjpDb2xvclNwYWNlPSIxIiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMTg3MSIgZXhpZjpQaXhlbFlEaW1lbnNpb249IjE4NzEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmMyZmRkYmUwLTkxNTktNDUzZi1hNTc0LTQyYWJlMjJmM2ViOCIgc3RFdnQ6d2hlbj0iMjAxOC0wNi0yMVQxMToyNzo0Ni0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjRjNTVlYzUyLTNhMmItNDU4NC04ZWJmLThhNWQ5ODFmNGNhYiIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xOFQxNTozOTozOC0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQzZjE3NmNiLWFhMGYtNDZkYS1iZTk1LTczZjUyNTI2MGZkOCIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xOFQxNTo0Mjo0Ny0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmJjZmIyYjEwLWEzZmEtNDEzNC04MTRlLWFkOTk1MzY0YWI2MSIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xOFQxNTo0Mjo0Ny0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQzZjE3NmNiLWFhMGYtNDZkYS1iZTk1LTczZjUyNTI2MGZkOCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpjMmZkZGJlMC05MTU5LTQ1M2YtYTU3NC00MmFiZTIyZjNlYjgiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjMmZkZGJlMC05MTU5LTQ1M2YtYTU3NC00MmFiZTIyZjNlYjgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7y32vAAAADuklEQVRYhe2YTWhjVRTHf/e+jzRtMglaW1tSptC0tpShC0EQKqUutG6qojgrF8Iwiu4GcSEuFXfqTgYd7FpBMLNxNkJFunDRLrIouugH/bax9pm2JO+93DuL5MUmmYQOzWu78L+5eSfn8n7v3nPOe/cIrTUAs7Oz1EkAt4BpQAIOcA/4vd4xUCaTafbXmWQ2sSeBB8BzdfbbwCfAZ+e662PAJIA/gaeAPeCryvgC8A7wKdAPfNBuGPkI290KyDzwLHAIjALfAS9XfN4HXgobpge4Wfn9IfAD8DXwEfArkALuACil3jVNk46ODrTWKKXaB1MoFJBSjmqtkVJmDMN4TWv9PDCvtb5VcfsmmBOJRJ45OjpiZWUF0zTp6upqH8zAwAD5fF7bto3jOEe7u7v9AK7rfuF53j2lVEZKKT3Pu1YoFDAMw8hms2xtbWHbNqVS6dwwYm5u7gngY63106urq/2Li4vTsVhs3TAMXSqVBoeGhuaHh4dXFhYWXtzY2Lg+MjKS3dzcvBGNRv+dmpr6CZCWZbnn5PgH+NwEXgfei0ajXd3d3eRyOfr6+q7PzMzgOA5CiKlEIjFlWRa5XI7p6ekbk5OT5PP5a7Ztv62Uake8nAB/mMC3AL7vo5RCCAGAYRhEIhG01ggh0FoTFEjLsrBtu8Z2TnUCd03ABWwhBL7vA6C1xvM8fN9Ha12NByEESil836/6tlGuBIrBValUqt78dEC6rovrukhZjnfP89oNAlCsZpPneViWhRACKWV1VQCKxSK2bSOlrFmpdqum6AUxUB8HpmkihKiuSAhb1AjTSgFgEOBXAiZMnRnmInS1YZRSmKaJZVn/OUmJZVkopULdroZsqrwoOT4+rtpd18VxHGzbDg2kASYej9Pb28vh4SHr6+tV+87ODnt7eySTSTo7O0PLqJrPzkgkQjqdJpvNsrS0xNraGkII9vf3UUoxMTFBMpkMbasavoHHxsYQQrC8vMzBwQFQjpl0Os34+DjRaJSTk5OLgQEYHR0lFouxvb0NQE9PD4ODg0A5fsJSs6MKqVSKVCrVYA/rVQBXvc5cpv6HaaarBBNvmk1t0s/Ab8BZqmQxTJgHwCuPMyFMmF8qowSepNzvaSUZJky8MiaAFcpno2YSgAgTRpwaY2fw//4isklTPr620o/AzauQ2hngDbj8OpMBXg0uLhOmBgQuD+Z+PQiUYVqlXLt0ugLfBxqazgHM+TuDj9bphwwafk1BoFyB3wS+pNyIbqf+rowS+ItyK/etVhMeAuZkZDAeOcH2AAAAAElFTkSuQmCC"},164:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAGAGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDktMTJUMjI6MDk6NDctMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA5LTEyVDIyOjIxOjM5LTA1OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA5LTEyVDIyOjIxOjM5LTA1OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjYxYmMzYjk1LWE4ZDItNDFjZC1iMTFhLTFjMzY3NWYxY2IyZiIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmUxMGM5NWJkLWI1NmEtNzI0Zi1hMzJlLTJjZTk1NDRmMDljNCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjhhZDQ5Y2Q5LWMyZGEtNGMxYi1iMmJhLTBiZDZiMjJmZmM5MyI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OGFkNDljZDktYzJkYS00YzFiLWIyYmEtMGJkNmIyMmZmYzkzIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIyOjA5OjQ3LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NjFiYzNiOTUtYThkMi00MWNkLWIxMWEtMWMzNjc1ZjFjYjJmIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIyOjIxOjM5LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6mqJQFAAADHklEQVRYhc2YTWhcVRSAv3Pfve/NNKbtdNKg0bQlFUOxakyVlnZR6EbQVTciFMSli26qBTei0B/cZO1OsHTjTkRcuZAKarASNG1J29CKEap2TJqQSTLv597r4iWDSnWmneFNDjzeD+ee93Huuefcc8V7z2YRKR85QbT/2Nuq8vgoNhY8RdIJJvJu6e7t5MqXE9qMHDird4+96xvL4KMCOZo4mOGn8Y3lIam+d8mLUvgsKR5kQwIDgALf8GncOxCALAFn1xTOpoj0FkYEvMtUbyn+Kbr5JAKioMilnnuk+U/d/GhTkAB0mCsUAWIzcFkewN6vwwSGiVf2Xnnj4K5nUmtrUEQMeUwQ7Pzkh1+nTn4xN04Wr8PYjKHtfXUAEwQ7CyBpyhPV/jo2BaAZwGmWhUVCbEiSZs1Mu6lWU9dgZq99ytLibx3Z6BrM4t3P+Xnmo45sdA1Gm3727fqO6W/eZKW+0FuYJDX8uZAwsPU2tZuvMjP92QPb0K0Urk5dRPvrxMm/M3P+LgJZllBWP1FfcaSZpxwpquUP+fHbSZ49dA6lgu7AlN3HlMKAsvrvrCwlYXXNkWUeJdCIHXGS8FhlitnLx4mq77DnySOdw6wlIWka41zrmrVR/DfutfmYvj5LOTnD5UvjvHj0g/8d3zpmfGelwTlPEICw2lK3pWe2lGKiUN/fMwLOepyHOHZY6/NCvK46sCOkvgL33Fu8cPSlzmEW0+Po+AaNv20GZX0enPOEYYCQoNwMoRGs9YShsH2r4c7CPkafP0up3N8SpC2Y8UMn2zI0+dUpqpWreJ975vfV13nu8Im2xrYN065EJp+W2V8GGBo9x3B1+IFtdA0mS+aZmRtj7PD5h7bRNZhtgy9TGTzQkY2uwTy1/7WObWzO/YzWOu0FgDG62cpqlNIozfzyagmqWOfuFQUSKFWpLa2UCAzYNJDq+1/nabNRx4sgOiqmdxLJ21rvINqCiBCEI+M7gsGRg3iHMmHeyKkCLlGINqA0UnqEbG76gk5vfX9a9VVqatuju12jIVDc+YwHxETYP27dSW5OTshmOrn6C2gfIpLerWS0AAAAAElFTkSuQmCC"},165:function(e,t,n){e.exports=n.p+"static/media/sample_view.e92880b7.gif"},179:function(e,t,n){e.exports=n(300)},223:function(e,t,n){},229:function(e,t,n){},230:function(e,t,n){},231:function(e,t,n){},233:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){},247:function(e,t,n){},248:function(e,t,n){},249:function(e,t,n){},250:function(e,t,n){},265:function(e,t,n){},266:function(e,t,n){},267:function(e,t,n){},295:function(e,t){},300:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(21),i=n.n(o),c=(n(184),n(29)),s=n(70),l=n(20),u=n(12),d=n(72),m=n.n(d),p=n(14),h=n(15),b=n(7),f=n(17),v=n(16),g=n(31),E=n(319),y=n(166),w=n(9),N=n(5),I=n.n(N),A=n(11),j=n(19),O=n(10),k=n(18),S=n.n(k),C=localStorage.getItem("server"),M="".concat(C,"/api");function T(e){return e.endsWith("/")&&(e=e.substring(0,e.length-1)),localStorage.setItem("server",e),M="".concat(C=e,"/api"),C}function Z(e){S.a.defaults.headers.common.Authorization="Bearer ".concat(e)}var G=sessionStorage.getItem("token");G&&Z(G);var D,R=function(){var e=Object(A.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(M,"/users/me"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(e){return S.a.get("".concat(M,"/communities/").concat(e))},x=function(){var e=Object(A.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.put("".concat(M,"/communities/").concat(n),t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Y=function(){var e=Object(A.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(M,"/communities/").concat(t,"/groups"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(A.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(M,"/communities/").concat(t,"/views"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(A.a)(I.a.mark((function e(t,n,a){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(M,"/links/").concat(n,"/").concat(t));case 2:return r=(r=e.sent).data,a&&(r=r.filter((function(e){return e.type===a}))),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),z=function(){var e=Object(A.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.put("".concat(M,"/links/").concat(t),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(A.a)(I.a.mark((function e(t,n,a,r){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("".concat(M,"/links"),{from:t,to:n,type:a,data:r});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),U=function(){var e=Object(A.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.delete("".concat(M,"/links/").concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(A.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("".concat(M,"/links/").concat(t,"/search"),{query:n});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=Object(A.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(M,"/objects/").concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(A.a)(I.a.mark((function e(t,n,a){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.put("".concat(M,"/objects/").concat(n,"/").concat(a),t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Q=function(e,t){var n={communityId:e,type:"Attachment",title:"an Attachment",authors:[t],status:"unsaved",permission:"protected",data:{version:0}};return S.a.post("".concat(M,"/contributions/").concat(e),n)},H=function(){var e=Object(A.a)(I.a.mark((function e(t,n){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("".concat(M,"/contributions/").concat(t),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),X=function(){var e=Object(A.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(M,"/communities/").concat(t,"/authors"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(A.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(M,"/records/object/").concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(e,t){var n=new FormData;return n.append("file",e),S.a.post("".concat(M,"/upload"),n,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})},q=function(){var e=Object(A.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(M,"/communities/").concat(t,"/views"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ee(e,t){return S.a.get("".concat(M,"/records/myreadstatusview/").concat(e,"/").concat(t)).then((function(e){var t=e.data,n=[];for(var a in t)"read"===t[a].type&&n.push(t[a].to);return n})).catch((function(e){return e}))}var te,ne,ae,re,oe=Object(O.b)("ADD_USER"),ie=Object(O.b)("ADD_AUTHORS"),ce=Object(O.c)({},(D={},Object(w.a)(D,oe,(function(e,t){e[t.payload._id]=t.payload})),Object(w.a)(D,ie,(function(e,t){t.payload.forEach((function(t){return e[t._id]=t}))})),D)),se=function(e){return function(){var t=Object(A.a)(I.a.mark((function t(n){var a;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X(e);case 2:a=t.sent,n(ie(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},le=Object(O.b)("REQUEST_SCAFFOLD"),ue=Object(O.b)("RECEIVE_SCAFFOLD"),de=Object(O.c)({isFetching:!1,items:[],fetched:!1},(te={},Object(w.a)(te,ue,(function(e,t){e.items=t.payload,e.isFetching=!1,e.fetched=!0})),Object(w.a)(te,le,(function(e,t){e.isFetching=!0})),te)),me=function(e,t){return function(n){n(le);var a=L(e).then((function(e){return Promise.all(e.data.scaffolds.map((function(e){return P(e)})))}));return Promise.all([a,V(t,"from","uses")]).then(function(){var e=Object(A.a)(I.a.mark((function e(t){var a,r,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t[1].map((function(e){return e.to})),r=t[0].filter((function(e){return a.includes(e._id)})),e.next=4,Promise.all(r.map((function(e){return V(e._id,"from")})));case 4:o=e.sent,r=r.map((function(e,t){return e.supports=o[t],e})),n(ue(r));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},pe=n(33),he=Object(O.b)("OPEN_DIALOG"),be=Object(O.b)("CLOSE_DIALOG"),fe=Object(O.b)("FOCUS_DIALOG"),ve=Object(O.b)("OPEN_ATTACH_PANEL"),ge=Object(O.b)("CLOSE_ATTACH_PANEL"),Ee=0,ye=Object(O.c)({dialogs:[],drawTool:null,focused:null,attachPanel:{}},(ne={},Object(w.a)(ne,he,(function(e,t){var n=e.dialogs.map((function(t){return t.id===e.focused&&(t.zIndex=999),t}));e.focused=Ee,e.dialogs=[].concat(Object(pe.a)(n),[Object(j.a)({id:Ee++,zIndex:1e3},t.payload)])})),Object(w.a)(ne,be,(function(e,t){e.dialogs=e.dialogs.filter((function(e){return e.id!==t.payload}))})),Object(w.a)(ne,ve,(function(e,t){e.attachPanel=t.payload})),Object(w.a)(ne,ge,(function(e,t){e.attachPanel={}})),Object(w.a)(ne,fe,(function(e,t){e.focused!==t.payload&&(e.dialogs=e.dialogs.map((function(n){return n.id===e.focused?n.zIndex=999:n.id===t.payload&&(n.zIndex=1e3),n})),e.focused=t.payload)})),ne)),we=n(30),Ne=n.n(we),Ie=function(e,t){var n="";return n+=" ",n+=t?'<span class="kfSupportStartMark kfTemplateStartMark"> &nbsp; </span>':'<span class="kfSupportStartMark"> &nbsp; </span>',n+=" ",n=t?n+'<span class="kfSupportStartLabel kfTemplateStartLabel">'+e+"</span>":n+'<span class="kfSupportStartLabel">'+e+"</span>",n+=" "},Ae=function(e){var t="";return t+=" ",t+=e?'<span class="kfSupportEndMark kfTemplateEndMark"> &nbsp; </span>':'<span class="kfSupportEndMark"> &nbsp; </span>',t+=" "},je=function(e,t,n,a){var r="";return a&&a.length>0&&(r=r+'<span class="KFReferenceQuote"><span>"</span><span class="KFReferenceText">'+a+'</span><span>"</span></span>'),r=(r=r+'<span> (<a href="contribution/'+e+'" target="'+e+'">')+'<img src="/manual_assets/kf4images/icon-note-unread-othr-.gif">"'+t+'"</a>',r+='<span class="KFReferenceAuthor"> by (missing authors)</span>)</span>',r+="</span>"},Oe=function(e,t,n){var a="<div>"+e+"</div>",r=Ne()(a),o=r.find(".KFSupportStart");o.addClass("mceNonEditable");for(var i=function(e){var n=o[e];if(!n.id.startsWith("supportid_")){var a=Ne()(n).hasClass("KFTemplateStart"),r=t.filter((function(e){return e._id===n.id}));r.length?n.innerHTML=Ie(r[0]._from.title,a):"Annotation"!==t&&(n.innerHTML=Ie("(missing link)",a))}},c=0;c<o.length;c++)i(c);var s=r.find(".KFSupportEnd");s.addClass("mceNonEditable");for(var l=0;l<s.length;l++){var u=s[l],d=Ne()(u).hasClass("KFTemplateEnd");u.innerHTML=Ae(d)}var m=r.find(".KFReference");m.addClass("mceNonEditable");for(var p=function(e){var t=s[e],a=n.filter((function(e){return e._id===t.id}));if(a.length){var r="";(a=a[0]).data&&(r=a.data.text),t.innerHTML=je(a.to,a._to.title,a._to.authors,r)}else t.innerHTML=je("","(missing link)",0,"")},h=0;h<m.length;h++)p(h);return r.html()},ke=function(){var e=Object(A.a)(I.a.mark((function e(t,n,a,r,o){var i,c,s,l,u,d,m,p,h,b,f,v,g,E,y,w,N,A,j,O;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i="<div>"+t+"</div>",c=Ne()(i),s={},l=a.filter((function(e){return"supports"===e.type})).map((function(e){return e._id})),u=c.find(".KFSupportStart"),d=c.find(".KFSupportEnd"),m=[],p=[],h=0;h<d.length;h++)(b=d[h]).innerHTML="",f=b.id,s[f]=b;for(v=function(e){var t=u[e],a=t.id;t.innerHTML="",a.startsWith("supportid_")&&(a=a.split("_")[1]),p.push(a),l.includes(a)||m.push(F(a,n,"supports").then((function(e){var n=t.id,a=e._id;t.id=a,s[n]&&(s[n].id=a)})))},g=0;g<u.length;g++)v(g);for(E=l.filter((function(e){return!p.includes(e)})).map((function(e){return U(e)})),y=r.filter((function(e){return"references"===e.type})).map((function(e){return e._id})),w=c.find(".KFReferenceText"),N=[],A=function(){var e=w[j],t={text:Ne()(e).find(".KFReferenceText").html()};e.innerHTML="";var a=e.id;N.push(a),y.includes(a)||m.push(F(n,a,"references",t).then((function(t){var n=e.id,a=t._id;e.id=a,s[n]&&(s[n].id=a)})))},j=0;j<w.length;j++)A();return O=y.filter((function(e){return!N.includes(e)})).map((function(e){return U(e)})),e.next=20,Promise.all(E);case 20:return e.next=22,Promise.all(O);case 22:return e.next=24,Promise.all(m);case 24:return e.abrupt("return",c);case 25:case"end":return e.stop()}}),e)})));return function(t,n,a,r,o){return e.apply(this,arguments)}}(),Se={type:"success",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:5e3}},Ce=function(e){return d.store.addNotification(Object(j.a)(Object(j.a)({},Se),e))},Me=Object(O.b)("ADD_NOTE"),Te=Object(O.b)("REMOVE_NOTE"),Ze=Object(O.b)("EDIT_NOTE"),Ge=Object(O.b)("ADD_ATTACHMENT"),De=Object(O.b)("REMOVE_ATTACHMENT"),Re=Object(O.b)("SET_ATTACHMENTS"),Le=Object(O.b)("SET_WORDCOUNT"),xe=Object(O.b)("SET_CONNECTIONS"),Ye=Object(O.b)("SET_RECORDS"),We=Object(O.b)("REMOVE_CONTRIB_AUTHOR"),Ve=Object(O.b)("ADD_CONTRIB_AUTHOR"),ze=Object(O.b)("SET_ANNOTATION"),Fe=Object(O.b)("SET_ANNOTATIONS_LOADED"),Ue=Object(O.b)("REMOVE_ANNOTATION"),Be=Object(O.b)("SET_VIEW_NOTES"),Pe=Object(O.b)("ADD_VIEW_NOTE"),Je=Object(O.b)("SET_CHECKED_NOTES"),Qe=Object(O.b)("UPDATE_CHECKED_NOTES"),He=Object(O.b)("SET_VIEW_LINKS"),Xe=Object(O.b)("ADD_VIEW_LINK"),_e=Object(O.b)("SET_BUILDS_ON"),Ke=Object(O.b)("SET_SUPPORTS"),qe=Object(O.b)("SET_RISEABOVE_VIEW_NOTES"),$e=Object(O.b)("SET_RISEABOVE_NOTES"),et=Object(O.b)("SET_READ_LINKS"),tt=Object(O.b)("REMOVE_READ_LINKS"),nt=Object(O.b)("REMOVE_VIEW_NOTE"),at=Object(O.c)({attachments:{},viewNotes:{},checkedNotes:[],viewLinks:[],buildsOn:[],supports:[],riseAboveNotes:{},riseAboveViewNotes:{},readLinks:[]},(ae={},Object(w.a)(ae,Me,(function(e,t){e[t.payload._id]=t.payload})),Object(w.a)(ae,Te,(function(e,t){delete e[t.payload]})),Object(w.a)(ae,Ze,(function(e,t){var n=e[t.payload._id];e[t.payload._id]=Object.assign({},n,t.payload)})),Object(w.a)(ae,Ge,(function(e,t){e[t.payload.noteId].attachments.push(t.payload.attachment._id),e.attachments[t.payload.attachment._id]=t.payload.attachment})),Object(w.a)(ae,De,(function(e,t){var n=e[t.payload.noteId];n.attachments=n.attachments.filter((function(e){return e!==t.payload.attId})),delete e.attachments[t.payload.attId]})),Object(w.a)(ae,Re,(function(e,t){e[t.payload.contribId].attachments=t.payload.attachments.map((function(e){return e._id})),t.payload.attachments.forEach((function(t){e.attachments[t._id]=t}))})),Object(w.a)(ae,Le,(function(e,t){e[t.payload.contribId].wordCount=t.payload.wc})),Object(w.a)(ae,xe,(function(e,t){var n=e[t.payload.contribId];"from"===t.payload.direction?n.fromLinks=t.payload.links:n.toLinks=t.payload.links})),Object(w.a)(ae,Ye,(function(e,t){e[t.payload.contribId].records=t.payload.records})),Object(w.a)(ae,Ve,(function(e,t){var n=e[t.payload.contribId];n.authors=[].concat(Object(pe.a)(n.authors),[t.payload.author])})),Object(w.a)(ae,We,(function(e,t){var n=e[t.payload.contribId];n.authors=n.authors.filter((function(e){return e!==t.payload.author}))})),Object(w.a)(ae,ze,(function(e,t){e[t.payload.contribId].annos[t.payload.annotation._id]=t.payload.annotation})),Object(w.a)(ae,Fe,(function(e,t){e[t.payload.contribId].annotsFetched=t.payload.value})),Object(w.a)(ae,Ue,(function(e,t){delete e[t.payload.contribId].annos[t.payload.annoId]})),Object(w.a)(ae,Be,(function(e,t){var n={};for(var a in t.payload)n[t.payload[a]._id]=t.payload[a];e.viewNotes=n})),Object(w.a)(ae,Je,(function(e,t){e.checkedNotes=t.payload})),Object(w.a)(ae,Qe,(function(e,t){t.payload.checked?e.checkedNotes.push(t.payload.noteId):e.checkedNotes=e.checkedNotes.filter((function(e){return e!==t.payload.noteId}))})),Object(w.a)(ae,Pe,(function(e,t){e.viewNotes[t.payload._id]=t.payload})),Object(w.a)(ae,nt,(function(e,t){delete e.viewNotes[t.payload._id]})),Object(w.a)(ae,He,(function(e,t){e.viewLinks=t.payload})),Object(w.a)(ae,Xe,(function(e,t){0===e.viewLinks.filter((function(e){return e._id===t.payload._id})).length?e.viewLinks.push(t.payload):e.viewLinks=e.viewLinks.map((function(e){return e._id===t.payload._id?t.payload:e}))})),Object(w.a)(ae,tt,(function(e,t){e.viewLinks=e.viewLinks.filter((function(e){return e._id!==t.payload._id}))})),Object(w.a)(ae,_e,(function(e,t){e.buildsOn=t.payload})),Object(w.a)(ae,Ke,(function(e,t){e.supports=t.payload})),Object(w.a)(ae,qe,(function(e,t){e.riseAboveViewNotes[t.payload.noteId]=Object(pe.a)(t.payload.notes)})),Object(w.a)(ae,$e,(function(e,t){t.payload.forEach((function(t){return e.riseAboveNotes[t._id]=t}))})),Object(w.a)(ae,et,(function(e,t){e.readLinks=t.payload})),ae)),rt=function(e,t,n,a){return function(r){var o={permission:e.permission,group:e.group,_groupMembers:e._groupMembers},i=function(e,t,n,a,r){if(r||(r=""),!n||n.permission){var o={};n&&"private"===n.permission?(o.permission=n.permission,o.group=n.group,o._groupMembers=n._groupMembers):(o.permission="protected",o.group=void 0,o._groupMembers=[]);var i={communityId:e,type:"Note",title:n&&n.title?n.title:"",authors:[t],status:n&&n.status?n.status:"unsaved",permission:o.permission,group:o.group,_groupMembers:o._groupMembers,data:{body:n&&n.body?n.body:""},buildson:a,langInNote:[]};if(n&&n.docId){i.docId=n.docId;var c=i.authors[0];if(n.coauthors)for(var s=n.coauthors.split(","),l=0;l<s.length;l++)s[l]!==c&&i.authors.push(s[l]);n.createdBy&&(i.createdBy=n.createdBy),i.docShared=[c],i.text4search=n.text4search}return i}window.alert("invalid mode object")}(t,n,o,a);return function(e,t){return S.a.post("".concat(M,"/contributions/").concat(e),t)}(t,i).then((function(t){var n=Object(j.a)({attachments:[],fromLinks:[],toLinks:[],records:[],annos:{},group:null},t.data);a||F(e._id,n._id,"contains",{x:100,y:100}),r(Me(n)),r(he({title:"New Note",confirmButton:"create",noteId:n._id,editable:!0}))}))}},ot=function(e){return function(){var t=Object(A.a)(I.a.mark((function t(n){var a,r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V(e,"from","attach");case 2:return a=t.sent,t.next=5,Promise.all(a.map((function(e){return P(e.to)})));case 5:r=t.sent,n(Re({contribId:e,attachments:r}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},it=function(e,t){return function(){var n=Object(A.a)(I.a.mark((function n(a){var r,o;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,V(e,t);case 2:r=n.sent,a(xe({contribId:e,direction:t,links:r})),"to"===t&&(o=r.filter((function(e){return"contains"===e.type}))[0],a(Xe(o)));case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},ct=function(e){return function(){var t=Object(A.a)(I.a.mark((function t(n,a){var r,o,i,s,l,u,d,m,p;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([P(e),V(e,"from"),V(e,"to")]);case 2:return r=t.sent,o=Object(c.a)(r,3),i=o[0],s=o[1],l=o[2],u=a().globals.author,d=Object(j.a)({attachments:[],fromLinks:s,toLinks:l,records:[],annos:{}},i),m=Oe(d.data.body,l,s),d.data.body=m,n(Me(d)),n(ot(e)),n(he({title:"Edit Note",confirmButton:"edit",noteId:d._id,editable:u&&(d.authors.includes(u._id)||"manager"===u.role),buildOn:!0})),p=l.filter((function(e){return"annotates"===e.type})),t.next=17,Promise.all(p.map((function(e){return P(e.from).then((function(t){return t.data.linkId=e._id,t.data.modelId=t._id,t}))})));case 17:t.sent.forEach((function(t){return n(ze({annotation:t,contribId:e}))})),n(Fe({contribId:e,value:1})),"active"===d.status&&(h=d.communityId,b=d._id,S.a.post("".concat(M,"/records/read/").concat(h,"/").concat(b)));case 21:case"end":return t.stop()}var h,b}),t)})));return function(e,n){return t.apply(this,arguments)}}()},st=function(e){return function(){var t=Object(A.a)(I.a.mark((function t(n){var a,r,o;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V(e,"from");case 2:return a=t.sent,r=a.filter((function(e){return"Note"===e._to.type&&""!==e._to.title&&"active"===e._to.status})),n(He(a)),t.next=7,Promise.all(r.map((function(e){return P(e.to)})));case 7:o=t.sent,n(Be(o)),o.forEach(function(){var e=Object(A.a)(I.a.mark((function e(t){var a,r,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data||!t.data.riseabove){e.next=10;break}return a=t.data.riseabove.viewId,e.next=4,V(a,"from");case 4:return r=e.sent.filter((function(e){return"Note"===e._to.type&&""!==e._to.title&&"active"===e._to.status})).map((function(e){return e.to})),e.next=7,Promise.all(r.map((function(e){return P(e)})));case 7:o=e.sent,n($e(o)),n(qe({noteId:t._id,notes:r}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},lt=function(e){return function(){var t=Object(A.a)(I.a.mark((function t(n){var a,r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B(e,{type:"buildson"});case 2:a=(a=t.sent).reverse(),r=a.filter((function(e){return"Note"===e._to.type&&"active"===e._to.status&&"Note"===e._from.type&&"active"===e._from.status})),n(_e(r));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ut=function(e){return function(){var t=Object(A.a)(I.a.mark((function t(n){var a;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B(e,{type:"supports"});case 2:a=t.sent,n(Ke(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},dt=function(e,t){return function(){var n=Object(A.a)(I.a.mark((function n(a){var r;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ee(e,t);case 2:r=n.sent,a(et(r));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},mt=Object(O.b)("SET_TOKEN"),pt=Object(O.b)("SET_CURRENT_LOGIN_FORM"),ht=Object(O.b)("SET_COMMUNITY"),bt=Object(O.b)("SET_COMMUNITY_ID"),ft=Object(O.b)("SET_CURRENT_SERVER"),vt=Object(O.b)("SET_VIEW_ID"),gt=Object(O.b)("SET_AUTHOR"),Et=Object(O.b)("SET_VIEW"),yt=Object(O.b)("SET_AUTHOR"),wt=Object(O.b)("SET_VIEWS"),Nt=Object(O.b)("EDIT_COMMUNITY"),It=Object(O.b)("SET_USERID"),At=Object(O.b)("SET_ISAUTHENTICATED"),jt=Object(O.b)("SET_COMMUNITIES"),Ot=Object(O.b)("SET_USER_COMMUNITIES"),kt=Object(O.b)("SET_SOCKET_STATUS"),St={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0},Ct={token:sessionStorage.getItem("token"),currentLoginForm:"Login",communityId:null,currentServer:null,viewId:null,contextId:"",user:null,view:null,views:[],community:null,userId:"",isAuthenticated:!!sessionStorage.getItem("token"),communities:[],userCommunities:[],servers:[{id:0,key:"kf6.ikit.org",value:"https://kf6.ikit.org"},{id:1,key:"kf6-stage.ikit.org",value:"https://kf6-stage.ikit.org"},{id:2,key:"kf6-stage.rit.albany.edu",value:"https://kf6-stage.rit.albany.edu"},{id:3,key:"kf.rdc.nie.edu.sg",value:"https://kf.rdc.nie.edu.sg"},{id:4,key:"kf.rit.albany.edu",value:"https://kf6.rit.albany.edu"}],socketStatus:!1},Mt=Object(O.c)(Ct,(re={},Object(w.a)(re,mt,(function(e,t){e.token=t.payload,e.isAuthenticated=!!e.token})),Object(w.a)(re,At,(function(e,t){e.isAuthenticated=!!e.token})),Object(w.a)(re,pt,(function(e,t){e.currentLoginForm=t.payload})),Object(w.a)(re,bt,(function(e,t){e.communityId=t.payload})),Object(w.a)(re,ft,(function(e,t){e.currentServer=t.payload})),Object(w.a)(re,vt,(function(e,t){e.viewId=t.payload})),Object(w.a)(re,It,(function(e,t){e.userId=t.payload})),Object(w.a)(re,gt,(function(e,t){e.user=t.payload})),Object(w.a)(re,Et,(function(e,t){e.view=t.payload})),Object(w.a)(re,wt,(function(e,t){e.views=t.payload})),Object(w.a)(re,ht,(function(e,t){e.community=t.payload,e.communityId=t.payload._id,e.contextId=t.payload.rootContextId})),Object(w.a)(re,Nt,(function(e,t){e.community=Object(j.a)(Object(j.a)({},e.community),t.payload)})),Object(w.a)(re,jt,(function(e,t){e.communities=t.payload})),Object(w.a)(re,Ot,(function(e,t){e.userCommunities=t.payload})),Object(w.a)(re,yt,(function(e,t){e.author=t.payload})),Object(w.a)(re,kt,(function(e,t){e.socketStatus=t.payload})),re)),Tt=function(e){return function(t){return function(e){return S.a.get("".concat(M,"/authors/").concat(e,"/me"))}(e).then((function(e){t(yt(e.data))}))}},Zt=function(){return function(){var e=Object(A.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R();case 3:n=e.sent,t(It(n._id)),t(gt(n)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),sessionStorage.clear(),localStorage.clear(),window.location.replace("/");case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},Gt=function(e){return function(){var t=Object(A.a)(I.a.mark((function t(n){var a;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W(e);case 2:a=t.sent,n(wt(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Dt=function(e){return function(){var t=Object(A.a)(I.a.mark((function t(n){var a,r,o;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Je([])),n(vt(e)),t.next=4,P(e);case 4:return a=t.sent,r=a.communityId,n(Et(a)),n(st(a._id)),t.next=10,L(r);case 10:o=t.sent.data,n(ht(Object(j.a)({groups:[]},o))),n(lt(r)),n(Tt(r)),n(Gt(r)),n(se(r)),n(dt(r,a._id)),n(me(r,o.rootContextId)),n(ut(r));case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Rt=(n(109),n(87));function Lt(e,t,n){var a={userName:e,password:t};return fetch(n+"auth/local",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return 200!==e.status&&(console.log("Error: "+n+"auth/local"),console.log(e)),e.json()})).then((function(e){return[e,n]})).catch((function(e){return console.log("Error: "+n+"auth/local"),console.log(e),[{error:"Error: server unavailable"},n]}))}var xt=[{name:"IKIT Stage",url:"https://kf6-stage.ikit.org/"},{name:"Albany Stage",url:"https://kf6-stage.rit.albany.edu/"},{name:"IKIT",url:"https://kf6.ikit.org/"},{name:"Albany",url:"https://kf6.rit.albany.edu/"},{name:"Singapore",url:"https://kf.rdc.nie.edu.sg/"}];function Yt(e){for(var t in xt)if(xt[t].url===e)return xt[t].name;return"Error: server "+e+" does not exist"}function Wt(e){for(var t in xt)if(xt[t].name===e)return xt[t].url;return"Error: server "+e+" does not exist"}function Vt(e){var t=localStorage.getItem("Username"),n=JSON.parse(localStorage.getItem(t));for(var a in n)if(n[a][0]===e)return n[a][1]}function zt(e,t,n){var a=[];document.getElementById("refreshCheckbox").checked&&localStorage.clear();var r=JSON.parse(localStorage.getItem(e));if(null==r)for(var o in xt)a.push(Lt(e,t,xt[o].url));else for(var i in r)a.push(Lt(e,t,r[i][0]));return Promise.all(a).then((function(t){return function(e,t,n){var a=!1,r="",o=[],i=JSON.parse(localStorage.getItem(e));for(var c in t)if(void 0!==t[c][0].token){var s=t[c][0].token,l=t[c][1];null===i&&!1===a||null!==i&&"active"===i[c][2]?o.push([l,s,"active"]):o.push([l,s,"inactive"]),a=!0}else{if(void 0!==t[c][0].message&&null!==i){var u=document.getElementById("uname").value,d=document.getElementById("pwd").value;return localStorage.removeItem(u),zt(u,d,n)}void 0!==t[c][0].message&&""===r||"This userName is not registered."===r&&"This password is not correct."===t[c][0].message?r=t[c][0].message:void 0!==t[c][0].error&&""===r&&(r=t[c][0].error)}return a?(localStorage.setItem("Username",e),localStorage.setItem(e,JSON.stringify(o)),1):(document.getElementById("errorMessage").style.display="visible",n.setState({errorMessage:r}),0)}(e,t,n)})).catch((function(e){console.log(e)}))}function Ft(){var e=localStorage.getItem("Username");if(e){var t,n=JSON.parse(localStorage.getItem(e)),a=Object(Rt.a)(n);try{for(a.s();!(t=a.n()).done;){var r=t.value;if("active"===r[2]&&""!==r[1])return r}}catch(o){a.e(o)}finally{a.f()}}return[null,null,null]}n(110);var Ut=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).inputChangeHandler=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(w.a)({},t,n))},a.formSubmitHandler=function(e){e.preventDefault();var t=a.state.uname,n=a.state.pwd;return document.getElementById("errorMessage").style.display="hidden",zt(t,n,Object(b.a)(a)).then((function(e){1===e&&(a.props.setGlobalToken(Ft()[1]),a.props.history.push("/dashboard"))})),!1},a.openSignUpForm=function(e){a.props.setCurrentLoginForm("SignUp")},a.state={uname:null,pwd:null,errorMessage:null},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){Ne()('[data-toggle="tooltip"]').tooltip(),Ne()('[data-toggle="popover"]').popover(),Ne()(window).width()<=768&&document.getElementById("popover").setAttribute("data-trigger","focus")}},{key:"render",value:function(){return r.a.createElement("div",{className:"row login-form-row"},r.a.createElement("div",{className:"col-lg-8 col-md-10 col-sm-12 login-form-wrapper"},r.a.createElement("h1",null,"knowledgeforum.org"),r.a.createElement("form",{onSubmit:this.formSubmitHandler,className:"loginForm",id:"loginForm",autoComplete:"on"},r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-user"}),r.a.createElement("input",{type:"text",id:"uname",name:"uname",placeholder:"Username",required:!0,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-lock"}),r.a.createElement("input",{type:"password",id:"pwd",name:"pwd",placeholder:"Password",required:!0,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"login-checkbox-wrapper"},r.a.createElement("input",{type:"checkbox",id:"refreshCheckbox",name:"refreshCheckbox"}),r.a.createElement("label",{htmlFor:"refreshCheckbox"},"Refresh my servers on login?"),r.a.createElement("span",{id:"popover",tabIndex:"0",role:"button","data-toggle":"popover","data-trigger":"hover","data-content":"Check this box if you have registered to any new knowledge forums servers since your last login."},r.a.createElement("i",{className:"far fa-question-circle"}))),r.a.createElement("div",null,r.a.createElement("p",{style:{display:"hidden",color:"red"},id:"errorMessage",name:"errorMessage"},this.state.errorMessage)),r.a.createElement("input",{className:"login-button",type:"submit",value:"Login"})),r.a.createElement("p",{className:"login-create-account-p",onClick:this.openSignUpForm},"Don't have an account? Sign up ",r.a.createElement("i",{className:"far fa-arrow-alt-circle-right"}))))}}]),n}(a.Component),Bt={setGlobalToken:mt,setCurrentLoginForm:pt},Pt=Object(g.d)(l.g,Object(u.b)(null,Bt))(Ut),Jt=n(46),Qt=n(174),Ht=(n(223),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).inputChangeHandler=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(w.a)({},t,n))},a.serverSelectHandler=function(e){e.value===Wt("Singapore")?a.setState({singaporeSelected:!0}):a.setState({singaporeSelected:!1}),a.setState({server:e.value})},a.formSubmitHandler=function(e){return e.preventDefault(),null===a.state.server?a.setState({errorMessage:"Please select a server."}):!1===/^[a-zA-Z][.0-9a-zA-Z@_-]{1,100}$/.test(a.state.username)?a.setState({errorMessage:["Username must meet the following requirements:",r.a.createElement("br",null),"1. Start with a letter",r.a.createElement("br",null),"2. Not contain any white spaces",r.a.createElement("br",null),"3. Can only contain the special characters @._-"]}):a.state.password!==a.state.confirmPassword?a.setState({errorMessage:"Passwords do not match."}):function(e,t,n,a,r,o,i){var c;return c=null===i?{email:a,firstName:t,lastName:n,password:o,userName:r}:{email:a,firstName:t,lastName:n,password:o,registrationKey:i,userName:r},fetch(e+"api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(t){return 200!==t.status&&(console.log("Error: "+e+"api/users"),console.log(t)),t.json()})).then((function(t){return[t,e]})).catch((function(t){return[{error:"Error: server unavailable"},e]}))}(a.state.server,a.state.firstname,a.state.lastname,a.state.email,a.state.username,a.state.password,a.state.registrationKey).then((function(e){if(e[0]&&void 0!==e[0].token)localStorage.setItem("Username",a.state.username),localStorage.setItem(a.state.username,JSON.stringify([[e[1],e[0].token,"active"]])),a.props.setGlobalToken(e[0].token),a.props.history.push("/dashboard");else{var t=e[0].message||e[0].error||e[0].errorCode||e[0];a.setState({errorMessage:t})}})),!1},a.openLoginForm=function(e){a.props.setCurrentLoginForm("Login")},a.verifyRecaptcha=function(e){null===e?a.setState({recaptchaVerified:!1}):a.setState({recaptchaVerified:!0})},a.state={server:null,firstname:null,lastname:null,email:null,username:null,password:null,confirmPassword:null,registrationKey:null,errorMessage:null,singaporeSelected:!1,recaptchaVerified:!1},a}return Object(h.a)(n,[{key:"render",value:function(){var e,t;return e=this.state.singaporeSelected?r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-lock"}),r.a.createElement("input",{type:"text",id:"registrationKey",name:"registrationKey",placeholder:"Singapore Account Creation Key",required:!0,onChange:this.inputChangeHandler})):r.a.createElement(Qt.a,{sitekey:"6LdTo2oaAAAAALKB-WW7km7SabLVsBXSg4NAaX_K",onChange:this.verifyRecaptcha}),t=!0===this.state.recaptchaVerified&&!this.state.singaporeSelected||this.state.singaporeSelected&&null!==this.state.registrationKey?r.a.createElement("input",{className:"login-button",type:"submit",value:"Create Account"}):r.a.createElement("input",{className:"login-button login-disabled",type:"submit",value:"Create Account",disabled:!0}),r.a.createElement("div",{className:"row login-form-row"},r.a.createElement("div",{className:"col-lg-8 col-md-10 col-sm-12 login-form-wrapper"},r.a.createElement("h1",null,"knowledgeforum.org"),r.a.createElement("form",{onSubmit:this.formSubmitHandler,className:"loginForm",id:"loginForm",autoComplete:"on"},r.a.createElement("div",{className:"login-input-wrapper signup-select-server"},r.a.createElement("i",{className:"fas fa-server"}),r.a.createElement("div",{className:"select-container"},r.a.createElement(Jt.a,{placeholder:"Select a Server",options:xt.map((function(e){return{value:e.url,label:e.name}})),onChange:this.serverSelectHandler,className:"basic-multi-select",classNamePrefix:"select"})),r.a.createElement("div",{className:"clearFix"})),r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-user"}),r.a.createElement("input",{type:"text",id:"firstname",name:"firstname",placeholder:"First Name",required:!0,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-user"}),r.a.createElement("input",{type:"text",id:"lastname",name:"lastname",placeholder:"Last Name",required:!0,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-envelope"}),r.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"Email",required:!0,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-user"}),r.a.createElement("input",{type:"text",id:"username",name:"username",placeholder:"Username",minLength:"3",maxLength:"49",required:!0,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-lock"}),r.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Password",minLength:"4",required:!0,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-lock"}),r.a.createElement("input",{type:"password",id:"confirmPassword",name:"confirmPassword",placeholder:"Confirm Password",required:!0,onChange:this.inputChangeHandler})),e,r.a.createElement("div",null,r.a.createElement("p",{style:{color:"red"},id:"errorMessage",name:"errorMessage"},this.state.errorMessage)),t),r.a.createElement("p",{className:"login-create-account-p",onClick:this.openLoginForm},"Already have an account? Login ",r.a.createElement("i",{className:"far fa-arrow-alt-circle-right"}))))}}]),n}(a.Component)),Xt={setGlobalToken:mt,setCurrentLoginForm:pt},_t=Object(g.d)(l.g,Object(u.b)(null,Xt))(Ht),Kt=n(73),qt=n.n(Kt),$t=n(123),en=n.n($t),tn=n(156),nn=n.n(tn),an=n(157),rn=n.n(an),on=n(158),cn=n.n(on);function sn(e,t,n){return fetch(t+"api/objects/"+n,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return 200!==e.status&&(console.log("Error: "+t+"api/objects/"+n),console.log(e)),e.json()})).then((function(e){return e})).catch((function(e){return e}))}function ln(e,t,n,a){var r,o,i=pn(t._to.authors[0],a),c=hn(t.created);return void 0===t._to.data?(r=n.includes(t.to)?"read-note":"unread-note",o="note"):(r=n.includes(t.to)?"read-riseabove":"unread-riseabove",o="riseabove"),{group:"nodes",data:{id:e,name:t._to.title,author:i,date:c,kfId:t.to,type:o},classes:r,position:{x:t.data.x,y:t.data.y}}}function un(e,t,n,a,r){var o=pn(a._to.authors[0],r),i=hn(a.created),c=bn(n,a.to);return sn(t,e,a.to).then((function(t){if("image"===String(t.data.type).substring(0,5)){var n=(e+String(t.data.url).substring(1)).replace(/\s/g,"%20");"gif"===String(t.data.type).slice(-3)&&(n=n.substring(0,n.length-3)+"mp4");var r={x:a.data.x||0,y:a.data.y||0,width:a.data.width||0,height:a.data.height||0};return{url:n,name:a._to.title,bounds:r,locked:!1}}return{group:"nodes",data:{id:c,name:a._to.title,author:o,date:i,kfId:a.to,type:a._to.type,download:e+t.data.url.substring(1)},classes:"attachment",position:{x:a.data.x,y:a.data.y}}}))}function dn(e,t,n,a,r){return sn(t,e,a.to).then((function(e){var t=(new DOMParser).parseFromString(e.data.svg,"image/svg+xml"),n=t.childNodes[0].attributes.width.value/t.childNodes[0].attributes.height.value,r=parseInt(a.data.width)/n,o={x:a.data.x,y:a.data.y,height:r,width:parseInt(a.data.width)};return{url:"data:image/svg+xml;utf8,"+encodeURIComponent('<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg>'+e.data.svg),name:a._to.title,bounds:o,locked:!1}}))}function mn(e,t){return{group:"nodes",data:{id:bn(e,t.to),name:t._to.title,kfId:t.to,type:t._to.type,communityId:t.communityId},classes:"view",position:{x:t.data.x,y:t.data.y}}}function pn(e,t){for(var n in t)if(e===t[n]._id)return t[n].firstName+" "+t[n].lastName;return"Author not found"}function hn(e){var t=e.substring(0,4),n=e.substring(5,7),a=e.substring(8,10),r=e.substring(11,13),o=e.substring(14,16),i=e.substring(17,19);return r<12?n+"/"+a+"/"+t+", "+r+":"+o+":"+i+" AM":n+"/"+a+"/"+t+", "+(r-12)+":"+o+":"+i+" PM"}function bn(e,t){return e.has(t)?(e.set(t,e.get(t)+1),t+"-"+e.get(t)):(e.set(t,1),t+"-1")}n(229),n(230);var fn=n(159),vn=n.n(fn),gn=n(160),En=n.n(gn),yn=n(161),wn=n.n(yn),Nn=n(162),In=n.n(Nn),An=n(163),jn=n.n(An),On=n(164),kn=n.n(On);qt.a.use(nn.a),qt.a.use(rn.a),qt.a.use(cn.a);var Sn=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={elements:{nodes:[],edges:[]}},a.loadElements=a.loadElements.bind(Object(b.a)(a)),a.supportImageIsDuplicate=a.supportImageIsDuplicate.bind(Object(b.a)(a)),a.compareSupportImages=a.compareSupportImages.bind(Object(b.a)(a)),a.findCyElemFromKfId=a.findCyElemFromKfId.bind(Object(b.a)(a)),a.focusRecentAddition=a.focusRecentAddition.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"loadElements",value:function(e){var t=this;if((0!==this.props.viewLinks.length||0===this.props.viewLinks.length&&void 0!==e)&&0!==this.props.buildsOn.length&&0!==Object.keys(this.props.authors).length){var n=this.cy.supportimages(),a=new Map;n._private.supportImages=[];var r=function(e,t,n,a,r,o){for(var i=[],c=0;c<a.length;c++){var s=bn(n,a[c].to);"Note"===a[c]._to.type&&""!==a[c]._to.title&&"active"===a[c]._to.status?i.push(ln(s,a[c],r,o)):"Attachment"===a[c]._to.type&&""!==a[c]._to.title&&"active"===a[c]._to.status?i.push(un(e,t,n,a[c],o)):"Drawing"===a[c]._to.type&&""!==a[c]._to.title&&"active"===a[c]._to.status?i.push(dn(e,t,n,a[c],o)):"View"===a[c]._to.type&&""!==a[c]._to.title&&"active"===a[c]._to.status&&i.push(mn(n,a[c]))}return i}(this.props.server,this.props.token,a,this.props.viewLinks,this.props.readLinks,this.props.authors),o=function(e,t){for(var n=[],a=0;a<t.length;a++){var r=t[a];if("Note"===r._to.type&&"active"===r._to.status&&""!==r._to.title&&"Note"===r._from.type&&"active"===r._from.status&&""!==r._from.title){var o=e.get(r.from),i=e.get(r.to);if("undefined"!==o&&"undefined"!==i)for(var c=0;c<o;c++)for(var s=0;s<i;s++)n.push({group:"edges",data:{id:r._id+"-"+(parseInt(c)+1)+(parseInt(s)+1),source:r.from+"-"+(parseInt(c)+1),target:r.to+"-"+(parseInt(s)+1)}});else console.log(r.from+" fromCount: "+o+"\n"+r.to+" toCount: "+i)}}return n}(a,this.props.buildsOn),i=this;Promise.all(r.concat(o)).then((function(a){for(var r={nodes:[],edges:[]},o=0;o<a.length;o++)"nodes"===a[o].group?r.nodes.push(a[o]):"edges"===a[o].group?r.edges.push(a[o]):a[o].url&&!t.supportImageIsDuplicate(n.images(),a[o])&&n.addSupportImage(a[o]);i.setState({elements:r}),t.props.viewLinks.length===e+1&&t.focusRecentAddition(t.props.viewLinks[t.props.viewLinks.length-1])}))}}},{key:"supportImageIsDuplicate",value:function(e,t){for(var n in e)if(this.compareSupportImages(e[n],t))return!0;return!1}},{key:"compareSupportImages",value:function(e,t){return e.bounds.height===t.bounds.height&&e.bounds.width===t.bounds.width&&e.bounds.x===t.bounds.x&&e.bounds.y===t.bounds.y&&e.name===t.name&&e.url===t.url}},{key:"findCyElemFromKfId",value:function(e){for(var t=this.state.elements.nodes,n=t.length-1;n>=0;n--)if(t[n].data.kfId===e)return t[n];return null}},{key:"focusRecentAddition",value:function(e){var t=this.cy,n=e.to,a=this.findCyElemFromKfId(n);null!==a&&(t.center(a),t.$("#"+a.data.id).flashClass("recentAddition",1e4))}},{key:"componentDidMount",value:function(){var e=this,t=this.cy,n={zoomFactor:.05,zoomDelay:45,minZoom:.75,maxZoom:2,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit:function(){return!1},fitAnimationDuration:1e3,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"};t.panzoom(n),t.nodeHtmlLabel([{query:"node",halign:"center",valign:"bottom",halignBox:"right",valignBox:"bottom",cssClass:"cytoscape-label",tpl:function(e){return"note"===e.type||"riseabove"===e.type||"Attachment"===e.type?"<div>"+e.author+"<br>"+e.date+"</div>":""}}]),this.loadElements();var a=this;t.on("tap","node",(function(e){var t=this.data("kfId"),n=this.data("type");this.hasClass("image")?console.log("image"):this.hasClass("attachment")?console.log("attachment"):this.hasClass("view")?a.props.onViewClick(t):"riseabove"===n?(this.removeClass("unread-riseabove"),this.addClass("read-riseabove")):"note"===n&&(a.props.onNoteClick(t),this.removeClass("unread-note"),this.addClass("read-note"))})),t.on("dragfree","node",(function(t){var n=t.target.position(),a=n.x,r=n.y,o=t.target.data().kfId,i=e.props.viewLinks.filter((function(e){return e.to===o}));if(i.length){i=i[0];var c={x:a,y:r},s=Object(j.a)({},i);s.data=Object(j.a)(Object(j.a)({},s.data),c),e.props.updateViewLink(s)}}))}},{key:"componentDidUpdate",value:function(e,t){this.props.viewId===e.viewId&&this.props.buildsOn===e.buildsOn&&this.props.authors===e.authors&&this.props.viewLinks===e.viewLinks&&this.props.readLinks===e.readLinks||this.loadElements(e.viewLinks.length)}},{key:"render",value:function(){var e=this;return r.a.createElement(en.a,{cy:function(t){e.cy=t},style:{width:"100%",height:"100%"},elements:en.a.normalizeElements(this.state.elements),stylesheet:[{selector:"node",style:{label:"data(name)","font-size":"11px","text-halign":"right","text-valign":"center","text-margin-x":"-5",padding:"0","background-opacity":"0","background-clip":"none","background-width":"15px","background-height":"15px"}},{selector:"edge",style:{width:1,"line-color":"#29648f","target-arrow-color":"#29648f","target-arrow-shape":"triangle","curve-style":"bezier"}},{selector:".unread-note",style:{"background-image":[vn.a]}},{selector:".read-note",style:{"background-image":[En.a]}},{selector:".unread-riseabove",style:{"background-image":[wn.a]}},{selector:".read-riseabove",style:{"background-image":[In.a]}},{selector:".attachment",style:{"background-image":[jn.a]}},{selector:".view",style:{"background-image":[kn.a]}},{selector:".image",style:{label:""}},{selector:".drawing",style:{label:""}},{selector:".recentAddition",style:{"border-style":"solid","border-width":"2","border-color":"red"}}],layout:{name:"grid"},hideEdgesonViewport:!1,autolock:!1,wheelSensitivity:.15,minZoom:.75,maxZoom:2})}}]),n}(a.Component),Cn={updateViewLink:function(e){return function(){var t=Object(A.a)(I.a.mark((function t(n,a){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(e._id,e);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}},Mn=Object(u.b)((function(e,t){return{token:e.globals.token,server:e.globals.currentServer,viewId:e.globals.viewId,view:e.globals.view,author:e.globals.author,authors:e.users,viewNotes:e.notes.viewNotes,viewLinks:e.notes.viewLinks,readLinks:e.notes.readLinks,buildsOn:e.notes.buildsOn}}),Cn)(Sn),Tn=n(165),Zn=n.n(Tn),Gn=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={demoToken:null,demoServer:"https://kf6-stage.ikit.org/",demoCommunityId:"5ea995a6cbdc04a6f53a1b5c",demoViewId:"5ea995a7cbdc04a6f53a1b5f",showModal:!1},a.handleShow=a.handleShow.bind(Object(b.a)(a)),a.handleClose=a.handleClose.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"handleShow",value:function(){this.setState({showModal:!0});var e=this;(function(e,t,n){var a={userName:e,password:t};return fetch(n+"auth/local",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return 200!==e.status&&(console.log("Error: "+n+"auth/local"),console.log(e)),e.json()})).then((function(e){return e})).catch((function(e){return e}))})("demo1","demo1",this.state.demoServer).then((function(t){e.setState({demoToken:t.token})}))}},{key:"handleClose",value:function(){this.setState({showModal:!1})}},{key:"componentDidMount",value:function(){Ne()('[data-toggle="tooltip"]').tooltip(),Ne()('[data-toggle="popover"]').popover(),Ne()(window).width()<=768&&document.getElementById("popover").setAttribute("data-trigger","focus")}},{key:"render",value:function(){var e;return"Login"===this.props.currentLoginForm?e=r.a.createElement(Pt,null):"SignUp"===this.props.currentLoginForm&&(e=r.a.createElement(_t,null)),r.a.createElement("div",{className:"container-fluid login-main"},r.a.createElement("div",{className:"row login-row"},r.a.createElement("div",{className:"col-md-6 login-col login",id:"login"},e),r.a.createElement("div",{className:"col-md-6 login-about"},r.a.createElement("div",{className:"login-about-wrapper"},r.a.createElement("h1",null,"What is knowledgeforum.org?"),r.a.createElement("p",null,"A knowledge forum is an electronic group workspace designed to support the process of knowledge building. There are multiple installations of knowledge forums hosted by many universities and private entities all over the world. Knowledgeforum.org unites all of these installations and hence the stakeholders to help confluence knowledge building research, widen the reach of the tool & provide a central location for all global stakeholders."),r.a.createElement("div",{className:"login-overlay-container login-demo-image",onClick:this.handleShow,id:"demo-image-container"},r.a.createElement("img",{className:"d-block w-100",src:Zn.a,alt:"First slide"}),r.a.createElement("div",{className:"login-overlay"},r.a.createElement("div",{className:"login-overlay-text"},"Demo a Knowledge Forum"))),r.a.createElement(E.a,{dialogClassName:"login-modal-dialog",onHide:this.handleClose},r.a.createElement(E.a.Header,{closeButton:!0},r.a.createElement(E.a.Title,null,"Knowledge Forum Demo")),r.a.createElement(E.a.Body,{className:"login-modal-body"},r.a.createElement(Mn,{style:{width:"100%",height:"100%"},token:this.state.demoToken,server:this.state.demoServer,communityId:this.state.demoCommunityId,viewId:this.state.demoViewId})),r.a.createElement(E.a.Footer,null,r.a.createElement(y.a,{variant:"primary",onClick:this.handleClose,className:"login-modal-btn"},"Close")))))))}}]),n}(a.Component),Dn=Object(g.d)(l.g,Object(u.b)((function(e,t){return{currentLoginForm:e.globals.currentLoginForm}}),null))(Gn);function Rn(e,t){var n=Vt(e);(function(e,t){return fetch(t+"api/users/myRegistrations",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return 200!==e.status&&(console.log("Error: "+t+"api/users/myRegistrations"),console.log(e)),e.json()})).then((function(e){return e})).catch((function(e){return e}))})(n,e).then((function(e){e.sort((function(e,t){return Wn(e._community.title,t._community.title)})),function(e,t,n){for(var a=[],r=0;r<e.length;r++)e[r]&&e[r]._id&&a.push({title:e[r]._community.title,server:n.state.currentServerURL,token:n.state.token,communityId:e[r].communityId});n.setState({userCommunityData:a})}(e,0,t)})),function(e,t){return fetch(t+"api/users/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return 200!==e.status&&304!==e.status?(console.log("Error: "+t+"api/users/me"),console.log(e),{error:!0}):e.json()})).then((function(e){return e})).catch((function(e){return e}))}(n,e).then((function(e){!0===e.error?(alert("User authorization token expired"),xn()):(t.setState({name:e.firstName+" "+e.lastName}),t.setState({userId:e._id}))})),function(e,t){return fetch(t+"api/communities",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return 200!==e.status&&(console.log("Error: "+t+"api/communities"),console.log(e)),e.json()})).then((function(e){return e})).catch((function(e){return e}))}(n,e).then((function(e){e.sort((function(e,t){return Wn(e.title,t.title)})),function(e,t){for(var n=[],a=0;a<e.length;a++){var r=e[a].title,o=e[a]._id;n.push({title:r,communityId:o})}var i=n.map((function(e){return{value:e.communityId,label:e.title}}));t.setState({serverCommunityData:i})}(e,t)}))}function Ln(e,t,n,a,r){var o=Vt(t),i=r;(function(e,t,n,a,r){var o={communityId:t,registrationKey:r,userId:a};return fetch(n+"api/authors",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify(o)}).then((function(e){return 200!==e.status&&(console.log("Error: "+n+"api/authors"),console.log(e)),e.json()})).then((function(e){return[e,n]})).catch((function(e){return e}))})(o,a,t,e,n).then((function(e){e[0].error?(document.getElementById("communityKey").value="",i.setState({joinCommunityErrorMessage:"Registration key does not match or you are already registered."})):(document.getElementById("communityKey").value="",Rn(t,i))}))}function xn(e){var t=localStorage.getItem("Username"),n=JSON.parse(localStorage.getItem(t));if(null===t||null===n)localStorage.clear();else{for(var a in n)n[a][1]="";localStorage.setItem(t,JSON.stringify(n)),localStorage.removeItem("Username")}e.props.history.push("/")}function Yn(){var e=document.getElementById("wrapper");"d-flex"===e.className?e.className="d-flex toggled":e.className="d-flex"}function Wn(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}n(231);var Vn=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).inputChangeHandler=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(w.a)({},t,n))},a.serverSelectHandler=function(e){var t=e.target,n=e.target.innerText,r=Wt(e.target.innerText),o=JSON.parse(localStorage.getItem(a.state.username));a.setState({currentServerURL:Wt(n)}),a.setState({currentServerName:n}),Ne()(t).addClass("active").siblings().removeClass("active");var i=Wt(n),c=[];for(var s in o){var l=o[s][0],u=o[s][1],d=l===i?"active":"inactive";l===i&&a.setState({token:o[s][1]}),c.push([l,u,d])}localStorage.setItem(a.state.username,JSON.stringify(c)),Rn(r,Object(b.a)(a))},a.handleViewChange=function(e){a.setState({viewType:{value:e.value,label:e.label}})},a.handleCommunityDropDownChange=function(e){a.setState({selectedCommunityToJoin:{value:e.value,label:e.label}})},a.state={token:null,username:null,name:null,userId:null,currentServerURL:null,currentServerName:null,serverList:[],userCommunityData:[],serverCommunityData:[],selectedCommunityToJoin:null,communityRegistrationKey:null,joinCommunityErrorMessage:null,viewType:{value:"Classic",label:"Classic"}},a.enterCommunity=a.enterCommunity.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"enterCommunity",value:function(e){var t,n,a,r=(t=e.token,n=e.communityId,a=e.server,fetch(a+"api/communities/"+n+"/views",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){return 200!==e.status&&(console.log("Error: "+a+"api/communities/"+n+"/views"),console.log(e)),e.json()})).then((function(e){return e[0]})).catch((function(e){return e}))),o=this;r.then((function(t){if("Classic"===o.state.viewType.value){var n=document.createElement("a");n.href=e.server+"auth/jwt?token="+e.token+"&redirectUrl=/view/"+t._id,n.target="_blank",document.body.appendChild(n),n.click()}else"Enhanced"!==o.state.viewType.value&&"Light"!==o.state.viewType.value||(T(e.server),Z(e.token),sessionStorage.setItem("token",e.token),sessionStorage.setItem("communityId",e.communityId),sessionStorage.setItem("viewId",t._id),o.props.setGlobalToken(e.token),o.props.fetchLoggedUser(),o.props.setCommunityId(e.communityId),o.props.setViewId(t._id),o.props.setCurrentServer(e.server),o.props.history.push({pathname:"/view/".concat(t._id),state:{currentView:o.state.viewType.value,communityTitle:e.title}}))})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){!function(e){var t=localStorage.getItem("Username"),n=JSON.parse(localStorage.getItem(t)),a=[];e.setState({username:t});for(var r=0;r<n.length;r++){var o=Yt(n[r][0]);"active"===n[r][2]?(e.setState({currentServerURL:n[r][0]}),e.setState({currentServerName:Yt(n[r][0])}),e.setState({token:n[r][1]}),a.push({name:o,class:"active",url:n[r][0]}),Rn(n[r][0],e)):a.push({name:o,class:"",url:n[r][0]})}e.setState({serverList:a})}(this)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"d-flex",id:"wrapper"},r.a.createElement("div",{className:"sidebar-custom dashboard-sidebar-custom",id:"sidebar-wrapper"},r.a.createElement("h1",{className:"sidebar-heading dashboard-sidebar-heading"},"Your Servers:"),r.a.createElement("div",{className:"list-group list-group-flush"},r.a.createElement("ul",{className:"dashboard-server-list",id:"server-list"},this.state.serverList.map((function(t){return r.a.createElement("li",{key:t.name,onClick:e.serverSelectHandler,className:t.class},t.name)}))),r.a.createElement("div",{className:"dashboard-viewDropDownContainer"},r.a.createElement("p",null,"View Type:"),r.a.createElement(Jt.a,{isSearchable:!1,value:this.state.viewType,onChange:this.handleViewChange,options:[{value:"Classic",label:"Classic"},{value:"Enhanced",label:"Enhanced"},{value:"Light",label:"Light"}]})))),r.a.createElement("div",{id:"page-content-wrapper"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light border-bottom dashboard-navbar"},r.a.createElement("button",{className:"d-none d-md-block btn btn-primary dashboard-select-server",id:"menu-toggle",onClick:Yn},"Select Server"),r.a.createElement("button",{className:"d-md-none btn btn-primary dashboard-select-server",id:"menu-toggle",onClick:Yn},r.a.createElement("i",{className:"fas fa-server"})),r.a.createElement("div",{className:"dashboard-currentInfo",id:"currentInfo"},this.state.name,r.a.createElement("div",null),this.state.currentServerName),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav ml-auto mt-2 mt-lg-0"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{className:"nav-link dashboard-nav-link btn btn-link",href:"",id:"logout",onClick:function(){return xn(e)}},"Logout"))))),r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 dashboard-mainContentCol"},r.a.createElement("h1",null,"My Knowledge Building Communities"),r.a.createElement("table",{className:"dashboard-userCommunities table",id:"userCommunities"},r.a.createElement("tbody",null,this.state.userCommunityData.map((function(t){return r.a.createElement("tr",{key:t.communityId,onClick:function(){return e.enterCommunity(t)}},r.a.createElement("td",{className:"dashboard-userCommunities-row"},t.title,r.a.createElement("button",{className:"dashboard-enterButton",type:"button"},r.a.createElement("i",{className:"fas fa-door-open"}))))}))))),r.a.createElement("div",{className:"col-md-6 dashboard-mainContentCol"},r.a.createElement("h1",null,"Join Community"),r.a.createElement("form",{className:"col-lg-8 col-md-10 col-sm-12 dashboard-joinCommunityForm",id:"joinCommunityForm",autoComplete:"off"},r.a.createElement("label",{htmlFor:"server"},"Community:"),r.a.createElement("br",null),r.a.createElement(Jt.a,{value:this.state.selectedCommunityToJoin,className:"dashboard-communityChoiceDropdown",id:"communityChoiceDropdown",options:this.state.serverCommunityData,onChange:this.handleCommunityDropDownChange,required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"communityKey"},"Community Registration Key:"),r.a.createElement("br",null),r.a.createElement("input",{className:"dashboard-communityKeyInput",type:"text",id:"communityKey",name:"communityRegistrationKey",required:!0,onChange:this.inputChangeHandler}),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("p",{style:{color:"red"},id:"errorMessage"},this.state.joinCommunityErrorMessage)),r.a.createElement("input",{className:"dashboard-joinButton",type:"button",value:"Join",onClick:function(){return Ln(e.state.userId,e.state.currentServerURL,e.state.communityRegistrationKey,e.state.selectedCommunityToJoin.value,e)},id:"joinCommunityButton"})))))))}}]),n}(a.Component),zn={setGlobalToken:mt,setCurrentServer:ft,setCommunityId:bt,setViewId:vt,fetchLoggedUser:Zt},Fn=Object(u.b)(null,zn)(Vn),Un=n(316),Bn=n(317),Pn=n(175),Jn=n(322),Qn=n(309),Hn=n(168),Xn=n(305),_n=n(307),Kn=n(318),qn=n(308),$n=n(321),ea=n(178),ta=n(306),na=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).signUp=function(e){a.props.history.push("/signup")},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"logout",value:function(){sessionStorage.clear(),delete S.a.defaults.headers.common.Authorization,mt(null)}},{key:"handleChange",value:function(e){var t=e.target.value;this.props.onViewClick(t)}},{key:"render",value:function(){var e=this.props.isAuthenticated,t=this.props.user?"".concat(this.props.user.firstName," ").concat(this.props.user.lastName):null,n=this.props.location.pathname.startsWith("/view/");return r.a.createElement($n.a,{className:"viewNavBar"},r.a.createElement($n.a.Brand,{className:"viewNavBar-brand"},this.props.communityTitle),n?r.a.createElement(ea.a,{className:"mr-auto"},this.props.view?r.a.createElement(Xn.a,{className:"mrg-1-top"},r.a.createElement(ta.a,null,r.a.createElement(_n.a,null,r.a.createElement(qn.a,{type:"select",name:"viewId",value:this.props.view._id,onChange:this.handleChange},this.props.views.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id}," ",e.title," ")})))))):null):null,e?r.a.createElement(r.a.Fragment,null,r.a.createElement(ea.a,{className:"ml-auto"},r.a.createElement(ea.a.Link,{className:"white mr-auto"}," ",t," "),r.a.createElement(y.a,{className:"ml-2 viewNavBar-logout-btn",href:"/",onClick:this.logout},"Logout"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(ea.a,{className:"ml-auto"},r.a.createElement(ea.a.Link,{onClick:this.signUp},"Signup"),r.a.createElement(ea.a.Link,{href:"/"},"Login"))))}}]),n}(a.Component),aa={setViewId:vt,setGlobalToken:mt},ra=Object(l.g)(Object(u.b)((function(e,t){return{communityId:e.globals.communityId,viewId:e.globals.viewId,isAuthenticated:e.globals.isAuthenticated,user:e.globals.author,views:e.globals.views,view:e.globals.view}}),aa)(na)),oa=n(311),ia=n(312),ca=n(169),sa=n(323),la=(n(233),{private:{r:!0,w:!0},protected:{r:!1,w:!0},public:{r:!1,w:!1}}),ua=function(e,t){return da(e,t)||ma(e,t)},da=function(e,t){return e.authors.includes(t._id)},ma=function(e,t){return!!e._groupMembers&&e._groupMembers.includes(t._id)},pa=function(e,t){return function(e,t,n){return!(!e||!t)&&("manager"===t.role||(!1===la[e.permission][n]||ua(e,t)))}(e,t,"w")},ha=(Object(O.b)("ADD_NOTE"),Object(O.c)({},{}),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).noteList=[],a.handleSubmit=function(e){if(a.props.viewId===a.state.addView)a.setState({viewError:!0}),window.setTimeout((function(){a.setState({viewError:!1})}),1500);else{var t={x:1e3,y:1e3},n="".concat(M,"/links"),r={headers:{Authorization:"Bearer ".concat(a.state.token)}};a.props.checkedNotes.forEach((function(e){var n=a.props.viewLinks.filter((function(t){return t.to===e._id}))[0];t.x=Math.min(t.x,n.data.x),t.y=Math.min(t.y,n.data.y)})),a.props.checkedNotes.forEach((function(e){var o=e._id,i={from:a.state.addView,to:o,type:"contains",data:t};S.a.post(n,i,r).then((function(e){a.setState({visible:!0},(function(){window.setTimeout((function(){a.setState({visible:!1})}),1e3)}))}))}))}},a.handleRiseAbove=function(){var e=Object(A.a)(I.a.mark((function e(t){var n,r,o,i,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=a.props.checkedNotes.length)>0)){e.next=14;break}if(window.confirm("Are you sure to create riseabove using the selected "+n+" object(s)?")){e.next=5;break}return e.abrupt("return");case 5:return r=a.props.view,o=a.props.communityId,i=a.props.author._id,c=a.props.checkedNotes,e.next=11,a.props.createRiseAbove(r,o,i,c);case 11:a.props.fetchViewCommunityData(a.props.viewId),e.next=15;break;case 14:alert("Please select at least 1 note to create RiseAbove");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.editNote=function(e,t){a.props.openContribution(e,t)},a.getRiseAboveNotes=function(e){return a.props.riseAboveViewNotes[e]?a.props.riseAboveViewNotes[e].map((function(e){return a.props.riseAboveNotes[e]})):null},a.openNote=function(e){a.props.openContribution(e,"read")},a.state={token:sessionStorage.getItem("token"),addView:a.props.viewId,communityId:sessionStorage.getItem("communityId"),visible:!1,viewError:!1},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(b.a)(a)),a.handleRiseAbove=a.handleRiseAbove.bind(Object(b.a)(a)),a.getRiseAboveNotes=a.getRiseAboveNotes.bind(Object(b.a)(a)),a.openNote=a.openNote.bind(Object(b.a)(a)),a.editNote=a.editNote.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){}},{key:"handleChange",value:function(e){e.persist();var t=e.target.value;this.setState({addView:t})}},{key:"render",value:function(){var e=this,t=new Intl.DateTimeFormat("default",St);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xn.a,{className:"mrg-1-top"},r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,{md:"6"},r.a.createElement(_n.a,null,r.a.createElement(qn.a,{type:"select",name:"viewId",onChange:this.handleChange},this.props.views.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id}," ",e.title," ")}))))),r.a.createElement(Hn.a,{md:"3"},r.a.createElement(y.a,{onClick:this.handleSubmit},"Add to View")),r.a.createElement(Hn.a,{md:"3"},r.a.createElement(y.a,{onClick:this.handleRiseAbove},"create RiseAbove"))),r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,null,r.a.createElement(sa.a,{color:"danger",isOpen:this.state.viewError},"Please select a Different View."),r.a.createElement(sa.a,{color:"info",isOpen:this.state.visible},"Notes added to View!")))),this.props.checkedNotes.map((function(n,a){var o,i,c,s=e.getRiseAboveNotes(n._id);if(s&&(o=r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,{className:"pd-1-left"},r.a.createElement(Qn.a,{className:"sz-1 primary-800 font-weight-bold"},"RiseAbove Notes"),s.map((function(t,n){return r.a.createElement(Qn.a,{key:n},r.a.createElement(y.a,{variant:"light",className:"min-width-10 rounded-pill pd-05",onClick:function(){return e.openNote(t._id)}},t.title))}))))),e.props.query&&n.data.English){var l=n.data.English,u=l.indexOf(e.props.query);u>=0&&(i=l.substring(0,u)+"<span class='highlight'>"+l.substring(u,u+e.props.query.length)+"</span>"+l.substring(u+e.props.query.length))}else if(e.props.query&&n.data.body){var d=n.data.body,m=d.indexOf(e.props.query);m>=0&&(i=d.substring(0,m)+"<span class='highlight'>"+d.substring(m,m+e.props.query.length)+"</span>"+d.substring(m+e.props.query.length))}else i=n.data.English?n.data.English:n.data.body;for(;i&&i.includes('src="/attachments');)i=i.replace('src="/attachments','src="'+C+"/attachments");return c=!0===pa(n,e.props.author)?r.a.createElement(y.a,{className:"float-right",variant:"outline-info",onClick:function(){return e.editNote(n._id,"write")}},"Edit Note"):r.a.createElement(y.a,{className:"float-right",variant:"outline-info",onClick:function(){return e.editNote(n._id,"read")}},"Read Note"),r.a.createElement(Qn.a,{className:"min-height-2 mrg-05 border rounded mrg-1-bot pd-1",key:a},r.a.createElement(Hn.a,null,r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,{md:"10",className:"pd-1 primary-800 font-weight-bold"},n.title),r.a.createElement(Hn.a,{md:"2"},r.a.createElement(y.a,{variant:"outline-secondary",className:"circular-border float-right",onClick:function(){return e.props.updateCheckedNotes({checked:!1,noteId:n._id})}},r.a.createElement("i",{className:"fas fa-times"})))),r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,null,r.a.createElement("span",{className:"pd-1",dangerouslySetInnerHTML:{__html:i||(n.data.English?n.data.English:n.data.body)}}))),o,r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,null,r.a.createElement(Hn.a,null,r.a.createElement("div",{className:"primary-600 sz-075 pd-05 float-left"},e.props.users[n.authors[0]].firstName+" "+e.props.users[n.authors[0]].lastName," \xa0 ",t.format(new Date(n.created)))),r.a.createElement(Hn.a,null,r.a.createElement(y.a,{className:"float-right mrg-1-left",variant:"outline-info",onClick:function(){return e.props.buildOn(n._id)}},"BuildOn")),r.a.createElement(Hn.a,null,c)))))})))}}]),n}(a.Component)),ba={openContribution:ct,updateCheckedNotes:Qe,createRiseAbove:function(e,t,n,a){return function(r){var o,i,c={},s=e._id;c.authors=n.split(","),c.communityId=t,c.permission=e.permission?e.permission:"public",c.status="active",c.title="riseabove:",c.type="View",c._groupMembers=e._groupMembers,console.log("OBJECT",c),H(t,c).then((function(n){o=n._id,console.log("Response",n);var r={};r.authors=c.authors,r.buildson=null,r.communityId=t,r.data={body:""},r.langInNote=[],r.permission="protected",r.status="unsaved",r.title="",r.type="Note",r._groupMembers=e._groupMembers,console.log("NOTE",r),H(t,r).then((function(e){console.log("noteResponse",e),i=e._id,e.data={body:"",riseabove:{viewId:"".concat(o)}},e.status="active",e.title="Riseabove",console.log("noteResponse noteResponse",e),J(e,t,i).then((function(e){F(s,i,"contains",{x:200,y:200}).then((function(e){a.forEach((function(e){F(o,e._id,"contains",{x:20,y:20}).then((function(t){var n;(n=e._id,S.a.get("".concat(M,"/links/either/").concat(n))).then((function(e){var t=e.data.filter((function(e){return e.from.includes(s)}));U(t[0]._id)}))}))}))}))}))})).catch((function(e){console.log("error",e)}))})).catch((function(e){console.log("Error",e)}))}},fetchViewCommunityData:Dt},fa=Object(u.b)((function(e,t){var n=e.notes.viewNotes,a=e.users;return{viewId:e.globals.viewId,views:e.globals.views,view:e.globals.view,checkedNotes:e.notes.checkedNotes.map((function(t){return t in n?n[t]:e.notes.riseAboveNotes[t]})),viewLinks:e.notes.viewLinks,author:e.globals.author,communityId:e.globals.communityId,riseAboveViewNotes:e.notes.riseAboveViewNotes,riseAboveNotes:e.notes.riseAboveNotes,users:a}}),ba)(ha),va=n(310),ga=n(320),Ea=function(e,t){var n="";return n+=" ",n+=t?'<span class="kfSupportStartMark kfTemplateStartMark"> &nbsp; </span>':'<span class="kfSupportStartMark"> &nbsp; </span>',n+=" ",n=t?n+'<span class="kfSupportStartLabel kfTemplateStartLabel">'+e+"</span>":n+'<span class="kfSupportStartLabel">'+e+"</span>",n+=" "},ya=function(e){var t="";return t+=" ",t+=e?'<span class="kfSupportEndMark kfTemplateEndMark"> &nbsp; </span>':'<span class="kfSupportEndMark"> &nbsp; </span>',t+=" "},wa=function(e,t,n,a){return function(r){var o=(new Date).getTime().toString(),i='<span id="'+o+'"></span>'+r;a&&(i=" -&nbsp;"+i+"&nbsp;- ");var c="";return c+="<br>",c+="&nbsp;&nbsp;",c=n?c+'<span id="'+e+'" class="KFSupportStart KFTemplateStart mceNonEditable">':c+'<span id="'+e+'" class="KFSupportStart mceNonEditable">',c+=Ea(t,n),c+="</span>",n&&(c+='<p class="kfTemplateContent">',c+="<br><br><br><br>"),c+=i,n&&(c+="</p>"),c=n?c+'<span id="'+e+'" class="KFSupportEnd KFTemplateEnd mceNonEditable">':c+'<span id="'+e+'" class="KFSupportEnd mceNonEditable">',c+=ya(n),c+="</span>",c+="&nbsp;&nbsp;",{tag:c+="<br>",supportContentId:o}}},Na=(n(241),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).scaffoldSelected=function(e,t){if(a.props.returnSupport)a.props.onScaffoldSelected(t);else{var n=a.props.items[e],r=!0,o="",i=n.data&&n.data.isTemplate;i&&(r=!1,o="<br><br>");var c=t._to.title,s=wa(t.to,c,i,r);a.props.onScaffoldSelected(s,o)}},a.state={selected:e.initVal},a.onSelectChange=a.onSelectChange.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){if(!this.props.fetched){var e=this.props,t=e.communityId,n=e.contextId;this.props.fetchScaffolds(t,n)}}},{key:"onSelectChange",value:function(e){this.setState({selected:e.target.value})}},{key:"render",value:function(){var e=this,t=this.props.items,n=t.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.title)})),a="";return t.length&&t[this.state.selected].supports&&(a=t[this.state.selected].supports.map((function(t,n){return r.a.createElement(Hn.a,{className:"mt-1 p-0",key:n,md:12},r.a.createElement("div",{className:"KFSupportButton",size:"sm",onClick:function(){return e.scaffoldSelected(e.state.selected,t)}},t._to.title))}))),r.a.createElement(va.a,null,r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,{className:"p-0"},r.a.createElement(ga.a,null,r.a.createElement(ga.a.Group,{className:"mb-1",controlId:"exampleForm.ControlSelect2"},r.a.createElement(ga.a.Control,{className:"scaffold-select-input",size:"sm",as:"select",onChange:this.onSelectChange},n))))),r.a.createElement(Qn.a,null,a))}}]),n}(r.a.Component)),Ia={fetchScaffolds:me},Aa=Object(u.b)((function(e,t){return Object(j.a)({communityId:e.globals.communityId,contextId:e.globals.contextId},e.scaffolds)}),Ia)(Na),ja=n(167),Oa=n(66),ka=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).buildOn=function(e){a.props.newNote(a.props.view,a.props.communityId,a.props.authorObj._id,e)},a.editNote=function(e,t){a.props.openContribution(e,t)},a.setOpen=function(e){a.setState((function(e){return{open:!e.open}}))},a.checkNote=function(e,t){a.props.updateCheckedNotes({noteId:t,checked:e.target.checked})},a.updateNoteMobile=function(e,t){a.setState({isCheckedMobile:e.target.checked})},a.state={note:{},showNote:!1,open:!1,riseAboveData:{},isCheckedMobile:!1},a.checkNote=a.checkNote.bind(Object(b.a)(a)),a.editNote=a.editNote.bind(Object(b.a)(a)),a.buildOn=a.buildOn.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){for(var e,t,n=this,a=this.props.children&&0!==Object.keys(this.props.children).length,o=this.state.open?"fa-chevron-down":"fa-chevron-right",i=new Intl.DateTimeFormat("default",St),c=this.props.note.data.body;c.includes('src="/attachments');)c=c.replace('src="/attachments','src="'+C+"/attachments");return t=!0===pa(this.props.note,this.props.authorObj)?r.a.createElement(y.a,{className:"float-right",variant:"outline-info",onClick:function(){return n.editNote(n.props.note._id,"write")}},"Edit Note"):r.a.createElement(y.a,{className:"float-right",variant:"outline-info",onClick:function(){return n.editNote(n.props.note._id,"read")}},"Read Note"),this.state.isCheckedMobile&&(e=r.a.createElement("div",null,r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,null,r.a.createElement(Qn.a,{dangerouslySetInnerHTML:{__html:c}}),r.a.createElement(Qn.a,null,r.a.createElement(y.a,{className:"float-right mrg-1-left mrg-1-right",variant:"outline-info",onClick:function(){return n.buildOn(n.props.note._id)}},"BuildOn"),t))))),r.a.createElement(r.a.Fragment,null,r.a.createElement(Oa.Breakpoint,{medium:!0,up:!0},r.a.createElement("div",null,r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,{className:"mr-auto rounded"},r.a.createElement(Qn.a,{className:"pd-05"},r.a.createElement(Hn.a,{md:"10",className:"primary-800 font-weight-bold"},a?r.a.createElement(y.a,{variant:"link",onClick:function(){return n.setOpen(!n.open)},"aria-controls":"example-collapse-text","aria-expanded":this.state.open},r.a.createElement("i",{className:"fa ".concat(o)})):null,this.props.note.title),r.a.createElement(Hn.a,{md:"2"},r.a.createElement(Xn.a,{className:"mrg-1-min pd-2-right"},r.a.createElement(_n.a,null,r.a.createElement(qn.a,{type:"checkbox",checked:this.props.isChecked,ref:this.props.note._id,onChange:function(e){return n.checkNote(e,n.props.note._id)}}))))),r.a.createElement(Qn.a,{className:"primary-600 sz-075 pd-05"},r.a.createElement(Hn.a,null,r.a.createElement("span",null," ",this.props.author," "),"\xa0 ",i.format(new Date(this.props.note.created))),r.a.createElement(Hn.a,{md:"2"})),this.props.children?r.a.createElement(ja.a,{in:this.state.open},r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,{md:"1"}),r.a.createElement(Hn.a,{md:"11"},r.a.createElement(Ta,{hierarchy:this.props.children})))):null)))),r.a.createElement(Oa.Breakpoint,{small:!0,down:!0},r.a.createElement("div",null,r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,{className:"mr-auto rounded"},r.a.createElement(Qn.a,{className:"pd-05"},r.a.createElement(Hn.a,{md:"10",className:"primary-800 font-weight-bold"},a?r.a.createElement(y.a,{variant:"link",onClick:function(){return n.setOpen(!n.open)},"aria-controls":"example-collapse-text","aria-expanded":this.state.open},r.a.createElement("i",{className:"fa ".concat(o)})):null,this.props.note.title),r.a.createElement(Hn.a,{md:"2"},r.a.createElement(Xn.a,{className:"mrg-1-min pd-2-right"},r.a.createElement(_n.a,null,r.a.createElement(qn.a,{type:"checkbox",checked:this.state.isCheckedMobile,ref:this.props.note._id,onChange:function(e){return n.updateNoteMobile(e,n.props.note)}}))))),r.a.createElement(Qn.a,{className:"primary-600 sz-075 pd-05"},r.a.createElement(Hn.a,null,r.a.createElement("span",null," ",this.props.author," "),"\xa0 ",i.format(new Date(this.props.note.created))),r.a.createElement(Hn.a,{md:"2"})),this.props.children?r.a.createElement(ja.a,{in:this.state.open},r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,{md:"1"}),r.a.createElement(Hn.a,{md:"11"},r.a.createElement(Ta,{hierarchy:this.props.children})))):null)),e)))}}]),n}(a.Component),Sa={updateCheckedNotes:Qe,openContribution:ct,newNote:rt},Ca=Object(u.b)((function(e,t){var n=e.users[t.note.authors[0]];return{author:n&&"".concat(n.firstName," ").concat(n.lastName)||"NA",isChecked:e.notes.checkedNotes.includes(t.note._id),riseAboveViewNotes:e.notes.riseAboveViewNotes,riseAboveNotes:e.notes.riseAboveNotes,view:e.globals.view,communityId:e.globals.communityId,authorObj:e.globals.author}}),Sa)(ka),Ma=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).getNotes=a.getNotes.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){}},{key:"getNotes",value:function(){var e=[];for(var t in this.props.hierarchy)t in this.props.notes&&e.push(this.props.notes[t]);return e.sort((function(e,t){return new Date(t.created)-new Date(e.created)}))}},{key:"render",value:function(){var e=this,t=this.props.noteLinks||this.getNotes();return r.a.createElement(r.a.Fragment,null,t.map((function(t,n){var a=e.props.hierarchy&&e.props.hierarchy[t._id].children;return r.a.createElement("div",{key:n,className:"shadow p-1 mb-1 rounded"},r.a.createElement(Ca,{note:t,children:a,notes:e.props.notes}))})))}}]),n}(a.Component),Ta=Object(u.b)((function(e,t){return{notes:e.notes.viewNotes,riseAboveNotes:e.notes.riseAboveNotes}}),{})(Ma),Za=(n(139),n(242),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).onScaffoldSelected=function(e){a.setState({filteredData:a.filterResults(e.to)})},a.handleInputChange=function(e){var t=e.target.value;a.setState({query:t,filteredData:a.filterResults(t)})},a.handleFilter=function(e){var t=e.target.value;a.setState({filter:t,query:""})},a.buildOn=function(e){a.props.newNote(a.props.view,a.props.communityId,a.props.author._id,e)},a.state={showView:!1,showRiseAbove:!1,query:"",filteredData:[],filter:"title",hideScaffold:!0},a.getBuildOnHierarchy=a.getBuildOnHierarchy.bind(Object(b.a)(a)),a.onCloseDialog=a.onCloseDialog.bind(Object(b.a)(a)),a.onConfirmDrawDialog=a.onConfirmDrawDialog.bind(Object(b.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(b.a)(a)),a.filterResults=a.filterResults.bind(Object(b.a)(a)),a.getScaffoldSupports=a.getScaffoldSupports.bind(Object(b.a)(a)),a.clearSearch=a.clearSearch.bind(Object(b.a)(a)),a.onScaffoldSelected=a.onScaffoldSelected.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"getBuildOnHierarchy",value:function(){var e={};for(var t in this.props.viewNotes)e[t]={children:{}};this.props.buildsOn.forEach((function(t){var n=t.to,a=t.from;n in e||(e[n]={children:{}}),a in e?e[a].parent=n:e[a]={parent:n,children:{}},e[n].children[a]=e[a]}));for(var n={},a=0,r=Object.entries(e);a<r.length;a++){var o=Object(c.a)(r[a],2),i=o[0],s=o[1];"parent"in s||(n[i]=s)}return n}},{key:"getScaffoldSupports",value:function(){var e=[];return this.props.scaffolds.forEach((function(t){e=[].concat(Object(pe.a)(e),Object(pe.a)(t.supports))})),e}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e,t){}},{key:"newRiseAbove",value:function(){this.setState({showView:!1,showModel:!0})}},{key:"onConfirmDrawDialog",value:function(e){this.props.addDrawing(e),this.props.closeDrawDialog()}},{key:"onCloseDialog",value:function(e){this.props.removeNote(e.noteId),this.props.closeDialog(e.id)}},{key:"filterResults",value:function(e){var t=e||this.state.query,n=[],a=Object.values(this.props.viewNotes);if(t||this.state.filter)switch(this.state.filter){case"title":n=a.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())}));break;case"content":n=a.filter((function(e){return e.data&&e.data.English?e.data.English.includes(t):!(!e.data||!e.data.body)&&e.data.body.includes(t)}));break;case"author":var r=[];Object.values(this.props.authors).forEach((function(e){"".concat(e.firstName," ").concat(e.lastName).toLowerCase().includes(t.toLowerCase())&&r.push(e._id)})),n=a.filter((function(e){return e.authors.some((function(e){return r.includes(e)}))}));break;case"scaffold":var o=this.props.supports.filter((function(e){return e.from===t})).map((function(e){return e.to}));n=a.filter((function(e){return o.includes(e._id)}))}return n}},{key:"clearSearch",value:function(){this.setState({query:"",filteredData:this.filterResults(null)})}},{key:"render",value:function(){var e,t=!this.hideScaffold&&"scaffold"===this.state.filter,n=this.getBuildOnHierarchy();return t&&(e=r.a.createElement(Aa,{initVal:0,onScaffoldSelected:this.onScaffoldSelected,returnSupport:!0})),r.a.createElement(r.a.Fragment,null,r.a.createElement(Oa.Breakpoint,{medium:!0,up:!0},r.a.createElement("div",{className:"row min-width"},r.a.createElement(Hn.a,{md:"5",sm:"12",className:"mrg-1-top pd-2-right v-scroll"},r.a.createElement(Xn.a,{className:"mrg-1-bot"},r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,null,r.a.createElement(oa.a,null,r.a.createElement(ia.a,{addonType:"prepend"},r.a.createElement(qn.a,{type:"select",name:"filter",id:"filter",onChange:this.handleFilter},r.a.createElement("option",{key:"title",value:"title"},"Search By Title"),r.a.createElement("option",{key:"scaffold",value:"scaffold"},"Search By Scaffold"),r.a.createElement("option",{key:"content",value:"content"},"Search By Content"),r.a.createElement("option",{key:"author",value:"author"},"Search By Author"))),r.a.createElement(qn.a,{className:"form-control",value:this.state.query,placeholder:"Search Your Note",onChange:this.handleInputChange}),r.a.createElement(ia.a,{addonType:"append"},r.a.createElement(ca.a,null,r.a.createElement("i",{className:"fa fa-search"}))),r.a.createElement(ia.a,{addonType:"append"},r.a.createElement(ca.a,{style:{cursor:"pointer"},onClick:this.clearSearch},r.a.createElement("i",{className:"fa fa-refresh"}))))))),e,""!==this.state.query||t?r.a.createElement(Ta,{noteLinks:this.state.filteredData}):r.a.createElement(Ta,{hierarchy:n})),this.props.checkedNotes.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(Hn.a,{md:"5",sm:"12",className:"mrg-1-top v-scroll"},r.a.createElement(fa,{query:this.state.query,buildOn:this.buildOn}))):null)),r.a.createElement(Oa.Breakpoint,{small:!0,down:!0},r.a.createElement("div",{className:"row min-width"},r.a.createElement(Hn.a,{md:"5",sm:"12",className:"mrg-05-top pd-2-right primary-bg-50"},r.a.createElement(Xn.a,{className:"mrg-1-bot"},r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,null,r.a.createElement(oa.a,null,r.a.createElement(ia.a,{addonType:"prepend"},r.a.createElement(qn.a,{type:"select",name:"filter",id:"filter",onChange:this.handleFilter},r.a.createElement("option",{key:"title",value:"title"},"Search By Title"),r.a.createElement("option",{key:"scaffold",value:"scaffold"},"Search By Scaffold"),r.a.createElement("option",{key:"content",value:"content"},"Search By Content"),r.a.createElement("option",{key:"author",value:"author"},"Search By Author"))),r.a.createElement(qn.a,{className:"form-control",value:this.state.query,placeholder:"Search Your Note",onChange:this.handleInputChange}),r.a.createElement(ia.a,{addonType:"append"},r.a.createElement(ca.a,null,r.a.createElement("i",{className:"fa fa-search"}))),r.a.createElement(ia.a,{addonType:"append"},r.a.createElement(ca.a,{style:{cursor:"pointer"},onClick:this.clearSearch},r.a.createElement("i",{className:"fa fa-refresh"}))))))),e,""!==this.state.query||t?r.a.createElement(Ta,{noteLinks:this.state.filteredData}):r.a.createElement(Ta,{hierarchy:n})))))}}]),n}(a.Component)),Ga={newNote:rt},Da=Object(u.b)((function(e,t){return{communityId:e.globals.communityId,viewId:e.globals.viewId,view:e.globals.view,author:e.globals.author,noteContent:e.globals.noteContent,communities:e.globals.communities,myViews:e.globals.views,authors:e.users,scaffolds:e.scaffolds.items,viewNotes:e.notes.viewNotes,checkedNotes:e.notes.checkedNotes,viewLinks:e.notes.viewLinks,buildsOn:e.notes.buildsOn,supports:e.notes.supports,riseAboveViewNotes:e.notes.riseAboveViewNotes}}),Ga)(Za),Ra=(n(243),n(176)),La=n(324),xa=(n(247),{zIndex:999,display:"flex"}),Ya=function(e){return r.a.createElement(Ra.a,{id:"contrib-dialog-".concat(e.id),className:"contrib-dialog",style:Object(j.a)(Object(j.a)({},xa),e.style),default:{x:400+window.pageXOffset,y:50+window.pageYOffset,width:920,height:500},onClick:e.onClick,onMouseDown:e.onMouseDown,dragHandleClassName:"dlg-card-header",bounds:"window"},r.a.createElement(La.a,{className:"dlg-card"},r.a.createElement(La.a.Header,{className:"dlg-card-header py-0",style:{alignItems:"center",display:"flex"}},r.a.createElement("span",null,e.title),r.a.createElement(y.a,{onClick:e.onClose,variant:"link",size:"sm",style:{marginLeft:"auto"}},"x")),r.a.createElement(La.a.Body,{className:"dlg-card-body",style:{position:"relative"}},e.children),r.a.createElement(La.a.Footer,{className:"dlg-card-footer py-0"},r.a.createElement(y.a,{size:"sm",className:"dlg-button",onClick:e.onConfirm,disabled:!e.editable},"Contribute"),e.buildon?r.a.createElement(y.a,{size:"sm",className:"dlg-button",onClick:e.onBuildOnClick},"Build-on"):"")))},Wa=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).onConfirm=a.onConfirm.bind(Object(b.a)(a)),a.onLoad=a.onLoad.bind(Object(b.a)(a)),a.getIframeRef=a.getIframeRef.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"onConfirm",value:function(){var e=this.iframe_ref.contentWindow,t=e.svgCanvas.current_drawing_.all_layers[0],n=e.svgCanvas.current_drawing_.all_layers[1],a=n[1].getBBox().width,r=n[1].getBBox().height;if(0!==a&&0!==r){e.svgCanvas.current_drawing_.svgElem_.setAttribute("width",a),e.svgCanvas.current_drawing_.svgElem_.setAttribute("height",r),t[1].childNodes[1].setAttribute("width",a),t[1].childNodes[1].setAttribute("height",r),e.svgCanvas.selectAllInCurrentLayer(),e.svgCanvas.groupSelectedElements(),e.svgCanvas.alignSelectedElements("l","page"),e.svgCanvas.alignSelectedElements("t","page"),e.svgCanvas.ungroupSelectedElement(),e.svgCanvas.clearSelection(),e.svgCanvas.current_drawing_.svgElem_.setAttribute("padding","2em"),e.svgCanvas.setResolution("fit",100);var o=e.svgCanvas.getSvgString(),i=document.createElement("canvas");i.width=a+4,i.height=r+4;var c=i.getContext("2d"),s=document.createElement("img");s.setAttribute("src","data:image/svg+xml;base64,"+btoa(o)),s.onload=function(){c.drawImage(s,0,0);var e=i.toDataURL("image/png"),t="<img alt='"+o+"' src='"+e+"'/>";this.props.onConfirm(t)}.bind(this)}else this.props.onClose()}},{key:"getIframeRef",value:function(e){e&&(this.iframe_ref=e)}},{key:"onLoad",value:function(e){var t=this.props.svg;t&&e.target.contentWindow.svgCanvas.setSvgString(t)}},{key:"render",value:function(){return r.a.createElement(Ya,{title:"DrawTool",style:{zIndex:3e3},onClose:this.props.onClose,onConfirm:this.onConfirm,editable:!0,confirmButton:"Add"},r.a.createElement("iframe",{onLoad:this.onLoad,title:"DrawingTool",src:"/drawing-tool/svg/index.html",ref:this.getIframeRef,width:"100%",height:"100%"}))}}]),n}(r.a.Component),Va=n(314),za=n(315),Fa=n(173),Ua=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Fa.a,{value:this.props.value,apiKey:"arg05azt52qbujpnf831szuswhmyhoqute0q48btk5bqigoj",init:{setup:function(t){e.props.onEditorSetup(t)},content_css:"/editor.css",height:300,menubar:!1,statusbar:!1,media_live_embeds:!0,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code wordcount media help"],external_plugins:{drawingTool:"/drawing-tool/plugin.min.js"},toolbar:"styleselect | bold italic underline strikethrough | forecolor backcolor bullist numlist | link code | ltr rtl | charmap | drawingTool media"},onEditorChange:this.props.onEditorChange}))}}]),n}(r.a.Component),Ba=n(313),Pa=n(171),Ja=(n(248),function(e){var t=Object(u.d)((function(e){return e.globals.author})),n=Object(u.c)(),o=Object(a.useState)(0),i=Object(c.a)(o,2),s=i[0],l=i[1],d=function(t){e.onClose()},m=function(){var e=Object(A.a)(I.a.mark((function e(t){var n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.from(t),l(0),a=[],n.forEach(function(){var e=Object(A.a)(I.a.mark((function e(t){var n,r,o,i;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.type.indexOf("image/")>=0)){e.next=12;break}return n=window.URL||window.webkitURL,e.next=4,p(n.createObjectURL(t));case 4:r=e.sent,o=r.naturalWidth||r.width,i=r.naturalHeight||r.height,t.width=o,t.height=i,a.push(h(t,"image")),e.next=13;break;case 12:t.type.startsWith("video")?a.push(h(t,"video")):a.push(h(t,"link"));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=6,Promise.all(a);case 6:d(),Ce({title:"Uploaded!",type:"success",message:"Attachments uploaded!"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){return new Promise((function(t,n){var a=document.createElement("img");a.onload=function(){return t(a)},a.onerror=n,a.src=e}))},h=function(){var a=Object(A.a)(I.a.mark((function a(r,o){var i,c,s,l,u,d,m,p;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Q(t.communityId,t._id);case 3:return i=a.sent,a.next=6,K(r,b);case 6:return c=a.sent,s=i.data,l=c.data,s.title=l.filename,s.status="active",l.version=s.data.version+1,s.data=l,s.tmpFilename=l.tmpFilename,a.next=16,J(s,t.communityId,s._id);case 16:return(u=a.sent).data.width=r.width,u.data.height=r.height,a.next=21,F(e.noteId,s._id,"attach");case 21:n(it(e.noteId,"from")),e.inlineAttach&&(d="".concat(C).concat(u.data.url),m=u.title,p="","image"===o?p='<img class="inline-attachment '+s._id+'" src="'+d+'" width="100px" alt="'+m+'" data-mce-src="'+d+'">':"video"===o?p='<video controls="controls" width="300" height="150"> <source src="'.concat(d,'" type="video/mp4" /></video>'):(p='<a class="inline-attachment '+s._id+'" href="'+d+'" target="_blank" download>',p+='<img src="'.concat(C,'/manual_assets/kf6images/03-toolbar-attachment.png" alt="')+m+'">'+m+"</a>"),e.onNewInlineAttach(p)),n(ot(e.noteId)),a.next=29;break;case 26:a.prev=26,a.t0=a.catch(0),console.log(a.t0);case 29:return a.prev=29,a.finish(29);case 31:case"end":return a.stop()}}),a,null,[[0,26,29,31]])})));return function(e,t){return a.apply(this,arguments)}}(),b=function(e){var t=Math.round(100*e.loaded/e.total);l(t)};return r.a.createElement(E.a,{show:e.attachPanel,onHide:d},r.a.createElement(E.a.Header,{closeButton:!0},r.a.createElement(E.a.Title,null,"Insert Attachment File")),r.a.createElement(E.a.Body,null,r.a.createElement(ga.a.File,{id:"custom-file"},r.a.createElement(ga.a.File.Input,{onChange:function(e){m(e.target.files)}})),r.a.createElement("div",{style:{width:"100%",color:"black"}},r.a.createElement(Pa.FileDrop,{onFrameDragEnter:function(e){return console.log("onFrameDragEnter",e)},onFrameDragLeave:function(e){return console.log("onFrameDragLeave",e)},onFrameDrop:function(e){return console.log("onFrameDrop",e)},onDragOver:function(e){return console.log("onDragOver",e)},onDragLeave:function(e){return console.log("onDragLeave",e)},onDrop:function(e,t){return m(e)}},"or drop some files here!")),r.a.createElement(Ba.a,{now:s})),r.a.createElement(E.a.Footer,null,r.a.createElement(y.a,{variant:"primary",onClick:d},"Close")))}),Qa=(n(249),function(e){var t=Object(u.d)((function(t){var n=[];return e.attachments.forEach((function(e){var a=t.notes.attachments[e];a&&n.push(a)})),n})),n=Object(a.useState)([]),o=Object(c.a)(n,2),i=o[0],s=o[1];return r.a.createElement(Hn.a,null,r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,null,r.a.createElement("span",{className:""},"Insert image or file: "),r.a.createElement(y.a,{className:"attach-button mx-2",size:"sm",variant:"outline-dark",onClick:function(){return e.onNewAttachClick(!0)}},"Inline"),r.a.createElement(y.a,{className:"attach-button mx-2",size:"sm",variant:"outline-dark",onClick:function(){return e.onNewAttachClick(!1)}},"As an attachment"),r.a.createElement(y.a,{className:"attach-button mx-2",size:"sm",variant:"outline-dark",onClick:function(){var t=Array.from(document.getElementById("attachbox-".concat(e.noteId)).getElementsByClassName("selected"));if(0!==t.length){var n="";t.forEach((function(e){var t=e.tagName,a=e.naturalWidth;if(a>200&&(a=200),"IMG"===t){var r=e.getAttribute("src"),o="";e.classList.forEach((function(e){24===e.length&&(o+=e+" ")})),n+='<img class="inline-attachment '+o+'" src="'+r+'" width="'+a+'px" alt="" data-mce-src="'+r+'">'}})),e.onNewInlineAttach(n)}},disabled:0===i.length},"Insert"))),r.a.createElement(Qn.a,{id:"attachbox-".concat(e.noteId),className:"attachment-box"},t.map((function(t){return r.a.createElement("div",{key:t._id,className:"attachment-inner-box col-auto"},r.a.createElement("div",{className:"attachment-thumbnail"},0===t.data.type.indexOf("image/")?r.a.createElement("img",{className:t._id+" "+(i.includes(t._id)?"selected":""),src:"".concat(C).concat(t.data.url),onClick:function(e){return n=t._id,void(i.includes(n)?s((function(e){return e.filter((function(e){return e!==n}))})):s((function(e){return[].concat(Object(pe.a)(e),[n])})));var n},alt:"attachment"}):r.a.createElement("a",{href:"".concat(C).concat(t.data.downloadUrl||t.data.url),title:t.title,download:!0},r.a.createElement("img",{className:t._id,src:"".concat(C,"/manual_assets/kf6images/03-toolbar-attachment.png"),title:"{attachment.title}",alt:"attachment"}))),r.a.createElement("div",{className:"attachment-buttons"},r.a.createElement("p",null,r.a.createElement("a",{href:"".concat(C).concat(t.data.downloadUrl||t.data.url),title:t.title,download:!0},r.a.createElement("img",{className:"download-attachment",src:"".concat(C,"/manual_assets/kf6images/cloud-download-2x.png"),alt:"Download",height:"15px"}))),r.a.createElement("p",null,r.a.createElement("button",{className:"delete-attachment",onClick:function(){return n=t._id,void(window.confirm("Are you sure to delete the attachment?")&&e.onAttachDelete(n));var n}},r.a.createElement("img",{src:"".concat(C,"/manual_assets/kf6images/trash.png"),alt:"Delete attachment",width:"10px",height:"15px"})))),r.a.createElement("div",{className:"attachment-info"},r.a.createElement("p",{title:"{attachment.title}"},t.title),r.a.createElement("p",null,t.data.size)))}))))}),Ha=(n(250),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={inlineAttach:!0,attachPanel:!1},a.onScaffoldSelected=a.onScaffoldSelected.bind(Object(b.a)(a)),a.onNewAttachmentClick=a.onNewAttachmentClick.bind(Object(b.a)(a)),a.closeAttachPanel=a.closeAttachPanel.bind(Object(b.a)(a)),a.onNewInlineAttach=a.onNewInlineAttach.bind(Object(b.a)(a)),a.onAttachDelete=a.onAttachDelete.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"onScaffoldSelected",value:function(e,t){this.props.onChange({scaffold:{tagCreator:e,initialText:t}})}},{key:"onNewAttachmentClick",value:function(e){this.setState({inlineAttach:e,attachPanel:!0})}},{key:"onNewInlineAttach",value:function(e){this.props.onChange({attach:e})}},{key:"closeAttachPanel",value:function(){this.setState({attachPanel:!1})}},{key:"onAttachDelete",value:function(e){this.props.onChange({deleteAttach:e})}},{key:"render",value:function(){var e=this.props,t=e.note,n=e.onChange,a=e.onEditorSetup;return r.a.createElement(va.a,{className:"write-container p-0"},r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,null,r.a.createElement(ga.a.Group,{className:"write-title-form",controlId:"note-title"},r.a.createElement(ga.a.Control,{type:"text",className:"write-tab-input",size:"sm",placeholder:"Enter title",value:t.title,onChange:function(e){n({title:e.target.value})}})))),r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,{md:2,className:"pr-0"},r.a.createElement(Aa,{initVal:0,onScaffoldSelected:this.onScaffoldSelected})),r.a.createElement(Hn.a,{md:10},r.a.createElement(Ua,{value:t.data.body,onEditorSetup:a,onEditorChange:function(e,t){return n({data:{body:e}})}}),r.a.createElement("div",{className:"wordcount-bar text-right"},t.wordCount," words"))),r.a.createElement(Qn.a,{className:"mt-2"},r.a.createElement(Ja,Object.assign({noteId:t._id,onClose:this.closeAttachPanel,onNewInlineAttach:this.onNewInlineAttach},this.state)),r.a.createElement(Qa,{noteId:t._id,attachments:t.attachments,onNewAttachClick:this.onNewAttachmentClick,onNewInlineAttach:this.onNewInlineAttach,onAttachDelete:this.onAttachDelete})))}}]),n}(r.a.Component)),Xa=function(e){var t=e.records.reduce((function(e,t){return"read"===t.type?e[0].push(t):e[1].push(t),e}),[[],[]]),n=Object(c.a)(t,2),a=n[0],o=n[1];return r.a.createElement("div",null,r.a.createElement("h5",null,"Edit logs:"),r.a.createElement("p",{className:"mb-0"},o.length," edits"),r.a.createElement("ul",null,o.map((function(e){return r.a.createElement("li",{key:e._id},e.date,": ",e.author)}))),r.a.createElement("h5",null,"Read logs:"),r.a.createElement("p",{className:"mb-0"},a.length," reads"),r.a.createElement("ul",null,a.map((function(e){return r.a.createElement("li",{key:e._id},e.date,": ",e.author)}))))},_a=function(e){var t=function(t){e.onChange({permission:t.target.value})};return r.a.createElement("div",{className:"m-2"},r.a.createElement("div",null,r.a.createElement("label",{className:"mt-1 font-weight-bold"},"Permission:"),r.a.createElement("div",null,r.a.createElement("table",{className:"KFPermission table table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\xa0"),r.a.createElement("th",null,"Authors"),r.a.createElement("th",null,"Group Members"),r.a.createElement("th",null,"Others"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("form",{action:""},r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"radio",name:"permission",value:"private",id:"contrib-permission1",onChange:t,checked:"private"===e.contribution.permission}),r.a.createElement("label",{className:"form-check-label font-weight-normal",htmlFor:"contrib-permission1"},"\xa0private")))),r.a.createElement("td",null,"rw"),r.a.createElement("td",null,"rw"),r.a.createElement("td",null,"-")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("form",{action:""},r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"radio",value:"protected",id:"contrib-permission2",name:"permission",onChange:t,checked:"protected"===e.contribution.permission}),r.a.createElement("label",{className:"form-check-label font-weight-normal",htmlFor:"contrib-permission2"},"\xa0protected")))),r.a.createElement("td",null,"rw"),r.a.createElement("td",null,"rw"),r.a.createElement("td",null,"r")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("form",{action:""},r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"radio",value:"public",id:"contrib-permission3",name:"public",onChange:t,checked:"public"===e.contribution.permission}),r.a.createElement("label",{className:"form-check-label font-weight-normal",htmlFor:"contrib-permission3"},"\xa0public")))),r.a.createElement("td",null,"rw"),r.a.createElement("td",null,"rw"),r.a.createElement("td",null,"rw"))))),r.a.createElement("label",{className:"mt-1 font-weight-bold"},"Status:"),r.a.createElement("div",{className:"ml-2"},e.contribution.status),r.a.createElement("label",{className:"mt-2 font-weight-bold"},"Template:"),r.a.createElement("form",{className:"ml-2",action:""},r.a.createElement("div",{className:"form-check  form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"c-isTemplate",checked:e.contribution.data.isTemplate,onChange:function(t){e.onChange({data:{isTemplate:t.target.checked}})}}),r.a.createElement("label",{className:"form-check-label font-weight-normal",htmlFor:"c-isTemplate"},"isTemplate")))))},Ka=function(e){var t=Object.entries(e.authors).map((function(e){return{value:e[1]._id,label:"".concat(e[1].firstName," ").concat(e[1].lastName)}})),n=Object(a.useState)(null),o=Object(c.a)(n,2),i=o[0],s=o[1];return r.a.createElement("div",null,r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,null,r.a.createElement(Jt.a,{options:t,onChange:function(e){s(e)},isClearable:!0})),r.a.createElement(Hn.a,{md:"auto"},r.a.createElement(y.a,{disabled:!i,onClick:function(){return e.onAuthorSelected(i)}},"Add"))),r.a.createElement("p",null,t.length," possible author(s) in this community."))},qa=function(e){var t=Object(u.d)((function(t){return e.contrib.authors.map((function(e){return t.users[e]}))})),n=Object(u.d)((function(e){return e.users})),a=Object(u.d)((function(e){return e.globals.community.groups})),o=a.map((function(e){return{value:e._id,label:e.title}})),i=a.find((function(t){return t._id===e.contrib.group})),c=i?{value:i._id,label:i.title}:{value:null,label:"No Group selected"};return r.a.createElement("div",{className:"authorTab mt-2",style:{height:"100%"}},r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,null,r.a.createElement("h5",null,"Authors:"),r.a.createElement("ul",null,t.map((function(t,n){return r.a.createElement("li",{key:t._id,style:{cursor:"move"}},t.firstName," ",t.lastName,r.a.createElement(y.a,{size:"sm",className:"ml-1",onClick:function(){return function(t,n){0!==n?n>=0&&e.onChange({authors:e.contrib.authors.filter((function(e){return e!==t._id}))}):Ce({title:"Error!",type:"danger",message:"cannot remove the Primary Author"})}(t,n)}},"x"))})))),r.a.createElement(Hn.a,null,r.a.createElement("div",null,r.a.createElement("h5",null,"Add author:"),r.a.createElement(Ka,{authors:n,onAuthorSelected:function(t){e.contrib.authors.includes(t.value)||e.onChange({authors:[].concat(Object(pe.a)(e.contrib.authors),[t.value])})}})))),r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,null,r.a.createElement("h5",null,"Group:"),r.a.createElement("div",null,r.a.createElement("form",{method:"",id:"",action:""},r.a.createElement(Jt.a,{value:c,options:o,onChange:function(t){e.onChange({group:t&&t.value})},isClearable:!0}))))))},$a=n(68),er=n.n($a),tr=(n(251),n(253),n(255),n(257),n(259),n(261),n(263),function(e,t,n,a){Annotator.Plugin.KFPlugin=function(){return{pluginInit:function(){this.annotator.subscribe("annotationCreated",(function(e){t&&t.annotationCreated(e)})).subscribe("annotationUpdated",(function(e){t&&t.annotationUpdated(e)})).subscribe("annotationDeleted",(function(e){t&&t.annotationDeleted(e)})).subscribe("annotationEditorShown",(function(e,n){t&&t.displayEditor(e,n)})).subscribe("annotationViewerShown",(function(e,n){t&&t.displayViewer(e,n)})).subscribe("annotationEditorHidden",(function(e,n){t&&t.editorHidden(e,n)})),t&&t.annotatorInitialized(this.annotator)}}};var r={}.hasOwnProperty;Annotator.Plugin.RichText=function(e){!function(e,t){for(var n in t)r.call(t,n)&&(e[n]=t[n]);function a(){this.constructor=e}a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype}(n,Annotator.Plugin);var t="";function n(e,t){return n.__super__.constructor.apply(this,arguments)}return n.prototype.options={tinymce:{selector:"li.annotator-item textarea",content_css:"/editor.css",height:"170px",statusbar:!1,plugins:"media image insertdatetime link code",menubar:!1,toolbar_items_size:"small",extended_valid_elements:"iframe[src|frameborder|style|scrolling|class|width|height|name|align|id]",toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | code | mysidebar"}},n.prototype.pluginInit=function(){var e=this.annotator,t=this.annotator.editor;Annotator.supported()&&(e.editor.addField({type:"input",load:this.updateEditor}),e.viewer.addField({load:this.updateViewer}),e.subscribe("annotationEditorShown",(function(){})),e.subscribe("annotationEditorHidden",(function(){})),this.options.tinymce.setup=function(e){n.prototype.mceditor=e,e.on("change",(function(e){$(t.element).find("textarea")[0].value=er.a.activeEditor.getContent()})),e.on("Init",(function(e){$(".mce-container").css("z-index","3090000000000000000")})),e.on("remove",(function(){i.a.unmountComponentAtNode(n.prototype.scaffoldSidebar)})),e.ui.registry.addSidebar("mysidebar",{tooltip:"View Scaffold",icon:"settings",onSetup:function(e){var t=e.element();document.sidebar=t,t.style.width="200px",t.style.overflow="scroll",t.style.fontSize="0.7rem",i.a.render(a,t,null),n.prototype.scaffoldSidebar=t},onShow:function(e){},onHide:function(e){}})},er.a.init(this.options.tinymce))},n.prototype.updateEditor=function(e,n){var a="undefined"!==typeof n.text?n.text:"",r=er.a.editors.length;t=er.a.editors[r-2].id,er.a.get(t).setContent(a),$(e).remove()},n.prototype.updateViewer=function(e,t){var n=$(e.parentNode).find("div:first-of-type")[0];n.innerHTML=t.text,$(n).addClass("richText-annotation"),$(e).remove()},n}(),e.annotator("addPlugin","KFPlugin"),e.annotator("addPlugin","Tags"),e.annotator("addPlugin","RichText"),n&&e.annotator("addPlugin","Permissions",{user:n,permissions:{read:[n],update:[n],delete:[n],admin:[n]},showEditPermissionsCheckbox:!1})}),nr=function(e){var t=0===e.permissions.read.length;e.permission=t?"protected":"private";var n=e.ranges[0];return 0===n.start.indexOf("/div[1]")&&(n.start=n.start.substring(7)),0===n.end.indexOf("/div[1]")&&(n.end=n.end.substring(7)),e},ar=(n(265),Object(O.a)({reducer:{dialogs:ye,notes:at,scaffolds:de,globals:Mt,users:ce},devTools:!0})),rr=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).contentRef=r.a.createRef(),a.annotatorInitialized=a.annotatorInitialized.bind(Object(b.a)(a)),a.annotationCreated=a.annotationCreated.bind(Object(b.a)(a)),a.annotationUpdated=a.annotationUpdated.bind(Object(b.a)(a)),a.annotator=null,a.displayEditor=a.displayEditor.bind(Object(b.a)(a)),a.displayViewer=a.displayViewer.bind(Object(b.a)(a)),a.fixPopupLocation=a.fixPopupLocation.bind(Object(b.a)(a)),a.editorHidden=a.editorHidden.bind(Object(b.a)(a)),a.loadAnnotations=a.loadAnnotations.bind(Object(b.a)(a)),a.onScaffoldSelected=a.onScaffoldSelected.bind(Object(b.a)(a)),a.dlg=null,a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=$(this.contentRef.current);e.annotator(),this.scaffoldElem=r.a.createElement(u.a,{store:ar},r.a.createElement(Aa,{initVal:0,onScaffoldSelected:this.onScaffoldSelected})),tr(e,{annotationCreated:this.annotationCreated,annotationUpdated:this.annotationUpdated,annotationDeleted:this.props.onDelete,displayEditor:this.displayEditor,displayViewer:this.displayViewer,annotatorInitialized:this.annotatorInitialized,editorHidden:this.editorHidden},this.props.author.userName,this.scaffoldElem),this.dlg=$("#contrib-dialog-".concat(this.props.containerId))}},{key:"componentDidUpdate",value:function(e,t){1===this.props.annotsFetched&&this.props.annotsFetched!==e.annotsFetched&&this.loadAnnotations()}},{key:"componentWillUnmount",value:function(){this.annotator&&this.annotator.plugins.RichText.mceditor&&this.annotator.plugins.RichText.mceditor.remove()}},{key:"editorHidden",value:function(e,t){$(e.element.find(".annotator-controls")).off()}},{key:"loadAnnotations",value:function(){var e=Object.values(this.props.annots).map((function(e){var t=Object.assign({},e.data);return t.ranges=Object(pe.a)(t.ranges),t.highlights=Object(pe.a)(t.highlights),function(e){var t=Object.assign({},e.ranges[0]);t.start="/div[1]"+t.start,t.end="/div[1]"+t.end,e.ranges[0]=t}(t),t}));this.annotator.loadAnnotations(e),this.props.onAnnotsLoaded()}},{key:"annotatorInitialized",value:function(e){this.annotator=e,this.loadAnnotations();var t=$("div.annotator-adder");t.attr("title","Annotation"),t.addClass("tooltip1"),t.append('<span class="tooltiptext">Annotation</span>'),document.annotator=this.annotator;var n=e.adder.get(0);this.observer=new MutationObserver(function(t){var a,r=Object(Rt.a)(t);try{for(r.s();!(a=r.n()).done;){if("attributes"===a.value.type&&"none"!==n.style.display)return this.fixPopupLocation(e.adder),void this.observer.takeRecords()}}catch(o){r.e(o)}finally{r.f()}}.bind(this)),this.observer.observe(n,{attributes:!0,attributeOldValue:!0})}},{key:"annotationCreated",value:function(e){this.props.onCreate(nr(e))}},{key:"annotationUpdated",value:function(e){this.props.onUpdate(nr(e))}},{key:"displayEditor",value:function(e,t){e.element.hasClass(e.classes.invert.y)||e.element.addClass(e.classes.invert.y)}},{key:"fixPopupLocation",value:function(e){var t=this.dlg.offset(),n=e.offset();e.offset({top:n.top-t.top,left:n.left-t.left})}},{key:"displayViewer",value:function(e,t){this.fixPopupLocation(e.element),e.element.addClass(e.classes.invert.y)}},{key:"onScaffoldSelected",value:function(e,t){var n=this.annotator.plugins.RichText.mceditor,a=n.selection.getContent(),r=e(a.length?a:t),o=r.tag,i=r.supportContentId;n.insertContent(o);var c=n.dom.get(i);c&&n.selection.setCursorLocation(c)}},{key:"render",value:function(){return r.a.createElement("div",{ref:this.contentRef},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.content}}))}}]),n}(r.a.Component),or=(n(266),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).state={riseAboveNotes:[]},a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this;if(this.props.riseAboveViewId){var t=this.props.riseAboveViewNotes[this.props.riseAboveViewId].map((function(t){return e.props.riseAboveNotes[t]}));this.setState({riseAboveNotes:t})}}},{key:"render",value:function(){var e=this;return r.a.createElement(Hn.a,null,r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,{className:""},r.a.createElement(La.a,{className:"pd-05"},r.a.createElement(La.a.Title,null,"RiseAbove Notes"),r.a.createElement(La.a.Body,{className:"mrg-05-top"},this.state.riseAboveNotes?r.a.createElement(r.a.Fragment,null,this.state.riseAboveNotes.map((function(t,n){return r.a.createElement(Qn.a,{key:n},r.a.createElement(y.a,{variant:"light",className:"min-width-10 rounded-pill pd-05",onClick:function(){return e.props.editNote(t._id)}},t.title))}))):null)))))}}]),n}(a.Component)),ir=Object(u.b)((function(e,t){return{riseAboveViewNotes:e.notes.riseAboveViewNotes,riseAboveNotes:e.notes.riseAboveNotes}}),{})(or),cr=(n(267),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).editNote=function(e){a.props.openContribution(e)},a.state={riseAboveNotes:!1,selectedTab:a.props.mode?a.props.mode:"write"},a.onEditorSetup=a.onEditorSetup.bind(Object(b.a)(a)),a.addDrawing=a.addDrawing.bind(Object(b.a)(a)),a.onNoteChange=a.onNoteChange.bind(Object(b.a)(a)),a.wordCount=a.wordCount.bind(Object(b.a)(a)),a.onTabSelected=a.onTabSelected.bind(Object(b.a)(a)),a.onAnnotationCreated=a.onAnnotationCreated.bind(Object(b.a)(a)),a.onAnnotationDeleted=a.onAnnotationDeleted.bind(Object(b.a)(a)),a.onAnnotationUpdated=a.onAnnotationUpdated.bind(Object(b.a)(a)),a.editNote=a.editNote.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e,t,n){this.props.drawing&&e.drawing!==this.props.drawing&&(this.editor.insertContent(this.props.drawing),this.props.onDrawingInserted())}},{key:"onNoteChange",value:function(e){if(e.scaffold){var t=e.scaffold,n=t.tagCreator,a=t.initialText;this.addSupport(!0,a,n)}else e.attach?this.editor.insertContent(e.attach):e.deleteAttach?(this.props.deleteAttachment(this.props.note._id,e.deleteAttach),this.editor.dom.remove(this.editor.dom.select("."+e.deleteAttach))):e.data&&e.data.body?this.props.onNoteChange(Object(j.a)(Object(j.a)({},e),{},{wordCount:this.wordCount(e.data.body)})):this.props.onNoteChange(Object(j.a)({},e))}},{key:"wordCount",value:function(e){return this.editor.plugins.wordcount.getCount()-function(e){for(var t="<div>"+e+"</div>",n=Ne()(t).find(".kfSupportStartLabel"),a=0,r=0;r<n.length;r++)a+=n[r].innerHTML.split(" ").length;return a}(e)}},{key:"onEditorSetup",value:function(e){e.onDrawButton=this.props.onDrawToolOpen,this.editor=e}},{key:"addDrawing",value:function(e){this.editor.insertContent(e)}},{key:"addSupport",value:function(e,t,n){var a=this.editor.selection.getContent(),r=n(a.length?a:t),o=r.tag,i=r.supportContentId;if(this.editor.insertContent(o),e){var c=this.editor.dom.get(i);c&&this.editor.selection.setCursorLocation(c)}}},{key:"onTabSelected",value:function(e){this.setState({selectedTab:e}),"history"===e&&this.props.fetchRecords(this.props.note._id),"author"===e&&this.props.fetchCommGroups(this.props.note.communityId)}},{key:"onAnnotationCreated",value:function(e){console.log(e),this.props.createAnnotation(this.props.note.communityId,this.props.note._id,this.props.noteAuthor._id,e)}},{key:"onAnnotationDeleted",value:function(e){e.linkId&&e.modelId&&this.props.deleteAnnotation(e.linkId,this.props.note._id,e.modelId)}},{key:"onAnnotationUpdated",value:function(e){if(e.linkId&&e.modelId){var t=Object.assign({},this.props.note.annos[e.modelId]);t?(t.data=e,this.props.modifyAnnotation(t,this.props.note.communityId,this.props.note._id)):console.error("ERROR! model couldn't find")}else console.error("ERROR! annoVM doesn't have id on update")}},{key:"render",value:function(){var e=this,t=new Intl.DateTimeFormat("default",St);return r.a.createElement("div",null,r.a.createElement("div",{className:"contrib-info"},"Created By: ",this.props.noteAuthor.firstName," ",this.props.noteAuthor.lastName," ",r.a.createElement("br",null),"Last modified: ",t.format(new Date(this.props.note.modified))),r.a.createElement(Va.a,{activeKey:this.state.selectedTab,transition:!1,onSelect:this.onTabSelected},r.a.createElement(za.a,{eventKey:"read",title:"read"},r.a.createElement(Qn.a,null,this.state.riseAboveNotes?r.a.createElement(r.a.Fragment,null,r.a.createElement(Hn.a,{md:"6"},r.a.createElement(rr,{containerId:this.props.dlgId,content:this.props.note.data.body,annots:this.props.note.annos,annotsFetched:this.props.note.annotsFetched,author:this.props.noteAuthor,onCreate:this.onAnnotationCreated,onUpdate:this.onAnnotationUpdated,onDelete:this.onAnnotationDeleted,onAnnotsLoaded:function(){return e.props.setAnnotationsLoaded({contribId:e.props.note._id,value:0})}})),r.a.createElement(Hn.a,{md:"5"},r.a.createElement(ir,{riseAboveViewId:this.props.note._id,editNote:this.editNote})),r.a.createElement(Hn.a,null)):r.a.createElement(Hn.a,null,r.a.createElement(rr,{containerId:this.props.dlgId,content:this.props.note.data.body,annots:this.props.note.annos,annotsFetched:this.props.note.annotsFetched,author:this.props.noteAuthor,onCreate:this.onAnnotationCreated,onUpdate:this.onAnnotationUpdated,onDelete:this.onAnnotationDeleted,onAnnotsLoaded:function(){return e.props.setAnnotationsLoaded({contribId:e.props.note._id,value:0})}})))),"read"!==this.props.mode?r.a.createElement(za.a,{eventKey:"write",title:"write"},r.a.createElement(Ha,{note:this.props.note,onScaffoldSelected:this.scaffoldSelected,onChange:this.onNoteChange,onEditorSetup:this.onEditorSetup})):"",r.a.createElement(za.a,{eventKey:"author",title:"author(s)"},r.a.createElement(qa,{contrib:this.props.note,onChange:this.onNoteChange})),r.a.createElement(za.a,{eventKey:"history",title:"history"},r.a.createElement(Xa,{records:this.props.note.records})),r.a.createElement(za.a,{eventKey:"properties",title:"properties"},r.a.createElement(_a,{contribution:this.props.note,onChange:this.props.onNoteChange}))))}}]),n}(r.a.Component)),sr={editNote:Ze,fetchAttachments:ot,fetchRecords:function(e){return function(){var t=Object(A.a)(I.a.mark((function t(n,a){var r,o,i;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a().users,t.next=3,_(e);case 3:o=t.sent,i=new Intl.DateTimeFormat("default",St),o.forEach((function(e){if(r[e.authorId]){var t=r[e.authorId];e.author="".concat(t.firstName," ").concat(t.lastName)}else e.author="NA";e.date=i.format(new Date(e.timestamp))})),n(Ye({contribId:e,records:o}));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},deleteAnnotation:function(e,t,n){return function(){var a=Object(A.a)(I.a.mark((function a(r){return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,U(e);case 2:return a.abrupt("return",r(Ue({contribId:t,annoId:n})));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},fetchCommGroups:function(e){return function(){var t=Object(A.a)(I.a.mark((function t(n){var a;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(e);case 2:a=t.sent,n(Nt({groups:a}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},createAnnotation:function(e,t,n,a){return function(){var r=Object(A.a)(I.a.mark((function r(o){var i,c,s;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i={communityId:e,type:"Annotation",title:"an Annotation",authors:[n],status:"active",permission:"private",data:a},r.next=3,H(e,i);case 3:return c=r.sent,r.next=6,F(c._id,t,"annotates");case 6:s=r.sent,a.linkId=s._id,a.modelId=c._id,o(ze({contribId:t,annotation:c}));case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},modifyAnnotation:function(e,t,n){return function(){var a=Object(A.a)(I.a.mark((function a(r){var o;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,J(e,t,e._id);case 2:return o=a.sent,a.abrupt("return",r(ze({contribId:n,annotation:o})));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},setAnnotationsLoaded:Fe,deleteAttachment:function(e,t){return function(){var n=Object(A.a)(I.a.mark((function n(a,r){var o,i,c;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=r(),i=o.notes[e],c=i.fromLinks.filter((function(e){return e.to===t}))[0],n.next=5,U(c._id);case 5:a(De({attId:t,noteId:e})),a(it(e,"from"));case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},openContribution:ct},lr=Object(u.b)((function(e,t){return{noteAuthor:t.note&&(e.users[t.note.authors[0]]||"NA"),riseAboveViewNotes:e.notes.riseAboveViewNotes,riseAboveNotes:e.notes.riseAboveNotes,currentAuthor:e.globals.author,editable:t.note&&t.note.authors.includes(e.globals.author._id)}}),sr)(cr),ur=function(e){var t=e.dialog,n=Object(u.d)((function(e){return e.notes[t.noteId]})),o=Object(u.c)(),i=Object(a.useState)(null),s=Object(c.a)(i,2),l=s[0],d=s[1],m=Object(a.useState)(!1),p=Object(c.a)(m,2),h=p[0],b=p[1],f=Object(a.useState)(null),v=Object(c.a)(f,2),g=v[0],E=v[1],y=Object(a.useState)(null),w=Object(c.a)(y,2),N=w[0],O=w[1];Object(a.useEffect)((function(){d((function(e){return null===e?Object(j.a)({},n):Object(j.a)(Object(j.a)({},e),{},{attachments:n.attachments})}))}),[n]);var k=function(){var e,n;o((e=l,n=t.id,function(){var t=Object(A.a)(I.a.mark((function t(a,r){var o,i,c,s,l;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=Object.assign({},e)).data=Object.assign({},e.data),e.title){t.next=5;break}return Ce({title:"Error Saving Note!",type:"danger",message:"Title is required"}),t.abrupt("return");case 5:if("Note"!==e.type){t.next=25;break}return o="active"===e.status,e.status="active",t.next=10,ke(e.data.body,e._id,e.toLinks,e.fromLinks);case 10:return i=t.sent,c=i.html(),s=e.data.body,e.data.body=c,t.next=16,J(e,e.communityId,e._id);case 16:(l=t.sent).data.body=s,a(Ze(l)),a(Pe(l)),a(it(e._id,"from")),a(it(e._id,"to")),void 0!==n&&a(be(n)),o||a(lt(l.communityId)),Ce({title:"Saved!",type:"success",message:"Contribution updated!"});case 25:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()))},S=function(e){o(function(e){return function(t,n){var a=n();t(rt(a.globals.view,a.globals.communityId,a.globals.author._id,e))}}(e))},C=function(){E(null),b(!1)};return r.a.createElement("div",null,r.a.createElement(Ya,{key:t.id,id:t.id,onMouseDown:e.onMouseDown,title:t.title,style:{zIndex:t.zIndex},onClose:function(){return o(be((e=t).id)),void o(Te(e.noteId));var e},onConfirm:function(){return k()},confirmButton:t.confirmButton,editable:t.editable,buildon:t.buildOn,onBuildOnClick:function(){return S(t.noteId)}},l?r.a.createElement(lr,{key:t.noteId,dlgId:t.id,note:l,mode:t.editable?"write":"read",drawing:N,onNoteChange:function(e){d((function(t){return Object(j.a)(Object(j.a)({},t),e)}))},onDrawToolOpen:function(e){e&&E(e),b(!0)},onDrawingInserted:function(){O(null)}}):null),h?r.a.createElement(Wa,{onClose:C,onConfirm:function(e){O(e),C()},svg:g}):null)},dr=function(e){var t=Object(u.d)((function(e){return e.dialogs})),n=Object(u.c)(),o=Object(a.useCallback)((function(e){return n(fe(e))}),[n]);return r.a.createElement("div",null,t.dialogs.map((function(e,t){return r.a.createElement(ur,{key:e.id,dialog:e,onMouseDown:function(){return o(e.id)}})})))},mr=n(172),pr=n.n(mr),hr=Object(a.createContext)(null),br=function(e){var t,n,a=e.children,o=Object(u.c)(),i=function(e){t.on(e+":save",(function(t){var n;"link"===e&&"contains"===t.type&&"active"===t._to.status&&o((n=t,function(){var e=Object(A.a)(I.a.mark((function e(t,a){var r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a().globals.viewId!==n.from){e.next=8;break}if(t(Xe(n)),"Note"!==n._to.type){e.next=8;break}return e.next=6,P(n.to);case 6:r=e.sent,t(Pe(r));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()))})),t.on(e+":remove",(function(t){"link"===e&&"active"===t._to.status&&(o(tt(t)),o(nt({_id:t.to})))}))},c=function(e){t.emit("subscribe","linkfrom:".concat(e)),t.emit("subscribe","noteCount:".concat(e))};return n={socket:t,openConnection:function(e,n){t||((t=pr.a.connect(C,{path:"/socket.io-client",log:!0,"close timeout":60,"heartbeat timeout":60,"heartbeat interval":20})).on("connect",(function(){o(kt(!0)),e&&c(e),n&&i(n)})),t.on("error",(function(e){console.log(e||"error"),o(kt(!1))})),t.on("connect_failed",(function(e){console.log(e||"connect_failed"),o(kt(!1))})))},emit:function(e,n){t.emit(e,n)},unsyncUpdates:function(e){t.removeAllListeners(e+":save"),t.removeAllListeners(e+":remove")},syncUpdates:i,subscribeToView:c,disconnect:function(){t&&t.disconnect()}},r.a.createElement(hr.Provider,{value:n},a)},fr=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).handleNewViewInput=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(w.a)({},n,r))},a.goToDashboard=function(){a.clearGraphViewProps(),a.props.history.push("/dashboard")},a.switchView=function(){var e="Enhanced"===a.state.currentView?"Light":"Enhanced";a.setState({currentView:e})},a.renderTooltip=function(e){return r.a.createElement(Un.a,Object.assign({id:"button-tooltip"},e),e.message)},a.state={token:sessionStorage.getItem("token"),currentView:void 0===a.props.location.state?"Enhanced":a.props.location.state.currentView,communityTitle:void 0===a.props.location.state?null:a.props.location.state.communityTitle,addView:"",showModal:!1,showView:!1},a.clearGraphViewProps=a.clearGraphViewProps.bind(Object(b.a)(a)),a.onViewClick=a.onViewClick.bind(Object(b.a)(a)),a.handleNewViewInput=a.handleNewViewInput.bind(Object(b.a)(a)),a.handleNewViewSubmit=a.handleNewViewSubmit.bind(Object(b.a)(a)),a.newView=a.newView.bind(Object(b.a)(a)),a.handleShow=a.handleShow.bind(Object(b.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.viewId?this.props.viewId:this.props.match.params.viewId;this.context.openConnection(e,"link"),this.props.fetchViewCommunityData(e)}},{key:"componentDidUpdate",value:function(e,t){this.props.viewId&&this.props.viewId!==e.viewId&&(this.props.fetchNewViewDifference(this.props.viewId),this.props.socketStatus&&e.viewId&&(this.context.emit("unsubscribe","linkfrom:".concat(e.viewId)),this.context.subscribeToView(this.props.viewId)))}},{key:"componentWillUnmount",value:function(){this.props.socketStatus&&(this.context.unsyncUpdates("link"),this.context.emit("unsubscribe","linkfrom:".concat(this.props.viewId)),this.context.disconnect())}},{key:"clearGraphViewProps",value:function(){this.props.setViewLinks([]),this.props.setBuildsOn([]),this.props.setReadLinks([]),this.props.addAuthors([])}},{key:"onViewClick",value:function(e){this.handleShow(!1),this.props.setViewId(e),this.props.history.push({pathname:"/view/".concat(e),state:{currentView:this.state.currentView,communityTitle:this.state.communityTitle}})}},{key:"newView",value:function(){this.setState({showView:!0,showModel:!0})}},{key:"handleNewViewSubmit",value:function(e){var t=this;e.preventDefault();var n={headers:{Authorization:"Bearer ".concat(this.state.token)}},a="".concat(M,"/contributions/").concat(this.props.communityId),r={authors:[this.props.author._id],communityId:this.props.communityId,permission:"public",status:"active",title:this.state.addView,type:"View"};S.a.post(a,r,n).then((function(e){var n=e.data._id;L(t.props.communityId).then((function(e){e.data.views.push(n),x(e.data,t.props.communityId).then((function(e){q(t.props.communityId).then((function(e){F(t.props.viewId,n,"contains",{x:1e3,y:1e3}).then((function(e){alert("View Added"),window.location.reload(!1)}))}))}))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}},{key:"handleShow",value:function(e){this.setState({showModel:e})}},{key:"render",value:function(){var e=this,t="Enhanced"===this.state.currentView?r.a.createElement(Mn,{currentView:this.state.currentView,onViewClick:this.onViewClick,onNoteClick:function(t){return e.props.openContribution(t,"write")}}):r.a.createElement(Da,null);return r.a.createElement("div",{className:"container-fluid d-flex flex-column",id:"container-fluid-for-view-js"},r.a.createElement(dr,null),r.a.createElement("div",{className:"row"},r.a.createElement(ra,{onViewClick:this.onViewClick,communityTitle:this.state.communityTitle})),r.a.createElement("div",{className:"row flex-grow-1"},r.a.createElement("div",{className:"col-md-1",id:"sticky-sidebar"},r.a.createElement("div",{className:"row sidebar-list"},r.a.createElement("div",{className:"sidebar-list-col col-4 col-sm-4 col-md-12"},r.a.createElement(Bn.a,{drop:"right",className:"dropdown-btn-parent",title:r.a.createElement("i",{className:"fas fa-plus-circle"})},r.a.createElement(Pn.a.Item,{onClick:function(){return e.props.newNote(e.props.view,e.props.communityId,e.props.author._id)}},"New Note"),r.a.createElement(Pn.a.Item,{onClick:function(){return e.newView()}},"New View"))),r.a.createElement("div",{className:"sidebar-list-col col-4 col-sm-4 col-md-12"},r.a.createElement(Jn.a,{placement:"right",delay:{show:250,hide:400},overlay:this.renderTooltip({message:"Exit Community"})},r.a.createElement(y.a,{onClick:this.goToDashboard,className:"circle-button sidebar-btn"},r.a.createElement("i",{className:"fa fa-arrow-left"})))),r.a.createElement("div",{className:"sidebar-list-col col-4 col-sm-4 col-md-12"},r.a.createElement(Jn.a,{placement:"right",delay:{show:250,hide:400},overlay:this.renderTooltip({message:"Change View"})},r.a.createElement(y.a,{onClick:this.switchView,className:"circle-button pad sidebar-btn"},r.a.createElement("i",{className:"fa fa-globe"})))))),r.a.createElement("div",{className:"col-md-11",id:"main-canvas"},t)),r.a.createElement(E.a,{show:this.state.showModel,onHide:function(){return e.handleShow(!1)}},this.state.showView?r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a.Header,{closeButton:!0},r.a.createElement(E.a.Title,null,r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,null,"Views")),r.a.createElement(Qn.a,null,r.a.createElement(Hn.a,null,r.a.createElement(Qn.a,null,r.a.createElement(Xn.a,{onSubmit:this.handleNewViewSubmit,className:"form"},r.a.createElement(Hn.a,null,r.a.createElement(_n.a,null,r.a.createElement(Kn.a,{htmlFor:"addView",style:{fontSize:"1rem"}},"Add View"),r.a.createElement(qn.a,{type:"text",id:"addView",placeholder:"Enter View Name",name:"addView",value:this.state.addView,onChange:this.handleNewViewInput}))),r.a.createElement(Hn.a,null,r.a.createElement(y.a,{varient:"secondary",type:"submit"},"Add")))))))),r.a.createElement(E.a.Body,{style:{maxHeight:"calc(100vh - 210px)",overflowY:"auto"}},this.props.myViews.map((function(t,n){return r.a.createElement(Qn.a,{key:n,value:t.title,className:"mrg-05-top"},r.a.createElement(Hn.a,null,r.a.createElement(s.b,{onClick:function(){return e.onViewClick(t._id)}}," ",t.title," ")))})))):null,r.a.createElement(E.a.Footer,null,r.a.createElement(y.a,{variant:"secondary",onClick:function(){return e.handleShow(!1)}},"Close"))))}}]),n}(a.Component);fr.contextType=hr;var vr={setViewId:vt,setViewLinks:He,setBuildsOn:_e,setReadLinks:et,addAuthors:ie,fetchViewCommunityData:Dt,fetchNewViewDifference:function(e){return function(){var t=Object(A.a)(I.a.mark((function t(n){var a,r;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Je([])),t.next=3,P(e);case 3:a=t.sent,r=a.communityId,n(Et(a)),n(st(a._id)),n(dt(r,a._id));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},openContribution:ct,newNote:rt},gr=Object(u.b)((function(e,t){return{token:e.globals.token,currentServer:e.globals.currentServer,communityId:e.globals.communityId,viewId:e.globals.viewId,view:e.globals.view,author:e.globals.author,myViews:e.globals.views,socketStatus:e.globals.socketStatus}}),vr)(fr),Er=n(177),yr=function(e){var t=e.component,n=Object(Er.a)(e,["component"]),a=Object(u.d)((function(e){return e.globals.isAuthenticated}));return r.a.createElement(l.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(l.a,{to:"/"})}}))};n(299);var wr=function(){var e=Object(u.c)(),t=Ft(),n=Object(c.a)(t,2),a=n[0],o=n[1];return o&&(Z(o),T(a),e(mt(o)),e(ft(a)),e(Zt())),r.a.createElement("div",{id:"sub-root"},r.a.createElement(m.a,null),r.a.createElement(s.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",component:Dn}),r.a.createElement(yr,{exact:!0,path:"/dashboard",component:Fn}),r.a.createElement(yr,{path:"/view/:viewId",component:gr}),r.a.createElement(yr,{component:Fn}))))};i.a.render(r.a.createElement(u.a,{store:ar},r.a.createElement(br,null,r.a.createElement(wr,null))),document.getElementById("root"))}},[[179,1,2]]]);
//# sourceMappingURL=main.729d4e43.chunk.js.map