(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{117:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},164:function(e,t,a){e.exports=a.p+"static/media/appstore.9eadb2de.svg"},165:function(e,t,a){e.exports=a.p+"static/media/googleplaystore.10b871ef.png"},175:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAC4jAAAuIwF4pT92AAAGaGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDYtMjFUMTE6Mjc6NDYtMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA5LTEyVDE2OjU4OjM1LTA1OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA5LTEyVDE2OjU4OjM1LTA1OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjEyZTJiMzk4LThjNzQtNDE1OS1iNTRiLTQxNjNhZGNiNmY4MyIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmM5Y2JkYzI3LTEwYmMtOWQ0Yy05MjFmLTg1MGRjOTBmZTAwNiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjk3YjYxMzJlLTM1ZGItNDE3OS04MDMyLTYxMWRkMWYwNzVhYSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTdiNjEzMmUtMzVkYi00MTc5LTgwMzItNjExZGQxZjA3NWFhIiBzdEV2dDp3aGVuPSIyMDE4LTA2LTIxVDExOjI3OjQ2LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMmUyYjM5OC04Yzc0LTQxNTktYjU0Yi00MTYzYWRjYjZmODMiIHN0RXZ0OndoZW49IjIwMTgtMDktMTJUMTY6NTg6MzUtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE4IChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pia9hzQAAAD6SURBVFiF7dY/SgNBGIbx366LghqCf25kG1MJXsMDeAjxGFqaFCnU0kN4B1MZsDEW7sJImDVCxkkxT/OywzfwzAffzFYn149j3OJYPua4anCP3YwiMMBdjSazSEdV4z23Rcuizm0QUmRiFJkYRSZGkYlRZGIUmRhFJkaRibFNMoPU/7/PeMFyjdqPlDJPOPvLhpQyszYrDNvsYyelzGGbQ7xiv6e2wl5KmTrI0zXqp/8xTUssfql5wGgbRnuCMfnvmSnOu4+cMhOMwoVcMj860lHrH7lNEd7AKx0JZT4TCYSHPAhEVjrS0eASNzjasMy8zRpvvt+pi74NXzMDHXjf0mfDAAAAAElFTkSuQmCC"},176:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAC4jAAAuIwF4pT92AAAKp2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDYtMjFUMTE6Mjc6NDYtMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA5LTEyVDE4OjA1OjUwLTA1OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA5LTEyVDE4OjA1OjUwLTA1OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmExYzgwOTQwLTIzMjYtNDc4NS05ZTA0LWE0MDJjMDdiNDI2ZCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjcyNzMyNjhjLTE1OTEtYzA0Mi1iM2IxLWM5NjVhNzE5MzRkOCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjcwMTg5MDJiLTU5YjctNDNkNy1iODc1LTk5YmUyNTM2MWJiNCIgdGlmZjpPcmllbnRhdGlvbj0iMSIgdGlmZjpYUmVzb2x1dGlvbj0iMzAwMDAwMC8xMDAwMCIgdGlmZjpZUmVzb2x1dGlvbj0iMzAwMDAwMC8xMDAwMCIgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIgZXhpZjpDb2xvclNwYWNlPSIxIiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMTg3MSIgZXhpZjpQaXhlbFlEaW1lbnNpb249IjE4NzEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjcwMTg5MDJiLTU5YjctNDNkNy1iODc1LTk5YmUyNTM2MWJiNCIgc3RFdnQ6d2hlbj0iMjAxOC0wNi0yMVQxMToyNzo0Ni0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjBiYzRiZGFkLTVkNTQtNDAzYS1iNGIwLWY0ZmViZTgyNzM0YSIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQxODowMDozMi0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmMxM2M1OWI3LWE1MmItNDdkZC1hMmUwLTE3M2E1MGY3OGEyNCIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQxODowNTo1MC0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmExYzgwOTQwLTIzMjYtNDc4NS05ZTA0LWE0MDJjMDdiNDI2ZCIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQxODowNTo1MC0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmMxM2M1OWI3LWE1MmItNDdkZC1hMmUwLTE3M2E1MGY3OGEyNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3MDE4OTAyYi01OWI3LTQzZDctYjg3NS05OWJlMjUzNjFiYjQiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3MDE4OTAyYi01OWI3LTQzZDctYjg3NS05OWJlMjUzNjFiYjQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7C07tpAAAA+0lEQVRYhe3WMUoDQRSH8d+ui4IaguKBBNuYSvAatt5CPIaWJkUaLT2BlXcwlQEbY+EujIRZI2ScFPM1f3Z4A988eDNbvVyfjnGLY/mY46rBPXYzisAAdzWazCIdVY333BYtizq3QUiRiVFkYhSZGEUmRpGJUWRiFJkYRSbGNskMUv//PuEZyzVqP1LKPOLsLxtSyszarDBss4+dlDKHbQ7xiv2e2gp7KWXqIE/WqJ/+xzQtsfil5gGjbRjtCcbkv2emOO8+cspMMAoXcsn86EhHrX/kNkV4A690JJT5TCQQHvIgEFnpSEeDS9zgaMMy8zZrvPl+py76NnwBLFcduiEp6KQAAAAASUVORK5CYII="},177:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAJ/mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDE4LTA5LTEyVDIxOjI1OjE0LTA1OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0wOS0xMlQyMTo1MjozNC0wNTowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wOS0xMlQyMTo1MjozNC0wNTowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxYWYyNTA0Yy1hMDg0LTQwZDAtOTBjYi00N2VjOTM3MDk5MGIiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0NmM4MjBiYi01NGUyLTYxNDgtODE0Ny04ZGI2N2MxYjlkYzQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZTRlNGRmMi0zYjYwLTQ0OWQtOWY1OS1hZDBlZjExMWNlMDMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQyMToyNToxNC0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBpbWFnZS9wbmcgdG8gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6M2E4ZGZjNmQtZmVkNC00MzI4LTgzMjgtMzRmY2M2YjIyMzExIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjM4OjQ1LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MjZlZDljYjYtOGJlZi00NDllLWI2NzQtNzZiYzAzNDIxYjY0IiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjUyOjM0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MWFmMjUwNGMtYTA4NC00MGQwLTkwY2ItNDdlYzkzNzA5OTBiIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjUyOjM0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjZlZDljYjYtOGJlZi00NDllLWI2NzQtNzZiYzAzNDIxYjY0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu/x7K8AAAkXSURBVFiFvVhpkFxVFf7OuW/r6WV6m+7ZiBIlBAOCLGICkigVBUeBKiuSgCguP4JQSgGJCEFERYkkJD9iWSWLUJRYgiAoUQqKUFAolBZCINEYIAskk+np6emeXub12+7xR/eIBYGaGOP3/937nfOdc893Ho2sXoeSKiIgBVNCBGTAkgABTBgIAQABmbDEh0cWLAkAAAoR2rBHSip3nQv7eEe8VwtSvSUh07/xyIISDY9M2BLAJxMsERQ0NBgMjYgUlEQIyYCCRjEcB+MQQBDY8KHBc/Zz8Ve71dCj03AWmQhTLjmn7OWBB97k4iMh1LE2fDAEApr1+bMmYyGAgQjjnFu9V/XvrFFyuUIECwEEBBMhDESoUfK8N7m4o8S573GX/P+MzMyFDYov3c+FF0cpvzaCYTvw3hE5QeB0yY1y/sZ9XPhHg3rOs6QTyH9N5i1J1PAY5e7ew4OPT8M5yYEPhehd0y8AFDQc8dGGNX8PDz4yyvn7I6i5Hek05FDIdCQJUebMVbvV4M4qJb9sIILVLejZwupKV+fEsr1qYGeJc2sYGg6C9yYjAAxEsCVAg+Kf2KeKfx2lwvoARsyBD4K8a0TvBkE3w+IjglIHKP+DN9TAtjrFP2OL/w7peOYDRwJE4MIY5+7cw4Nbmug51Ubng0PpiIOTIihEcOBjGs6CPTy4eZT77guh5tjSCRQgsCUhLISoUO/lu9TQzknq/arRLdojARMhTISYpNSKXWronxOcXmVKCBM+OCSjZ48a2HJA5TeFMHpnJDmSmOk6DeUc4PxPdquh532YeSWLV/5ylAsjcXHBR5jE28EQmIgwRclhn62TqXfN02IcYpccCYRkgAkSReDDLNHDgwaDIOC54ZtrXHIQQB3xWnk7CEAERotiOCocvVUtXHjqsyFZUZPinwxgQkH/37LkkwmAMSSlW+YHr1/LTU4iL1M/nKv3HZuWxh8CGAhgHDFCBCCEggcTSZl+aq7ed1K/rnynxXEoY/HXbnY5ZuR07S8ZNO4zEe3yyPqYS3aSIWDo7hGHT0JA8GDBQlgd0JUrB3X5m0mZLpU4t7jOyYvV9JIrn/RgXeKTmejR7SfS0ng5Lu4mAlItip0+Y34OFz4MCBhZqd8xrEsjOan/OSSFUdV30zhnf1Hj1Nmq/+OfP7fGqeE22Ysa1PNFAG8k4G5P68ZjDvynAjJPcOEMAoA6xAInCCIYCGAiIe1XBmTi0n6Z2GBL4E1weul+Lj48Sb1fiMCwEUKdsfDkLZMqu8wnMxmSka1TYnmb7A9ZCJ7LSGNbQqZvN0hPeWQvbsMyFfSsHJmA4JEJhSgqSnXNoC5fnJLmay7ZmVFV+NkY59d7ZBUBgAn1Y8LdK9SCRWdXLYo2anDBh3WaBqNN9oI6xy8PoabjcJ9L68bzcWnfIURDLXJO0FDvKV3HSilkpPnwsC6N5HX1USHCOGdXjqrC5jolThcQGBo5qd0zqCtLc7q6VeXOWpEP2GwVdHWzA//JEOr4gMyhiAyjwfFPt9AzwiSvJqW1PStTD1qIXvDIPMUlJ0+QLikCofN4+TARg7d3UE+sLErlBgderUap0/dz4dcVzlwWwrABII7pVwZ15ZIBXb5Ng3wNzit/yRVjLfSca8F/PCe17Um4dzBJ3YN1VgRl+mwO1Sl+qUfmsAP/qYw0tiVlehMD7JKzOIQBhnSfA0FeauuG9PhIEq3tLhzjAOc3lDh3u0vOHAAwEeqCVG8Y1uMXpaWxq0Wx7CgXHiqrzHpK3vCMiBBMBH6frq7p09VbLQSoU6K/zJmNNU5eqIUBAhzxJvt0dXVOpu60xMck9x5b4tz1Hqx5FoI9eV1bm5PaiwEMlDmzokbJdS7sQXQlSUnz93mpfSur67s9MlGh3svLnP2xBzMJItD86x64a5c66isxaSMihaRuvZCX2tVZPfW0EGGC0udVOL22hdj8mQ5JSmtLUVeuisHf2uQe1CiJtDSR0C24sI8Z58yGOiVGZgq5B+6evJ76dlam7lcSok7J00qcu61OPWcqCFyyMCcae1gtXHja5iYnTmhx7DhDIvhkDU5R8lKfzCFb/C0ZqW+Li/tTBU1tspZoKHhkHt3k+Mo2We+LwB6IYwHUiXWKrypz9p4WxeYBHRvbJ7Vbh3T5sxlpbG+TxSXOb9ivCnd6ZM1R3WUuI43HFwQ7l9P5q9aibPRhgtPLJym1wYPVr6ARkoIjXqVPV6/J6drdBiLUKT5vnHObpiixVAhQImBEYAg0CBHUvy1qSlrP5qV2RUZPbY2gUOHeC8ucWeeSM6wkggbDRlDN6Po1Oand1ReNQ33wzHNQVylYCLaldevnIEm6ZH+0M1FVT52TF7TJXsSkX8zo+o6ktO41EL3hk3VGQGZP5/rO/hRBwUbY6NcTVw9I5bKY+KU6x48+wPm7xzm3JoJKUZduRup3FWXygri4f4rIQEy7UPPO+BSanIAHEyZFflLcP8bgPRGSWuDDGmZotNn+QJ0S3wjINGPibclK46W4uJsE1OeRfUpnzjPS0rh3WErnZHX9GZdtlDlz/Rj3/XaaYsd19iVGXNpb+2Xykow0NgrRdEidoZzQTdDI6nUYM4rwYXY2ASEYCMEQ1Ch55QSnbw5g9Mws63FxX83r2qq8nnwkgoGSyh01RYkTU9LaUdDV15QEmOT00jJn1rmwP8zdZd9EGGakfmNWT/2IAbTJArrjRUFQDMfeykwE1fXAhJA6D34c7ecTcO8hSJ9LzokEQQgjN0WJ5T7ZCyLil01Eu0zSOx3xJgOo95dVbuM459aHUEXudlNamg8OSOX8JKZ/F5FCSAr/6QS4mxnj4AOuc0ibbJgI9w/qiS/FqX3fBPeuc+EsUNCYpN5lUxRf5oj/NwYmGxxL+zBOnXn8BAwH3ut5XVudlNZDERg+mZipmYON3IOSeYuUIOx6v4S4j8Uj97Eqp75bod6bhAAIwSX75LcHwdDo09W1vWhcb0kY+TBnNe9n/UvEIwMCIK+r35+jx47r1c1HO5XF3a2TEcBASppb5uixj+Sldi2AyJslkUMiMzMI27BgItwxrEufG9Lli2z4L4Uw6o54fx+S8a8P6fLZMfgveWR1Xf/s8S+0s1o+OdaCaQAAAABJRU5ErkJggg=="},178:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAJ/mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDE4LTA5LTEyVDIxOjI1OjE0LTA1OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0wOS0xMlQyMTo0ODoyNC0wNTowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wOS0xMlQyMTo0ODoyNC0wNTowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowZmU3NjVjNi01NjhmLTRhY2UtYTVlMi1kMjJmMDA5NDBiNmMiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpiODQwOTQzYS1iNjliLTdhNDItODNiZS0zOTY2YWEwNmIxMDQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZTRlNGRmMi0zYjYwLTQ0OWQtOWY1OS1hZDBlZjExMWNlMDMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQyMToyNToxNC0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBpbWFnZS9wbmcgdG8gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6M2E4ZGZjNmQtZmVkNC00MzI4LTgzMjgtMzRmY2M2YjIyMzExIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjM4OjQ1LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTdmMzAzOWEtODMwNC00MDhlLWI2ZDQtNjRhNTczZGZlNTNiIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjQ4OjI0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MGZlNzY1YzYtNTY4Zi00YWNlLWE1ZTItZDIyZjAwOTQwYjZjIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjQ4OjI0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTdmMzAzOWEtODMwNC00MDhlLWI2ZDQtNjRhNTczZGZlNTNiIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PotzvqwAAAlFSURBVFiFxVhpkF1FFf7O6b7v3vu2mSSTbTKTmYTJPkkGCISlCFjBsIiouEAoUNSSkooiGFNlJQiFSyRKAqXID1ZTilJlEbFYRAxgFSUIgjFBskwWMhMyM1kmM2/ee/e9d+/tPv54bxLWOKx+f+6Pru77ne/rPud009prL8HEhIVDglDoTd9YCIAgQYKKMFyujkEIIRhZCi+YooJVaY7bC1Z3dhv/liPW3eApC2sFHgvKluCSwIBgBGACrACaBJFUx2IQ+kIGY4QgABaEwCookuaZeuiB+U7u8ToOzwyF6rIcnTLXyT002xn6YwJmWiAaBgQa6Q+AkZMJRCESRqsOvjdXD3ZO4NLlkRBKokAAysIIRWE8lz87R+V2TNXFG60QAlGQWjAfiAwBiIQRiMZoDhfPVrmXp6n8zx1Yryga9g2RV5UDiqLAALWp/M2zde7VBg4vKkOhIvw/Cb0jmWFLiqKhSRrbdOH++U5uYx2HJxVFI8K7L0wA4trcFEWz5zm5R6ar/IMO2dbCWwIYEZmSKITCmKyD6zucwc5GDq4atuS9oCwKoRDGc/nS+Xqwc6ouroyEUHyXdY6SOWaJwigOz56jcy/OUEPrXLKpt1oyUhxTWEHDOm0q/5O5enBLgwrPD2oBv3FNPua1hiZpOEEX7prv5P42isNTiqLfNuH9gABEYBRFo56jufP04J+n6/wDLtmmN1rHFWFURKFRla7pcAY6mzj4xvuxZKQY3gKNXLr8RGews1kFy0PLKAuDHRK/3RnaOF0N3emSHfV+LRkp3nQ4YP02lb91XmLwOY/saH2SV7hvsgoWH7HOiPPBh0UqAiMSxkQun36Sp35HnSvPllgI8jGReCcIgAQJ2IJiBfm/kREAGgIBCW+tpFZmOEYC9mMnJAAcCOo4Rmfor1HtCzqeY+ZojAoXe2QRgz/yvSOoJjifYhARdpjM6n+XUys5pYBum179r2jUtAPWe9QjAw/mI1NJALiw8MjgsPWe2hTVz98dp1clFUEtX9TyoxQb3WP8lw5a7/cV8K4Um4UZirMW9KEdcwGgIEiSRRm6f49JX7crzlx3xDoHWnXprLEqXKpWnzPh6SzCKz2yySGrNx6w/iuD4vxSQNl6jk5L1Kz7oPDJgAnosf7d2+Psp/Yb/3mHLKY5xZtOUIX141R4rrr0jOlLxqtKc5aiM0er6HIAXUfE3XbQuk8URT/lkW3PcjyJqFqN34tKAiBRsyQn7uadJvOVPXH69pJwpUmVzp3pDG2YxOXLNAnKwlDtJ3c8Pd6JvuCTzbpkxjSoytIMm1llUX/vs97WfnHvicEDKYoXpSlOmBFYV92ggiQZROB4r02v6ozTVxy23u4MRfUzdP7ONl1clyYzAQBiUoObKtml6qyF7YMF8m5jwtgkmVMdABmK2hs4XJYgKeas848+47+QE+duJjTWczTPITmudR4ZOCQ4YP0N20z2wn0m+RhBMEUVr56p84+O5crpBMCAsN8k799pskt648QW9eUzp41m5tLrxn+8KPqvCbJzPLJNDokew+H59RxdaEA7+8Xd2me8DWXRL/lsTsxSNFZAR/vc4eSVJIu81Xt3mszVe+LMTUVRufFcOWWmLjzYooJlCbIeQBgQZ/Muk75yl0nfRoTQRTxa3Xx2Y+8oDi8oi/pLj/W29Vv3XkM0mCSzyCFxkhRPGqsqVyUpbgxEPdNnvVeP2MSvhAgZis9xqZosXbIQIuwz/s92mOxFh627NUuRatPFdW2qcG+WoxYAKIs2XTZ1w444e8Uh4+2p56h+hs4/NFmV1tLulYtEwaIkutxt/FXdJrWuBIUGLo+fzMHtE1T5Ml3LOgXR/XtNasV+499fFsZEVZneqoNVKcTTS1B79xn/lp7Y35wgg8m6fOlEDtZmKJ5EqF5VDlrvT/tM8ju9xu3yyaJJBd9sUcEtScR1lhj05Irz72lP5L9etAoOCQ7bxD+7TWp5j/WeZQiaVOmiZg7W1HM0myCwIPRbd+Nuk1xeEGdLli1G6xgDRmPQKGQRtbXo4tqxHF7MEBAEg5J47XWTXLHf+g+FljBOlRdMVcW1DRwuMkJIssGOKLVBzV3Q8VhGy5w6jmbH1YFJ41Xlqz6ZiSVRT/UZf+uAuHfGIEmT+YQmiyTFUxs4vCbFpllDKkTk+4jnjqPyiim6uL6eo5kEQSSMLptasyPOfLrPutvSZKhNF9bN0Pn70mRajBA0CXqt/8SL5exSuuXbn0eDCzSp8pcmcXBbiuLGWAgOWRRFH+oyqeX7jP+bSBgNXGmboot3jOPKeQTACCGubWIFgYat9rEADtvEs10m9a0+621xYNGoSl9sVcHaDMXNsRAUCQJRR/bb5Hf3G3/9wQpBXXjaLNRri0CcVw9Z7y4B0lmOFwKAJqTGceVzGY5PN+CX+6zX2W/d34ZQe5NkznDJpEztiBMAhwQlUUN7TPr6XSa7rCD6QANXWqfrwn1TVPFGh2ydAAAReq1/zx6T+UxOnOddsigZQC1ZOAsZLfDJIgKFh637RF6cJxOws5Jkmo0QMhy3jVOVZS6syovzTK94mwescwcBDRkyC3StzveJt74zzlzQY/1nU2zQqorfn6YKD9dxNNsKQREwaBObdpv0FT0m+QtFKHlkISDkDYHWXnsJJrq2egGXaoQVUbAAJqjytZM5WO2SSZmadQOS2LHPpFZ0x94jDgEtOmgaw9H8AXG2d8f+7kgIk1Rp8WQV3JqlqMPULCmLinqt/4P9xl9jAaTIYFhSI4SeCkOdV1NGU/XKMiw3iJCziRcGJPFrARoyHHdYAB7ZhnFcXpokM0sRtlSgXytyYmdJeMCjuKVVFW+fqovrXDITRAhEwAHr/WG3yVx82LqPJcgiQfZYOSEcXxmg2sErCCpgVIQxlitLmlVwax1Fc40QuPZMEoh+OSbVr2HrfcSnemQwfEry4uzqNskV/dZ9WJOFCwuL4XYCb1NGH6fe1dpCC0WCAes+mRNn3kQu39DEwQ8VhLhax04mREcDqJYGQpdJ/rTX+jeEwtaj+GjJOB5G3KgkyYAh6DbJH79i6mcesN4jCbJQBFRqDwEuWRyy7sZX4rqOLpNayRCbJDPitmPEZIY7tTTFqAh3bouzF2+Ps5cVRG9KkOQK0P/ZbjJf2x5nP1kUtTlFMd7rreO/jQ6xxai3LRoAAAAASUVORK5CYII="},179:function(e,t){e.exports="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAArCAYAAADyijE0AAAACXBIWXMAAC4jAAAuIwF4pT92AAAKp2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDYtMjFUMTE6Mjc6NDYtMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTExLTE4VDE1OjQyOjQ3LTA2OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTExLTE4VDE1OjQyOjQ3LTA2OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmJjZmIyYjEwLWEzZmEtNDEzNC04MTRlLWFkOTk1MzY0YWI2MSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjE4MzhiYWEzLTQ0OTEtODU0MC1hZDBkLTZlNDYxYjg1Y2FmNyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmMyZmRkYmUwLTkxNTktNDUzZi1hNTc0LTQyYWJlMjJmM2ViOCIgdGlmZjpPcmllbnRhdGlvbj0iMSIgdGlmZjpYUmVzb2x1dGlvbj0iMzAwMDAwMC8xMDAwMCIgdGlmZjpZUmVzb2x1dGlvbj0iMzAwMDAwMC8xMDAwMCIgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIgZXhpZjpDb2xvclNwYWNlPSIxIiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMTg3MSIgZXhpZjpQaXhlbFlEaW1lbnNpb249IjE4NzEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmMyZmRkYmUwLTkxNTktNDUzZi1hNTc0LTQyYWJlMjJmM2ViOCIgc3RFdnQ6d2hlbj0iMjAxOC0wNi0yMVQxMToyNzo0Ni0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjRjNTVlYzUyLTNhMmItNDU4NC04ZWJmLThhNWQ5ODFmNGNhYiIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xOFQxNTozOTozOC0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQzZjE3NmNiLWFhMGYtNDZkYS1iZTk1LTczZjUyNTI2MGZkOCIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xOFQxNTo0Mjo0Ny0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmJjZmIyYjEwLWEzZmEtNDEzNC04MTRlLWFkOTk1MzY0YWI2MSIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xOFQxNTo0Mjo0Ny0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQzZjE3NmNiLWFhMGYtNDZkYS1iZTk1LTczZjUyNTI2MGZkOCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpjMmZkZGJlMC05MTU5LTQ1M2YtYTU3NC00MmFiZTIyZjNlYjgiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjMmZkZGJlMC05MTU5LTQ1M2YtYTU3NC00MmFiZTIyZjNlYjgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7y32vAAAADuklEQVRYhe2YTWhjVRTHf/e+jzRtMglaW1tSptC0tpShC0EQKqUutG6qojgrF8Iwiu4GcSEuFXfqTgYd7FpBMLNxNkJFunDRLrIouugH/bax9pm2JO+93DuL5MUmmYQOzWu78L+5eSfn8n7v3nPOe/cIrTUAs7Oz1EkAt4BpQAIOcA/4vd4xUCaTafbXmWQ2sSeBB8BzdfbbwCfAZ+e662PAJIA/gaeAPeCryvgC8A7wKdAPfNBuGPkI290KyDzwLHAIjALfAS9XfN4HXgobpge4Wfn9IfAD8DXwEfArkALuACil3jVNk46ODrTWKKXaB1MoFJBSjmqtkVJmDMN4TWv9PDCvtb5VcfsmmBOJRJ45OjpiZWUF0zTp6upqH8zAwAD5fF7bto3jOEe7u7v9AK7rfuF53j2lVEZKKT3Pu1YoFDAMw8hms2xtbWHbNqVS6dwwYm5u7gngY63106urq/2Li4vTsVhs3TAMXSqVBoeGhuaHh4dXFhYWXtzY2Lg+MjKS3dzcvBGNRv+dmpr6CZCWZbnn5PgH+NwEXgfei0ajXd3d3eRyOfr6+q7PzMzgOA5CiKlEIjFlWRa5XI7p6ekbk5OT5PP5a7Ztv62Uake8nAB/mMC3AL7vo5RCCAGAYRhEIhG01ggh0FoTFEjLsrBtu8Z2TnUCd03ABWwhBL7vA6C1xvM8fN9Ha12NByEESil836/6tlGuBIrBValUqt78dEC6rovrukhZjnfP89oNAlCsZpPneViWhRACKWV1VQCKxSK2bSOlrFmpdqum6AUxUB8HpmkihKiuSAhb1AjTSgFgEOBXAiZMnRnmInS1YZRSmKaJZVn/OUmJZVkopULdroZsqrwoOT4+rtpd18VxHGzbDg2kASYej9Pb28vh4SHr6+tV+87ODnt7eySTSTo7O0PLqJrPzkgkQjqdJpvNsrS0xNraGkII9vf3UUoxMTFBMpkMbasavoHHxsYQQrC8vMzBwQFQjpl0Os34+DjRaJSTk5OLgQEYHR0lFouxvb0NQE9PD4ODg0A5fsJSs6MKqVSKVCrVYA/rVQBXvc5cpv6HaaarBBNvmk1t0s/Ab8BZqmQxTJgHwCuPMyFMmF8qowSepNzvaSUZJky8MiaAFcpno2YSgAgTRpwaY2fw//4isklTPr620o/AzauQ2hngDbj8OpMBXg0uLhOmBgQuD+Z+PQiUYVqlXLt0ugLfBxqazgHM+TuDj9bphwwafk1BoFyB3wS+pNyIbqf+rowS+ItyK/etVhMeAuZkZDAeOcH2AAAAAElFTkSuQmCC"},180:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAGAGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDktMTJUMjI6MDk6NDctMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA5LTEyVDIyOjIxOjM5LTA1OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA5LTEyVDIyOjIxOjM5LTA1OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjYxYmMzYjk1LWE4ZDItNDFjZC1iMTFhLTFjMzY3NWYxY2IyZiIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmUxMGM5NWJkLWI1NmEtNzI0Zi1hMzJlLTJjZTk1NDRmMDljNCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjhhZDQ5Y2Q5LWMyZGEtNGMxYi1iMmJhLTBiZDZiMjJmZmM5MyI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OGFkNDljZDktYzJkYS00YzFiLWIyYmEtMGJkNmIyMmZmYzkzIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIyOjA5OjQ3LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NjFiYzNiOTUtYThkMi00MWNkLWIxMWEtMWMzNjc1ZjFjYjJmIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIyOjIxOjM5LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6mqJQFAAADHklEQVRYhc2YTWhcVRSAv3Pfve/NNKbtdNKg0bQlFUOxakyVlnZR6EbQVTciFMSli26qBTei0B/cZO1OsHTjTkRcuZAKarASNG1J29CKEap2TJqQSTLv597r4iWDSnWmneFNDjzeD+ee93Huuefcc8V7z2YRKR85QbT/2Nuq8vgoNhY8RdIJJvJu6e7t5MqXE9qMHDird4+96xvL4KMCOZo4mOGn8Y3lIam+d8mLUvgsKR5kQwIDgALf8GncOxCALAFn1xTOpoj0FkYEvMtUbyn+Kbr5JAKioMilnnuk+U/d/GhTkAB0mCsUAWIzcFkewN6vwwSGiVf2Xnnj4K5nUmtrUEQMeUwQ7Pzkh1+nTn4xN04Wr8PYjKHtfXUAEwQ7CyBpyhPV/jo2BaAZwGmWhUVCbEiSZs1Mu6lWU9dgZq99ytLibx3Z6BrM4t3P+Xnmo45sdA1Gm3727fqO6W/eZKW+0FuYJDX8uZAwsPU2tZuvMjP92QPb0K0Urk5dRPvrxMm/M3P+LgJZllBWP1FfcaSZpxwpquUP+fHbSZ49dA6lgu7AlN3HlMKAsvrvrCwlYXXNkWUeJdCIHXGS8FhlitnLx4mq77DnySOdw6wlIWka41zrmrVR/DfutfmYvj5LOTnD5UvjvHj0g/8d3zpmfGelwTlPEICw2lK3pWe2lGKiUN/fMwLOepyHOHZY6/NCvK46sCOkvgL33Fu8cPSlzmEW0+Po+AaNv20GZX0enPOEYYCQoNwMoRGs9YShsH2r4c7CPkafP0up3N8SpC2Y8UMn2zI0+dUpqpWreJ975vfV13nu8Im2xrYN065EJp+W2V8GGBo9x3B1+IFtdA0mS+aZmRtj7PD5h7bRNZhtgy9TGTzQkY2uwTy1/7WObWzO/YzWOu0FgDG62cpqlNIozfzyagmqWOfuFQUSKFWpLa2UCAzYNJDq+1/nabNRx4sgOiqmdxLJ21rvINqCiBCEI+M7gsGRg3iHMmHeyKkCLlGINqA0UnqEbG76gk5vfX9a9VVqatuju12jIVDc+YwHxETYP27dSW5OTshmOrn6C2gfIpLerWS0AAAAAElFTkSuQmCC"},183:function(e,t,a){e.exports=a.p+"static/media/sample_view.e92880b7.gif"},190:function(e,t,a){e.exports=a(326)},235:function(e,t,a){},253:function(e,t,a){},259:function(e,t,a){},261:function(e,t,a){},262:function(e,t,a){},273:function(e,t,a){},274:function(e,t,a){},275:function(e,t,a){},276:function(e,t,a){},291:function(e,t,a){},292:function(e,t,a){},320:function(e,t){},324:function(e,t,a){},326:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(25),i=a.n(o),s=(a(195),a(26)),c=a(73),l=a(22),u=a(13),d=a(75),m=a.n(d),p=a(16),h=a(17),b=a(7),g=a(19),f=a(18),v=a(34),w=a(346),y=a(166),E=a(11),N=a(3),O=a.n(N),I=a(12),j=a(14),S=a(10),k=a(20),A=a.n(k),C=localStorage.getItem("server"),T="".concat(C,"/api");function M(e){return e.endsWith("/")&&(e=e.substring(0,e.length-1)),localStorage.setItem("server",e),T="".concat(C=e,"/api"),C}function x(e){A.a.defaults.headers.common.Authorization="Bearer ".concat(e)}var D=sessionStorage.getItem("token");D&&x(D);var L,Z=function(){var e=Object(I.a)(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("".concat(T,"/users/me"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(e,t){return A.a.post("".concat(T,"/contributions/").concat(e),t)},G=function(e){return A.a.get("".concat(T,"/communities/").concat(e))},R=function(){var e=Object(I.a)(O.a.mark((function e(t,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.put("".concat(T,"/communities/").concat(a),t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),Y=function(){var e=Object(I.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("".concat(T,"/communities/").concat(t,"/groups"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(I.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("".concat(T,"/communities/").concat(t,"/views"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(I.a)(O.a.mark((function e(t,a,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("".concat(T,"/links/").concat(a,"/").concat(t));case 2:return r=(r=e.sent).data,n&&(r=r.filter((function(e){return e.type===n}))),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(I.a)(O.a.mark((function e(t,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.put("".concat(T,"/links/").concat(t),a);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),B=function(){var e=Object(I.a)(O.a.mark((function e(t,a,n,r){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(T,"/links"),{from:t,to:a,type:n,data:r});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),U=function(){var e=Object(I.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.delete("".concat(T,"/links/").concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(I.a)(O.a.mark((function e(t,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(T,"/links/").concat(t,"/search"),{query:a});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),J=function(){var e=Object(I.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("".concat(T,"/objects/").concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(I.a)(O.a.mark((function e(t,a,n){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.put("".concat(T,"/objects/").concat(a,"/").concat(n),t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),_=function(e,t){var a={communityId:e,type:"Attachment",title:"an Attachment",authors:[t],status:"unsaved",permission:"protected",data:{version:0}};return A.a.post("".concat(T,"/contributions/").concat(e),a)},H=function(){var e=Object(I.a)(O.a.mark((function e(t,a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.post("".concat(T,"/contributions/").concat(t),a);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),X=function(){var e=Object(I.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("".concat(T,"/communities/").concat(t,"/authors"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(I.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("".concat(T,"/records/object/").concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(e,t){var a=new FormData;return a.append("file",e),A.a.post("".concat(T,"/upload"),a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})},ee=function(){var e=Object(I.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.a.get("".concat(T,"/communities/").concat(t,"/views"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(e,t){return A.a.post("".concat(T,"/contributions/").concat(t),e)};function ae(e,t){return A.a.get("".concat(T,"/records/myreadstatusview/").concat(e,"/").concat(t)).then((function(e){var t=e.data,a=[];for(var n in t)"read"===t[n].type&&a.push(t[n].to);return a})).catch((function(e){return e}))}var ne,re,oe,ie,se=Object(S.b)("ADD_USER"),ce=Object(S.b)("ADD_AUTHORS"),le=Object(S.b)("SET_AUTHORS"),ue=Object(S.c)({},(L={},Object(E.a)(L,se,(function(e,t){e[t.payload._id]=t.payload})),Object(E.a)(L,ce,(function(e,t){t.payload.forEach((function(t){return e[t._id]=t}))})),Object(E.a)(L,le,(function(e,t){return{}})),L)),de=function(e){return function(){var t=Object(I.a)(O.a.mark((function t(a){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X(e);case 2:n=t.sent,a(ce(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},me=function(){return function(e){e(le([]))}},pe=Object(S.b)("REQUEST_SCAFFOLD"),he=Object(S.b)("RECEIVE_SCAFFOLD"),be=Object(S.c)({isFetching:!1,items:[],fetched:!1},(ne={},Object(E.a)(ne,he,(function(e,t){e.items=t.payload,e.isFetching=!1,e.fetched=!0})),Object(E.a)(ne,pe,(function(e,t){e.isFetching=!0})),ne)),ge=function(e,t){return function(a){a(pe);var n=G(e).then((function(e){return Promise.all(e.data.scaffolds.map((function(e){return J(e)})))}));return Promise.all([n,z(t,"from","uses")]).then(function(){var e=Object(I.a)(O.a.mark((function e(t){var n,r,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t[1].map((function(e){return e.to})),r=t[0].filter((function(e){return n.includes(e._id)})),e.next=4,Promise.all(r.map((function(e){return z(e._id,"from")})));case 4:o=e.sent,r=r.map((function(e,t){return e.supports=o[t],e})),a(he(r));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},fe=a(40),ve=Object(S.b)("OPEN_DIALOG"),we=Object(S.b)("CLOSE_DIALOG"),ye=Object(S.b)("FOCUS_DIALOG"),Ee=Object(S.b)("OPEN_ATTACH_PANEL"),Ne=Object(S.b)("CLOSE_ATTACH_PANEL"),Oe=0,Ie=Object(S.c)({dialogs:[],drawTool:null,focused:null,attachPanel:{}},(re={},Object(E.a)(re,ve,(function(e,t){var a=e.dialogs.map((function(t){return t.id===e.focused&&(t.zIndex=999),t}));e.focused=Oe,e.dialogs=[].concat(Object(fe.a)(a),[Object(j.a)({id:Oe++,zIndex:1e3},t.payload)])})),Object(E.a)(re,we,(function(e,t){e.dialogs=e.dialogs.filter((function(e){return e.id!==t.payload}))})),Object(E.a)(re,Ee,(function(e,t){e.attachPanel=t.payload})),Object(E.a)(re,Ne,(function(e,t){e.attachPanel={}})),Object(E.a)(re,ye,(function(e,t){e.focused!==t.payload&&(e.dialogs=e.dialogs.map((function(a){return a.id===e.focused?a.zIndex=999:a.id===t.payload&&(a.zIndex=1e3),a})),e.focused=t.payload)})),re)),je=a(31),Se=a.n(je),ke=function(e,t){var a="";return a+=" ",a+=t?'<span class="kfSupportStartMark kfTemplateStartMark"> &nbsp; </span>':'<span class="kfSupportStartMark"> &nbsp; </span>',a+=" ",a=t?a+'<span class="kfSupportStartLabel kfTemplateStartLabel">'+e+"</span>":a+'<span class="kfSupportStartLabel">'+e+"</span>",a+=" "},Ae=function(e){var t="";return t+=" ",t+=e?'<span class="kfSupportEndMark kfTemplateEndMark"> &nbsp; </span>':'<span class="kfSupportEndMark"> &nbsp; </span>',t+=" "},Ce=function(e,t,a,n){var r="";return n&&n.length>0&&(r=r+'<span class="KFReferenceQuote"><span>"</span><span class="KFReferenceText">'+n+'</span><span>"</span></span>'),r=(r=r+'<span> (<a href="contribution/'+e+'" target="'+e+'">')+'<img src="/manual_assets/kf4images/icon-note-unread-othr-.gif">"'+t+'"</a>',r+='<span class="KFReferenceAuthor"> by (missing authors)</span>)</span>',r+="</span>"},Te=function(e,t,a){var n="<div>"+e+"</div>",r=Se()(n),o=r.find(".KFSupportStart");o.addClass("mceNonEditable");for(var i=function(e){var a=o[e];if(!a.id.startsWith("supportid_")){var n=Se()(a).hasClass("KFTemplateStart"),r=t.filter((function(e){return e._id===a.id}));r.length?a.innerHTML=ke(r[0]._from.title,n):"Annotation"!==t&&(a.innerHTML=ke("(missing link)",n))}},s=0;s<o.length;s++)i(s);var c=r.find(".KFSupportEnd");c.addClass("mceNonEditable");for(var l=0;l<c.length;l++){var u=c[l],d=Se()(u).hasClass("KFTemplateEnd");u.innerHTML=Ae(d)}var m=r.find(".KFReference");m.addClass("mceNonEditable");for(var p=function(e){var t=c[e],n=a.filter((function(e){return e._id===t.id}));if(n.length){var r="";(n=n[0]).data&&(r=n.data.text),t.innerHTML=Ce(n.to,n._to.title,n._to.authors,r)}else t.innerHTML=Ce("","(missing link)",0,"")},h=0;h<m.length;h++)p(h);return r.html()},Me=function(){var e=Object(I.a)(O.a.mark((function e(t,a,n,r,o){var i,s,c,l,u,d,m,p,h,b,g,f,v,w,y,E,N,I,j,S;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i="<div>"+t+"</div>",s=Se()(i),c={},l=n.filter((function(e){return"supports"===e.type})).map((function(e){return e._id})),u=s.find(".KFSupportStart"),d=s.find(".KFSupportEnd"),m=[],p=[],h=0;h<d.length;h++)(b=d[h]).innerHTML="",g=b.id,c[g]=b;for(f=function(e){var t=u[e],n=t.id;t.innerHTML="",n.startsWith("supportid_")&&(n=n.split("_")[1]),p.push(n),l.includes(n)||m.push(B(n,a,"supports").then((function(e){var a=t.id,n=e._id;t.id=n,c[a]&&(c[a].id=n)})))},v=0;v<u.length;v++)f(v);for(w=l.filter((function(e){return!p.includes(e)})).map((function(e){return U(e)})),y=r.filter((function(e){return"references"===e.type})).map((function(e){return e._id})),E=s.find(".KFReferenceText"),N=[],I=function(){var e=E[j],t={text:Se()(e).find(".KFReferenceText").html()};e.innerHTML="";var n=e.id;N.push(n),y.includes(n)||m.push(B(a,n,"references",t).then((function(t){var a=e.id,n=t._id;e.id=n,c[a]&&(c[a].id=n)})))},j=0;j<E.length;j++)I();return S=y.filter((function(e){return!N.includes(e)})).map((function(e){return U(e)})),e.next=20,Promise.all(w);case 20:return e.next=22,Promise.all(S);case 22:return e.next=24,Promise.all(m);case 24:return e.abrupt("return",s);case 25:case"end":return e.stop()}}),e)})));return function(t,a,n,r,o){return e.apply(this,arguments)}}(),xe={type:"success",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:5e3}},De=function(e){return d.store.addNotification(Object(j.a)(Object(j.a)({},xe),e))},Le=Object(S.b)("ADD_RA_VIEW"),Ze=Object(S.b)("REMOVE_RA_VIEW"),Ve=Object(S.b)("ADD_TO_RA_VIEW"),Ge=function(){var e=Object(I.a)(O.a.mark((function e(t,a,n,r,o){var i,s,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(j.a)({communityId:n,type:"View",title:t,authors:[a],status:"active",permission:"public"},r),e.next=3,te(i,n);case 3:if(s=e.sent.data,!o){e.next=10;break}return e.next=7,G(n);case 7:(c=e.sent.data).views.push(s),R(c,n);case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t,a,n,r,o){return e.apply(this,arguments)}}(),Re=function(){var e=Object(I.a)(O.a.mark((function e(t,a,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.data||(t.data={}),t.status="active",t.data.riseabove={viewId:a},e.next=5,Q(t,n,t._id);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Ye=function(){var e=Object(I.a)(O.a.mark((function e(t,a,n){var r,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t,"from");case 2:return r=e.sent,e.next=5,ae(a,t);case 5:o=e.sent,n(Ve({viewId:t,data:{viewLinks:r,readLinks:o}}));case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),We=Object(S.b)("ADD_NOTE"),ze=Object(S.b)("REMOVE_NOTE"),Fe=Object(S.b)("EDIT_NOTE"),Be=Object(S.b)("ADD_ATTACHMENT"),Ue=Object(S.b)("REMOVE_ATTACHMENT"),Pe=Object(S.b)("SET_ATTACHMENTS"),Je=Object(S.b)("SET_WORDCOUNT"),Qe=Object(S.b)("SET_CONNECTIONS"),_e=Object(S.b)("SET_RECORDS"),He=Object(S.b)("REMOVE_CONTRIB_AUTHOR"),Xe=Object(S.b)("ADD_CONTRIB_AUTHOR"),Ke=Object(S.b)("SET_ANNOTATION"),qe=Object(S.b)("SET_ANNOTATIONS_LOADED"),$e=Object(S.b)("REMOVE_ANNOTATION"),et=Object(S.b)("SET_VIEW_NOTES"),tt=Object(S.b)("ADD_VIEW_NOTE"),at=Object(S.b)("SET_CHECKED_NOTES"),nt=Object(S.b)("UPDATE_CHECKED_NOTES"),rt=Object(S.b)("SET_VIEW_LINKS"),ot=Object(S.b)("ADD_VIEW_LINK"),it=Object(S.b)("SET_BUILDS_ON"),st=Object(S.b)("SET_REFERENCES"),ct=Object(S.b)("SET_SUPPORTS"),lt=Object(S.b)("SET_RISEABOVE_VIEW_NOTES"),ut=Object(S.b)("SET_RISEABOVE_NOTES"),dt=Object(S.b)("SET_READ_LINKS"),mt=Object(S.b)("REMOVE_READ_LINKS"),pt=Object(S.b)("REMOVE_VIEW_NOTE"),ht=Object(S.c)({attachments:{},viewNotes:{},checkedNotes:[],viewLinks:{},buildsOn:[],supports:[],riseAboveNotes:{},riseAboveViewNotes:{},readLinks:[],raViews:{}},(oe={},Object(E.a)(oe,We,(function(e,t){e[t.payload._id]=t.payload})),Object(E.a)(oe,ze,(function(e,t){var a,n=e[t.payload];delete e[t.payload],(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.riseabove)&&delete e.raViews[n.data.riseabove.viewId]})),Object(E.a)(oe,Fe,(function(e,t){var a=e[t.payload._id];e[t.payload._id]=Object.assign({},a,t.payload)})),Object(E.a)(oe,Be,(function(e,t){e[t.payload.noteId].attachments.push(t.payload.attachment._id),e.attachments[t.payload.attachment._id]=t.payload.attachment})),Object(E.a)(oe,Ue,(function(e,t){var a=e[t.payload.noteId];a.attachments=a.attachments.filter((function(e){return e!==t.payload.attId})),delete e.attachments[t.payload.attId]})),Object(E.a)(oe,Pe,(function(e,t){e[t.payload.contribId].attachments=t.payload.attachments.map((function(e){return e._id})),t.payload.attachments.forEach((function(t){e.attachments[t._id]=t}))})),Object(E.a)(oe,Je,(function(e,t){e[t.payload.contribId].wordCount=t.payload.wc})),Object(E.a)(oe,Qe,(function(e,t){var a=e[t.payload.contribId];"from"===t.payload.direction?a.fromLinks=t.payload.links:a.toLinks=t.payload.links})),Object(E.a)(oe,_e,(function(e,t){e[t.payload.contribId].records=t.payload.records})),Object(E.a)(oe,Xe,(function(e,t){var a=e[t.payload.contribId];a.authors=[].concat(Object(fe.a)(a.authors),[t.payload.author])})),Object(E.a)(oe,He,(function(e,t){var a=e[t.payload.contribId];a.authors=a.authors.filter((function(e){return e!==t.payload.author}))})),Object(E.a)(oe,Ke,(function(e,t){e[t.payload.contribId].annos[t.payload.annotation._id]=t.payload.annotation})),Object(E.a)(oe,qe,(function(e,t){e[t.payload.contribId].annotsFetched=t.payload.value})),Object(E.a)(oe,$e,(function(e,t){delete e[t.payload.contribId].annos[t.payload.annoId]})),Object(E.a)(oe,et,(function(e,t){var a={};for(var n in t.payload)a[t.payload[n]._id]=t.payload[n];e.viewNotes=a})),Object(E.a)(oe,at,(function(e,t){e.checkedNotes=t.payload})),Object(E.a)(oe,nt,(function(e,t){t.payload.checked?e.checkedNotes.push(t.payload.noteId):e.checkedNotes=e.checkedNotes.filter((function(e){return e!==t.payload.noteId}))})),Object(E.a)(oe,tt,(function(e,t){e.viewNotes[t.payload._id]=t.payload})),Object(E.a)(oe,pt,(function(e,t){delete e.viewNotes[t.payload._id]})),Object(E.a)(oe,rt,(function(e,t){e.viewLinks=t.payload})),Object(E.a)(oe,ot,(function(e,t){delete e.viewLinks[t.payload._id],e.viewLinks[t.payload._id]=t.payload})),Object(E.a)(oe,mt,(function(e,t){delete e.viewLinks[t.payload._id]})),Object(E.a)(oe,it,(function(e,t){e.buildsOn=t.payload})),Object(E.a)(oe,st,(function(e,t){e.references=t.payload})),Object(E.a)(oe,ct,(function(e,t){e.supports=t.payload})),Object(E.a)(oe,lt,(function(e,t){e.riseAboveViewNotes[t.payload.noteId]=Object(fe.a)(t.payload.notes)})),Object(E.a)(oe,ut,(function(e,t){t.payload.forEach((function(t){return e.riseAboveNotes[t._id]=t}))})),Object(E.a)(oe,dt,(function(e,t){e.readLinks=t.payload})),Object(E.a)(oe,Le,(function(e,t){e.raViews[t.payload]||(e.raViews[t.payload]={})})),Object(E.a)(oe,Ze,(function(e,t){delete e.raViews[t.payload]})),Object(E.a)(oe,Ve,(function(e,t){e.raViews[t.payload.viewId]=Object(j.a)(Object(j.a)({},e.raViews[t.payload]),t.payload.data)})),oe)),bt=function(e,t,a,n,r){if(r||(r=""),!a||a.permission){var o={};a&&"private"===a.permission?(o.permission=a.permission,o.group=a.group,o._groupMembers=a._groupMembers):(o.permission="protected",o.group=void 0,o._groupMembers=[]);var i={communityId:e,type:"Note",title:a&&a.title?a.title:"",authors:[t],status:a&&a.status?a.status:"unsaved",permission:o.permission,group:o.group,_groupMembers:o._groupMembers,data:{body:a&&a.body?a.body:""},buildson:n,langInNote:[]};if(a&&a.docId){i.docId=a.docId;var s=i.authors[0];if(a.coauthors)for(var c=a.coauthors.split(","),l=0;l<c.length;l++)c[l]!==s&&i.authors.push(c[l]);a.createdBy&&(i.createdBy=a.createdBy),i.docShared=[s],i.text4search=a.text4search}return i}window.alert("invalid mode object")},gt=function(e,t,a,n){return function(r){var o={permission:e.permission,group:e.group,_groupMembers:e._groupMembers},i=bt(t,a,o,n);return V(t,i).then((function(t){var a=Object(j.a)({attachments:[],fromLinks:[],toLinks:[],records:[],annos:{},group:null},t.data);n||B(e._id,a._id,"contains",{x:100,y:100}),r(We(a)),r(ve({title:"New Note",confirmButton:"create",contribId:a._id,type:"Note",editable:!0}))}))}},ft=function(e){return function(t,a){var n=a();t(gt(n.globals.view,n.globals.communityId,n.globals.author._id,e))}},vt=function(e){return function(){var t=Object(I.a)(O.a.mark((function t(a){var n,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(e,"from","attach");case 2:return n=t.sent,t.next=5,Promise.all(n.map((function(e){return J(e.to)})));case 5:r=t.sent,a(Pe({contribId:e,attachments:r}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},wt=function(e,t){return function(){var a=Object(I.a)(O.a.mark((function a(n,r){var o,i,s,c,l;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((e=Object.assign({},e)).data=Object.assign({},e.data),e.title){a.next=5;break}return De({title:"Error Saving Note!",type:"danger",message:"Title is required"}),a.abrupt("return");case 5:if("Note"!==e.type){a.next=24;break}return o="active"===e.status,e.status="active",a.next=10,Me(e.data.body,e._id,e.toLinks,e.fromLinks);case 10:return i=a.sent,s=i.html(),c=e.data.body,e.data.body=s,a.next=16,Q(e,e.communityId,e._id);case 16:(l=a.sent).data.body=c,n(tt(l)),void 0!==t&&n(we(t)),o||n(It(l.communityId)),n(ze(e._id)),a.next=28;break;case 24:return e.status="active",a.next=27,Q(e,e.communityId,e._id);case 27:void 0!==t&&(n(we(t)),n(ze(e._id)));case 28:De({title:"Saved!",type:"success",message:"Contribution updated!"});case 29:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},yt=function(e,t){return function(){var a=Object(I.a)(O.a.mark((function a(n){var r,o;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,z(e,t);case 2:r=a.sent,n(Qe({contribId:e,direction:t,links:r})),"to"===t&&(o=r.filter((function(e){return"contains"===e.type}))[0],n(ot(o)));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},Et=function(e){return function(){var t=Object(I.a)(O.a.mark((function t(a,n){var r,o,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().users,t.next=3,K(e);case 3:o=t.sent,i=new Intl.DateTimeFormat("default",Ht),o.forEach((function(e){if(r[e.authorId]){var t=r[e.authorId];e.author="".concat(t.firstName," ").concat(t.lastName)}else e.author="NA";e.date=i.format(new Date(e.timestamp))})),a(_e({contribId:e,records:o}));case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},Nt=function(e){return function(){var t=Object(I.a)(O.a.mark((function t(a,n){var r,o,i,c,l,u,d,m,p,h,b;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J(e);case 2:if(r=t.sent,o=n().globals.author,i=n().globals.isDemo,"Note"!==r.type){t.next=27;break}return t.next=8,Promise.all([z(e,"from"),z(e,"to")]);case 8:return c=t.sent,l=Object(s.a)(c,2),u=l[0],d=l[1],m=Object(j.a)({attachments:[],fromLinks:u,toLinks:d,records:[],annos:{}},r),p=Te(m.data.body,d,u),m.data.body=p,a(We(m)),m.data.riseabove&&(a(Le(m.data.riseabove.viewId)),Ye(m.data.riseabove.viewId,m.communityId,a)),a(vt(e)),a(ve({title:"Edit Note",confirmButton:"edit",contribId:m._id,type:"Note",editable:o&&(m.authors.includes(o._id)||"manager"===o.role),buildOn:!i})),h=d.filter((function(e){return"annotates"===e.type})),t.next=22,Promise.all(h.map((function(e){return J(e.from).then((function(t){return t.data.linkId=e._id,t.data.modelId=t._id,t}))})));case 22:t.sent.forEach((function(t){return a(Ke({annotation:t,contribId:e}))})),a(qe({contribId:e,value:1})),t.next=30;break;case 27:b=Object(j.a)({records:[]},r),a(We(b)),a(ve({title:"Edit ".concat(r.type),confirmButton:"edit",contribId:r._id,type:r.type,editable:o&&(r.authors.includes(o._id)||"manager"===o.role),buildOn:!0}));case 30:return"active"===r.status&&(g=r.communityId,f=r._id,A.a.post("".concat(T,"/records/read/").concat(g,"/").concat(f))),t.abrupt("return");case 32:case"end":return t.stop()}var g,f}),t)})));return function(e,a){return t.apply(this,arguments)}}()},Ot=function(e){return function(){var t=Object(I.a)(O.a.mark((function t(a){var n,r,o,i;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(e,"from");case 2:return n=t.sent,r=n.filter((function(e){return"Note"===e._to.type&&""!==e._to.title&&"active"===e._to.status})),o=n.reduce((function(e,t){return e[t._id]=t,e}),{}),a(rt(o)),t.next=8,Promise.all(r.map((function(e){return J(e.to)})));case 8:i=t.sent,a(et(i)),i.forEach(function(){var e=Object(I.a)(O.a.mark((function e(t){var n,r,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data||!t.data.riseabove){e.next=10;break}return n=t.data.riseabove.viewId,e.next=4,z(n,"from");case 4:return r=e.sent.filter((function(e){return"Note"===e._to.type&&""!==e._to.title&&"active"===e._to.status})).map((function(e){return e.to})),e.next=7,Promise.all(r.map((function(e){return J(e)})));case 7:o=e.sent,a(ut(o)),a(lt({noteId:t._id,notes:r}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},It=function(e){return function(){var t=Object(I.a)(O.a.mark((function t(a){var n,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(e,{type:"buildson"});case 2:n=(n=t.sent).reverse(),r=n.filter((function(e){return"Note"===e._to.type&&"active"===e._to.status&&"Note"===e._from.type&&"active"===e._from.status})),a(it(r));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},jt=function(e){return function(){var t=Object(I.a)(O.a.mark((function t(a){var n,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(e,{type:"references"});case 2:n=t.sent,r=n.filter((function(e){return"active"===e._to.status&&""!==e._to.title&&"active"===e._from.status&&""!==e._from.title})),a(st(r));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},St=function(e){return function(){var t=Object(I.a)(O.a.mark((function t(a){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(e,{type:"supports"});case 2:n=t.sent,a(ct(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},kt=function(e,t){return function(){var a=Object(I.a)(O.a.mark((function a(n){var r;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ae(e,t);case 2:r=a.sent,n(dt(r));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},At=Object(S.b)("SET_DEMO_STATUS"),Ct=Object(S.b)("SET_TOKEN"),Tt=Object(S.b)("SET_CURRENT_LOGIN_FORM"),Mt=Object(S.b)("SET_COMMUNITY"),xt=Object(S.b)("SET_COMMUNITY_SETTING"),Dt=Object(S.b)("SET_COMMUNITY_ID"),Lt=Object(S.b)("SET_CURRENT_SERVER"),Zt=Object(S.b)("SET_VIEW_ID"),Vt=Object(S.b)("SET_AUTHOR"),Gt=Object(S.b)("SET_VIEW"),Rt=Object(S.b)("SET_CURRENT_VIEW_SETTINGS_OBJ"),Yt=Object(S.b)("SET_AUTHOR"),Wt=Object(S.b)("SET_VIEWS"),zt=Object(S.b)("EDIT_COMMUNITY"),Ft=Object(S.b)("SET_USERID"),Bt=Object(S.b)("SET_ISAUTHENTICATED"),Ut=Object(S.b)("SET_COMMUNITIES"),Pt=Object(S.b)("SET_USER_COMMUNITIES"),Jt=Object(S.b)("SET_SEARCH_QUERY"),Qt=Object(S.b)("SET_SEARCH_FILTER"),_t=Object(S.b)("SET_SOCKET_STATUS"),Ht={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0},Xt={isDemo:!1,token:sessionStorage.getItem("token"),currentLoginForm:"Login",communityId:null,currentServer:null,viewId:null,contextId:"",user:null,view:null,views:[],currViewSettingsObj:{buildson:!0,language:!1,references:!1,showAuthor:!0,showGroup:!1,showTime:!0},thisViewsViewSettingsObj:null,communityViewSettingsObj:null,community:null,communitySettings:null,userId:"",isAuthenticated:!!sessionStorage.getItem("token"),communities:[],userCommunities:[],searchQuery:"",searchFilter:"title",servers:[{id:0,key:"kf6.ikit.org",value:"https://kf6.ikit.org"},{id:1,key:"kf6-stage.ikit.org",value:"https://kf6-stage.ikit.org"},{id:2,key:"kf6-stage.rit.albany.edu",value:"https://kf6-stage.rit.albany.edu"},{id:3,key:"kf.rdc.nie.edu.sg",value:"https://kf.rdc.nie.edu.sg"},{id:4,key:"kf.rit.albany.edu",value:"https://kf6.rit.albany.edu"}],socketStatus:!1},Kt=Object(S.c)(Xt,(ie={},Object(E.a)(ie,At,(function(e,t){e.isDemo=t.payload})),Object(E.a)(ie,Ct,(function(e,t){e.token=t.payload,e.isAuthenticated=!!e.token})),Object(E.a)(ie,Bt,(function(e,t){e.isAuthenticated=!!e.token})),Object(E.a)(ie,Tt,(function(e,t){e.currentLoginForm=t.payload})),Object(E.a)(ie,Dt,(function(e,t){e.communityId=t.payload})),Object(E.a)(ie,Lt,(function(e,t){e.currentServer=t.payload})),Object(E.a)(ie,Zt,(function(e,t){e.viewId=t.payload})),Object(E.a)(ie,Ft,(function(e,t){e.userId=t.payload})),Object(E.a)(ie,Vt,(function(e,t){e.user=t.payload})),Object(E.a)(ie,Gt,(function(e,t){e.view=t.payload,t.payload.data&&t.payload.data.viewSetting?e.thisViewsViewSettingsObj=t.payload.data.viewSetting:e.thisViewsViewSettingsObj=null})),Object(E.a)(ie,Rt,(function(e,t){e.currViewSettingsObj=t.payload})),Object(E.a)(ie,Wt,(function(e,t){e.views=t.payload})),Object(E.a)(ie,Mt,(function(e,t){e.community=t.payload,e.communityId=t.payload._id,e.contextId=t.payload.rootContextId})),Object(E.a)(ie,xt,(function(e,t){e.communitySettings=t.payload,t.payload.data&&t.payload.data.viewSetting?e.communityViewSettingsObj=t.payload.data.viewSetting:e.communityViewSettingsObj=null})),Object(E.a)(ie,zt,(function(e,t){e.community=Object(j.a)(Object(j.a)({},e.community),t.payload)})),Object(E.a)(ie,Ut,(function(e,t){e.communities=t.payload})),Object(E.a)(ie,Pt,(function(e,t){e.userCommunities=t.payload})),Object(E.a)(ie,Jt,(function(e,t){e.searchQuery=t.payload})),Object(E.a)(ie,Qt,(function(e,t){e.searchFilter=t.payload})),Object(E.a)(ie,Yt,(function(e,t){e.author=t.payload})),Object(E.a)(ie,_t,(function(e,t){e.socketStatus=t.payload})),ie)),qt=function(e){return function(t){return function(e){return A.a.get("".concat(T,"/authors/").concat(e,"/me"))}(e).then((function(e){t(Yt(e.data))}))}},$t=function(e){return function(t){return J(e).then((function(e){t(xt(e))}))}},ea=function(e){return function(){var t=Object(I.a)(O.a.mark((function t(a){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(e);case 2:n=t.sent,a(zt({groups:n}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ta=function(){return function(){var e=Object(I.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z();case 3:a=e.sent,t(Ft(a._id)),t(Vt(a)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),sessionStorage.clear(),localStorage.clear(),window.location.replace("/");case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},aa=function(e){return function(){var t=Object(I.a)(O.a.mark((function t(a){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W(e);case 2:n=t.sent,a(Wt(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},na=function(e){return function(){var t=Object(I.a)(O.a.mark((function t(a){var n,r,o;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(at([])),a(Zt(e)),t.next=4,J(e);case 4:return n=t.sent,r=n.communityId,a(Gt(n)),a(Ot(n._id)),t.next=10,G(r);case 10:o=t.sent.data,a($t(o.rootContextId)),a(Mt(Object(j.a)({groups:[]},o))),a(It(r)),a(jt(r)),a(qt(r)),a(ea(r)),a(aa(r)),a(de(r)),a(kt(r,n._id)),a(ge(r,o.rootContextId)),a(St(r));case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ra=(a(116),a(90));function oa(e,t,a){var n={userName:e,password:t};return fetch(a+"auth/local",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return 200!==e.status&&(console.log("Error: "+a+"auth/local"),console.log(e)),e.json()})).then((function(e){return[e,a]})).catch((function(e){return console.log("Error: "+a+"auth/local"),console.log(e),[{error:"Error: server unavailable"},a]}))}var ia=[{name:"IKIT Stage",url:"https://kf6-stage.ikit.org/"},{name:"Albany Stage",url:"https://kf6-stage.rit.albany.edu/"},{name:"IKIT",url:"https://kf6.ikit.org/"},{name:"Albany",url:"https://kf6.rit.albany.edu/"},{name:"Singapore",url:"https://kf.rdc.nie.edu.sg/"}],sa="https://kf6-stage.ikit.org/";function ca(e){for(var t in ia)if(ia[t].url===e)return ia[t].name;return"Error: server "+e+" does not exist"}function la(e){for(var t in ia)if(ia[t].name===e)return ia[t].url;return"Error: server "+e+" does not exist"}function ua(e){var t=localStorage.getItem("Username"),a=JSON.parse(localStorage.getItem(t));for(var n in a)if(a[n][0]===e)return a[n][1]}function da(e,t,a){var n=[];document.getElementById("refreshCheckbox").checked&&localStorage.clear();var r=JSON.parse(localStorage.getItem(e));if(null==r)for(var o in ia)n.push(oa(e,t,ia[o].url));else for(var i in r)n.push(oa(e,t,r[i][0]));return Promise.all(n).then((function(t){return function(e,t,a){var n=!1,r="",o=[],i=JSON.parse(localStorage.getItem(e));for(var s in t)if(void 0!==t[s][0].token){var c=t[s][0].token,l=t[s][1],u=null!==i&&i[s][3]?i[s][3]:{value:"Classic",label:"Classic"};null===i&&!1===n||null!==i&&"active"===i[s][2]?o.push([l,c,"active",u]):o.push([l,c,"inactive",u]),n=!0}else{if(void 0!==t[s][0].message&&null!==i){var d=document.getElementById("uname").value,m=document.getElementById("pwd").value;return localStorage.removeItem(d),da(d,m,a)}void 0!==t[s][0].message&&""===r||"This userName is not registered."===r&&"This password is not correct."===t[s][0].message?r=t[s][0].message:void 0!==t[s][0].error&&""===r&&(r=t[s][0].error)}return n?(localStorage.setItem("Username",e),localStorage.setItem(e,JSON.stringify(o)),1):(document.getElementById("errorMessage").style.display="visible",a.setState({errorMessage:r}),0)}(e,t,a)})).catch((function(e){console.log(e)}))}function ma(){var e=localStorage.getItem("Username");if(e){var t,a=JSON.parse(localStorage.getItem(e)),n=Object(ra.a)(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("active"===r[2]&&""!==r[1])return r}}catch(o){n.e(o)}finally{n.f()}}return[null,null,null,null]}var pa=a(164),ha=a.n(pa),ba=a(165),ga=a.n(ba),fa=(a(117),function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).inputChangeHandler=function(e){var t=e.target.name,a=e.target.value;n.setState(Object(E.a)({},t,a))},n.formSubmitHandler=function(e){e.preventDefault();var t=n.state.uname,a=n.state.pwd;return document.getElementById("errorMessage").style.display="hidden",da(t,a,Object(b.a)(n)).then((function(e){1===e&&(n.props.setGlobalToken(ma()[1]),n.props.history.push("/dashboard"))})),!1},n.openSignUpForm=function(e){n.props.setCurrentLoginForm("SignUp")},n.state={uname:null,pwd:null,errorMessage:null},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){Se()('[data-toggle="tooltip"]').tooltip(),Se()('[data-toggle="popover"]').popover(),Se()(window).width()<=768&&document.getElementById("popover").setAttribute("data-trigger","focus")}},{key:"render",value:function(){return r.a.createElement("div",{className:"row login-form-row"},r.a.createElement("div",{className:"col-lg-8 col-md-10 col-sm-12 login-form-wrapper"},r.a.createElement("h1",null,"knowledgeforum.org"),r.a.createElement("form",{onSubmit:this.formSubmitHandler,className:"loginForm",id:"loginForm",autoComplete:"on"},r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-user"}),r.a.createElement("input",{type:"text",id:"uname",name:"uname",placeholder:"Username",required:!0,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-lock"}),r.a.createElement("input",{type:"password",id:"pwd",name:"pwd",placeholder:"Password",required:!0,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"login-checkbox-wrapper"},r.a.createElement("input",{type:"checkbox",id:"refreshCheckbox",name:"refreshCheckbox"}),r.a.createElement("label",{htmlFor:"refreshCheckbox"},"Refresh my servers on login?"),r.a.createElement("span",{id:"popover",tabIndex:"0",role:"button","data-toggle":"popover","data-trigger":"hover","data-content":"Check this box if you have registered to any new knowledge forums servers since your last login."},r.a.createElement("i",{className:"far fa-question-circle"}))),r.a.createElement("div",null,r.a.createElement("p",{style:{display:"hidden",color:"red"},id:"errorMessage",name:"errorMessage"},this.state.errorMessage)),r.a.createElement("input",{className:"login-button",type:"submit",value:"Login"})),r.a.createElement("p",{className:"login-create-account-p",onClick:this.openSignUpForm},"Don't have an account? Sign up ",r.a.createElement("i",{className:"far fa-arrow-alt-circle-right"})),r.a.createElement("div",{className:"login-apps-div"},r.a.createElement("a",{href:"itms-apps://apps.apple.com/us/app/id1554705711"},r.a.createElement("img",{className:"login-appstore-img",src:ha.a,alt:"Apple App Store"})),r.a.createElement("a",{style:{marginLeft:"10px"},href:"https://play.google.com/store/apps/details?id=com.kf6mobile&hl=en_US&gl=US"},r.a.createElement("img",{className:"login-appstore-img",src:ga.a,alt:"Google Play Store"})))))}}]),a}(n.Component)),va={setGlobalToken:Ct,setCurrentLoginForm:Tt},wa=Object(v.d)(l.g,Object(u.b)(null,va))(fa),ya=a(47),Ea=a(186),Na=(a(235),function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).inputChangeHandler=function(e){var t=e.target.name,a=e.target.value;n.setState(Object(E.a)({},t,a))},n.serverSelectHandler=function(e){e.value===la("Singapore")?n.setState({singaporeSelected:!0}):n.setState({singaporeSelected:!1}),n.setState({server:e.value})},n.formSubmitHandler=function(e){return e.preventDefault(),null===n.state.server?n.setState({errorMessage:"Please select a server."}):!1===/^[a-zA-Z][.0-9a-zA-Z@_-]{1,100}$/.test(n.state.username)?n.setState({errorMessage:["Username must meet the following requirements:",r.a.createElement("br",null),"1. Start with a letter",r.a.createElement("br",null),"2. Not contain any white spaces",r.a.createElement("br",null),"3. Can only contain the special characters @._-"]}):n.state.password!==n.state.confirmPassword?n.setState({errorMessage:"Passwords do not match."}):function(e,t,a,n,r,o,i){var s;return s=null===i?{email:n,firstName:t,lastName:a,password:o,userName:r}:{email:n,firstName:t,lastName:a,password:o,registrationKey:i,userName:r},fetch(e+"api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(t){return 200!==t.status&&(console.log("Error: "+e+"api/users"),console.log(t)),t.json()})).then((function(t){return[t,e]})).catch((function(t){return[{error:"Error: server unavailable"},e]}))}(n.state.server,n.state.firstname,n.state.lastname,n.state.email,n.state.username,n.state.password,n.state.registrationKey).then((function(e){if(e[0]&&void 0!==e[0].token)localStorage.setItem("Username",n.state.username),localStorage.setItem(n.state.username,JSON.stringify([[e[1],e[0].token,"active"]])),n.props.setGlobalToken(e[0].token),n.props.history.push("/dashboard");else{var t=e[0].message||e[0].error||e[0].errorCode||e[0];n.setState({errorMessage:t})}})),!1},n.openLoginForm=function(e){n.props.setCurrentLoginForm("Login")},n.verifyRecaptcha=function(e){null===e?n.setState({recaptchaVerified:!1}):n.setState({recaptchaVerified:!0})},n.state={server:null,firstname:null,lastname:null,email:null,username:null,password:null,confirmPassword:null,registrationKey:null,errorMessage:null,singaporeSelected:!1,recaptchaVerified:!1},n}return Object(h.a)(a,[{key:"render",value:function(){var e,t;return e=this.state.singaporeSelected?r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-lock"}),r.a.createElement("input",{type:"text",id:"registrationKey",name:"registrationKey",placeholder:"Singapore Account Creation Key",required:!0,onChange:this.inputChangeHandler})):r.a.createElement(Ea.a,{sitekey:"6LdTo2oaAAAAALKB-WW7km7SabLVsBXSg4NAaX_K",onChange:this.verifyRecaptcha}),t=!0===this.state.recaptchaVerified&&!this.state.singaporeSelected||this.state.singaporeSelected&&null!==this.state.registrationKey?r.a.createElement("input",{className:"login-button",type:"submit",value:"Create Account"}):r.a.createElement("input",{className:"login-button login-disabled",type:"submit",value:"Create Account",disabled:!0}),r.a.createElement("div",{className:"row login-form-row"},r.a.createElement("div",{className:"col-lg-8 col-md-10 col-sm-12 login-form-wrapper"},r.a.createElement("h1",null,"knowledgeforum.org"),r.a.createElement("form",{onSubmit:this.formSubmitHandler,className:"loginForm",id:"loginForm",autoComplete:"on"},r.a.createElement("div",{className:"login-input-wrapper signup-select-server"},r.a.createElement("i",{className:"fas fa-server"}),r.a.createElement("div",{className:"select-container"},r.a.createElement(ya.a,{placeholder:"Select a Server",options:ia.map((function(e){return{value:e.url,label:e.name}})),onChange:this.serverSelectHandler,className:"basic-multi-select",classNamePrefix:"select"})),r.a.createElement("div",{className:"clearFix"})),r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-user"}),r.a.createElement("input",{type:"text",id:"firstname",name:"firstname",placeholder:"First Name",required:!0,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-user"}),r.a.createElement("input",{type:"text",id:"lastname",name:"lastname",placeholder:"Last Name",required:!0,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-envelope"}),r.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"Email",required:!0,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-user"}),r.a.createElement("input",{type:"text",id:"username",name:"username",placeholder:"Username",minLength:"3",maxLength:"49",required:!0,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-lock"}),r.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Password",minLength:"4",required:!0,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-lock"}),r.a.createElement("input",{type:"password",id:"confirmPassword",name:"confirmPassword",placeholder:"Confirm Password",required:!0,onChange:this.inputChangeHandler})),e,r.a.createElement("div",null,r.a.createElement("p",{style:{color:"red"},id:"errorMessage",name:"errorMessage"},this.state.errorMessage)),t),r.a.createElement("p",{className:"login-create-account-p",onClick:this.openLoginForm},"Already have an account? Login ",r.a.createElement("i",{className:"far fa-arrow-alt-circle-right"}))))}}]),a}(n.Component)),Oa={setGlobalToken:Ct,setCurrentLoginForm:Tt},Ia=Object(v.d)(l.g,Object(u.b)(null,Oa))(Na),ja=a(343),Sa=a(349),ka=a(344),Aa=a(184),Ca=a(352),Ta=a(339),Ma=a(169),xa=a(332),Da=a(333),La=a(345),Za=a(331),Va=a(348),Ga=a(189),Ra=a(334),Ya=a(335),Wa=a(336),za=a(337),Fa=a(167),Ba=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleFilter=function(e){var t,a=e.target.value;t="scaffold"===a?n.props.scaffolds[0].supports[0].to:"author"===a?n.props.user.firstName+" "+n.props.user.lastName:"time"===a?"today":"",n.setState({query:t}),n.props.setSearchQuery(t),n.props.setSearchFilter(a)},n.handleInputChange=function(e){var t=e.target.value;n.setState({query:t}),""!==t&&"scaffold"!==n.props.filter&&"author"!==n.props.filter&&"time"!==n.props.filter||n.props.setSearchQuery(t)},n.handleSearchSubmit=function(e){n.props.setSearchQuery(n.state.query),e.preventDefault()},n.signUp=function(e){n.props.history.push("/")},n.state={query:""},n.handleChange=n.handleChange.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"logout",value:function(){sessionStorage.clear(),delete A.a.defaults.headers.common.Authorization,Ct(null)}},{key:"handleChange",value:function(e){var t=e.target.value;this.props.onViewClick(t)}},{key:"componentDidUpdate",value:function(e,t){this.props.currentView===e.currentView&&this.props.viewId===e.viewId||(this.setState({query:""}),this.props.setSearchQuery(""),this.props.setSearchFilter("title"),document.getElementById("queryForm").reset())}},{key:"render",value:function(){var e,t=this.props.user?"".concat(this.props.user.firstName," ").concat(this.props.user.lastName):null;return e="scaffold"===this.props.filter?r.a.createElement(Za.a,{type:"select",onChange:this.handleInputChange},this.props.scaffolds.map((function(e,t){return r.a.createElement("optgroup",{key:t,label:e.title},e.supports.map((function(e,t){return r.a.createElement("option",{key:t,value:e.to},e._to.title)})))}))):"author"===this.props.filter?r.a.createElement(Za.a,{type:"select",onChange:this.handleInputChange,defaultValue:this.props.user.firstName+" "+this.props.user.lastName},Object.values(this.props.authors).sort((function(e,t){var a=(e.firstName+" "+e.lastName).toLowerCase(),n=(t.firstName+" "+t.lastName).toLowerCase();return a<n?-1:a>n?1:0})).map((function(e,t){var a=e.firstName+" "+e.lastName;return r.a.createElement("option",{key:t,value:a},a)}))):"time"===this.props.filter?r.a.createElement(Za.a,{type:"select",onChange:this.handleInputChange,defaultValue:"today"},r.a.createElement("option",{value:"today"},"Past 24 hours"),r.a.createElement("option",{value:"week"},"Past 7 days"),r.a.createElement("option",{value:"month"},"Past 30 days"),r.a.createElement("option",{value:"year"},"Past year")):r.a.createElement(Za.a,{className:"form-control",value:this.state.query,placeholder:"Search",onChange:this.handleInputChange}),r.a.createElement(Va.a,{className:"viewNavBar"},!1===this.props.isDemo?r.a.createElement(y.a,{className:"mr-2 viewNavBar-logout-btn",onClick:this.props.goToDashboard},r.a.createElement("i",{className:"fas fa-home"})):null,r.a.createElement(Va.a.Brand,{className:"viewNavBar-brand d-none d-sm-block"},this.props.communityTitle),r.a.createElement(Va.a.Text,{className:"viewNavBar-dropdown-title"},"View:"),r.a.createElement(Ga.a,{className:"viewNavBar-dropdown"},this.props.view?r.a.createElement(xa.a,null,r.a.createElement(Da.a,{className:"viewNavBar-dropdown-formgroup"},r.a.createElement(Za.a,{type:"select",name:"viewId",value:this.props.view._id,onChange:this.handleChange},this.props.views.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id}," ",e.title," ")}))))):null),r.a.createElement(Va.a.Text,{className:"viewNavBar-dropdown-title"},"Search:"),r.a.createElement(xa.a,{id:"queryForm",onSubmit:this.handleSearchSubmit},r.a.createElement(Ra.a,null,r.a.createElement(Ya.a,null,r.a.createElement(Wa.a,null,r.a.createElement(za.a,{addonType:"prepend"},r.a.createElement(Za.a,{type:"select",name:"filter",id:"filter",onChange:this.handleFilter},r.a.createElement("option",{key:"title",value:"title"},"Title"),r.a.createElement("option",{key:"scaffold",value:"scaffold"},"Scaffold"),r.a.createElement("option",{key:"content",value:"content"},"Content"),r.a.createElement("option",{key:"author",value:"author"},"Author"),r.a.createElement("option",{key:"time",value:"time"},"Date Created"))),e,r.a.createElement(za.a,{addonType:"append"},r.a.createElement(Fa.a,{style:{cursor:"pointer"},onClick:this.handleSearchSubmit},r.a.createElement("i",{className:"fa fa-search"}))))))),r.a.createElement(Ga.a,{className:"ml-auto"},r.a.createElement(Ga.a.Link,{className:"white mr-auto d-none d-sm-block"}," ",t," "),!1===this.props.isDemo?r.a.createElement(y.a,{className:"ml-2 viewNavBar-logout-btn",href:"/",onClick:this.logout},"Logout"):null))}}]),a}(n.Component),Ua={setViewId:Zt,setGlobalToken:Ct,setSearchQuery:Jt,setSearchFilter:Qt},Pa=Object(l.g)(Object(u.b)((function(e,t){return{isDemo:e.globals.isDemo,communityId:e.globals.communityId,viewId:e.globals.viewId,user:e.globals.author,views:e.globals.views,view:e.globals.view,scaffolds:e.scaffolds.items,authors:e.users,supports:e.notes.supports,query:e.globals.searchQuery,filter:e.globals.searchFilter}}),Ua)(Ba)),Ja=a(347),Qa=a(338),_a=a(168),Ha=(a(253),function(e){var t=Object(u.d)((function(e){return e.globals.author})),a=Object(u.c)(),o=Object(n.useState)(0),i=Object(s.a)(o,2),c=i[0],l=i[1],d=function(t){e.onClose()},m=function(){var e=Object(I.a)(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Array.from(t),l(0),n=[],a.forEach(function(){var e=Object(I.a)(O.a.mark((function e(t){var a,r,o,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.type.indexOf("image/")>=0)){e.next=12;break}return a=window.URL||window.webkitURL,e.next=4,p(a.createObjectURL(t));case 4:r=e.sent,o=r.naturalWidth||r.width,i=r.naturalHeight||r.height,t.width=o,t.height=i,n.push(h(t,"image")),e.next=13;break;case 12:t.type.startsWith("video")?n.push(h(t,"video")):n.push(h(t,"link"));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=6,Promise.all(n);case 6:d(),De({title:"Uploaded!",type:"success",message:"Attachments uploaded!"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){return new Promise((function(t,a){var n=document.createElement("img");n.onload=function(){return t(n)},n.onerror=a,n.src=e}))},h=function(){var a=Object(I.a)(O.a.mark((function a(n,r,o,i){var s,c,l,u,d;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,_(t.communityId,t._id);case 3:return s=a.sent,a.next=6,q(n,f);case 6:return c=a.sent,l=s.data,u=c.data,l.title=u.filename,l.status="active",u.version=l.data.version+1,l.data=u,l.tmpFilename=u.tmpFilename,a.next=16,Q(l,t.communityId,l._id);case 16:(d=a.sent).data.width=n.width,d.data.height=n.height,e.noteId?b(d,r):e.viewId&&g(d,o,i,r),a.next=25;break;case 22:a.prev=22,a.t0=a.catch(0),console.log(a.t0);case 25:return a.prev=25,a.finish(25);case 27:case"end":return a.stop()}}),a,null,[[0,22,25,27]])})));return function(e,t,n,r){return a.apply(this,arguments)}}(),b=function(){var t=Object(I.a)(O.a.mark((function t(n,r){var o,i,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B(e.noteId,n._id,"attach");case 2:a(yt(e.noteId,"from")),e.inlineAttach&&(o="".concat(C).concat(n.data.url),i=n.title,s="","image"===r?s='<img class="inline-attachment '+n._id+'" src="'+o+'" width="100px" alt="'+i+'" data-mce-src="'+o+'">':"video"===r?s='<video controls="controls" width="300" height="150"> <source src="'.concat(o,'" type="video/mp4" /></video>'):(s='<a class="inline-attachment '+n._id+'" href="'+o+'" target="_blank" download>',s+='<img src="'.concat(C,'/manual_assets/kf6images/03-toolbar-attachment.png" alt="')+i+'">'+i+"</a>"),e.onNewInlineAttach(s)),a(vt(e.noteId));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),g=function(){var t=Object(I.a)(O.a.mark((function t(a,n,r,o){var i,s,c,l,u,d;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n||200,s=r||200,c=200,l=200,u=!1,"image"===o&&(c=a.data.width,l=a.data.height,c>200&&(c=200),l=c*l/a.data.width,u=!0),t.next=8,B(e.viewId,a._id,"contains",{x:i,y:s,width:c,height:l});case 8:if(d=t.sent,!u){t.next=13;break}return d.data.showInPlace=!0,t.next=13,F(d._id,d);case 13:case"end":return t.stop()}}),t)})));return function(e,a,n,r){return t.apply(this,arguments)}}(),f=function(e){var t=Math.round(100*e.loaded/e.total);l(t)};return r.a.createElement(w.a,{show:e.attachPanel,onHide:d},r.a.createElement(w.a.Header,{closeButton:!0},r.a.createElement(w.a.Title,null,"Insert Attachment File")),r.a.createElement(w.a.Body,null,r.a.createElement(Ja.a.File,{id:"custom-file"},r.a.createElement(Ja.a.File.Input,{onChange:function(e){m(e.target.files)}})),r.a.createElement("div",{style:{width:"100%",color:"black"}},r.a.createElement(_a.FileDrop,{onFrameDragEnter:function(e){return console.log("onFrameDragEnter",e)},onFrameDragLeave:function(e){return console.log("onFrameDragLeave",e)},onFrameDrop:function(e){return console.log("onFrameDrop",e)},onDragOver:function(e){return console.log("onDragOver",e)},onDragLeave:function(e){return console.log("onDragLeave",e)},onDrop:function(e,t){return m(e)}},"or drop some files here!")),r.a.createElement(Qa.a,{now:c})),r.a.createElement(w.a.Footer,null,r.a.createElement(y.a,{variant:"primary",onClick:d},"Close")))}),Xa=a(58),Ka=a.n(Xa),qa=a(130),$a=a.n(qa),en=a(170),tn=a.n(en),an=a(171),nn=a.n(an),rn=a(172),on=a.n(rn),sn=a(173),cn=a.n(sn),ln=a(174),un=a.n(ln);function dn(e,t,a){return fetch(t+"api/objects/"+a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return 200!==e.status&&(console.log("Error: "+t+"api/objects/"+a),console.log(e)),e.json()})).then((function(e){return e})).catch((function(e){return e}))}function mn(e,t,a,n,r,o,i){var s,c,l=gn(n._to.authors[0],r),u=fn(n.created),d=n._to.group?i.find((function(e){return e._id===n._to.group})).title:null,m=void 0!==n.data.draggable&&!n.data.draggable,p=void 0===n.data.fixed||!n.data.fixed;return void 0===n._to.data?(s="unread-note",c="note"):(s="unread-riseabove",c="riseabove"),{group:"nodes",data:{id:a,name:n._to.title,groupName:d,author:l,date:u,kfId:n.to,linkId:n._id,type:c,canOpen:p},locked:m,classes:[s,o.nodeClass],position:{x:n.data.x,y:n.data.y}}}function pn(e,t,a,n,r,o,i){var s=gn(n._to.authors[0],r),c=fn(n.created),l=n._to.group?i.find((function(e){return e._id===n._to.group})).title:null,u=void 0!==n.data.draggable&&!n.data.draggable,d=void 0!==n.data.showInPlace&&n.data.showInPlace,m=void 0===n.data.fixed||!n.data.fixed;return dn(t,e,n.to).then((function(t){if("image"===String(t.data.type).substring(0,5)&&d){var r=(e+String(t.data.url).substring(1)).replace(/\s/g,"%20");"gif"===String(t.data.type).slice(-3)&&(r=r.substring(0,r.length-3)+"mp4");var i={x:n.data?n.data.x:0,y:n.data?n.data.y:0,width:n.data?n.data.width:0,height:n.data?n.data.height:0};return{url:r,name:n._to.title,bounds:i,locked:u,linkId:n._id,author:s,kfId:n.to,type:n._to.type}}return{group:"nodes",data:{id:vn(a,n.to),name:n._to.title,groupName:l,author:s,date:c,kfId:n.to,linkId:n._id,type:n._to.type,download:e+t.data.url.substring(1),canOpen:m},locked:u,classes:["attachment",o.nodeClass],position:{x:n.data.x,y:n.data.y}}}))}function hn(e,t,a,n,r,o,i){var s=gn(n._to.authors[0],r),c=fn(n.created),l=n._to.group?i.find((function(e){return e._id===n._to.group})).title:null,u=void 0!==n.data.draggable&&!n.data.draggable,d=void 0!==n.data.showInPlace&&n.data.showInPlace,m=void 0===n.data.fixed||!n.data.fixed;return dn(t,e,n.to).then((function(e){if(d){var t=(new DOMParser).parseFromString(e.data.svg,"image/svg+xml"),r=t.childNodes[0].attributes.width.value/t.childNodes[0].attributes.height.value,i=parseInt(n.data.width)/r,p={x:n.data?n.data.x:0,y:n.data?n.data.y:0,height:n.data?i:0,width:n.data?parseInt(n.data.width):0};return{url:"data:image/svg+xml;utf8,"+encodeURIComponent('<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg>'+e.data.svg),name:n._to.title,bounds:p,locked:u,author:s,kfId:n.to,type:n._to.type,linkId:n._id}}return{group:"nodes",data:{id:vn(a,n.to),name:n._to.title,groupName:l,author:s,date:c,kfId:n.to,linkId:n._id,type:n._to.type,download:"data:image/svg+xml;utf8,"+encodeURIComponent('<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg>'+e.data.svg),canOpen:m},locked:u,classes:["attachment",o.nodeClass],position:{x:n.data.x,y:n.data.y}}}))}function bn(e,t,a){var n=vn(e,t.to),r=gn(t._to.authors[0],a),o=void 0!==t.data.draggable&&!t.data.draggable,i=void 0===t.data.fixed||!t.data.fixed;return{group:"nodes",data:{id:n,author:r,name:t._to.title,kfId:t.to,linkId:t._id,type:t._to.type,communityId:t.communityId,canOpen:i},locked:o,classes:"view",position:{x:t.data.x,y:t.data.y}}}function gn(e,t){for(var a in t)if(e===t[a]._id)return t[a].firstName+" "+t[a].lastName;return"Author not found"}function fn(e){var t=e.substring(0,4),a=e.substring(5,7),n=e.substring(8,10),r=e.substring(11,13),o=e.substring(14,16),i=e.substring(17,19);return r<12?a+"/"+n+"/"+t+", "+r+":"+o+":"+i+" AM":a+"/"+n+"/"+t+", "+(r-12)+":"+o+":"+i+" PM"}function vn(e,t){return e.has(t)?(e.set(t,e.get(t)+1),t+"-"+e.get(t)):(e.set(t,1),t+"-1")}a(259),a(260),a(261);var wn=a(175),yn=a.n(wn),En=a(176),Nn=a.n(En),On=a(177),In=a.n(On),jn=a(178),Sn=a.n(jn),kn=a(179),An=a.n(kn),Cn=a(180),Tn=a.n(Cn);Ka.a.use(tn.a),Ka.a.use(nn.a),Ka.a.use(on.a),Ka.a.use(cn.a),Ka.a.use(un.a);var Mn=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={elements:{nodes:[],edges:[]},kfToCyMap:null,removedSearchElements:null,removedBoxSelectElements:null,removedEdgeElements:null,currViewLinksLength:0},n.loadElements=n.loadElements.bind(Object(b.a)(n)),n.supportImageIsDuplicate=n.supportImageIsDuplicate.bind(Object(b.a)(n)),n.compareSupportImages=n.compareSupportImages.bind(Object(b.a)(n)),n.findCyIdsFromKfId=n.findCyIdsFromKfId.bind(Object(b.a)(n)),n.updateReadLinks=n.updateReadLinks.bind(Object(b.a)(n)),n.focusRecentAddition=n.focusRecentAddition.bind(Object(b.a)(n)),n.filterNodes=n.filterNodes.bind(Object(b.a)(n)),n.handleNodeOpen=n.handleNodeOpen.bind(Object(b.a)(n)),n.getViewSettingsInfo=n.getViewSettingsInfo.bind(Object(b.a)(n)),n.updateViewSettings=n.updateViewSettings.bind(Object(b.a)(n)),n.runLayout=n.runLayout.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"loadElements",value:function(e,t){var a=this;if((Object.keys(this.props.viewLinks).length!==this.state.currViewLinksLength||t)&&0!==this.props.buildsOn.length&&void 0!==this.props.references&&0!==Object.keys(this.props.authors).length){this.setState({currViewLinksLength:Object.keys(this.props.viewLinks).length});var n=this.cy.supportimages(),r=new Map;n._private.supportImages=[];var o=this.getViewSettingsInfo(),i=this.props.community?this.props.community.groups:[],s=function(e,t,a,n,r,o,i){for(var s=[],c=0;c<n.length;c++)if("Note"===n[c]._to.type&&""!==n[c]._to.title&&"active"===n[c]._to.status){var l=vn(a,n[c].to);s.push(mn(e,t,l,n[c],r,o,i))}else"Attachment"===n[c]._to.type&&""!==n[c]._to.title&&"active"===n[c]._to.status?s.push(pn(e,t,a,n[c],r,o,i)):"Drawing"===n[c]._to.type&&""!==n[c]._to.title&&"active"===n[c]._to.status?s.push(hn(e,t,a,n[c],r,o,i)):"View"===n[c]._to.type&&""!==n[c]._to.title&&"active"===n[c]._to.status&&s.push(bn(a,n[c],r));return s}(this.props.server,this.props.token,r,Object.values(this.props.viewLinks),this.props.authors,o,i),c=function(e,t,a,n){for(var r=[],o=t.concat(a),i=0;i<o.length;i++){var s=o[i];if("Note"===s._to.type&&"active"===s._to.status&&""!==s._to.title&&"Note"===s._from.type&&"active"===s._from.status&&""!==s._from.title){var c=e.get(s.from),l=e.get(s.to);if("undefined"!==c&&"undefined"!==l)for(var u=0;u<c;u++)for(var d=0;d<l;d++)r.push({group:"edges",data:{id:s._id+"-"+(parseInt(u)+1)+(parseInt(d)+1),source:s.from+"-"+(parseInt(u)+1),target:s.to+"-"+(parseInt(d)+1)},classes:s.type,initialDisplay:n[s.type]});else console.log(s.from+" fromCount: "+c+"\n"+s.to+" toCount: "+l)}}return r}(r,this.props.buildsOn,this.props.references,o),l=this;Promise.all(s.concat(c)).then((function(t){for(var o={nodes:[],edges:[]},i={edges:[]},s=0;s<t.length;s++)"nodes"===t[s].group?o.nodes.push(t[s]):"edges"===t[s].group&&!0===t[s].initialDisplay?o.edges.push(t[s]):"edges"===t[s].group&&!1===t[s].initialDisplay?i.edges.push(t[s]):t[s].url&&!a.supportImageIsDuplicate(n.images(),t[s])&&n.addSupportImage(t[s]);l.setState({elements:o,kfToCyMap:r,removedEdgeElements:i}),0===n.images().length&&n._private.renderer.redraw(),Object.values(a.props.viewLinks).length===e+1&&a.focusRecentAddition(Object.values(a.props.viewLinks)[Object.values(a.props.viewLinks).length-1])}))}}},{key:"supportImageIsDuplicate",value:function(e,t){for(var a in e)if(this.compareSupportImages(e[a],t))return!0;return!1}},{key:"compareSupportImages",value:function(e,t){return e.bounds.height===t.bounds.height&&e.bounds.width===t.bounds.width&&e.bounds.x===t.bounds.x&&e.bounds.y===t.bounds.y&&e.name===t.name&&e.url===t.url}},{key:"findCyIdsFromKfId",value:function(e){var t=this.state.kfToCyMap;if(t.has(e)){for(var a=[],n=t.get(e),r=1;r<=n;r++)a.push(e+"-"+r);return a}return null}},{key:"updateReadLinks",value:function(){var e=this.cy,t=this.props.readLinks,a=this;null!==this.state.kfToCyMap&&e.batch((function(){for(var n in t){var r=a.findCyIdsFromKfId(t[n]);if(null!==r&&0!==r.length){var o=!!e.$("#"+r[0]).hasClass("unread-riseabove"),i=o?"unread-riseabove":"unread-note",s=o?"read-riseabove":"read-note";for(var c in r)e.$("#"+r[c]).removeClass(i).addClass(s)}}}))}},{key:"focusRecentAddition",value:function(e){var t=this.cy,a=e.to,n=this.findCyIdsFromKfId(a);if(null!==n){var r=t.$("#"+n[n.length-1]);r.addClass("recentAddition"),r.on(["select","grabon"],(function(){r.removeClass("recentAddition")}))}}},{key:"filterNodes",value:function(e){var t=this.cy,a=t.supportimages();null!==this.state.removedSearchElements&&this.state.removedSearchElements.restore(),this.setState({removedSearchElements:null});var n=a.images();for(var r in n)a.setImageVisible(n[r],!0);var o=t.collection(),i=e||this.props.searchQuery,s=Object.values(this.props.viewNotes),c=this.props.searchFilter,l=this;switch(c){case"title":o=t.filter((function(e,t){var a=e.data("type"),n=e.data("name");return"note"!==a&&"View"!==a&&"riseabove"!==a&&"Attachment"!==a||n.toLowerCase().includes(i.toLowerCase())?null:e}));break;case"content":s.filter((function(e){if(e.data&&(e.data.English&&!e.data.English.includes(i)||e.data.body&&!e.data.body.includes(i))){var a=l.findCyIdsFromKfId(e._id);for(var n in a)o=o.union(t.$("#"+a[n]))}return null}));break;case"author":o=t.filter((function(e,t){var a=e.data("type"),n=e.data("author");return"note"!==a&&"View"!==a&&"riseabove"!==a&&"Attachment"!==a||n.toLowerCase().includes(i.toLowerCase())?null:e}));break;case"scaffold":var u=this.props.supports.filter((function(e){return e.from===i})).map((function(e){return e.to}));s.filter((function(e){if(!u.includes(e._id)){var a=l.findCyIdsFromKfId(e._id);for(var n in a)o=o.union(t.$("#"+a[n]))}return null}));break;case"time":var d=new Date;o=t.filter((function(e,t){var a=new Date(e.data("date"));if(void 0!==e.data("date")&&"Invalid Date"!==a){var n=(d-a)/1e3;if("today"===i&&!(n<=86400)||"week"===i&&!(n<=604800)||"month"===i&&!(n<=2592e3)||"year"===i&&!(n<=31556952))return e}return null}))}if(0!==o.length){var m=t.remove(o);this.setState({removedSearchElements:m})}}},{key:"handleNodeOpen",value:function(e){var t=e.target,a=t.data("kfId"),n=t.data("type");t.data("canOpen")?t.hasClass("attachment")||"riseabove"===n||"note"===n?(this.props.onNoteClick(a),"riseabove"===n&&t.addClass("read-riseabove").removeClass("unread-riseabove"),"note"===n&&t.addClass("read-note").removeClass("unread-note")):t.hasClass("view")&&this.props.onViewClick(a):De({title:'Cannot open contribution: "'+t.data("name")+'"',type:"default",message:'"'+t.data("name")+'" is locked.'})}},{key:"getViewSettingsInfo",value:function(){var e=this.props.currViewSettingsObj,t={};return e.showGroup&&e.showAuthor&&e.showTime?t.nodeClass="nodehtmllabel-group-author-date":e.showGroup&&e.showAuthor&&!e.showTime?t.nodeClass="nodehtmllabel-group-author-nodate":e.showGroup&&!e.showAuthor&&e.showTime?t.nodeClass="nodehtmllabel-group-noauthor-date":!e.showGroup||e.showAuthor||e.showTime?!e.showGroup&&e.showAuthor&&e.showTime?t.nodeClass="nodehtmllabel-nogroup-author-date":e.showGroup||!e.showAuthor||e.showTime?e.showGroup||e.showAuthor||!e.showTime?e.showGroup||e.showAuthor||e.showTime||(t.nodeClass="nodehtmllabel-nogroup-noauthor-nodate"):t.nodeClass="nodehtmllabel-nogroup-noauthor-date":t.nodeClass="nodehtmllabel-nogroup-author-nodate":t.nodeClass="nodehtmllabel-group-noauthor-nodate",t.buildson=e.buildson,t.references=e.references,t}},{key:"updateViewSettings",value:function(){var e=this.cy;null!==this.state.removedEdgeElements&&this.state.removedEdgeElements.edges?e.add(this.state.removedEdgeElements):null!==this.state.removedEdgeElements&&this.state.removedEdgeElements.restore(),this.setState({removedEdgeElements:null});var t=e.nodes(),a=e.edges(),n=this.getViewSettingsInfo(),r=this;e.batch((function(){if(0!==t.length)for(var o in t)if(t[o][0]&&t[o][0].classes()){var i=t[o][0].classes();for(var s in i)"nodehtmllabel"===i[s].substring(0,13)&&i[s]!==n.nodeClass&&t[o].removeClass(i[s]).addClass(n.nodeClass)}if(0!==a.length){var c=e.collection();for(var l in a)a[l][0]&&(a[l][0].hasClass("buildson")&&!1===n.buildson||a[l][0].hasClass("references")&&!1===n.references)&&(c=c.union(a[l][0]));if(0!==c.length){var u=e.remove(c);r.setState({removedEdgeElements:u})}}}))}},{key:"runLayout",value:function(e){var t=this.cy;if("preset"===e)this.setState({elements:{nodes:[],edges:[]},removedSearchElements:null,removedBoxSelectElements:null,removedEdgeElements:null}),this.loadElements(Object.keys(this.props.viewLinks).length,!0),t.reset();else{var a="spread"===e?{name:e,animate:!1,prelayout:!1}:{name:e};t.layout(a).run()}}},{key:"componentDidMount",value:function(){var e=this,t=this.cy,a=this,n={zoomFactor:.05,zoomDelay:45,minZoom:.25,maxZoom:10,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit:function(){return!1},fitAnimationDuration:1e3,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"};t.panzoom(n);var r={evtType:["cxttap","cysupportimages.imageselected"],menuItems:[{id:"open",content:"Open",selector:"node",onClickFunction:function(e){a.handleNodeOpen(e)},disabled:!1,coreAsWell:!1},{id:"new-note",content:"New Note Here",selector:"",coreAsWell:!0,onClickFunction:function(e){console.log("new note")}}]};t.contextMenus(r),t.nodeHtmlLabel([{query:".nodehtmllabel-group-author-date",halign:"center",valign:"bottom",halignBox:"right",valignBox:"bottom",cssClass:"cytoscape-label",tpl:function(e){if("note"===e.type||"riseabove"===e.type||"Attachment"===e.type||"Drawing"===e.type)return"<div>"+(null!==e.groupName?e.groupName:e.author)+"<br>"+e.date+"</div>"}},{query:".nodehtmllabel-group-author-nodate",halign:"center",valign:"bottom",halignBox:"right",valignBox:"bottom",cssClass:"cytoscape-label",tpl:function(e){if("note"===e.type||"riseabove"===e.type||"Attachment"===e.type||"Drawing"===e.type)return"<div>"+(null!==e.groupName?e.groupName:e.author)+"</div>"}},{query:".nodehtmllabel-group-noauthor-date",halign:"center",valign:"bottom",halignBox:"right",valignBox:"bottom",cssClass:"cytoscape-label",tpl:function(e){if("note"===e.type||"riseabove"===e.type||"Attachment"===e.type||"Drawing"===e.type)return null!==e.groupName?"<div>"+e.groupName+"<br>"+e.date+"</div>":"<div>"+e.date+"</div>"}},{query:".nodehtmllabel-group-noauthor-nodate",halign:"center",valign:"bottom",halignBox:"right",valignBox:"bottom",cssClass:"cytoscape-label",tpl:function(e){if("note"===e.type||"riseabove"===e.type||"Attachment"===e.type||"Drawing"===e.type)return"<div>"+(null!==e.groupName?e.groupName:"")+"</div>"}},{query:".nodehtmllabel-nogroup-author-date",halign:"center",valign:"bottom",halignBox:"right",valignBox:"bottom",cssClass:"cytoscape-label",tpl:function(e){if("note"===e.type||"riseabove"===e.type||"Attachment"===e.type||"Drawing"===e.type)return"<div>"+e.author+"<br>"+e.date+"</div>"}},{query:".nodehtmllabel-nogroup-author-nodate",halign:"center",valign:"bottom",halignBox:"right",valignBox:"bottom",cssClass:"cytoscape-label",tpl:function(e){if("note"===e.type||"riseabove"===e.type||"Attachment"===e.type||"Drawing"===e.type)return"<div>"+e.author+"</div>"}},{query:".nodehtmllabel-nogroup-noauthor-date",halign:"center",valign:"bottom",halignBox:"right",valignBox:"bottom",cssClass:"cytoscape-label",tpl:function(e){if("note"===e.type||"riseabove"===e.type||"Attachment"===e.type||"Drawing"===e.type)return"<div>"+e.date+"</div>"}}]),this.loadElements(),t.on("tap","node",(function(e){a.handleNodeOpen(e)})),t.on("boxselect","node",(function(e){e.target.addClass("selected");var n=t.remove(t.elements("node:unselected"));a.setState({removedBoxSelectElements:n})})),t.on("boxend",(function(e){De({title:"Layout Tooltip",type:"default",message:'Use the "Original" layout on the sidebar button to restore the graph to its initial state.',dismiss:{duration:5e3}}),"spread"!==a.props.layout?a.props.updateParentLayoutProp({target:{value:"spread"}}):a.runLayout("spread")})),t.on("unselect","node",(function(e){e.target.removeClass("selected")})),t.on("dragfree","node",(function(t){var a=t.target.position(),n=a.x,r=a.y,o=t.target.data().kfId,i=Object.values(e.props.viewLinks).filter((function(e){return e.to===o}));if(void 0!==i&&i.length){i=i[0];var s={x:n,y:r},c=Object(j.a)({},i);c.data=Object(j.a)(Object(j.a)({},c.data),s),e.props.updateViewLink(c)}})),t.on("cysupportimages.imageselected",(function(e,t){window.setTimeout((function(){t._private.dragging||a.props.onNoteClick(t.kfId)}),100)})),t.on("cysupportimages.imagemoved",(function(t,a){var n=e.props.viewLinks[a.linkId];if(void 0!==n){var r={x:a.bounds.x,y:a.bounds.y},o=Object(j.a)({},n);o.data=Object(j.a)(Object(j.a)({},o.data),r),e.props.updateViewLink(o)}})),t.on("cysupportimages.imageresized",(function(t,a,n,r){var o=e.props.viewLinks[a.linkId];if(void 0!==o){var i={width:a.bounds.width,height:a.bounds.height},s=Object(j.a)({},o);s.data=Object(j.a)(Object(j.a)({},s.data),i),e.props.updateViewLink(s)}}))}},{key:"componentDidUpdate",value:function(e,t){var a={anyPropUpdated:this.props.viewId!==e.viewId||this.props.buildsOn!==e.buildsOn||this.props.references!==e.references||this.props.authors!==e.authors||this.props.viewLinks!==e.viewLinks||this.props.community!==e.community,currViewLinkUpdated:this.props.viewId===e.viewId&&this.props.buildsOn===e.buildsOn&&this.props.references===e.references&&this.props.authors===e.authors&&this.props.viewLinks!==e.viewLinks&&Object.keys(this.props.viewLinks).length===Object.keys(e.viewLinks).length&&this.props.readLinks===e.readLinks,switchedToEmptyView:this.props.viewId!==e.viewId&&this.props.buildsOn===e.buildsOn&&this.props.references===e.references&&this.props.authors===e.authors&&this.props.viewLinks!==e.viewLinks&&0===Object.keys(this.props.viewLinks).length&&void 0!==Object.keys(e.viewLinks).length,searchTriggered:this.props.searchQuery!==e.searchQuery||this.props.searchFilter!==e.searchFilter,updateReadLinks:0!==this.props.readLinks.length&&0!==Object.keys(this.props.viewLinks)&&this.state.kfToCyMap!==t.kfToCyMap,viewSettingsChanged:this.props.currViewSettingsObj!==e.currViewSettingsObj,layoutChanged:this.props.layout!==e.layout},n=a.switchedToEmptyView||a.currViewLinkUpdated;a.layoutChanged&&this.runLayout(this.props.layout),a.searchTriggered&&this.filterNodes(),a.viewSettingsChanged&&this.updateViewSettings(),a.updateReadLinks&&this.updateReadLinks(),a.anyPropUpdated&&this.loadElements(Object.keys(e.viewLinks).length,n)}},{key:"render",value:function(){var e=this;return r.a.createElement($a.a,{cy:function(t){e.cy=t},style:{width:"100%",height:"100%"},elements:$a.a.normalizeElements(this.state.elements),stylesheet:[{selector:"node",style:{label:"data(name)","min-zoomed-font-size":"6px","font-size":"11px","text-halign":"right","text-valign":"center","text-margin-x":"-5",padding:"0","background-opacity":"0","background-clip":"none","background-repeat":"no-repeat","background-width":"15px","background-height":"15px",shape:"round-rectangle"}},{selector:"edge",style:{width:1,"line-color":"#29648f","target-arrow-color":"#29648f","target-arrow-shape":"triangle","curve-style":"bezier"}},{selector:".buildson",style:{"line-color":"#29648f","target-arrow-color":"#29648f"}},{selector:".references",style:{"line-color":"black","target-arrow-color":"black"}},{selector:".unread-note",style:{"background-image":[yn.a]}},{selector:".read-note",style:{"background-image":[Nn.a]}},{selector:".unread-riseabove",style:{"background-image":[In.a]}},{selector:".read-riseabove",style:{"background-image":[Sn.a]}},{selector:".attachment",style:{"background-image":[An.a]}},{selector:".view",style:{"background-image":[Tn.a]}},{selector:".image",style:{label:""}},{selector:".drawing",style:{label:""}},{selector:".recentAddition",style:{"border-style":"solid","border-width":"2","border-color":"red"}},{selector:".selected",style:{"background-opacity":"0.25","background-color":"black"}}],layout:{name:"preset"},hideEdgesonViewport:!0,textureOnViewPort:!0,autolock:!1,selectable:!0,wheelSensitivity:.15,minZoom:.25,maxZoom:10})}}]),a}(n.Component),xn={updateViewLink:function(e){return function(){var t=Object(I.a)(O.a.mark((function t(a,n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(e._id,e);case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}},Dn=Object(u.b)((function(e,t){return{token:e.globals.token,server:e.globals.currentServer,community:e.globals.community,author:e.globals.author,authors:e.users,viewNotes:e.notes.viewNotes,buildsOn:e.notes.buildsOn,references:e.notes.references,supports:e.notes.supports,searchQuery:e.globals.searchQuery,searchFilter:e.globals.searchFilter,currViewSettingsObj:e.globals.currViewSettingsObj}}),xn)(Mn),Ln=a(351),Zn=(a(262),{private:{r:!0,w:!0},protected:{r:!1,w:!0},public:{r:!1,w:!1}}),Vn=function(e,t){return Gn(e,t)||Rn(e,t)},Gn=function(e,t){return e.authors.includes(t._id)},Rn=function(e,t){return!!e._groupMembers&&e._groupMembers.includes(t._id)},Yn=function(e,t){return function(e,t,a){return!(!e||!t)&&("manager"===t.role||(!1===Zn[e.permission][a]||Vn(e,t)))}(e,t,"w")},Wn=(Object(S.b)("ADD_NOTE"),Object(S.c)({},{}),function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).noteList=[],n.handleSubmit=function(e){if(n.props.viewId===n.state.addView)n.setState({viewError:!0}),window.setTimeout((function(){n.setState({viewError:!1})}),1500);else{var t={x:1e3,y:1e3},a="".concat(T,"/links"),r={headers:{Authorization:"Bearer ".concat(n.state.token)}};n.props.checkedNotes.forEach((function(e){var a=Object.values(n.props.viewLinks).filter((function(t){return t.to===e._id}))[0];t.x=Math.min(t.x,a.data.x),t.y=Math.min(t.y,a.data.y)})),n.props.checkedNotes.forEach((function(e){var o=e._id,i={from:n.state.addView,to:o,type:"contains",data:t};A.a.post(a,i,r).then((function(e){n.setState({visible:!0},(function(){window.setTimeout((function(){n.setState({visible:!1})}),1e3)}))}))}))}},n.handleRiseAbove=function(){var e=Object(I.a)(O.a.mark((function e(t){var a,r,o,i,s;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=n.props.checkedNotes.length)>0)){e.next=14;break}if(window.confirm("Are you sure to create riseabove using the selected "+a+" object(s)?")){e.next=5;break}return e.abrupt("return");case 5:return r=n.props.view,o=n.props.communityId,i=n.props.author._id,s=n.props.checkedNotes,e.next=11,n.props.createRiseAbove(r,o,i,s);case 11:n.props.fetchViewCommunityData(n.props.viewId),e.next=15;break;case 14:alert("Please select at least 1 note to create RiseAbove");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.editNote=function(e,t){n.props.openContribution(e,t)},n.getRiseAboveNotes=function(e){return n.props.riseAboveViewNotes[e]?n.props.riseAboveViewNotes[e].map((function(e){return n.props.riseAboveNotes[e]})):null},n.openNote=function(e){n.props.openContribution(e,"read")},n.state={token:sessionStorage.getItem("token"),addView:n.props.viewId,communityId:sessionStorage.getItem("communityId"),visible:!1,viewError:!1},n.handleChange=n.handleChange.bind(Object(b.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(b.a)(n)),n.handleRiseAbove=n.handleRiseAbove.bind(Object(b.a)(n)),n.getRiseAboveNotes=n.getRiseAboveNotes.bind(Object(b.a)(n)),n.openNote=n.openNote.bind(Object(b.a)(n)),n.editNote=n.editNote.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"handleChange",value:function(e){e.persist();var t=e.target.value;this.setState({addView:t})}},{key:"render",value:function(){var e=this,t=new Intl.DateTimeFormat("default",Ht);return r.a.createElement(r.a.Fragment,null,r.a.createElement(xa.a,{className:"mrg-1-top"},r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,{md:"6"},r.a.createElement(Da.a,null,r.a.createElement(Za.a,{type:"select",name:"viewId",onChange:this.handleChange},this.props.views.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id}," ",e.title," ")}))))),this.props.isDemo?null:r.a.createElement(Ma.a,{md:"3"},r.a.createElement(y.a,{onClick:this.handleSubmit},"Add to View")),this.props.isDemo?null:r.a.createElement(Ma.a,{md:"3"},r.a.createElement(y.a,{onClick:this.handleRiseAbove},"create RiseAbove"))),r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,null,r.a.createElement(Ln.a,{color:"danger",isOpen:this.state.viewError},"Please select a Different View."),r.a.createElement(Ln.a,{color:"info",isOpen:this.state.visible},"Notes added to View!")))),this.props.checkedNotes.map((function(a,n){var o,i,s,c=e.getRiseAboveNotes(a._id);if(c&&(o=r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,{className:"pd-1-left"},r.a.createElement(Ta.a,{className:"sz-1 primary-800 font-weight-bold"},"RiseAbove Notes"),c.map((function(t,a){return r.a.createElement(Ta.a,{key:a},r.a.createElement(y.a,{variant:"light",className:"min-width-10 rounded-pill pd-05",onClick:function(){return e.openNote(t._id)}},t.title))}))))),e.props.query&&a.data.English){var l=a.data.English,u=l.indexOf(e.props.query);u>=0&&(i=l.substring(0,u)+"<span class='highlight'>"+l.substring(u,u+e.props.query.length)+"</span>"+l.substring(u+e.props.query.length))}else if(e.props.query&&a.data.body){var d=a.data.body,m=d.indexOf(e.props.query);m>=0&&(i=d.substring(0,m)+"<span class='highlight'>"+d.substring(m,m+e.props.query.length)+"</span>"+d.substring(m+e.props.query.length))}else i=a.data.English?a.data.English:a.data.body;for(;i&&i.includes('src="/attachments');)i=i.replace('src="/attachments','src="'+C+"/attachments");return s=!0===Yn(a,e.props.author)?r.a.createElement(y.a,{className:"float-right",variant:"outline-info",onClick:function(){return e.editNote(a._id,"write")}},"Edit Note"):r.a.createElement(y.a,{className:"float-right",variant:"outline-info",onClick:function(){return e.editNote(a._id,"read")}},"Read Note"),r.a.createElement(Ta.a,{className:"min-height-2 mrg-05 border rounded mrg-1-bot pd-1",key:n},r.a.createElement(Ma.a,null,r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,{md:"10",className:"pd-1 primary-800 font-weight-bold"},a.title),r.a.createElement(Ma.a,{md:"2"},r.a.createElement(y.a,{variant:"outline-secondary",className:"circular-border float-right",onClick:function(){return e.props.updateCheckedNotes({checked:!1,noteId:a._id})}},r.a.createElement("i",{className:"fas fa-times"})))),r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,null,r.a.createElement("span",{className:"pd-1",dangerouslySetInnerHTML:{__html:i||(a.data.English?a.data.English:a.data.body)}}))),o,r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,null,r.a.createElement(Ma.a,null,r.a.createElement("div",{className:"primary-600 sz-075 pd-05 float-left"},e.props.users[a.authors[0]].firstName+" "+e.props.users[a.authors[0]].lastName," \xa0 ",t.format(new Date(a.created)))),e.props.isDemo?null:r.a.createElement(Ma.a,null,r.a.createElement(y.a,{className:"float-right mrg-1-left",variant:"outline-info",onClick:function(){return e.props.buildOn(a._id)}},"BuildOn")),r.a.createElement(Ma.a,null,s)))))})))}}]),a}(n.Component)),zn={openContribution:Nt,updateCheckedNotes:nt,createRiseAbove:function(e,t,a,n){return function(r){var o,i,s={},c=e._id;s.authors=a.split(","),s.communityId=t,s.permission=e.permission?e.permission:"public",s.status="active",s.title="riseabove:",s.type="View",s._groupMembers=e._groupMembers,console.log("OBJECT",s),H(t,s).then((function(a){o=a._id,console.log("Response",a);var r={};r.authors=s.authors,r.buildson=null,r.communityId=t,r.data={body:""},r.langInNote=[],r.permission="protected",r.status="unsaved",r.title="",r.type="Note",r._groupMembers=e._groupMembers,console.log("NOTE",r),H(t,r).then((function(e){console.log("noteResponse",e),i=e._id,e.data={body:"",riseabove:{viewId:"".concat(o)}},e.status="active",e.title="Riseabove",console.log("noteResponse noteResponse",e),Q(e,t,i).then((function(e){B(c,i,"contains",{x:200,y:200}).then((function(e){n.forEach((function(e){B(o,e._id,"contains",{x:20,y:20}).then((function(t){var a;(a=e._id,A.a.get("".concat(T,"/links/either/").concat(a))).then((function(e){var t=e.data.filter((function(e){return e.from.includes(c)}));U(t[0]._id)}))}))}))}))}))})).catch((function(e){console.log("error",e)}))})).catch((function(e){console.log("Error",e)}))}},fetchViewCommunityData:na},Fn=Object(u.b)((function(e,t){var a=e.notes.viewNotes,n=e.users;return{isDemo:e.globals.isDemo,viewId:e.globals.viewId,views:e.globals.views,view:e.globals.view,checkedNotes:e.notes.checkedNotes.map((function(t){return t in a?a[t]:e.notes.riseAboveNotes[t]})),viewLinks:e.notes.viewLinks,author:e.globals.author,communityId:e.globals.communityId,riseAboveViewNotes:e.notes.riseAboveViewNotes,riseAboveNotes:e.notes.riseAboveNotes,users:n}}),zn)(Wn),Bn=a(91),Un=a(70),Pn=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).buildOn=function(e){n.props.newNote(n.props.view,n.props.communityId,n.props.authorObj._id,e)},n.editNote=function(e,t){n.props.openContribution(e,t)},n.setOpen=function(e){n.setState((function(e){return{open:!e.open}}))},n.checkNote=function(e,t){n.props.updateCheckedNotes({noteId:t,checked:e.target.checked})},n.updateNoteMobile=function(e,t){n.setState({isCheckedMobile:e.target.checked})},n.state={note:{},showNote:!1,open:!1,riseAboveData:{},isCheckedMobile:!1},n.checkNote=n.checkNote.bind(Object(b.a)(n)),n.editNote=n.editNote.bind(Object(b.a)(n)),n.buildOn=n.buildOn.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){for(var e,t,a=this,n=this.props.children&&0!==Object.keys(this.props.children).length,o=this.state.open?"fa-chevron-down":"fa-chevron-right",i=new Intl.DateTimeFormat("default",Ht),s=this.props.note.data.body;s.includes('src="/attachments');)s=s.replace('src="/attachments','src="'+C+"/attachments");return t=!0===Yn(this.props.note,this.props.authorObj)?r.a.createElement(y.a,{className:"float-right",variant:"outline-info",onClick:function(){return a.editNote(a.props.note._id,"write")}},"Edit Note"):r.a.createElement(y.a,{className:"float-right",variant:"outline-info",onClick:function(){return a.editNote(a.props.note._id,"read")}},"Read Note"),this.state.isCheckedMobile&&(e=r.a.createElement("div",null,r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,null,r.a.createElement(Ta.a,{dangerouslySetInnerHTML:{__html:s}}),r.a.createElement(Ta.a,null,r.a.createElement(y.a,{className:"float-right mrg-1-left mrg-1-right",variant:"outline-info",onClick:function(){return a.buildOn(a.props.note._id)}},"BuildOn"),t))))),r.a.createElement(r.a.Fragment,null,r.a.createElement(Un.Breakpoint,{medium:!0,up:!0},r.a.createElement("div",null,r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,{className:"mr-auto rounded"},r.a.createElement(Ta.a,{className:"pd-05"},r.a.createElement(Ma.a,{md:"10",className:"primary-800 font-weight-bold"},n?r.a.createElement(y.a,{variant:"link",onClick:function(){return a.setOpen(!a.open)},"aria-controls":"example-collapse-text","aria-expanded":this.state.open},r.a.createElement("i",{className:"fa ".concat(o)})):null,this.props.note.title),r.a.createElement(Ma.a,{md:"2"},r.a.createElement(xa.a,{className:"mrg-1-min pd-2-right"},r.a.createElement(Da.a,null,r.a.createElement(Za.a,{type:"checkbox",checked:this.props.isChecked,ref:this.props.note._id,onChange:function(e){return a.checkNote(e,a.props.note._id)}}))))),r.a.createElement(Ta.a,{className:"primary-600 sz-075 pd-05"},r.a.createElement(Ma.a,null,r.a.createElement("span",null," ",this.props.author," "),"\xa0 ",i.format(new Date(this.props.note.created))),r.a.createElement(Ma.a,{md:"2"})),this.props.children?r.a.createElement(Bn.a,{in:this.state.open},r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,{md:"1"}),r.a.createElement(Ma.a,{md:"11"},r.a.createElement(Hn,{hierarchy:this.props.children})))):null)))),r.a.createElement(Un.Breakpoint,{small:!0,down:!0},r.a.createElement("div",null,r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,{className:"mr-auto rounded"},r.a.createElement(Ta.a,{className:"pd-05"},r.a.createElement(Ma.a,{md:"10",className:"primary-800 font-weight-bold"},n?r.a.createElement(y.a,{variant:"link",onClick:function(){return a.setOpen(!a.open)},"aria-controls":"example-collapse-text","aria-expanded":this.state.open},r.a.createElement("i",{className:"fa ".concat(o)})):null,this.props.note.title),r.a.createElement(Ma.a,{md:"2"},r.a.createElement(xa.a,{className:"mrg-1-min pd-2-right"},r.a.createElement(Da.a,null,r.a.createElement(Za.a,{type:"checkbox",checked:this.state.isCheckedMobile,ref:this.props.note._id,onChange:function(e){return a.updateNoteMobile(e,a.props.note)}}))))),r.a.createElement(Ta.a,{className:"primary-600 sz-075 pd-05"},r.a.createElement(Ma.a,null,r.a.createElement("span",null," ",this.props.author," "),"\xa0 ",i.format(new Date(this.props.note.created))),r.a.createElement(Ma.a,{md:"2"})),this.props.children?r.a.createElement(Bn.a,{in:this.state.open},r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,{md:"1"}),r.a.createElement(Ma.a,{md:"11"},r.a.createElement(Hn,{hierarchy:this.props.children})))):null)),e)))}}]),a}(n.Component),Jn={updateCheckedNotes:nt,openContribution:Nt,newNote:gt},Qn=Object(u.b)((function(e,t){var a=e.users[t.note.authors[0]];return{author:a&&"".concat(a.firstName," ").concat(a.lastName)||"NA",isChecked:e.notes.checkedNotes.includes(t.note._id),riseAboveViewNotes:e.notes.riseAboveViewNotes,riseAboveNotes:e.notes.riseAboveNotes,view:e.globals.view,communityId:e.globals.communityId,authorObj:e.globals.author}}),Jn)(Pn),_n=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).getNotes=n.getNotes.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"getNotes",value:function(){var e=[];for(var t in this.props.hierarchy)t in this.props.notes&&e.push(this.props.notes[t]);return e.sort((function(e,t){return new Date(t.created)-new Date(e.created)}))}},{key:"render",value:function(){var e=this,t=this.props.noteLinks||this.getNotes();return r.a.createElement(r.a.Fragment,null,t.map((function(t,a){var n=e.props.hierarchy&&e.props.hierarchy[t._id].children;return r.a.createElement("div",{key:a,className:"shadow p-1 mb-1 rounded"},r.a.createElement(Qn,{note:t,children:n,notes:e.props.notes}))})))}}]),a}(n.Component),Hn=Object(u.b)((function(e,t){return{notes:e.notes.viewNotes,riseAboveNotes:e.notes.riseAboveNotes}}),{})(_n),Xn=(a(146),a(147),function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).buildOn=function(e){n.props.newNote(n.props.view,n.props.communityId,n.props.author._id,e)},n.state={showView:!1,showRiseAbove:!1,filteredData:[]},n.getBuildOnHierarchy=n.getBuildOnHierarchy.bind(Object(b.a)(n)),n.onCloseDialog=n.onCloseDialog.bind(Object(b.a)(n)),n.onConfirmDrawDialog=n.onConfirmDrawDialog.bind(Object(b.a)(n)),n.filterResults=n.filterResults.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"getBuildOnHierarchy",value:function(){var e={};for(var t in this.props.viewNotes)e[t]={children:{}};this.props.buildsOn.forEach((function(t){var a=t.to,n=t.from;a in e||(e[a]={children:{}}),n in e?e[n].parent=a:e[n]={parent:a,children:{}},e[a].children[n]=e[n]}));for(var a={},n=0,r=Object.entries(e);n<r.length;n++){var o=Object(s.a)(r[n],2),i=o[0],c=o[1];"parent"in c||(a[i]=c)}return a}},{key:"componentDidUpdate",value:function(e,t){this.props.searchQuery===e.searchQuery&&this.props.searchFilter===e.searchFilter||this.filterResults(this.props.searchQuery)}},{key:"newRiseAbove",value:function(){this.setState({showView:!1,showModel:!0})}},{key:"onConfirmDrawDialog",value:function(e){this.props.addDrawing(e),this.props.closeDrawDialog()}},{key:"onCloseDialog",value:function(e){this.props.removeNote(e.noteId),this.props.closeDialog(e.id)}},{key:"filterResults",value:function(e){var t=e||this.props.searchQuery,a=[],n=Object.values(this.props.viewNotes);if(t||this.props.searchFilter)switch(this.props.searchFilter){case"title":a=n.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())}));break;case"content":a=n.filter((function(e){return e.data&&e.data.English?e.data.English.includes(t):!(!e.data||!e.data.body)&&e.data.body.includes(t)}));break;case"author":var r=[];Object.values(this.props.authors).forEach((function(e){"".concat(e.firstName," ").concat(e.lastName).toLowerCase().includes(t.toLowerCase())&&r.push(e._id)})),a=n.filter((function(e){return e.authors.some((function(e){return r.includes(e)}))}));break;case"scaffold":var o=this.props.supports.filter((function(e){return e.from===t})).map((function(e){return e.to}));a=n.filter((function(e){return o.includes(e._id)}));break;case"time":var i=new Date;a=n.filter((function(e){var a=new Date(e.created);if("Invalid Date"!==a){var n=(i-a)/1e3;if("today"===t&&n<=86400||"week"===t&&n<=604800||"month"===t&&n<=2592e3||"year"===t&&n<=31556952)return e}return null}))}this.setState({filteredData:a})}},{key:"render",value:function(){var e=this.getBuildOnHierarchy();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Un.Breakpoint,{medium:!0,up:!0},r.a.createElement("div",{className:"row min-width"},r.a.createElement(Ma.a,{md:"5",sm:"12",className:"mrg-1-top pd-2-right v-scroll"},""===this.props.searchQuery?r.a.createElement(Hn,{hierarchy:e}):r.a.createElement(Hn,{noteLinks:this.state.filteredData})),this.props.checkedNotes.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ma.a,{md:"5",sm:"12",className:"mrg-1-top v-scroll"},r.a.createElement(Fn,{query:this.props.searchQuery,buildOn:this.buildOn}))):null)),r.a.createElement(Un.Breakpoint,{small:!0,down:!0},r.a.createElement("div",{className:"row min-width"},r.a.createElement(Ma.a,{md:"5",sm:"12",className:"mrg-05-top pd-2-right primary-bg-50"},r.a.createElement(xa.a,{className:"mrg-1-bot"},r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,null,r.a.createElement(Wa.a,null,r.a.createElement(za.a,{addonType:"prepend"},r.a.createElement(Za.a,{type:"select",name:"filter",id:"filter",onChange:this.handleFilter},r.a.createElement("option",{key:"title",value:"title"},"Search By Title"),r.a.createElement("option",{key:"scaffold",value:"scaffold"},"Search By Scaffold"),r.a.createElement("option",{key:"content",value:"content"},"Search By Content"),r.a.createElement("option",{key:"author",value:"author"},"Search By Author"))),r.a.createElement(Za.a,{className:"form-control",value:this.props.searchQuery,placeholder:"Search Your Note",onChange:this.handleInputChange}),r.a.createElement(za.a,{addonType:"append"},r.a.createElement(Fa.a,null,r.a.createElement("i",{className:"fa fa-search"}))),r.a.createElement(za.a,{addonType:"append"},r.a.createElement(Fa.a,{style:{cursor:"pointer"},onClick:this.clearSearch},r.a.createElement("i",{className:"fa fa-refresh"}))))))),""===this.props.searchQuery?r.a.createElement(Hn,{hierarchy:e}):r.a.createElement(Hn,{noteLinks:this.state.filteredData})))))}}]),a}(n.Component)),Kn={newNote:gt},qn=Object(u.b)((function(e,t){return{communityId:e.globals.communityId,viewId:e.globals.viewId,view:e.globals.view,author:e.globals.author,authors:e.users,viewNotes:e.notes.viewNotes,checkedNotes:e.notes.checkedNotes,buildsOn:e.notes.buildsOn,supports:e.notes.supports,searchQuery:e.globals.searchQuery,searchFilter:e.globals.searchFilter}}),Kn)(Xn),$n=a(350),er=a(353),tr=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={tempViewSettingObj:{buildson:!0,language:!1,references:!1,showAuthor:!0,showGroup:!1,showTime:!0},thisViewsViewSettingObj:null,communityViewSettingsObj:{buildson:!1,language:!1,references:!1,showAuthor:!1,showGroup:!1,showTime:!1}},n.initializeSettings=n.initializeSettings.bind(Object(b.a)(n)),n.handleViewTypeChange=n.handleViewTypeChange.bind(Object(b.a)(n)),n.handleViewSettingsChange=n.handleViewSettingsChange.bind(Object(b.a)(n)),n.toggleViewSettingEnable=n.toggleViewSettingEnable.bind(Object(b.a)(n)),n.pushViewSettingsChange=n.pushViewSettingsChange.bind(Object(b.a)(n)),n.pushCommunitySettingsChange=n.pushCommunitySettingsChange.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e,t){this.props.thisViewsViewSettingObj===e.thisViewsViewSettingObj&&this.props.communityViewSettingsObj===e.communityViewSettingsObj&&this.props.view===e.view&&this.props.communitySettings===e.communitySettings||this.initializeSettings()}},{key:"initializeSettings",value:function(){this.setState({thisViewsViewSettingObj:null!==this.props.thisViewsViewSettingObj?this.props.thisViewsViewSettingObj:null}),null!==this.props.communityViewSettingsObj&&this.setState({communityViewSettingsObj:this.props.communityViewSettingsObj});var e={};e=null!==this.props.thisViewsViewSettingObj?this.props.thisViewsViewSettingObj:null!==this.props.communityViewSettingsObj?this.props.communityViewSettingsObj:{buildson:!0,language:!1,references:!1,showAuthor:!0,showGroup:!1,showTime:!0},this.setState({tempViewSettingObj:e}),this.props.setCurrViewSettingsObj(e)}},{key:"handleViewTypeChange",value:function(e){e.target.value!==this.props.currentView&&this.props.switchView()}},{key:"handleViewSettingsChange",value:function(e){var t={},a=e.target.parentNode,n=Se()(a).siblings();t[e.target.name]=e.target.checked;for(var r=0;r<n.length;r++)t[n[r].childNodes[1].name]=n[r].childNodes[1].checked;"tempSettingsPopoverList"===a.parentNode.id?(this.setState({tempViewSettingObj:t}),this.props.setCurrViewSettingsObj(t)):"viewSettingsPopoverList"===a.parentNode.id?this.setState({thisViewsViewSettingObj:t}):"communitySettingsPopoverList"===a.parentNode.id&&this.setState({communityViewSettingsObj:t})}},{key:"toggleViewSettingEnable",value:function(){if(null!==this.state.thisViewsViewSettingObj){var e=JSON.parse(JSON.stringify(this.props.view));e.data.viewSetting=null,this.props.updateViewObject(e)}else this.setState({thisViewsViewSettingObj:{buildson:!1,language:!1,references:!1,showAuthor:!1,showGroup:!1,showTime:!1}})}},{key:"pushViewSettingsChange",value:function(){var e=JSON.parse(JSON.stringify(this.props.view));e.data.viewSetting=Object.assign({},this.state.thisViewsViewSettingObj),this.props.updateViewObject(e)}},{key:"pushCommunitySettingsChange",value:function(){var e=JSON.parse(JSON.stringify(this.props.communitySettings));e.data.viewSetting=Object.assign({},this.state.communityViewSettingsObj),this.props.updateCommunityContextObject(e)}},{key:"render",value:function(){var e=null!==this.state.thisViewsViewSettingObj;return r.a.createElement(Sa.a,{placement:"auto",trigger:"click",delay:{show:0,hide:0},rootClose:!0,overlay:r.a.createElement(Ca.a,null,r.a.createElement(Ca.a.Title,null,"View Type"),r.a.createElement(Ca.a.Content,{id:"viewTypeContent"},r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,null,r.a.createElement(y.a,{value:"Enhanced",onClick:this.handleViewTypeChange,className:"Enhanced"===this.props.currentView?"activeView":""},"Enhanced")),r.a.createElement(Ma.a,null,r.a.createElement(y.a,{value:"Light",onClick:this.handleViewTypeChange,className:"Light"===this.props.currentView?"activeView":""},"Light")))),"Enhanced"===this.props.currentView?r.a.createElement(Ca.a.Content,{className:"viewSettingsPopoverContent"},r.a.createElement($n.a,{defaultActiveKey:"0"},r.a.createElement(er.a,null,r.a.createElement(er.a.Header,{className:"viewSettingsCardHeader"},r.a.createElement($n.a.Toggle,{as:y.a,variant:"link",eventKey:"0"},"View Settings (Temporary) ",r.a.createElement("i",{className:"fas fa-angle-down"}))),r.a.createElement($n.a.Collapse,{eventKey:"0"},r.a.createElement(er.a.Body,{className:"viewSettingsCardBody"},r.a.createElement("ul",{id:"tempSettingsPopoverList",className:"settingsPopoverList"},r.a.createElement("li",null,"Buildson ",r.a.createElement("input",{type:"checkbox",name:"buildson",onChange:this.handleViewSettingsChange,checked:this.state.tempViewSettingObj.buildson})),r.a.createElement("li",null,"Reference ",r.a.createElement("input",{type:"checkbox",name:"references",onChange:this.handleViewSettingsChange,checked:this.state.tempViewSettingObj.references})),r.a.createElement("li",null,"Group ",r.a.createElement("input",{type:"checkbox",name:"showGroup",onChange:this.handleViewSettingsChange,checked:this.state.tempViewSettingObj.showGroup})),r.a.createElement("li",null,"Author ",r.a.createElement("input",{type:"checkbox",name:"showAuthor",onChange:this.handleViewSettingsChange,checked:this.state.tempViewSettingObj.showAuthor})),r.a.createElement("li",null,"Date ",r.a.createElement("input",{type:"checkbox",name:"showTime",onChange:this.handleViewSettingsChange,checked:this.state.tempViewSettingObj.showTime}))),r.a.createElement(y.a,{className:"viewSettingsPopoverButton",onClick:this.initializeSettings},"Reset ",r.a.createElement("i",{className:"fas fa-undo-alt"}))))),this.props.author&&"manager"===this.props.author.role?r.a.createElement(er.a,null,r.a.createElement(er.a.Header,{className:"viewSettingsCardHeader"},r.a.createElement($n.a.Toggle,{as:y.a,variant:"link",eventKey:"1"},"View Settings (Permanent) ",r.a.createElement("i",{className:"fas fa-angle-down"}))),r.a.createElement($n.a.Collapse,{eventKey:"1"},r.a.createElement(er.a.Body,{className:"viewSettingsCardBody"},r.a.createElement("ul",{id:"viewSettingsPopoverList",className:"settingsPopoverList"},r.a.createElement("li",null,"Buildson ",r.a.createElement("input",{type:"checkbox",name:"buildson",onChange:this.handleViewSettingsChange,disabled:!e,checked:!!e&&this.state.thisViewsViewSettingObj.buildson})),r.a.createElement("li",null,"Reference ",r.a.createElement("input",{type:"checkbox",name:"references",onChange:this.handleViewSettingsChange,disabled:!e,checked:!!e&&this.state.thisViewsViewSettingObj.references})),r.a.createElement("li",null,"Group ",r.a.createElement("input",{type:"checkbox",name:"showGroup",onChange:this.handleViewSettingsChange,disabled:!e,checked:!!e&&this.state.thisViewsViewSettingObj.showGroup})),r.a.createElement("li",null,"Author ",r.a.createElement("input",{type:"checkbox",name:"showAuthor",onChange:this.handleViewSettingsChange,disabled:!e,checked:!!e&&this.state.thisViewsViewSettingObj.showAuthor})),r.a.createElement("li",null,"Date ",r.a.createElement("input",{type:"checkbox",name:"showTime",onChange:this.handleViewSettingsChange,disabled:!e,checked:!!e&&this.state.thisViewsViewSettingObj.showTime}))),r.a.createElement(y.a,{className:e?"viewSettingsPopoverButton":"viewSettingsPopoverButton vsDisabled",style:{width:"50%"},onClick:this.pushViewSettingsChange},"Save ",r.a.createElement("i",{className:"far fa-save"})),r.a.createElement(y.a,{className:"viewSettingsPopoverButton",style:{width:"50%"},onClick:this.toggleViewSettingEnable},e?"Disable":"Enable")))):null,this.props.author&&"manager"===this.props.author.role?r.a.createElement(er.a,null,r.a.createElement(er.a.Header,{className:"viewSettingsCardHeader"},r.a.createElement($n.a.Toggle,{as:y.a,variant:"link",eventKey:"2"},"Community Settings ",r.a.createElement("i",{className:"fas fa-angle-down"}))),r.a.createElement($n.a.Collapse,{eventKey:"2"},r.a.createElement(er.a.Body,{className:"viewSettingsCardBody"},r.a.createElement("ul",{id:"communitySettingsPopoverList",className:"settingsPopoverList"},r.a.createElement("li",null,"Buildson ",r.a.createElement("input",{type:"checkbox",name:"buildson",onChange:this.handleViewSettingsChange,checked:this.state.communityViewSettingsObj.buildson})),r.a.createElement("li",null,"Reference ",r.a.createElement("input",{type:"checkbox",name:"references",onChange:this.handleViewSettingsChange,checked:this.state.communityViewSettingsObj.references})),r.a.createElement("li",null,"Group ",r.a.createElement("input",{type:"checkbox",name:"showGroup",onChange:this.handleViewSettingsChange,checked:this.state.communityViewSettingsObj.showGroup})),r.a.createElement("li",null,"Author ",r.a.createElement("input",{type:"checkbox",name:"showAuthor",onChange:this.handleViewSettingsChange,checked:this.state.communityViewSettingsObj.showAuthor})),r.a.createElement("li",null,"Date ",r.a.createElement("input",{type:"checkbox",name:"showTime",onChange:this.handleViewSettingsChange,checked:this.state.communityViewSettingsObj.showTime}))),r.a.createElement(y.a,{className:"viewSettingsPopoverButton",onClick:this.pushCommunitySettingsChange},"Save ",r.a.createElement("i",{className:"far fa-save"}))))):null)):null)},r.a.createElement(y.a,{className:"circle-button pad sidebar-btn"},r.a.createElement("i",{className:"fas fa-cog"})))}}]),a}(n.Component),ar={setCurrViewSettingsObj:Rt,updateViewObject:function(e){return function(){var t=Object(I.a)(O.a.mark((function t(a,n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q(e,e.communityId,e._id);case 2:a(Gt(e));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},updateCommunityContextObject:function(e){return function(){var t=Object(I.a)(O.a.mark((function t(a,n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q(e,e.communityId,e._id);case 2:a(xt(e));case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}},nr=Object(u.b)((function(e,t){return{author:e.globals.author,communitySettings:e.globals.communitySettings,view:e.globals.view,currViewSettingsObj:e.globals.currViewSettingsObj,thisViewsViewSettingObj:e.globals.thisViewsViewSettingsObj,communityViewSettingsObj:e.globals.communityViewSettingsObj}}),ar)(tr),rr=a(187),or=(a(273),{zIndex:999,display:"flex"}),ir=function(e){return r.a.createElement(rr.a,{id:"contrib-dialog-".concat(e.id),className:"contrib-dialog",style:Object(j.a)(Object(j.a)({},or),e.style),default:{x:400+window.pageXOffset,y:50+window.pageYOffset,width:920,height:500},onClick:e.onClick,onMouseDown:e.onMouseDown,dragHandleClassName:"dlg-card-header",bounds:"window"},r.a.createElement(er.a,{className:"dlg-card"},r.a.createElement(er.a.Header,{className:"dlg-card-header py-0",style:{alignItems:"center",display:"flex"}},r.a.createElement("span",null,e.editable?e.title:"Note"),r.a.createElement(y.a,{onClick:e.onClose,variant:"link",size:"sm",style:{marginLeft:"auto"}},"x")),r.a.createElement(er.a.Body,{className:"dlg-card-body",style:{position:"relative"}},e.children),r.a.createElement(er.a.Footer,{className:"dlg-card-footer py-0"},e.editable?r.a.createElement(y.a,{size:"sm",className:"dlg-button",onClick:e.onConfirm,disabled:!e.editable},"Contribute"):null,e.buildon?r.a.createElement(y.a,{size:"sm",className:"dlg-button",onClick:e.onBuildOnClick},"Build-on"):"")))},sr=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).onConfirm=n.onConfirm.bind(Object(b.a)(n)),n.onLoad=n.onLoad.bind(Object(b.a)(n)),n.getIframeRef=n.getIframeRef.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"onConfirm",value:function(){var e=this.iframe_ref.contentWindow,t=e.svgCanvas.current_drawing_.all_layers[0],a=e.svgCanvas.current_drawing_.all_layers[1],n=a[1].getBBox().width,r=a[1].getBBox().height;if(0!==n&&0!==r){e.svgCanvas.current_drawing_.svgElem_.setAttribute("width",n),e.svgCanvas.current_drawing_.svgElem_.setAttribute("height",r),t[1].childNodes[1].setAttribute("width",n),t[1].childNodes[1].setAttribute("height",r),e.svgCanvas.selectAllInCurrentLayer(),e.svgCanvas.groupSelectedElements(),e.svgCanvas.alignSelectedElements("l","page"),e.svgCanvas.alignSelectedElements("t","page"),e.svgCanvas.ungroupSelectedElement(),e.svgCanvas.clearSelection(),e.svgCanvas.current_drawing_.svgElem_.setAttribute("padding","2em"),e.svgCanvas.setResolution("fit",100);var o=e.svgCanvas.getSvgString(),i=document.createElement("canvas");i.width=n+4,i.height=r+4;var s=i.getContext("2d"),c=document.createElement("img");c.setAttribute("src","data:image/svg+xml;base64,"+btoa(o)),c.onload=function(){s.drawImage(c,0,0);var e=i.toDataURL("image/png"),t="<img alt='"+o+"' src='"+e+"'/>";this.props.onConfirm(t)}.bind(this)}else this.props.onClose()}},{key:"getIframeRef",value:function(e){e&&(this.iframe_ref=e)}},{key:"onLoad",value:function(e){var t=this.props.svg;t&&e.target.contentWindow.svgCanvas.setSvgString(t)}},{key:"render",value:function(){return r.a.createElement(ir,{title:"DrawTool",style:{zIndex:3e3},onClose:this.props.onClose,onConfirm:this.onConfirm,editable:!0,confirmButton:"Add"},r.a.createElement("iframe",{onLoad:this.onLoad,title:"DrawingTool",src:"/drawing-tool/svg/index.html",ref:this.getIframeRef,width:"100%",height:"100%"}))}}]),a}(r.a.Component),cr=a(341),lr=a(342),ur=a(185),dr=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(ur.a,{value:this.props.value,apiKey:"arg05azt52qbujpnf831szuswhmyhoqute0q48btk5bqigoj",init:{setup:function(t){e.props.onEditorSetup(t)},content_css:"/editor.css",height:300,menubar:!1,statusbar:!1,media_live_embeds:!0,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code wordcount media help"],external_plugins:{drawingTool:"/drawing-tool/plugin.min.js"},toolbar:"styleselect | bold italic underline strikethrough | forecolor backcolor bullist numlist | link code | ltr rtl | charmap | drawingTool media"},onEditorChange:this.props.onEditorChange}))}}]),a}(r.a.Component),mr=a(340),pr=function(e,t){var a="";return a+=" ",a+=t?'<span class="kfSupportStartMark kfTemplateStartMark"> &nbsp; </span>':'<span class="kfSupportStartMark"> &nbsp; </span>',a+=" ",a=t?a+'<span class="kfSupportStartLabel kfTemplateStartLabel">'+e+"</span>":a+'<span class="kfSupportStartLabel">'+e+"</span>",a+=" "},hr=function(e){var t="";return t+=" ",t+=e?'<span class="kfSupportEndMark kfTemplateEndMark"> &nbsp; </span>':'<span class="kfSupportEndMark"> &nbsp; </span>',t+=" "},br=function(e,t,a,n){return function(r){var o=(new Date).getTime().toString(),i='<span id="'+o+'"></span>'+r;n&&(i=" -&nbsp;"+i+"&nbsp;- ");var s="";return s+="<br>",s+="&nbsp;&nbsp;",s=a?s+'<span id="'+e+'" class="KFSupportStart KFTemplateStart mceNonEditable">':s+'<span id="'+e+'" class="KFSupportStart mceNonEditable">',s+=pr(t,a),s+="</span>",a&&(s+='<p class="kfTemplateContent">',s+="<br><br><br><br>"),s+=i,a&&(s+="</p>"),s=a?s+'<span id="'+e+'" class="KFSupportEnd KFTemplateEnd mceNonEditable">':s+'<span id="'+e+'" class="KFSupportEnd mceNonEditable">',s+=hr(a),s+="</span>",s+="&nbsp;&nbsp;",{tag:s+="<br>",supportContentId:o}}},gr=(a(274),function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).scaffoldSelected=function(e,t){if(n.props.returnSupport)n.props.onScaffoldSelected(t);else{var a=n.props.items[e],r=!0,o="",i=a.data&&a.data.isTemplate;i&&(r=!1,o="<br><br>");var s=t._to.title,c=br(t.to,s,i,r);n.props.onScaffoldSelected(c,o)}},n.state={selected:e.initVal},n.onSelectChange=n.onSelectChange.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){if(!this.props.fetched){var e=this.props,t=e.communityId,a=e.contextId;this.props.fetchScaffolds(t,a)}}},{key:"onSelectChange",value:function(e){this.setState({selected:e.target.value})}},{key:"render",value:function(){var e=this,t=this.props.items,a=t.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.title)})),n="";return t.length&&t[this.state.selected].supports&&(n=t[this.state.selected].supports.map((function(t,a){return r.a.createElement(Ma.a,{className:"mt-1 p-0",key:a,md:12},r.a.createElement("div",{className:"KFSupportButton",size:"sm",onClick:function(){return e.scaffoldSelected(e.state.selected,t)}},t._to.title))}))),r.a.createElement(mr.a,null,r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,{className:"p-0"},r.a.createElement(Ja.a,null,r.a.createElement(Ja.a.Group,{className:"mb-1",controlId:"exampleForm.ControlSelect2"},r.a.createElement(Ja.a.Control,{className:"scaffold-select-input",size:"sm",as:"select",onChange:this.onSelectChange},a))))),r.a.createElement(Ta.a,null,n))}}]),a}(r.a.Component)),fr={fetchScaffolds:ge},vr=Object(u.b)((function(e,t){return Object(j.a)({communityId:e.globals.communityId,contextId:e.globals.contextId},e.scaffolds)}),fr)(gr),wr=(a(275),function(e){var t=Object(u.d)((function(t){var a=[];return e.attachments.forEach((function(e){var n=t.notes.attachments[e];n&&a.push(n)})),a})),a=Object(n.useState)([]),o=Object(s.a)(a,2),i=o[0],c=o[1];return r.a.createElement(Ma.a,null,r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,null,r.a.createElement("span",{className:""},"Insert image or file: "),r.a.createElement(y.a,{className:"attach-button mx-2",size:"sm",variant:"outline-dark",onClick:function(){return e.onNewAttachClick(!0)}},"Inline"),r.a.createElement(y.a,{className:"attach-button mx-2",size:"sm",variant:"outline-dark",onClick:function(){return e.onNewAttachClick(!1)}},"As an attachment"),r.a.createElement(y.a,{className:"attach-button mx-2",size:"sm",variant:"outline-dark",onClick:function(){var t=Array.from(document.getElementById("attachbox-".concat(e.noteId)).getElementsByClassName("selected"));if(0!==t.length){var a="";t.forEach((function(e){var t=e.tagName,n=e.naturalWidth;if(n>200&&(n=200),"IMG"===t){var r=e.getAttribute("src"),o="";e.classList.forEach((function(e){24===e.length&&(o+=e+" ")})),a+='<img class="inline-attachment '+o+'" src="'+r+'" width="'+n+'px" alt="" data-mce-src="'+r+'">'}})),e.onNewInlineAttach(a)}},disabled:0===i.length},"Insert"))),r.a.createElement(Ta.a,{id:"attachbox-".concat(e.noteId),className:"attachment-box"},t.map((function(t){return r.a.createElement("div",{key:t._id,className:"attachment-inner-box col-auto"},r.a.createElement("div",{className:"attachment-thumbnail"},0===t.data.type.indexOf("image/")?r.a.createElement("img",{className:t._id+" "+(i.includes(t._id)?"selected":""),src:"".concat(C).concat(t.data.url),onClick:function(e){return a=t._id,void(i.includes(a)?c((function(e){return e.filter((function(e){return e!==a}))})):c((function(e){return[].concat(Object(fe.a)(e),[a])})));var a},alt:"attachment"}):r.a.createElement("a",{href:"".concat(C).concat(t.data.downloadUrl||t.data.url),title:t.title,download:!0},r.a.createElement("img",{className:t._id,src:"".concat(C,"/manual_assets/kf6images/03-toolbar-attachment.png"),title:"{attachment.title}",alt:"attachment"}))),r.a.createElement("div",{className:"attachment-buttons"},r.a.createElement("p",null,r.a.createElement("a",{href:"".concat(C).concat(t.data.downloadUrl||t.data.url),title:t.title,download:!0},r.a.createElement("img",{className:"download-attachment",src:"".concat(C,"/manual_assets/kf6images/cloud-download-2x.png"),alt:"Download",height:"15px"}))),r.a.createElement("p",null,r.a.createElement("button",{className:"delete-attachment",onClick:function(){return a=t._id,void(window.confirm("Are you sure to delete the attachment?")&&e.onAttachDelete(a));var a}},r.a.createElement("img",{src:"".concat(C,"/manual_assets/kf6images/trash.png"),alt:"Delete attachment",width:"10px",height:"15px"})))),r.a.createElement("div",{className:"attachment-info"},r.a.createElement("p",{title:"{attachment.title}"},t.title),r.a.createElement("p",null,t.data.size)))}))))}),yr=(a(276),function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={inlineAttach:!0,attachPanel:!1},n.onScaffoldSelected=n.onScaffoldSelected.bind(Object(b.a)(n)),n.onNewAttachmentClick=n.onNewAttachmentClick.bind(Object(b.a)(n)),n.closeAttachPanel=n.closeAttachPanel.bind(Object(b.a)(n)),n.onNewInlineAttach=n.onNewInlineAttach.bind(Object(b.a)(n)),n.onAttachDelete=n.onAttachDelete.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"onScaffoldSelected",value:function(e,t){this.props.onChange({scaffold:{tagCreator:e,initialText:t}})}},{key:"onNewAttachmentClick",value:function(e){this.setState({inlineAttach:e,attachPanel:!0})}},{key:"onNewInlineAttach",value:function(e){this.props.onChange({attach:e})}},{key:"closeAttachPanel",value:function(){this.setState({attachPanel:!1})}},{key:"onAttachDelete",value:function(e){this.props.onChange({deleteAttach:e})}},{key:"render",value:function(){var e=this.props,t=e.note,a=e.onChange,n=e.onEditorSetup;return r.a.createElement(mr.a,{className:"write-container p-0"},r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,null,r.a.createElement(Ja.a.Group,{className:"write-title-form",controlId:"note-title"},r.a.createElement(Ja.a.Control,{type:"text",className:"write-tab-input",size:"sm",placeholder:"Enter title",value:t.title,onChange:function(e){a({title:e.target.value})}})))),r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,{md:2,className:"pr-0"},r.a.createElement(vr,{initVal:0,onScaffoldSelected:this.onScaffoldSelected})),r.a.createElement(Ma.a,{md:10},r.a.createElement(dr,{value:t.data.body,onEditorSetup:n,onEditorChange:function(e,t){return a({data:{body:e}})}}),r.a.createElement("div",{className:"wordcount-bar text-right"},t.wordCount," words"))),r.a.createElement(Ta.a,{className:"mt-2"},r.a.createElement(Ha,Object.assign({noteId:t._id,onClose:this.closeAttachPanel,onNewInlineAttach:this.onNewInlineAttach},this.state)),r.a.createElement(wr,{noteId:t._id,attachments:t.attachments,onNewAttachClick:this.onNewAttachmentClick,onNewInlineAttach:this.onNewInlineAttach,onAttachDelete:this.onAttachDelete})))}}]),a}(r.a.Component)),Er=function(e){var t=e.records.reduce((function(e,t){return"read"===t.type?e[0].push(t):e[1].push(t),e}),[[],[]]),a=Object(s.a)(t,2),n=a[0],o=a[1];return r.a.createElement("div",null,r.a.createElement("h5",null,"Edit logs:"),r.a.createElement("p",{className:"mb-0"},o.length," edits"),r.a.createElement("ul",null,o.map((function(e){return r.a.createElement("li",{key:e._id},e.date,": ",e.author)}))),r.a.createElement("h5",null,"Read logs:"),r.a.createElement("p",{className:"mb-0"},n.length," reads"),r.a.createElement("ul",null,n.map((function(e){return r.a.createElement("li",{key:e._id},e.date,": ",e.author)}))))},Nr=function(e){var t=function(t){e.onChange({permission:t.target.value})};return r.a.createElement("div",{className:"m-2"},r.a.createElement("div",null,r.a.createElement("label",{className:"mt-1 font-weight-bold"},"Permission:"),r.a.createElement("div",null,r.a.createElement("table",{className:"KFPermission table table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\xa0"),r.a.createElement("th",null,"Authors"),r.a.createElement("th",null,"Group Members"),r.a.createElement("th",null,"Others"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("form",{action:""},r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"radio",name:"permission",value:"private",id:"contrib-permission1",onChange:t,checked:"private"===e.contribution.permission}),r.a.createElement("label",{className:"form-check-label font-weight-normal",htmlFor:"contrib-permission1"},"\xa0private")))),r.a.createElement("td",null,"rw"),r.a.createElement("td",null,"rw"),r.a.createElement("td",null,"-")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("form",{action:""},r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"radio",value:"protected",id:"contrib-permission2",name:"permission",onChange:t,checked:"protected"===e.contribution.permission}),r.a.createElement("label",{className:"form-check-label font-weight-normal",htmlFor:"contrib-permission2"},"\xa0protected")))),r.a.createElement("td",null,"rw"),r.a.createElement("td",null,"rw"),r.a.createElement("td",null,"r")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("form",{action:""},r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"radio",value:"public",id:"contrib-permission3",name:"public",onChange:t,checked:"public"===e.contribution.permission}),r.a.createElement("label",{className:"form-check-label font-weight-normal",htmlFor:"contrib-permission3"},"\xa0public")))),r.a.createElement("td",null,"rw"),r.a.createElement("td",null,"rw"),r.a.createElement("td",null,"rw"))))),r.a.createElement("label",{className:"mt-1 font-weight-bold"},"Status:"),r.a.createElement("div",{className:"ml-2"},e.contribution.status),r.a.createElement("label",{className:"mt-2 font-weight-bold"},"Template:"),r.a.createElement("form",{className:"ml-2",action:""},r.a.createElement("div",{className:"form-check  form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"c-isTemplate",checked:e.contribution.data.isTemplate,onChange:function(t){e.onChange({data:{isTemplate:t.target.checked}})}}),r.a.createElement("label",{className:"form-check-label font-weight-normal",htmlFor:"c-isTemplate"},"isTemplate")))))},Or=function(e){var t=Object.entries(e.authors).map((function(e){return{value:e[1]._id,label:"".concat(e[1].firstName," ").concat(e[1].lastName)}})),a=Object(n.useState)(null),o=Object(s.a)(a,2),i=o[0],c=o[1];return r.a.createElement("div",null,r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,null,r.a.createElement(ya.a,{options:t,onChange:function(e){c(e)},isClearable:!0})),r.a.createElement(Ma.a,{md:"auto"},r.a.createElement(y.a,{disabled:!i,onClick:function(){return e.onAuthorSelected(i)}},"Add"))),r.a.createElement("p",null,t.length," possible author(s) in this community."))},Ir=function(e){var t=Object(u.d)((function(t){return e.contrib.authors.map((function(e){return t.users[e]}))})),a=Object(u.d)((function(e){return e.users})),n=Object(u.d)((function(e){return e.globals.community.groups})),o=n.map((function(e){return{value:e._id,label:e.title}})),i=n.find((function(t){return t._id===e.contrib.group})),s=i?{value:i._id,label:i.title}:{value:null,label:"No Group selected"};return r.a.createElement("div",{className:"authorTab mt-2",style:{height:"100%"}},r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,null,r.a.createElement("h5",null,"Authors:"),r.a.createElement("ul",null,t.map((function(t,a){return r.a.createElement("li",{key:t._id,style:{cursor:"move"}},t.firstName," ",t.lastName,r.a.createElement(y.a,{size:"sm",className:"ml-1",onClick:function(){return function(t,a){0!==a?a>=0&&e.onChange({authors:e.contrib.authors.filter((function(e){return e!==t._id}))}):De({title:"Error!",type:"danger",message:"cannot remove the Primary Author"})}(t,a)}},"x"))})))),r.a.createElement(Ma.a,null,r.a.createElement("div",null,r.a.createElement("h5",null,"Add author:"),r.a.createElement(Or,{authors:a,onAuthorSelected:function(t){e.contrib.authors.includes(t.value)||e.onChange({authors:[].concat(Object(fe.a)(e.contrib.authors),[t.value])})}})))),r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,null,r.a.createElement("h5",null,"Group:"),r.a.createElement("div",null,r.a.createElement("form",{method:"",id:"",action:""},r.a.createElement(ya.a,{value:s,options:o,onChange:function(t){e.onChange({group:t&&t.value})},isClearable:!0}))))))},jr=a(71),Sr=a.n(jr),kr=(a(277),a(279),a(281),a(283),a(285),a(287),a(289),function(e,t,a,n){Annotator.Plugin.KFPlugin=function(){return{pluginInit:function(){this.annotator.subscribe("annotationCreated",(function(e){t&&t.annotationCreated(e)})).subscribe("annotationUpdated",(function(e){t&&t.annotationUpdated(e)})).subscribe("annotationDeleted",(function(e){t&&t.annotationDeleted(e)})).subscribe("annotationEditorShown",(function(e,a){t&&t.displayEditor(e,a)})).subscribe("annotationViewerShown",(function(e,a){t&&t.displayViewer(e,a)})).subscribe("annotationEditorHidden",(function(e,a){t&&t.editorHidden(e,a)})),t&&t.annotatorInitialized(this.annotator)}}};var r={}.hasOwnProperty;Annotator.Plugin.RichText=function(e){!function(e,t){for(var a in t)r.call(t,a)&&(e[a]=t[a]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(a,Annotator.Plugin);var t="";function a(e,t){return a.__super__.constructor.apply(this,arguments)}return a.prototype.options={tinymce:{selector:"li.annotator-item textarea",content_css:"/editor.css",height:"170px",statusbar:!1,plugins:"media image insertdatetime link code",menubar:!1,toolbar_items_size:"small",extended_valid_elements:"iframe[src|frameborder|style|scrolling|class|width|height|name|align|id]",toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | code | mysidebar"}},a.prototype.pluginInit=function(){var e=this.annotator,t=this.annotator.editor;Annotator.supported()&&(e.editor.addField({type:"input",load:this.updateEditor}),e.viewer.addField({load:this.updateViewer}),e.subscribe("annotationEditorShown",(function(){})),e.subscribe("annotationEditorHidden",(function(){})),this.options.tinymce.setup=function(e){a.prototype.mceditor=e,e.on("change",(function(e){$(t.element).find("textarea")[0].value=Sr.a.activeEditor.getContent()})),e.on("Init",(function(e){$(".mce-container").css("z-index","3090000000000000000")})),e.on("remove",(function(){i.a.unmountComponentAtNode(a.prototype.scaffoldSidebar)})),e.ui.registry.addSidebar("mysidebar",{tooltip:"View Scaffold",icon:"settings",onSetup:function(e){var t=e.element();document.sidebar=t,t.style.width="200px",t.style.overflow="scroll",t.style.fontSize="0.7rem",i.a.render(n,t,null),a.prototype.scaffoldSidebar=t},onShow:function(e){},onHide:function(e){}})},Sr.a.init(this.options.tinymce))},a.prototype.updateEditor=function(e,a){var n="undefined"!==typeof a.text?a.text:"",r=Sr.a.editors.length;t=Sr.a.editors[r-2].id,Sr.a.get(t).setContent(n),$(e).remove()},a.prototype.updateViewer=function(e,t){var a=$(e.parentNode).find("div:first-of-type")[0];a.innerHTML=t.text,$(a).addClass("richText-annotation"),$(e).remove()},a}(),e.annotator("addPlugin","KFPlugin"),e.annotator("addPlugin","Tags"),e.annotator("addPlugin","RichText"),a&&e.annotator("addPlugin","Permissions",{user:a,permissions:{read:[a],update:[a],delete:[a],admin:[a]},showEditPermissionsCheckbox:!1})}),Ar=function(e){var t=0===e.permissions.read.length;e.permission=t?"protected":"private";var a=e.ranges[0];return 0===a.start.indexOf("/div[1]")&&(a.start=a.start.substring(7)),0===a.end.indexOf("/div[1]")&&(a.end=a.end.substring(7)),e},Cr=(a(291),Object(S.a)({reducer:{dialogs:Ie,notes:ht,scaffolds:be,globals:Kt,users:ue},devTools:!0})),Tr=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).contentRef=r.a.createRef(),n.annotatorInitialized=n.annotatorInitialized.bind(Object(b.a)(n)),n.annotationCreated=n.annotationCreated.bind(Object(b.a)(n)),n.annotationUpdated=n.annotationUpdated.bind(Object(b.a)(n)),n.annotator=null,n.displayEditor=n.displayEditor.bind(Object(b.a)(n)),n.displayViewer=n.displayViewer.bind(Object(b.a)(n)),n.fixPopupLocation=n.fixPopupLocation.bind(Object(b.a)(n)),n.editorHidden=n.editorHidden.bind(Object(b.a)(n)),n.loadAnnotations=n.loadAnnotations.bind(Object(b.a)(n)),n.onScaffoldSelected=n.onScaffoldSelected.bind(Object(b.a)(n)),n.dlg=null,n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=$(this.contentRef.current);e.annotator(),this.scaffoldElem=r.a.createElement(u.a,{store:Cr},r.a.createElement(vr,{initVal:0,onScaffoldSelected:this.onScaffoldSelected})),kr(e,{annotationCreated:this.annotationCreated,annotationUpdated:this.annotationUpdated,annotationDeleted:this.props.onDelete,displayEditor:this.displayEditor,displayViewer:this.displayViewer,annotatorInitialized:this.annotatorInitialized,editorHidden:this.editorHidden},this.props.author.userName,this.scaffoldElem),this.dlg=$("#contrib-dialog-".concat(this.props.containerId))}},{key:"componentDidUpdate",value:function(e,t){1===this.props.annotsFetched&&this.props.annotsFetched!==e.annotsFetched&&this.loadAnnotations()}},{key:"componentWillUnmount",value:function(){this.annotator&&this.annotator.plugins.RichText.mceditor&&this.annotator.plugins.RichText.mceditor.remove()}},{key:"editorHidden",value:function(e,t){$(e.element.find(".annotator-controls")).off()}},{key:"loadAnnotations",value:function(){var e=Object.values(this.props.annots).map((function(e){var t=Object.assign({},e.data);return t.ranges=Object(fe.a)(t.ranges),t.highlights=Object(fe.a)(t.highlights),function(e){var t=Object.assign({},e.ranges[0]);t.start="/div[1]"+t.start,t.end="/div[1]"+t.end,e.ranges[0]=t}(t),t}));this.annotator.loadAnnotations(e),this.props.onAnnotsLoaded()}},{key:"annotatorInitialized",value:function(e){this.annotator=e,this.loadAnnotations();var t=$("div.annotator-adder");t.attr("title","Annotation"),t.addClass("tooltip1"),t.append('<span class="tooltiptext">Annotation</span>'),document.annotator=this.annotator;var a=e.adder.get(0);this.observer=new MutationObserver(function(t){var n,r=Object(ra.a)(t);try{for(r.s();!(n=r.n()).done;){if("attributes"===n.value.type&&"none"!==a.style.display)return this.fixPopupLocation(e.adder),void this.observer.takeRecords()}}catch(o){r.e(o)}finally{r.f()}}.bind(this)),this.observer.observe(a,{attributes:!0,attributeOldValue:!0})}},{key:"annotationCreated",value:function(e){this.props.onCreate(Ar(e))}},{key:"annotationUpdated",value:function(e){this.props.onUpdate(Ar(e))}},{key:"displayEditor",value:function(e,t){e.element.hasClass(e.classes.invert.y)||e.element.addClass(e.classes.invert.y)}},{key:"fixPopupLocation",value:function(e){var t=this.dlg.offset(),a=e.offset();e.offset({top:a.top-t.top,left:a.left-t.left})}},{key:"displayViewer",value:function(e,t){this.fixPopupLocation(e.element),e.element.addClass(e.classes.invert.y)}},{key:"onScaffoldSelected",value:function(e,t){var a=this.annotator.plugins.RichText.mceditor,n=a.selection.getContent(),r=e(n.length?n:t),o=r.tag,i=r.supportContentId;a.insertContent(o);var s=a.dom.get(i);s&&a.selection.setCursorLocation(s)}},{key:"render",value:function(){return r.a.createElement("div",{ref:this.contentRef},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.content}}))}}]),a}(r.a.Component),Mr=(a(292),function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={riseAboveNotes:!1,selectedTab:n.props.mode?n.props.mode:"write"},n.onEditorSetup=n.onEditorSetup.bind(Object(b.a)(n)),n.addDrawing=n.addDrawing.bind(Object(b.a)(n)),n.onNoteChange=n.onNoteChange.bind(Object(b.a)(n)),n.wordCount=n.wordCount.bind(Object(b.a)(n)),n.onTabSelected=n.onTabSelected.bind(Object(b.a)(n)),n.onAnnotationCreated=n.onAnnotationCreated.bind(Object(b.a)(n)),n.onAnnotationDeleted=n.onAnnotationDeleted.bind(Object(b.a)(n)),n.onAnnotationUpdated=n.onAnnotationUpdated.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){this.props.drawing&&e.drawing!==this.props.drawing&&(this.editor.insertContent(this.props.drawing),this.props.onDrawingInserted())}},{key:"onNoteChange",value:function(e){if(e.scaffold){var t=e.scaffold,a=t.tagCreator,n=t.initialText;this.addSupport(!0,n,a)}else e.attach?this.editor.insertContent(e.attach):e.deleteAttach?(this.props.deleteAttachment(this.props.note._id,e.deleteAttach),this.editor.dom.remove(this.editor.dom.select("."+e.deleteAttach))):e.data&&e.data.body?this.props.onNoteChange(Object(j.a)(Object(j.a)({},e),{},{wordCount:this.wordCount(e.data.body)})):this.props.onNoteChange(Object(j.a)({},e))}},{key:"wordCount",value:function(e){return this.editor.plugins.wordcount.getCount()-function(e){for(var t="<div>"+e+"</div>",a=Se()(t).find(".kfSupportStartLabel"),n=0,r=0;r<a.length;r++)n+=a[r].innerHTML.split(" ").length;return n}(e)}},{key:"onEditorSetup",value:function(e){e.onDrawButton=this.props.onDrawToolOpen,this.editor=e}},{key:"addDrawing",value:function(e){this.editor.insertContent(e)}},{key:"addSupport",value:function(e,t,a){var n=this.editor.selection.getContent(),r=a(n.length?n:t),o=r.tag,i=r.supportContentId;if(this.editor.insertContent(o),e){var s=this.editor.dom.get(i);s&&this.editor.selection.setCursorLocation(s)}}},{key:"onTabSelected",value:function(e){this.setState({selectedTab:e}),"history"===e&&this.props.fetchRecords(this.props.note._id),"author"===e&&this.props.fetchCommGroups(this.props.note.communityId)}},{key:"onAnnotationCreated",value:function(e){console.log(e),this.props.createAnnotation(this.props.note.communityId,this.props.note._id,this.props.noteAuthor._id,e)}},{key:"onAnnotationDeleted",value:function(e){e.linkId&&e.modelId&&this.props.deleteAnnotation(e.linkId,this.props.note._id,e.modelId)}},{key:"onAnnotationUpdated",value:function(e){if(e.linkId&&e.modelId){var t=Object.assign({},this.props.note.annos[e.modelId]);t?(t.data=e,this.props.modifyAnnotation(t,this.props.note.communityId,this.props.note._id)):console.error("ERROR! model couldn't find")}else console.error("ERROR! annoVM doesn't have id on update")}},{key:"render",value:function(){var e=this,t=new Intl.DateTimeFormat("default",Ht);return r.a.createElement("div",null,r.a.createElement("div",{className:"contrib-info"},"Created By: ",this.props.noteAuthor.firstName," ",this.props.noteAuthor.lastName," ",r.a.createElement("br",null),"Last modified: ",t.format(new Date(this.props.note.modified))),r.a.createElement(cr.a,{activeKey:this.state.selectedTab,onSelect:this.onTabSelected},r.a.createElement(lr.a,{eventKey:"read",title:"read",mountOnEnter:!0,style:{height:"100%"}},r.a.createElement(Ta.a,{style:{height:"100%"}},r.a.createElement(Ma.a,null,r.a.createElement(Tr,{containerId:this.props.dlgId,content:this.props.note.data.body,annots:this.props.note.annos,annotsFetched:this.props.note.annotsFetched,author:this.props.noteAuthor,onCreate:this.onAnnotationCreated,onUpdate:this.onAnnotationUpdated,onDelete:this.onAnnotationDeleted,onAnnotsLoaded:function(){return e.props.setAnnotationsLoaded({contribId:e.props.note._id,value:0})}})),this.props.note.data.riseabove&&this.props.raViewLinks&&this.props.raReadLinks?r.a.createElement(Ma.a,{className:"border border-primary border-4 note-ra-col"},r.a.createElement(Ta.a,null,r.a.createElement("div",{className:"note-ra-text"},"Riseabove View:",r.a.createElement(y.a,{className:"sm-button",variant:"primary",href:"/view/".concat(this.props.note.data.riseabove.viewId),target:"_blank"},"Open in Window"))),r.a.createElement(Ta.a,{className:"note-ra-rowgraph"},r.a.createElement(Dn,{viewId:this.props.note.data.riseabove.viewId,viewLinks:this.props.raViewLinks,readLinks:this.props.raReadLinks,onNoteClick:function(t){return e.props.openContribution(t,"write")},onViewClick:function(e){window.open("/view/".concat(e),"_blank")}}))):"")),"read"!==this.props.mode?r.a.createElement(lr.a,{eventKey:"write",title:"write"},r.a.createElement(yr,{note:this.props.note,onScaffoldSelected:this.scaffoldSelected,onChange:this.onNoteChange,onEditorSetup:this.onEditorSetup})):"",this.props.isDemo?null:r.a.createElement(lr.a,{eventKey:"author",title:"author(s)"},r.a.createElement(Ir,{contrib:this.props.note,onChange:this.onNoteChange})),r.a.createElement(lr.a,{eventKey:"history",title:"history"},r.a.createElement(Er,{records:this.props.note.records})),this.props.isDemo?null:r.a.createElement(lr.a,{eventKey:"properties",title:"properties"},r.a.createElement(Nr,{contribution:this.props.note,onChange:this.props.onNoteChange}))))}}]),a}(r.a.Component)),xr={fetchAttachments:vt,fetchRecords:Et,deleteAnnotation:function(e,t,a){return function(){var n=Object(I.a)(O.a.mark((function n(r){return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,U(e);case 2:return n.abrupt("return",r($e({contribId:t,annoId:a})));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},fetchCommGroups:ea,createAnnotation:function(e,t,a,n){return function(){var r=Object(I.a)(O.a.mark((function r(o){var i,s,c;return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i={communityId:e,type:"Annotation",title:"an Annotation",authors:[a],status:"active",permission:"private",data:n},r.next=3,H(e,i);case 3:return s=r.sent,r.next=6,B(s._id,t,"annotates");case 6:c=r.sent,n.linkId=c._id,n.modelId=s._id,o(Ke({contribId:t,annotation:s}));case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},modifyAnnotation:function(e,t,a){return function(){var n=Object(I.a)(O.a.mark((function n(r){var o;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Q(e,t,e._id);case 2:return o=n.sent,n.abrupt("return",r(Ke({contribId:a,annotation:o})));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},setAnnotationsLoaded:qe,deleteAttachment:function(e,t){return function(){var a=Object(I.a)(O.a.mark((function a(n,r){var o,i,s;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=r(),i=o.notes[e],s=i.fromLinks.filter((function(e){return e.to===t}))[0],a.next=5,U(s._id);case 5:n(Ue({attId:t,noteId:e})),n(yt(e,"from"));case 7:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},openContribution:Nt},Dr=Object(u.b)((function(e,t){var a,n,r,o,i,s;return{isDemo:e.globals.isDemo,noteAuthor:t.note&&(e.users[t.note.authors[0]]||"NA"),currentAuthor:e.globals.author,editable:t.note&&t.note.authors.includes(e.globals.author._id),raViewLinks:(null===(a=t.note)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.riseabove)&&(null===(r=e.notes.raViews[t.note.data.riseabove.viewId])||void 0===r?void 0:r.viewLinks),raReadLinks:(null===(o=t.note)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.riseabove)&&(null===(s=e.notes.raViews[t.note.data.riseabove.viewId])||void 0===s?void 0:s.readLinks)}}),xr)(Mr),Lr=function(e){var t=e.dialog,a=Object(u.d)((function(e){return e.notes[t.contribId]})),o=Object(u.c)(),i=Object(n.useState)(null),c=Object(s.a)(i,2),l=c[0],d=c[1],m=Object(n.useState)(!1),p=Object(s.a)(m,2),h=p[0],b=p[1],g=Object(n.useState)(null),f=Object(s.a)(g,2),v=f[0],w=f[1],y=Object(n.useState)(null),E=Object(s.a)(y,2),N=E[0],O=E[1];Object(n.useEffect)((function(){d((function(e){return null===e?Object(j.a)({},a):Object(j.a)(Object(j.a)({},e),{},{attachments:a.attachments,records:a.records})}))}),[a]);var I=function(){w(null),b(!1)};return r.a.createElement("div",null,r.a.createElement(ir,{key:t.id,id:t.id,onMouseDown:e.onMouseDown,title:t.title,style:{zIndex:t.zIndex},onClose:function(){return o(we((e=t).id)),void o(ze(e.contribId));var e},onConfirm:function(){o(wt(l,t.id))},confirmButton:t.confirmButton,editable:t.editable,buildon:t.buildOn,onBuildOnClick:function(){return e=t.contribId,void o(ft(e));var e}},l?r.a.createElement(Dr,{key:t.contribId,dlgId:t.id,note:l,mode:t.editable?"write":"read",drawing:N,onNoteChange:function(e){d((function(t){var a=Object(j.a)(Object(j.a)({},t),e);return a.data=Object(j.a)(Object(j.a)({},t.data),e.data),a}))},onDrawToolOpen:function(e){e&&w(e),b(!0)},onDrawingInserted:function(){O(null)}}):null),h?r.a.createElement(sr,{onClose:I,onConfirm:function(e){O(e),I()},svg:v}):null)},Zr=function(e){var t=new Intl.DateTimeFormat("default",Ht).format(new Date(e.attachment.modified)),a=Object(u.d)((function(t){return t.users[e.attachment.authors[0]]||"NA"})),o=Object(u.c)(),i=Object(n.useState)("read"),c=Object(s.a)(i,2),l=c[0],d=c[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"contrib-info"},"Created By: ",a.firstName," ",a.lastName," ",r.a.createElement("br",null),"Last modified: ",t),r.a.createElement(cr.a,{activeKey:l,transition:!1,onSelect:function(t){d(t),"history"===t&&o(Et(e.attachment._id)),"author"===t&&o(ea(e.attachment.communityId))}},r.a.createElement(lr.a,{style:{height:"100%"},eventKey:"read",title:"read"},r.a.createElement("a",{href:"".concat(C).concat(e.attachment.data.url),title:e.attachment.title,download:!0},e.attachment.data.url),"application/pdf"===e.attachment.data.type?r.a.createElement("object",{data:"".concat(C).concat(e.attachment.data.url),type:"application/pdf",width:"100%",height:"100%"}):""),"read"!==e.mode?r.a.createElement(lr.a,{eventKey:"write",title:"write"},r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,null,r.a.createElement(Ja.a.Group,{className:"write-title-form",controlId:"note-title"},r.a.createElement(Ja.a.Control,{type:"text",className:"write-tab-input",size:"sm",placeholder:"Enter title",value:e.attachment.title,onChange:function(t){e.onChange({title:t.target.value})}}))))):"",r.a.createElement(lr.a,{eventKey:"author",title:"author(s)"},r.a.createElement(Ir,{contrib:e.attachment,onChange:e.onChange})),r.a.createElement(lr.a,{eventKey:"history",title:"history"},r.a.createElement(Er,{records:e.attachment.records})),r.a.createElement(lr.a,{eventKey:"properties",title:"properties"},r.a.createElement(Nr,{contribution:e.attachment,onChange:e.onChange}))))},Vr=function(e){var t=e.dialog,a=Object(u.d)((function(e){return e.notes[t.contribId]})),n=Object(u.c)();return r.a.createElement("div",null,r.a.createElement(ir,{key:t.id,id:t.id,onMouseDown:e.onMouseDown,title:t.title,style:{zIndex:t.zIndex},onClose:function(){return n(we((e=t).id)),void n(ze(e.noteId));var e},onConfirm:function(){n(wt(a,t.id))},confirmButton:t.confirmButton,editable:t.editable,buildon:t.buildOn,onBuildOnClick:function(){return e=t.contribId,void n(ft(e));var e}},a?r.a.createElement(Zr,{key:t.contribId,dlgId:t.id,attachment:a,mode:t.editable?"write":"read",onChange:function(e){n(Fe(Object(j.a)({_id:a._id},e)))}}):null))},Gr=function(e){var t,a=new Intl.DateTimeFormat("default",Ht),o=e.dialog,i=Object(u.d)((function(e){return e.notes[o.contribId]})),c=Object(u.d)((function(e){return e.users[i.authors[0]]||"NA"})),l=a.format(new Date(i.modified)),d=Object(u.c)(),m=Object(n.useState)("write"),p=Object(s.a)(m,2),h=p[0],b=p[1],g=function(e){d(we(e.id)),d(ze(e.noteId))},f=function(e){d(Fe(Object(j.a)({_id:i._id},e)))};return r.a.createElement(ir,{key:o.id,id:o.id,onMouseDown:e.onMouseDown,title:o.title,style:{zIndex:o.zIndex},onClose:function(){return g(o)},onConfirm:function(){return function(){var e=t.contentWindow;e.svgCanvas.setResolution("fit",100);var a=e.svgCanvas.current_drawing_.all_layers[0],n=e.svgCanvas.current_drawing_.all_layers[1],r=n[1].getBBox().width,s=n[1].getBBox().height;if(0!==r&&0!==s){if("none"===a[1].children[1].attributes.fill.value)if(e.svgCanvas.current_drawing_.all_layers[1][1].childNodes.length>1){e.svgCanvas.current_drawing_.svgElem_.setAttribute("width",r+2),e.svgCanvas.current_drawing_.svgElem_.setAttribute("height",s+2);var c=e.svgCanvas.current_drawing_.all_layers[0];c[1].childNodes[1].setAttribute("width",r),c[1].childNodes[1].setAttribute("height",s),e.svgCanvas.selectAllInCurrentLayer(),e.svgCanvas.groupSelectedElements(),e.svgCanvas.alignSelectedElements("l","page"),e.svgCanvas.alignSelectedElements("t","page"),e.svgCanvas.ungroupSelectedElement(),e.svgCanvas.clearSelection()}e.svgCanvas.setResolution("fit","fit");var l=Object(j.a)({},i);l.data=Object(j.a)(Object(j.a)({},l.data),{},{svg:e.svgCanvas.svgCanvasToString()}),d(wt(l,o.id))}else g()}()},confirmButton:o.confirmButton,editable:o.editable,buildon:o.buildOn,onBuildOnClick:function(){return e=o.contribId,void d(ft(e));var e}},r.a.createElement("div",null,r.a.createElement("div",{className:"contrib-info"},"Created By: ",c.firstName," ",c.lastName," ",r.a.createElement("br",null),"Last modified: ",l),r.a.createElement(cr.a,{activeKey:h,transition:!1,onSelect:function(e){b(e),"history"===e&&d(Et(i._id)),"author"===e&&d(ea(i.communityId))}},r.a.createElement(lr.a,{eventKey:"write",title:"write",style:{height:"90%"}},i?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,null,r.a.createElement(Ja.a.Group,{className:"write-title-form",controlId:"note-title"},r.a.createElement(Ja.a.Control,{type:"text",className:"write-tab-input",size:"sm",placeholder:"Enter title",value:i.title,onChange:function(e){f({title:e.target.value})}})))),r.a.createElement("iframe",{onLoad:function(e){console.log("on load draw");var t=i.data.svg;t&&(e.target.contentWindow.svgCanvas.setSvgString(t),e.target.contentWindow.svgCanvas.setResolution("fit","fit"))},title:"DrawingTool",src:"/drawing-tool/svg/index.html",ref:function(e){e&&(t=e)},width:"100%",height:"100%"})):""),r.a.createElement(lr.a,{eventKey:"author",title:"author(s)"},r.a.createElement(Ir,{contrib:i,onChange:f})),r.a.createElement(lr.a,{eventKey:"history",title:"history"},r.a.createElement(Er,{records:i.records})),r.a.createElement(lr.a,{eventKey:"properties",title:"properties"},r.a.createElement(Nr,{contribution:i,onChange:f})))))},Rr=function(e){var t=Object(u.d)((function(e){return e.dialogs})),a=Object(u.c)(),o=Object(n.useCallback)((function(e){return a(ye(e))}),[a]);return r.a.createElement("div",null,t.dialogs.map((function(e,t){return"Note"===e.type?r.a.createElement(Lr,{key:e.id,dialog:e,onMouseDown:function(){return o(e.id)}}):"Attachment"===e.type?r.a.createElement(Vr,{key:e.id,dialog:e,onMouseDown:function(){return o(e.id)}}):"Drawing"===e.type?r.a.createElement(Gr,{key:e.id,dialog:e,onMouseDown:function(){return o(e.id)}}):""})))},Yr=function(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),o=a[0],i=a[1],c=Object(u.c)();return r.a.createElement(w.a,{show:e.show,onHide:e.handleClose},r.a.createElement(w.a.Header,{closeButton:!0},r.a.createElement(w.a.Title,null,"New RiseAbove")),r.a.createElement(w.a.Body,null,r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,null,r.a.createElement(Ja.a.Group,{className:"ra-title-form",controlId:"ra-title"},r.a.createElement(Ja.a.Control,{type:"text",size:"sm",placeholder:"Enter title",value:o,onChange:function(e){i(e.target.value)}}))))),r.a.createElement(w.a.Footer,null,r.a.createElement(y.a,{variant:"secondary",onClick:e.handleClose},"Cancel"),r.a.createElement(y.a,{variant:"primary",onClick:function(){var t;c((t=o,function(){var e=Object(I.a)(O.a.mark((function e(a,n){var r,o,i,s,c,l,u,d;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().globals,o=r.author,i=r.communityId,s=r.view,c={permission:s.permission,group:s.group,_groupMembers:s._groupMembers},e.next=4,Ge(t,o._id,i,c,!1);case 4:return l=e.sent,u=bt(i,o._id,c),e.next=8,V(i,u);case 8:return(d=e.sent.data).title=t,e.next=12,Re(d,l._id,i);case 12:d=e.sent,B(s._id,d._id,"contains",{x:200,y:200});case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())),e.handleClose()}},"Create")))},Wr=a(182),zr=a.n(Wr),Fr=Object(n.createContext)(null),Br=function(e){var t,a,n=e.children,o=Object(u.c)(),i=function(e){t.on(e+":save",(function(t){var a;"link"===e&&"contains"===t.type&&"active"===t._to.status&&o((a=t,function(){var e=Object(I.a)(O.a.mark((function e(t,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n().globals.viewId!==a.from){e.next=8;break}if(t(ot(a)),"Note"!==a._to.type){e.next=8;break}return e.next=6,J(a.to);case 6:r=e.sent,t(tt(r));case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()))})),t.on(e+":remove",(function(t){"link"===e&&"active"===t._to.status&&(o(mt(t)),o(pt({_id:t.to})))}))},s=function(e){t.emit("subscribe","linkfrom:".concat(e)),t.emit("subscribe","noteCount:".concat(e))};return a={socket:t,openConnection:function(e,a){t?(e&&s(e),a&&i(a)):((t=zr.a.connect(C,{path:"/socket.io-client",log:!0,"close timeout":60,"heartbeat timeout":60,"heartbeat interval":20})).on("connect",(function(){o(_t(!0)),e&&s(e),a&&i(a)})),t.on("error",(function(e){console.log(e||"error"),t=null,o(_t(!1))})),t.on("connect_failed",(function(e){console.log(e||"connect_failed"),t=null,o(_t(!1))})),t.on("disconnect",(function(e){t=null,o(_t(!1))})))},emit:function(e,a){t.emit(e,a)},unsyncUpdates:function(e){t.removeAllListeners(e+":save"),t.removeAllListeners(e+":remove")},syncUpdates:i,subscribeToView:s,unsubscribeToView:function(e){t.emit("unsubscribe","linkfrom:".concat(e)),t.emit("unsubscribe","noteCount:".concat(e))},disconnect:function(){t&&t.disconnect()}},r.a.createElement(Fr.Provider,{value:a},n)},Ur=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleNewViewInput=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(E.a)({},a,r))},n.goToDashboard=function(){n.clearGraphViewProps(),n.props.history.push("/dashboard")},n.switchView=function(){var e="Enhanced"===n.state.currentView?"Light":"Enhanced";n.setState({currentView:e})},n.renderTooltip=function(e){return r.a.createElement(ja.a,Object.assign({id:"button-tooltip"},e),e.message)},n.updateLayout=function(e){n.setState({layout:e.target.value})},n.state={token:sessionStorage.getItem("token"),currentView:void 0!==n.props.location&&void 0!==n.props.location.state?n.props.location.state.currentView:"Enhanced",communityTitle:void 0!==n.props.location&&void 0!==n.props.location.state?n.props.location.state.communityTitle:void 0!==n.props.demoCommunityTitle?n.props.demoCommunityTitle:null,layout:"preset",addView:"",showModal:!1,showView:!1,showAttachPanel:!1,showRiseAboveModal:!1},n.clearGraphViewProps=n.clearGraphViewProps.bind(Object(b.a)(n)),n.onViewClick=n.onViewClick.bind(Object(b.a)(n)),n.handleNewViewInput=n.handleNewViewInput.bind(Object(b.a)(n)),n.handleNewViewSubmit=n.handleNewViewSubmit.bind(Object(b.a)(n)),n.newView=n.newView.bind(Object(b.a)(n)),n.handleShow=n.handleShow.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.viewId?this.props.viewId:this.props.match.params.viewId;this.context.openConnection(e,"link"),this.props.fetchViewCommunityData(e)}},{key:"componentDidUpdate",value:function(e,t){this.props.viewId&&this.props.viewId!==e.viewId&&(this.props.fetchNewViewDifference(this.props.viewId),this.props.socketStatus&&e.viewId&&(this.context.unsubscribeToView(e.viewId),this.context.subscribeToView(this.props.viewId)))}},{key:"componentWillUnmount",value:function(){this.props.socketStatus&&(this.context.unsyncUpdates("link"),this.context.unsubscribeToView(this.props.viewId),this.context.disconnect())}},{key:"clearGraphViewProps",value:function(){this.props.setViewLinks([]),this.props.setBuildsOn([]),this.props.setReadLinks([]),this.props.clearAuthors([])}},{key:"onViewClick",value:function(e){this.handleShow(!1),this.props.setViewId(e),!1===this.props.isDemo&&this.props.history.push({pathname:"/view/".concat(e),state:{currentView:this.state.currentView,communityTitle:this.state.communityTitle}})}},{key:"newView",value:function(){this.setState({showView:!0,showModel:!0})}},{key:"handleNewViewSubmit",value:function(e){var t=this;e.preventDefault();var a={headers:{Authorization:"Bearer ".concat(this.state.token)}},n="".concat(T,"/contributions/").concat(this.props.communityId),r={authors:[this.props.author._id],communityId:this.props.communityId,permission:"public",status:"active",title:this.state.addView,type:"View"};A.a.post(n,r,a).then((function(e){var a=e.data._id;G(t.props.communityId).then((function(e){e.data.views.push(a),R(e.data,t.props.communityId).then((function(e){ee(t.props.communityId).then((function(e){B(t.props.viewId,a,"contains",{x:1e3,y:1e3}).then((function(e){alert("View Added"),window.location.reload(!1)}))}))}))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}},{key:"handleShow",value:function(e){this.setState({showModel:e})}},{key:"render",value:function(){var e=this,t="Enhanced"===this.state.currentView?r.a.createElement(Dn,{layout:this.state.layout,viewId:this.props.viewId,viewLinks:this.props.viewLinks,readLinks:this.props.readLinks,onViewClick:this.onViewClick,onNoteClick:function(t){return e.props.openContribution(t,"write")},updateParentLayoutProp:this.updateLayout}):r.a.createElement(qn,null);return r.a.createElement("div",{className:"container-fluid d-flex flex-column",id:"container-fluid-for-view-js"},r.a.createElement(Rr,null),r.a.createElement(Ha,{attachPanel:this.state.showAttachPanel,viewId:this.props.viewId,onClose:function(){return e.setState({showAttachPanel:!1})}}),r.a.createElement(Yr,{show:this.state.showRiseAboveModal,handleClose:function(){return e.setState({showRiseAboveModal:!1})}}),r.a.createElement("div",{className:"row"},r.a.createElement(Pa,{currentView:this.state.currentView,onViewClick:this.onViewClick,goToDashboard:this.goToDashboard,communityTitle:this.state.communityTitle})),r.a.createElement("div",{className:"row flex-grow-1"},r.a.createElement("div",{className:"col-md",id:"sticky-sidebar"},r.a.createElement("div",{className:"row sidebar-list"},!1===this.props.isDemo?r.a.createElement("div",{className:"sidebar-list-col col col-sm col-md-12"},r.a.createElement(Sa.a,{placement:"top",delay:{show:250,hide:400},overlay:this.renderTooltip({message:"Create New Contribution"})},r.a.createElement(ka.a,{drop:"right",className:"dropdown-btn-parent",title:r.a.createElement("i",{className:"fas fa-plus-circle"})},r.a.createElement(Aa.a.Item,{onClick:function(){return e.props.newNote(e.props.view,e.props.communityId,e.props.author._id)}},"New Note"),r.a.createElement(Aa.a.Item,{onClick:function(){return e.newView()}},"New View"),r.a.createElement(Aa.a.Item,{onClick:function(){return e.setState({showAttachPanel:!0})}},"New Attachment"),r.a.createElement(Aa.a.Item,{onClick:function(){return e.props.newDrawing(e.props.viewId,e.props.communityId,e.props.author._id)}},"New Drawing")))):null,r.a.createElement("div",{className:"sidebar-list-col col col-sm col-md-12"},r.a.createElement(nr,{currentView:this.state.currentView,switchView:this.switchView})),"Enhanced"===this.state.currentView?r.a.createElement("div",{className:"sidebar-list-col col col-sm col-md-12"},r.a.createElement(Sa.a,{placement:"auto",trigger:"click",delay:{show:0,hide:0},rootClose:!0,overlay:r.a.createElement(Ca.a,{id:"layoutPopover"},r.a.createElement(Ca.a.Title,null,"Layouts (Temporary)"),r.a.createElement(Ca.a.Content,null,r.a.createElement(Ta.a,null,r.a.createElement(y.a,{value:"preset",onClick:this.updateLayout,className:"preset"===this.state.layout?"activeLayout":""},"Original")),r.a.createElement(Ta.a,null,r.a.createElement(y.a,{value:"grid",onClick:this.updateLayout,className:"grid"===this.state.layout?"activeLayout":""},"Grid")),r.a.createElement(Ta.a,null,r.a.createElement(y.a,{value:"circle",onClick:this.updateLayout,className:"circle"===this.state.layout?"activeLayout":""},"Circle")),r.a.createElement(Ta.a,null,r.a.createElement(y.a,{value:"spread",onClick:this.updateLayout,className:"spread"===this.state.layout?"activeLayout":""},"Spread")),r.a.createElement(Ta.a,null,r.a.createElement(y.a,{value:"cose",onClick:this.updateLayout,className:"cose"===this.state.layout?"activeLayout":""},"Cose"))))},r.a.createElement(y.a,{className:"circle-button pad sidebar-btn"},r.a.createElement("i",{className:"fas fa-object-group"})))):null)),r.a.createElement("div",{className:"col-md",id:"main-canvas"},t)),r.a.createElement(w.a,{show:this.state.showModel,onHide:function(){return e.handleShow(!1)}},this.state.showView?r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a.Header,{closeButton:!0},r.a.createElement(w.a.Title,null,r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,null,"Views")),r.a.createElement(Ta.a,null,r.a.createElement(Ma.a,null,r.a.createElement(Ta.a,null,r.a.createElement(xa.a,{onSubmit:this.handleNewViewSubmit,className:"form"},r.a.createElement(Ma.a,null,r.a.createElement(Da.a,null,r.a.createElement(La.a,{htmlFor:"addView",style:{fontSize:"1rem"}},"Add View"),r.a.createElement(Za.a,{type:"text",id:"addView",placeholder:"Enter View Name",name:"addView",value:this.state.addView,onChange:this.handleNewViewInput}))),r.a.createElement(Ma.a,null,r.a.createElement(y.a,{varient:"secondary",type:"submit"},"Add")))))))),r.a.createElement(w.a.Body,{style:{maxHeight:"calc(100vh - 210px)",overflowY:"auto"}},this.props.myViews.map((function(t,a){return r.a.createElement(Ta.a,{key:a,value:t.title,className:"mrg-05-top"},r.a.createElement(Ma.a,null,r.a.createElement(c.b,{onClick:function(){return e.onViewClick(t._id)}}," ",t.title," ")))})))):null,r.a.createElement(w.a.Footer,null,r.a.createElement(y.a,{variant:"secondary",onClick:function(){return e.handleShow(!1)}},"Close"))))}}]),a}(n.Component);Ur.contextType=Fr;var Pr={setViewId:Zt,setViewLinks:rt,setBuildsOn:it,setReadLinks:dt,clearAuthors:me,fetchViewCommunityData:na,fetchNewViewDifference:function(e){return function(){var t=Object(I.a)(O.a.mark((function t(a){var n,r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(at([])),t.next=3,J(e);case 3:n=t.sent,r=n.communityId,a(Gt(n)),a(Ot(n._id)),a(kt(r,n._id));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},openContribution:Nt,newNote:gt,newDrawing:function(e,t,a){return function(){var n=Object(I.a)(O.a.mark((function n(r){var o,i,s;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o={communityId:t,type:"Drawing",title:"a Drawing",authors:[a],status:"unsaved",permission:"protected",data:{svg:'<svg width="200" height="200" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><g><title>Layer 1</title></g></svg>'}},n.next=3,V(t,o);case 3:i=n.sent.data,B(e,i._id,"contains",{x:100,y:100,showInPlace:!0}),s=Object(j.a)({records:[]},i),r(We(s)),r(ve({title:"New Drawing",confirmButton:"create",contribId:s._id,type:"Drawing",editable:!0}));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},Jr=Object(u.b)((function(e,t){return{isDemo:e.globals.isDemo,token:e.globals.token,currentServer:e.globals.currentServer,communityId:e.globals.communityId,viewId:e.globals.viewId,view:e.globals.view,author:e.globals.author,myViews:e.globals.views,socketStatus:e.globals.socketStatus,viewLinks:e.notes.viewLinks,readLinks:e.notes.readLinks}}),Pr)(Ur),Qr=a(183),_r=a.n(Qr),Hr=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={modalContent:null,showModal:!1,modalDialogClassName:"login-modal-dialog"},n.handleShow=n.handleShow.bind(Object(b.a)(n)),n.handleClose=n.handleClose.bind(Object(b.a)(n)),n.toggleFullScreenModal=n.toggleFullScreenModal.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"handleShow",value:function(){this.setState({showModal:!0});var e=this;(function(e,t,a){var n={userName:e,password:t};return fetch(a+"auth/local",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return 200!==e.status&&(console.log("Error: "+a+"auth/local"),console.log(e)),e.json()})).then((function(e){return e})).catch((function(e){return e}))})("kfhowdemouser","demouser123",sa).then((function(t){var a=t.token;M(sa),x(a),sessionStorage.setItem("token",a),sessionStorage.setItem("communityId","5ea995a6cbdc04a6f53a1b5c"),sessionStorage.setItem("viewId","5ea995a7cbdc04a6f53a1b5f"),e.props.setDemoStatus(!0),e.props.setGlobalToken(a),e.props.fetchLoggedUser(),e.props.setCommunityId("5ea995a6cbdc04a6f53a1b5c"),e.props.setViewId("5ea995a7cbdc04a6f53a1b5f"),e.props.setCurrentServer(sa),e.setState({modalContent:r.a.createElement(Jr,{demoCommunityTitle:"KF How To - KB Resources"})})}))}},{key:"handleClose",value:function(){this.props.setDemoStatus(!1),this.props.setViewLinks([]),this.props.setBuildsOn([]),this.props.setReadLinks([]),this.props.clearAuthors([]),this.setState({showModal:!1,modalContent:null,modalDialogClassName:"login-modal-dialog"})}},{key:"toggleFullScreenModal",value:function(){var e="";"login-modal-dialog"===this.state.modalDialogClassName?e="login-modal-dialogfullscreen":"login-modal-dialogfullscreen"===this.state.modalDialogClassName&&(e="login-modal-dialog"),this.setState({modalDialogClassName:e})}},{key:"componentDidMount",value:function(){Se()('[data-toggle="tooltip"]').tooltip(),Se()('[data-toggle="popover"]').popover(),Se()(window).width()<=768&&document.getElementById("popover").setAttribute("data-trigger","focus")}},{key:"render",value:function(){var e;return"Login"===this.props.currentLoginForm?e=r.a.createElement(wa,null):"SignUp"===this.props.currentLoginForm&&(e=r.a.createElement(Ia,null)),r.a.createElement("div",{className:"container-fluid login-main"},r.a.createElement("div",{className:"row login-row"},r.a.createElement("div",{className:"col-md-6 login-col login",id:"login"},e),r.a.createElement("div",{className:"col-md-6 login-about"},r.a.createElement("div",{className:"login-about-wrapper"},r.a.createElement("h1",null,"What is knowledgeforum.org?"),r.a.createElement("p",null,"A knowledge forum is an electronic group workspace designed to support the process of knowledge building. There are multiple installations of knowledge forums hosted by many universities and private entities all over the world. Knowledgeforum.org unites all of these installations and hence the stakeholders to help confluence knowledge building research, widen the reach of the tool & provide a central location for all global stakeholders."),r.a.createElement("div",{className:"login-overlay-container login-demo-image",onClick:this.handleShow,id:"demo-image-container"},r.a.createElement("img",{className:"d-block w-100",src:_r.a,alt:"First slide"}),r.a.createElement("div",{className:"login-overlay"},r.a.createElement("div",{className:"login-overlay-text"},"Demo a Knowledge Forum"))),r.a.createElement(w.a,{dialogClassName:this.state.modalDialogClassName,show:this.state.showModal,onHide:this.handleClose},r.a.createElement(w.a.Header,null,r.a.createElement(w.a.Title,{className:"login-modal-title"},"Knowledge Forum Demo",r.a.createElement("a",{href:"/#",className:"kf-demo-modaltitle-btn",onClick:this.handleClose},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("a",{href:"/#",className:"kf-demo-modaltitle-btn",onClick:this.toggleFullScreenModal},r.a.createElement("i",{className:"fas fa-expand-alt"})))),r.a.createElement(w.a.Body,{className:"login-modal-body",style:{padding:0}},this.state.modalContent),r.a.createElement(w.a.Footer,null,r.a.createElement(y.a,{variant:"primary",onClick:this.handleClose,className:"login-modal-btn",style:{backgroundColor:"#2d5085"}},"Close")))))))}}]),a}(n.Component),Xr={setDemoStatus:At,setGlobalToken:Ct,setCurrentServer:Lt,setCommunityId:Dt,setViewId:Zt,setViewLinks:rt,setBuildsOn:it,setReadLinks:dt,clearAuthors:me,fetchLoggedUser:ta},Kr=Object(v.d)(l.g,Object(u.b)((function(e,t){return{currentLoginForm:e.globals.currentLoginForm}}),Xr))(Hr);function qr(e,t){var a=ua(e);(function(e,t){return fetch(t+"api/users/myRegistrations",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return 200!==e.status&&(console.log("Error: "+t+"api/users/myRegistrations"),console.log(e)),e.json()})).then((function(e){return e})).catch((function(e){return e}))})(a,e).then((function(e){e.sort((function(e,t){return ao(e._community.title,t._community.title)})),function(e,t,a){for(var n=[],r=0;r<e.length;r++)e[r]&&e[r]._id&&n.push({title:e[r]._community.title,server:a.state.currentServerURL,token:a.state.token,communityId:e[r].communityId});a.setState({userCommunityData:n})}(e,0,t)})),function(e,t){return fetch(t+"api/users/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return 200!==e.status&&304!==e.status?(console.log("Error: "+t+"api/users/me"),console.log(e),{error:!0}):e.json()})).then((function(e){return e})).catch((function(e){return e}))}(a,e).then((function(e){!0===e.error?(alert("User authorization token expired"),eo()):(t.setState({name:e.firstName+" "+e.lastName}),t.setState({userId:e._id}))})),function(e,t){return fetch(t+"api/communities",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return 200!==e.status&&(console.log("Error: "+t+"api/communities"),console.log(e)),e.json()})).then((function(e){return e})).catch((function(e){return e}))}(a,e).then((function(e){e.sort((function(e,t){return ao(e.title,t.title)})),function(e,t){for(var a=[],n=0;n<e.length;n++){var r=e[n].title,o=e[n]._id;a.push({title:r,communityId:o})}var i=a.map((function(e){return{value:e.communityId,label:e.title}}));t.setState({serverCommunityData:i})}(e,t)}))}function $r(e,t,a,n,r){var o=ua(t),i=r;(function(e,t,a,n,r){var o={communityId:t,registrationKey:r,userId:n};return fetch(a+"api/authors",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify(o)}).then((function(e){return 200!==e.status?(console.log("Error: "+a+"api/authors"),console.log(e),e):e.json()})).then((function(e){return[e,a]})).catch((function(e){return e}))})(o,n,t,e,a).then((function(e){document.getElementById("communityKey").value="",201!==e[0].status?i.setState({joinCommunityErrorMessage:"Registration key does not match or you are already registered."}):(i.setState({joinCommunityErrorMessage:""}),qr(t,i))}))}function eo(e){var t=localStorage.getItem("Username"),a=JSON.parse(localStorage.getItem(t));if(null===t||null===a)localStorage.clear();else{for(var n in a)a[n][1]="";localStorage.setItem(t,JSON.stringify(a)),localStorage.removeItem("Username")}e.props.history.push("/")}function to(){var e=document.getElementById("wrapper");"d-flex"===e.className?e.className="d-flex toggled":e.className="d-flex"}function ao(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}a(324);var no=function(e){Object(g.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).inputChangeHandler=function(e){var t=e.target.name,a=e.target.value;n.setState(Object(E.a)({},t,a))},n.serverSelectHandler=function(e){var t=e.target,a=e.target.innerText,r=la(e.target.innerText),o=JSON.parse(localStorage.getItem(n.state.username));n.setState({currentServerURL:la(a)}),n.setState({currentServerName:a}),Se()(t).addClass("active").siblings().removeClass("active");var i=la(a),s=[];for(var c in o){var l=o[c][0],u=o[c][1],d=l===i?"active":"inactive",m=o[c][3];l===i&&n.setState({token:o[c][1]}),s.push([l,u,d,m])}localStorage.setItem(n.state.username,JSON.stringify(s)),qr(r,Object(b.a)(n))},n.handleViewChange=function(e){var t={value:e.value,label:e.label};n.setState({viewType:t});var a=JSON.parse(localStorage.getItem(n.state.username)),r=[];for(var o in a)r.push([a[o][0],a[o][1],a[o][2],t]);localStorage.setItem(n.state.username,JSON.stringify(r))},n.handleCommunityDropDownChange=function(e){n.setState({selectedCommunityToJoin:{value:e.value,label:e.label}})},n.state={token:null,username:null,name:null,userId:null,currentServerURL:null,currentServerName:null,serverList:[],userCommunityData:[],serverCommunityData:[],selectedCommunityToJoin:null,communityRegistrationKey:null,joinCommunityErrorMessage:null,viewType:JSON.parse(localStorage.getItem(localStorage.getItem("Username")))[0][3]},n.enterCommunity=n.enterCommunity.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"enterCommunity",value:function(e){var t,a,n,r=(t=e.token,a=e.communityId,n=e.server,fetch(n+"api/communities/"+a+"/views",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){return 200!==e.status&&(console.log("Error: "+n+"api/communities/"+a+"/views"),console.log(e)),e.json()})).then((function(e){return e[0]})).catch((function(e){return e}))),o=this;r.then((function(t){if("Classic"===o.state.viewType.value){var a=document.createElement("a");a.href=e.server+"auth/jwt?token="+e.token+"&redirectUrl=/view/"+t._id,a.target="_blank",document.body.appendChild(a),a.click()}else"Enhanced"!==o.state.viewType.value&&"Light"!==o.state.viewType.value||(M(e.server),x(e.token),sessionStorage.setItem("token",e.token),sessionStorage.setItem("communityId",e.communityId),sessionStorage.setItem("viewId",t._id),o.props.setGlobalToken(e.token),o.props.fetchLoggedUser(),o.props.setCommunityId(e.communityId),o.props.setViewId(t._id),o.props.setCurrentServer(e.server),o.props.history.push({pathname:"/view/".concat(t._id),state:{currentView:o.state.viewType.value,communityTitle:e.title}}))})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){!function(e){var t=localStorage.getItem("Username"),a=JSON.parse(localStorage.getItem(t)),n=[];e.setState({username:t});for(var r=0;r<a.length;r++){var o=ca(a[r][0]);"active"===a[r][2]?(e.setState({currentServerURL:a[r][0]}),e.setState({currentServerName:ca(a[r][0])}),e.setState({token:a[r][1]}),n.push({name:o,class:"active",url:a[r][0]}),qr(a[r][0],e)):n.push({name:o,class:"",url:a[r][0]})}e.setState({serverList:n})}(this)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"d-flex",id:"wrapper"},r.a.createElement("div",{className:"sidebar-custom dashboard-sidebar-custom",id:"sidebar-wrapper"},r.a.createElement("h1",{className:"sidebar-heading dashboard-sidebar-heading"},"Your Servers:"),r.a.createElement("div",{className:"list-group list-group-flush"},r.a.createElement("ul",{className:"dashboard-server-list",id:"server-list"},this.state.serverList.map((function(t){return r.a.createElement("li",{key:t.name,onClick:e.serverSelectHandler,className:t.class},t.name)}))),r.a.createElement("div",{className:"dashboard-viewDropDownContainer"},r.a.createElement("p",null,"View Type:"),r.a.createElement(ya.a,{isSearchable:!1,value:this.state.viewType,onChange:this.handleViewChange,options:[{value:"Classic",label:"Classic"},{value:"Enhanced",label:"Enhanced"},{value:"Light",label:"Light"}]})))),r.a.createElement("div",{id:"page-content-wrapper"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light border-bottom dashboard-navbar"},r.a.createElement("button",{className:"d-none d-md-block btn btn-primary dashboard-select-server",id:"menu-toggle",onClick:to},"Select Server"),r.a.createElement("button",{className:"d-md-none btn btn-primary dashboard-select-server",id:"menu-toggle",onClick:to},r.a.createElement("i",{className:"fas fa-server"})),r.a.createElement("div",{className:"dashboard-currentInfo",id:"currentInfo"},this.state.name,r.a.createElement("div",null),this.state.currentServerName),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav ml-auto mt-2 mt-lg-0"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{className:"nav-link dashboard-nav-link btn btn-link",href:"",id:"logout",onClick:function(){return eo(e)}},"Logout"))))),r.a.createElement("div",{className:"container-fluid",id:"dashboard-mainContentContainer"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 dashboard-mainContentCol userCommunitiesTableCol"},r.a.createElement("h1",null,"My Knowledge Building Communities"),r.a.createElement("table",{className:"dashboard-userCommunities table",id:"userCommunities"},r.a.createElement("tbody",null,this.state.userCommunityData.map((function(t){return r.a.createElement("tr",{key:t.communityId,onClick:function(){return e.enterCommunity(t)}},r.a.createElement("td",{className:"dashboard-userCommunities-row"},t.title,r.a.createElement("button",{className:"dashboard-enterButton",type:"button"},r.a.createElement("i",{className:"fas fa-door-open"}))))}))))),r.a.createElement("div",{className:"col-md-6 dashboard-mainContentCol"},r.a.createElement("h1",null,"Join Community"),r.a.createElement("form",{className:"col-lg-8 col-md-10 col-sm-12 dashboard-joinCommunityForm",id:"joinCommunityForm",autoComplete:"off"},r.a.createElement("label",{htmlFor:"server"},"Community:"),r.a.createElement("br",null),r.a.createElement(ya.a,{value:this.state.selectedCommunityToJoin,className:"dashboard-communityChoiceDropdown",id:"communityChoiceDropdown",options:this.state.serverCommunityData,onChange:this.handleCommunityDropDownChange,required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"communityKey"},"Community Registration Key:"),r.a.createElement("br",null),r.a.createElement("input",{className:"dashboard-communityKeyInput",type:"text",id:"communityKey",name:"communityRegistrationKey",required:!0,onChange:this.inputChangeHandler}),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("p",{style:{color:"red"},id:"errorMessage"},this.state.joinCommunityErrorMessage)),r.a.createElement("input",{className:"dashboard-joinButton",type:"button",value:"Join",onClick:function(){return $r(e.state.userId,e.state.currentServerURL,e.state.communityRegistrationKey,e.state.selectedCommunityToJoin.value,e)},id:"joinCommunityButton"})))))))}}]),a}(n.Component),ro={setGlobalToken:Ct,setCurrentServer:Lt,setCommunityId:Dt,setViewId:Zt,fetchLoggedUser:ta},oo=Object(u.b)(null,ro)(no),io=a(188),so=function(e){var t=e.component,a=Object(io.a)(e,["component"]),n=Object(u.d)((function(e){return e.globals.isAuthenticated}));return r.a.createElement(l.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(l.a,{to:"/"})}}))};a(325);var co=function(){var e=Object(u.c)(),t=ma(),a=Object(s.a)(t,2),n=a[0],o=a[1];return o&&(x(o),M(n),e(Ct(o)),e(Lt(n)),e(ta())),r.a.createElement("div",{id:"sub-root"},r.a.createElement(m.a,null),r.a.createElement(c.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",component:Kr}),r.a.createElement(so,{exact:!0,path:"/dashboard",component:oo}),r.a.createElement(so,{path:"/view/:viewId",component:Jr}),r.a.createElement(so,{component:oo}))))};i.a.render(r.a.createElement(u.a,{store:Cr},r.a.createElement(Br,null,r.a.createElement(co,null))),document.getElementById("root"))}},[[190,1,2]]]);
//# sourceMappingURL=main.101aadc5.chunk.js.map