{"version":3,"sources":["assets/icon_note_blue.png","assets/icon_note_red.png","assets/icon_riseabove_blue.png","assets/icon_riseabove_red.png","assets/icon_attachment.gif","assets/icon_view.png","assets/sample_view.gif","store/api.js","store/userReducer.js","store/scaffoldReducer.js","store/dialogReducer.js","store/kftag.service.js","store/notifier.js","store/noteReducer.js","store/globalsReducer.js","api/user.js","config.js","helper/Login_helper.js","LoginForm.jsx","SignUpForm.jsx","api/object.js","helper/Graph_helper.js","GraphView.jsx","store/async_actions.js","Login.jsx","helper/Dashboard_helper.js","api/community.js","Dashboard.jsx","TopNavBar/TopNavbar.js","store/access.js","components/NoteContent/NoteContent.js","store/riseAboveReducer.js","components/scaffold/scaffold.service.js","components/scaffold/ScaffoldSelect.js","View/ListOfNotes/Notes/Notes.js","View/ListOfNotes/ListOfNotes.js","View/LightView.js","components/dialog/Dialog.js","components/drawDialog/DrawDialog.js","components/editor/MCEditor.js","components/attachmentCollapse/AttachPanel.js","components/attachmentArea/AttachArea.js","components/writeTab/WriteTab.js","components/historyTab/History.js","components/propertiesTab/Properties.js","components/authorSelect/AuthorSelect.js","components/authorsTab/AuthorTab.js","components/annotator/annotator.service.js","store/store.js","components/annotator/Annotator.js","components/RiseAboveView/RiseAboveView.js","components/note/Note.js","components/dialog/NoteDialog.js","components/dialogHandler/DialogHandler.js","WebSocket.js","components/View.js","ProtectedRoute.jsx","App.js","index.js"],"names":["module","exports","url","localStorage","getItem","apiUrl","setServer","server","endsWith","substring","length","setItem","setToken","token","axios","defaults","headers","common","sessionStorage","getUser","a","get","data","getCommunity","communityId","putCommunity","object","put","getGroups","getCommunityViews","getLinks","objectId","direction","type","links","filter","each","putLink","linkId","link","postLink","fromId","toId","post","from","to","deleteLink","delete","linksSearch","query","getObject","putObject","postAttachment","authorId","newobj","title","authors","status","permission","version","postContribObject","obj","getCommunityAuthors","getRecords","contribId","uploadFile","file","onProgress","formData","FormData","append","onUploadProgress","getViews","getApiLinksReadStatus","viewId","then","result","body","results","i","push","catch","error","addUser","createAction","addAuthors","resetAuthors","userReducer","createReducer","state","action","payload","_id","forEach","author","fetchAuthors","dispatch","api","requestScaffold","receiveScaffold","scaffoldReducer","isFetching","items","fetched","fetchScaffolds","contextId","scaffold_promise","res","Promise","all","scaffolds","map","scaffoldId","el","includes","supports","scaffold","openDialog","closeDialog","focusDialog","openAttachPanel","closeAttachPanel","dialogCounter","dialogReducer","dialogs","drawTool","focused","attachPanel","dlgs","dlg","id","zIndex","createScaffoldStartTag","isTemplate","tag","createScaffoldEndTag","createReferenceTag","contId","text","preProcess","toConnections","fromConnections","doc","jq","$","supportStart","find","addClass","elem","startsWith","hasClass","ref","conn","innerHTML","_from","supportEnd","references","_to","html","postProcess","contributionId","handler","endtags","supportLinksIds","supportStarts","supportEnds","toCreate","supportStartsIds","supportId","split","oldId","newId","toDeleteSupports","referenceLinksIds","kfReferences","kfreferenceIds","referenceId","toDeleteReferences","notifConfig","insert","container","animationIn","animationOut","dismiss","duration","addNotification","notif","store","addNote","removeNote","editNote","addAttachment","removeAttachment","setAttachments","setWordCount","setLinks","setRecords","removeContribAuthor","addContribAuthor","setAnnotation","setAnnotationsLoaded","removeAnnotation","setViewNotes","addViewNote","setCheckedNotes","updateCheckedNotes","setViewLinks","addViewLink","setBuildsOn","setSupports","setRiseAboveViewNotes","setRiseAboveNotes","setReadLinks","removeViewLink","removeViewNote","noteReducer","attachments","viewNotes","checkedNotes","viewLinks","buildsOn","riseAboveNotes","riseAboveViewNotes","readLinks","notes","note","Object","assign","noteId","attachment","att","attId","wordCount","wc","contrib","fromLinks","toLinks","records","auth","annos","annotation","value","annoId","checked","newNote","view","buildson","mode","group","_groupMembers","newN","contextMode","content","undefined","langInNote","docId","myself","coauthors","ca","createdBy","docShared","text4search","window","alert","createNote","x","y","confirmButton","editable","fetchAttachments","link_atts","attach","fetchLinks","viewLink","openContribution","getState","globals","noteBody","role","buildOn","annoLinks","annLink","anno","modelId","annot","fetchViewNotes","noteLinks","filteredObj","riseabove","riseAboveNoteIds","lnk","fetchBuildsOn","buildOnResult","reverse","filteredBuildOn","fetchSupports","fetchReadLinks","setGlobalToken","setCurrentLoginForm","setCommunity","setCommunityId","setCurrentServer","setViewId","setLoggedUser","setView","setAuthor","setViews","editCommunity","setUserId","setIsAuthenticated","setCommunities","setUserCommunities","setSocketStatus","dateFormatOptions","year","month","day","hour","minute","second","hour12","initState","currentLoginForm","currentServer","user","views","community","userId","isAuthenticated","communities","userCommunities","servers","key","socketStatus","globalsReducer","rootContextId","fetchAuthor","getAuthor","fetchLoggedUser","clear","location","replace","fetchCommunityViews","fetchViewCommunityData","commId","groups","getUserTokenServerPair","username","password","fetch","method","JSON","stringify","response","console","log","json","SERVERS","name","getServerName","getServerURL","extractTokenFromStorage","uname","parse","executePromises","pwd","login_form_component","promises","document","getElementById","userStorage","successfulLogin","errorMessage","serverTokenPair","message","removeItem","style","display","setState","responseHandler","getLoginData","server_data","LoginForm","props","inputChangeHandler","event","target","val","formSubmitHandler","preventDefault","history","openSignUpForm","tooltip","popover","width","setAttribute","className","onSubmit","this","autoComplete","placeholder","required","onChange","htmlFor","tabIndex","data-toggle","data-trigger","data-content","color","onClick","Component","mapDispatchToProps","compose","withRouter","connect","SignUpForm","serverSelectHandler","singaporeSelected","test","confirmPassword","firstname","lastname","email","registrationKey","postNewUser","resultErrorMessage","errorCode","openLoginForm","verifyRecaptcha","recaptchaVerified","userAuthenticationMethod","signUpButton","sitekey","disabled","options","s","label","classNamePrefix","minLength","maxLength","getApiObjectsObjectId","handleNote","nodeData","authorData","readStatus","authorName","matchAuthorId","date","parseDate","created","kfId","classes","position","handleAttachment","nodes","createCytoscapeId","String","imageUrl","slice","bounds","height","locked","download","handleDrawing","DOMParser","parseFromString","svg","aspect_ratio","childNodes","attributes","node_height","parseInt","encodeURIComponent","handleView","authorsInfo","firstName","lastName","has","set","Cytoscape","use","CytoscapePanZoom","CytoscapeNodeHtmlLabel","CytoscapeSupportImages","Graph","elements","edges","currViewLinksLength","loadElements","bind","supportImageIsDuplicate","compareSupportImages","findCyElemFromKfId","updateReadLinks","focusRecentAddition","prevViewLinksLength","keys","si","cy","supportimages","Map","_private","supportImages","graph_nodes","addNodesToGraph","graph_edges","edgeData","fromCount","toCount","j","k","source","addEdgesToGraph","self","concat","graph_results","cy_elements","images","addSupportImage","renderer","redraw","imgs","b","cy_elements_nodes","cy_elem","isRiseAbove","classToRemove","classToAdd","removeClass","cyElem","center","flashClass","zoomFactor","zoomDelay","minZoom","maxZoom","fitPadding","panSpeed","panDistance","panDragAreaSize","panMinPercentSpeed","panInactiveArea","panIndicatorMinOpacity","zoomOnly","fitSelector","animateOnFit","fitAnimationDuration","sliderHandleIcon","zoomInIcon","zoomOutIcon","resetIcon","panzoom","nodeHtmlLabel","halign","valign","halignBox","valignBox","cssClass","tpl","on","onViewClick","onNoteClick","evt","newViewLink","updateViewLink","prevProps","prevState","CytoscapeComponent","normalizeElements","stylesheet","selector","unread_note_icon","read_note_icon","unread_riseabove_icon","read_riseabove_icon","attachment_icon","view_icon","layout","hideEdgesonViewport","autolock","wheelSensitivity","ownProps","users","Login","demoToken","demoServer","demoCommunityId","demoViewId","showModal","handleShow","handleClose","getUserToken","formToRender","src","sample_view","alt","Modal","dialogClassName","onHide","Header","closeButton","Title","Body","Footer","Button","variant","loadServer","dashboard_component","getUserCommunities","sort","compareStrings","_community","userCommunityData","currentServerURL","updateUserCommunities","getUserInfo","logout","getCommunities","serverCommunityData","community_options","c","updateCommunities","joinCommunity","postCommunityRegistration","joinCommunityErrorMessage","userinfo","toggleSidebar","div","toLowerCase","Dashboard","domElement","serverName","innerText","serverURL","serverTokenPairs","currentServerName","siblings","activeServerURL","handleViewChange","viewType","handleCommunityDropDownChange","selectedCommunityToJoin","serverList","communityRegistrationKey","enterCommunity","welcomeViewId","aTag","createElement","href","appendChild","click","pathname","currentView","communityTitle","class","appendUserServers","isSearchable","data-target","aria-controls","aria-expanded","aria-label","TopNavbar","signUp","e","handleChange","Authorization","isLoggedIn","userName","isViewUrl","Navbar","Brand","Nav","Form","FormGroup","Input","Link","authorRequirementTable","private","r","w","protected","public","isAuthorOrGroupMember","isAuthor","isGroupMember","isEditable","requiredPermission","fullfillRequirement","NoteContent","noteList","handleSubmit","addView","viewError","setTimeout","topleft","config","Math","min","Axios","visible","handleRiseAbove","noOfNotes","confirm","createRiseAbove","getRiseAboveNotes","riseAboveId","openNote","persist","formatter","Intl","DateTimeFormat","Row","Col","md","Alert","isOpen","RiseAboveNotes","EditNoteButton","English","index","indexOf","access","dangerouslySetInnerHTML","__html","format","Date","riseAboveNoteId","noteResponse","putResponse","objId","linkRes","addHyphen","initText","supportContentId","getTime","toString","ScaffoldSelect","scaffoldSelected","support","returnSupport","onScaffoldSelected","addhyphen","initialText","scaffold_text","tagCreator","scaffoldService","selected","initVal","onSelectChange","size","Container","Group","controlId","Control","as","React","Notes","authorObj","setOpen","open","checkNote","updateNoteMobile","isCheckedMobile","showNote","riseAboveData","NoteMobile","hasChildren","children","icon","medium","up","isChecked","Collapse","in","hierarchy","small","down","ListOfNotes","getNotes","View","filteredData","filterResults","handleInputChange","handleFilter","showView","showRiseAbove","hideScaffold","getBuildOnHierarchy","onCloseDialog","onConfirmDrawDialog","getScaffoldSupports","clearSearch","parent","child","final_h","entries","showModel","drawing","addDrawing","closeDrawDialog","q","filteredResults","values","some","noteIds","showScffold","sm","InputGroup","InputGroupAddon","addonType","InputGroupText","cursor","noteContent","myViews","dialog_style","Dialog","default","pageXOffset","pageYOffset","onMouseDown","dragHandleClassName","Card","alignItems","onClose","marginLeft","onConfirm","buildon","onBuildOnClick","DrawDialog","onLoad","getIframeRef","wnd1","iframe_ref","contentWindow","bg","svgCanvas","current_drawing_","all_layers","wnd2","widd","getBBox","heig","svgElem_","selectAllInCurrentLayer","groupSelectedElements","alignSelectedElements","ungroupSelectedElement","clearSelection","setResolution","getSvgString","canvas","ctx","getContext","img","btoa","onload","drawImage","p","toDataURL","frame","setSvgString","MCEditor","apiKey","init","setup","editor","onEditorSetup","content_css","menubar","statusbar","media_live_embeds","plugins","external_plugins","toolbar","onEditorChange","AttachPanel","useSelector","useDispatch","useState","progress","setProgress","onFileSelect","fileList","files","Array","upload_promises","_URL","URL","webkitURL","addImageProcess","createObjectURL","naturalWidth","naturalHeight","createAttachment","resolve","reject","onerror","attachRes","uploadRes","filename","tmpFilename","newAttachment","inlineAttach","data_mce_src","serverUrl","onNewInlineAttach","progressEvent","percentCompleted","round","loaded","total","show","File","FileDrop","onFrameDragEnter","onFrameDragLeave","onFrameDrop","onDragOver","onDragLeave","onDrop","ProgressBar","now","AttachArea","atts","selectedImgs","setSelectedImgs","onNewAttachClick","getElementsByClassName","tagName","getAttribute","classList","cls_name","downloadUrl","onAttachDelete","WriteTab","onNewAttachmentClick","inline","attachId","deleteAttach","History","reduce","acc","read","edit","record","Properties","onPermissionChange","contribution","AuthorSelect","select_options","selectedOption","setSelectedOption","isClearable","onAuthorSelected","AuthorTab","communityAuthors","group_options","g","contribGroup","idx","removeAuthor","setKFPlugin","annotatorHandler","scaffoldElement","Annotator","Plugin","KFPlugin","pluginInit","annotator","subscribe","annotationCreated","annotationUpdated","annotationDeleted","displayEditor","viewer","annotations","displayViewer","editorHidden","annotatorInitialized","__hasProp","hasOwnProperty","RichText","_super","call","ctor","constructor","prototype","__super__","__extends","editorId","element","apply","arguments","tinymce","toolbar_items_size","extended_valid_elements","supported","addField","load","updateEditor","updateViewer","ed","mceditor","activeEditor","getContent","css","ReactDOM","unmountComponentAtNode","scaffoldSidebar","ui","registry","addSidebar","onSetup","sidebar","overflow","fontSize","render","onShow","field","count","editors","setContent","remove","textDiv","parentNode","permissions","update","admin","showEditPermissionsCheckbox","vm2m","isPublic","loc","ranges","start","end","configureStore","reducer","devTools","contentRef","createRef","fixPopupLocation","loadAnnotations","annotatedElem","current","scaffoldElem","annotPlugins","onDelete","containerId","annotsFetched","off","annots","highlights","onAnnotsLoaded","$element","attr","adder","observer","MutationObserver","mutationsList","takeRecords","observe","attributeOldValue","onCreate","onUpdate","invert","popup","dlgOffset","offset","ppOffset","top","left","selection","insertContent","contentTag","dom","setCursorLocation","RiseAboveView","riseAboveViewId","Note","selectedTab","onNoteChange","onTabSelected","onAnnotationCreated","onAnnotationDeleted","onAnnotationUpdated","snapshot","onDrawingInserted","addSupport","deleteAttachment","select","wordcount","getCount","labels","numwords","scaffoldWordCount","onDrawButton","onDrawToolOpen","tab","fetchRecords","fetchCommGroups","createAnnotation","noteAuthor","deleteAnnotation","model","modifyAnnotation","modified","Tabs","activeKey","transition","onSelect","Tab","eventKey","dlgId","timestamp","ann","anno_updated","att_link","currentAuthor","NoteDialog","dialog","reduxNote","setNote","setDrawTool","setSvg","setDrawing","useEffect","prevNote","onDialogConfirm","dialogId","wasActive","prev_text","buildOnNote","noteChanged","DialogHandler","onFocusDialog","useCallback","elt","WebSocketContext","createContext","socket","ws","syncUpdates","modelName","item","subscribeToView","emit","openConnection","sync","io","path","unsyncUpdates","removeAllListeners","disconnect","Provider","handleNewViewInput","goToDashboard","clearGraphViewProps","switchView","nextView","renderTooltip","Tooltip","handleNewViewSubmit","newView","match","params","context","fetchNewViewDifference","clearAuthors","addViewUrl","newViewId","viewsObj","linkObj","reload","viewToRender","GraphView","LightView","DropdownButton","drop","Dropdown","Item","OverlayTrigger","placement","delay","hide","overlay","Label","varient","contextType","ProtectedRoute","component","rest","loggedIn","App","exact","WebSocket"],"mappings":"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","file":"static/js/main.6dbb3a1a.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAC4jAAAuIwF4pT92AAAGaGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDYtMjFUMTE6Mjc6NDYtMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA5LTEyVDE2OjU4OjM1LTA1OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA5LTEyVDE2OjU4OjM1LTA1OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjEyZTJiMzk4LThjNzQtNDE1OS1iNTRiLTQxNjNhZGNiNmY4MyIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmM5Y2JkYzI3LTEwYmMtOWQ0Yy05MjFmLTg1MGRjOTBmZTAwNiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjk3YjYxMzJlLTM1ZGItNDE3OS04MDMyLTYxMWRkMWYwNzVhYSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTdiNjEzMmUtMzVkYi00MTc5LTgwMzItNjExZGQxZjA3NWFhIiBzdEV2dDp3aGVuPSIyMDE4LTA2LTIxVDExOjI3OjQ2LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMmUyYjM5OC04Yzc0LTQxNTktYjU0Yi00MTYzYWRjYjZmODMiIHN0RXZ0OndoZW49IjIwMTgtMDktMTJUMTY6NTg6MzUtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE4IChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pia9hzQAAAD6SURBVFiF7dY/SgNBGIbx366LghqCf25kG1MJXsMDeAjxGFqaFCnU0kN4B1MZsDEW7sJImDVCxkkxT/OywzfwzAffzFYn149j3OJYPua4anCP3YwiMMBdjSazSEdV4z23Rcuizm0QUmRiFJkYRSZGkYlRZGIUmRhFJkaRibFNMoPU/7/PeMFyjdqPlDJPOPvLhpQyszYrDNvsYyelzGGbQ7xiv6e2wl5KmTrI0zXqp/8xTUssfql5wGgbRnuCMfnvmSnOu4+cMhOMwoVcMj860lHrH7lNEd7AKx0JZT4TCYSHPAhEVjrS0eASNzjasMy8zRpvvt+pi74NXzMDHXjf0mfDAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAC4jAAAuIwF4pT92AAAKp2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDYtMjFUMTE6Mjc6NDYtMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA5LTEyVDE4OjA1OjUwLTA1OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA5LTEyVDE4OjA1OjUwLTA1OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmExYzgwOTQwLTIzMjYtNDc4NS05ZTA0LWE0MDJjMDdiNDI2ZCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjcyNzMyNjhjLTE1OTEtYzA0Mi1iM2IxLWM5NjVhNzE5MzRkOCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjcwMTg5MDJiLTU5YjctNDNkNy1iODc1LTk5YmUyNTM2MWJiNCIgdGlmZjpPcmllbnRhdGlvbj0iMSIgdGlmZjpYUmVzb2x1dGlvbj0iMzAwMDAwMC8xMDAwMCIgdGlmZjpZUmVzb2x1dGlvbj0iMzAwMDAwMC8xMDAwMCIgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIgZXhpZjpDb2xvclNwYWNlPSIxIiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMTg3MSIgZXhpZjpQaXhlbFlEaW1lbnNpb249IjE4NzEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjcwMTg5MDJiLTU5YjctNDNkNy1iODc1LTk5YmUyNTM2MWJiNCIgc3RFdnQ6d2hlbj0iMjAxOC0wNi0yMVQxMToyNzo0Ni0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjBiYzRiZGFkLTVkNTQtNDAzYS1iNGIwLWY0ZmViZTgyNzM0YSIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQxODowMDozMi0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmMxM2M1OWI3LWE1MmItNDdkZC1hMmUwLTE3M2E1MGY3OGEyNCIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQxODowNTo1MC0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmExYzgwOTQwLTIzMjYtNDc4NS05ZTA0LWE0MDJjMDdiNDI2ZCIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQxODowNTo1MC0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmMxM2M1OWI3LWE1MmItNDdkZC1hMmUwLTE3M2E1MGY3OGEyNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3MDE4OTAyYi01OWI3LTQzZDctYjg3NS05OWJlMjUzNjFiYjQiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3MDE4OTAyYi01OWI3LTQzZDctYjg3NS05OWJlMjUzNjFiYjQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7C07tpAAAA+0lEQVRYhe3WMUoDQRSH8d+ui4IaguKBBNuYSvAatt5CPIaWJkUaLT2BlXcwlQEbY+EujIRZI2ScFPM1f3Z4A988eDNbvVyfjnGLY/mY46rBPXYzisAAdzWazCIdVY333BYtizq3QUiRiVFkYhSZGEUmRpGJUWRiFJkYRSbGNskMUv//PuEZyzVqP1LKPOLsLxtSyszarDBss4+dlDKHbQ7xiv2e2gp7KWXqIE/WqJ/+xzQtsfil5gGjbRjtCcbkv2emOO8+cspMMAoXcsn86EhHrX/kNkV4A690JJT5TCQQHvIgEFnpSEeDS9zgaMMy8zZrvPl+py76NnwBLFcduiEp6KQAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAJ/mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDE4LTA5LTEyVDIxOjI1OjE0LTA1OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0wOS0xMlQyMTo1MjozNC0wNTowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wOS0xMlQyMTo1MjozNC0wNTowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxYWYyNTA0Yy1hMDg0LTQwZDAtOTBjYi00N2VjOTM3MDk5MGIiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0NmM4MjBiYi01NGUyLTYxNDgtODE0Ny04ZGI2N2MxYjlkYzQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZTRlNGRmMi0zYjYwLTQ0OWQtOWY1OS1hZDBlZjExMWNlMDMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQyMToyNToxNC0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBpbWFnZS9wbmcgdG8gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6M2E4ZGZjNmQtZmVkNC00MzI4LTgzMjgtMzRmY2M2YjIyMzExIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjM4OjQ1LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MjZlZDljYjYtOGJlZi00NDllLWI2NzQtNzZiYzAzNDIxYjY0IiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjUyOjM0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MWFmMjUwNGMtYTA4NC00MGQwLTkwY2ItNDdlYzkzNzA5OTBiIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjUyOjM0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjZlZDljYjYtOGJlZi00NDllLWI2NzQtNzZiYzAzNDIxYjY0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu/x7K8AAAkXSURBVFiFvVhpkFxVFf7OuW/r6WV6m+7ZiBIlBAOCLGICkigVBUeBKiuSgCguP4JQSgGJCEFERYkkJD9iWSWLUJRYgiAoUQqK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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAJ/mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDE4LTA5LTEyVDIxOjI1OjE0LTA1OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0wOS0xMlQyMTo0ODoyNC0wNTowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wOS0xMlQyMTo0ODoyNC0wNTowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowZmU3NjVjNi01NjhmLTRhY2UtYTVlMi1kMjJmMDA5NDBiNmMiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpiODQwOTQzYS1iNjliLTdhNDItODNiZS0zOTY2YWEwNmIxMDQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZTRlNGRmMi0zYjYwLTQ0OWQtOWY1OS1hZDBlZjExMWNlMDMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQyMToyNToxNC0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBpbWFnZS9wbmcgdG8gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6M2E4ZGZjNmQtZmVkNC00MzI4LTgzMjgtMzRmY2M2YjIyMzExIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjM4OjQ1LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTdmMzAzOWEtODMwNC00MDhlLWI2ZDQtNjRhNTczZGZlNTNiIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjQ4OjI0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MGZlNzY1YzYtNTY4Zi00YWNlLWE1ZTItZDIyZjAwOTQwYjZjIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjQ4OjI0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTdmMzAzOWEtODMwNC00MDhlLWI2ZDQtNjRhNTczZGZlNTNiIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PotzvqwAAAlFSURBVFiFxVhpkF1FFf7O6b7v3vu2mSSTbTKTmYTJPkkGCISlCFjBsIiouEAoUNSSkooiGFNlJQiFSyRKAqXID1ZTilJlEbFYRAxgFSUIgjFBskwWMhMyM1kmM2/ee/e9d+/tPv54bxLWOKx+f+6Pru77ne/rPud009prL8HEhIVDglDoTd9YCIAgQYKKMFyujkEIIRhZCi+YooJVaY7bC1Z3dhv/liPW3eApC2sFHgvKluCSwIBgBGACrACaBJFUx2IQ+kIGY4QgABaEwCookuaZeuiB+U7u8ToOzwyF6rIcnTLXyT002xn6YwJmWiAaBgQa6Q+AkZMJRCESRqsOvjdXD3ZO4NLlkRBKokAAysIIRWE8lz87R+V2TNXFG60QAlGQWjAfiAwBiIQRiMZoDhfPVrmXp6n8zx1Yryga9g2RV5UDiqLAALWp/M2zde7VBg4vKkOhIvw/Cb0jmWFLiqKhSRrbdOH++U5uYx2HJxVFI8K7L0wA4trcFEWz5zm5R6ar/IMO2dbCWwIYEZmSKITCmKyD6zucwc5GDq4atuS9oCwKoRDGc/nS+Xqwc6ouroyEUHyXdY6SOWaJwigOz56jcy/OUEPrXLKpt1oyUhxTWEHDOm0q/5O5enBLgwrPD2oBv3FNPua1hiZpOEEX7prv5P42isNTiqLfNuH9gABEYBRFo56jufP04J+n6/wDLtmmN1rHFWFURKFRla7pcAY6mzj4xvuxZKQY3gKNXLr8RGews1kFy0PLKAuDHRK/3RnaOF0N3emSHfV+LRkp3nQ4YP02lb91XmLwOY/saH2SV7hvsgoWH7HOiPPBh0UqAiMSxkQun36Sp35HnSvPllgI8jGReCcIgAQJ2IJiBfm/kREAGgIBCW+tpFZmOEYC9mMnJAAcCOo4Rmfor1HtCzqeY+ZojAoXe2QRgz/yvSOoJjifYhARdpjM6n+XUys5pYBum179r2jUtAPWe9QjAw/mI1NJALiw8MjgsPWe2hTVz98dp1clFUEtX9TyoxQb3WP8lw5a7/cV8K4Um4UZirMW9KEdcwGgIEiSRRm6f49JX7crzlx3xDoHWnXprLEqXKpWnzPh6SzCKz2yySGrNx6w/iuD4vxSQNl6jk5L1Kz7oPDJgAnosf7d2+Psp/Yb/3mHLKY5xZtOUIX141R4rrr0jOlLxqtKc5aiM0er6HIAXUfE3XbQuk8URT/lkW3PcjyJqFqN34tKAiBRsyQn7uadJvOVPXH69pJwpUmVzp3pDG2YxOXLNAnKwlDtJ3c8Pd6JvuCTzbpkxjSoytIMm1llUX/vs97WfnHvicEDKYoXpSlOmBFYV92ggiQZROB4r02v6ozTVxy23u4MRfUzdP7ONl1clyYzAQBiUoObKtml6qyF7YMF8m5jwtgkmVMdABmK2hs4XJYgKeas848+47+QE+duJjTWczTPITmudR4ZOCQ4YP0N20z2wn0m+RhBMEUVr56p84+O5crpBMCAsN8k799pskt648QW9eUzp41m5tLrxn+8KPqvCbJzPLJNDokew+H59RxdaEA7+8Xd2me8DWXRL/lsTsxSNFZAR/vc4eSVJIu81Xt3mszVe+LMTUVRufFcOWWmLjzYooJlCbIeQBgQZ/Muk75yl0nfRoTQRTxa3Xx2Y+8oDi8oi/pLj/W29Vv3XkM0mCSzyCFxkhRPGqsqVyUpbgxEPdNnvVeP2MSvhAgZis9xqZosXbIQIuwz/s92mOxFh627NUuRatPFdW2qcG+WoxYAKIs2XTZ1w444e8Uh4+2p56h+hs4/NFmV1tLulYtEwaIkutxt/FXdJrWuBIUGLo+fzMHtE1T5Ml3LOgXR/XtNasV+499fFsZEVZneqoNVKcTTS1B79xn/lp7Y35wgg8m6fOlEDtZmKJ5EqF5VDlrvT/tM8ju9xu3yyaJJBd9sUcEtScR1lhj05Irz72lP5L9etAoOCQ7bxD+7TWp5j/WeZQiaVOmiZg7W1HM0myCwIPRbd+Nuk1xeEGdLli1G6xgDRmPQKGQRtbXo4tqxHF7MEBAEg5J47XWTXLHf+g+FljBOlRdMVcW1DRwuMkJIssGOKLVBzV3Q8VhGy5w6jmbH1YFJ41Xlqz6ZiSVRT/UZf+uAuHfGIEmT+YQmiyTFUxs4vCbFpllDKkTk+4jnjqPyiim6uL6eo5kEQSSMLptasyPOfLrPutvSZKhNF9bN0Pn70mRajBA0CXqt/8SL5exSuuXbn0eDCzSp8pcmcXBbiuLGWAgOWRRFH+oyqeX7jP+bSBgNXGmboot3jOPKeQTACCGubWIFgYat9rEADtvEs10m9a0+621xYNGoSl9sVcHaDMXNsRAUCQJRR/bb5Hf3G3/9wQpBXXjaLNRri0CcVw9Z7y4B0lmOFwKAJqTGceVzGY5PN+CX+6zX2W/d34ZQe5NkznDJpEztiBMAhwQlUUN7TPr6XSa7rCD6QANXWqfrwn1TVPFGh2ydAAAReq1/zx6T+UxOnOddsigZQC1ZOAsZLfDJIgKFh637RF6cJxOws5Jkmo0QMhy3jVOVZS6syovzTK94mwescwcBDRkyC3StzveJt74zzlzQY/1nU2zQqorfn6YKD9dxNNsKQREwaBObdpv0FT0m+QtFKHlkISDkDYHWXnsJJrq2egGXaoQVUbAAJqjytZM5WO2SSZmadQOS2LHPpFZ0x94jDgEtOmgaw9H8AXG2d8f+7kgIk1Rp8WQV3JqlqMPULCmLinqt/4P9xl9jAaTIYFhSI4SeCkOdV1NGU/XKMiw3iJCziRcGJPFrARoyHHdYAB7ZhnFcXpokM0sRtlSgXytyYmdJeMCjuKVVFW+fqovrXDITRAhEwAHr/WG3yVx82LqPJcgiQfZYOSEcXxmg2sErCCpgVIQxlitLmlVwax1Fc40QuPZMEoh+OSbVr2HrfcSnemQwfEry4uzqNskV/dZ9WJOFCwuL4XYCb1NGH6fe1dpCC0WCAes+mRNn3kQu39DEwQ8VhLhax04mREcDqJYGQpdJ/rTX+jeEwtaj+GjJOB5G3KgkyYAh6DbJH79i6mcesN4jCbJQBFRqDwEuWRyy7sZX4rqOLpNayRCbJDPitmPEZIY7tTTFqAh3bouzF2+Ps5cVRG9KkOQK0P/ZbjJf2x5nP1kUtTlFMd7rreO/jQ6xxai3LRoAAAAASUVORK5CYII=\"","module.exports = \"data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAArCAYAAADyijE0AAAACXBIWXMAAC4jAAAuIwF4pT92AAAKp2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDYtMjFUMTE6Mjc6NDYtMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTExLTE4VDE1OjQyOjQ3LTA2OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTExLTE4VDE1OjQyOjQ3LTA2OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmJjZmIyYjEwLWEzZmEtNDEzNC04MTRlLWFkOTk1MzY0YWI2MSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjE4MzhiYWEzLTQ0OTEtODU0MC1hZDBkLTZlNDYxYjg1Y2FmNyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmMyZmRkYmUwLTkxNTktNDUzZi1hNTc0LTQyYWJlMjJmM2ViOCIgdGlmZjpPcmllbnRhdGlvbj0iMSIgdGlmZjpYUmVzb2x1dGlvbj0iMzAwMDAwMC8xMDAwMCIgdGlmZjpZUmVzb2x1dGlvbj0iMzAwMDAwMC8xMDAwMCIgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIgZXhpZjpDb2xvclNwYWNlPSIxIiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMTg3MSIgZXhpZjpQaXhlbFlEaW1lbnNpb249IjE4NzEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmMyZmRkYmUwLTkxNTktNDUzZi1hNTc0LTQyYWJlMjJmM2ViOCIgc3RFdnQ6d2hlbj0iMjAxOC0wNi0yMVQxMToyNzo0Ni0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjRjNTVlYzUyLTNhMmItNDU4NC04ZWJmLThhNWQ5ODFmNGNhYiIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xOFQxNTozOTozOC0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQzZjE3NmNiLWFhMGYtNDZkYS1iZTk1LTczZjUyNTI2MGZkOCIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xOFQxNTo0Mjo0Ny0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmJjZmIyYjEwLWEzZmEtNDEzNC04MTRlLWFkOTk1MzY0YWI2MSIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xOFQxNTo0Mjo0Ny0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQzZjE3NmNiLWFhMGYtNDZkYS1iZTk1LTczZjUyNTI2MGZkOCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpjMmZkZGJlMC05MTU5LTQ1M2YtYTU3NC00MmFiZTIyZjNlYjgiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjMmZkZGJlMC05MTU5LTQ1M2YtYTU3NC00MmFiZTIyZjNlYjgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7y32vAAAADuklEQVRYhe2YTWhjVRTHf/e+jzRtMglaW1tSptC0tpShC0EQKqUutG6qojgrF8Iwiu4GcSEuFXfqTgYd7FpBMLNxNkJFunDRLrIouugH/bax9pm2JO+93DuL5MUmmYQOzWu78L+5eSfn8n7v3nPOe/cIrTUAs7Oz1EkAt4BpQAIOcA/4vd4xUCaTafbXmWQ2sSeBB8BzdfbbwCfAZ+e662PAJIA/gaeAPeCryvgC8A7wKdAPfNBuGPkI290KyDzwLHAIjALfAS9XfN4HXgobpge4Wfn9IfAD8DXwEfArkALuACil3jVNk46ODrTWKKXaB1MoFJBSjmqtkVJmDMN4TWv9PDCvtb5VcfsmmBOJRJ45OjpiZWUF0zTp6upqH8zAwAD5fF7bto3jOEe7u7v9AK7rfuF53j2lVEZKKT3Pu1YoFDAMw8hms2xtbWHbNqVS6dwwYm5u7gngY63106urq/2Li4vTsVhs3TAMXSqVBoeGhuaHh4dXFhYWXtzY2Lg+MjKS3dzcvBGNRv+dmpr6CZCWZbnn5PgH+NwEXgfei0ajXd3d3eRyOfr6+q7PzMzgOA5CiKlEIjFlWRa5XI7p6ekbk5OT5PP5a7Ztv62Uake8nAB/mMC3AL7vo5RCCAGAYRhEIhG01ggh0FoTFEjLsrBtu8Z2TnUCd03ABWwhBL7vA6C1xvM8fN9Ha12NByEESil836/6tlGuBIrBValUqt78dEC6rovrukhZjnfP89oNAlCsZpPneViWhRACKWV1VQCKxSK2bSOlrFmpdqum6AUxUB8HpmkihKiuSAhb1AjTSgFgEOBXAiZMnRnmInS1YZRSmKaJZVn/OUmJZVkopULdroZsqrwoOT4+rtpd18VxHGzbDg2kASYej9Pb28vh4SHr6+tV+87ODnt7eySTSTo7O0PLqJrPzkgkQjqdJpvNsrS0xNraGkII9vf3UUoxMTFBMpkMbasavoHHxsYQQrC8vMzBwQFQjpl0Os34+DjRaJSTk5OLgQEYHR0lFouxvb0NQE9PD4ODg0A5fsJSs6MKqVSKVCrVYA/rVQBXvc5cpv6HaaarBBNvmk1t0s/Ab8BZqmQxTJgHwCuPMyFMmF8qowSepNzvaSUZJky8MiaAFcpno2YSgAgTRpwaY2fw//4isklTPr620o/AzauQ2hngDbj8OpMBXg0uLhOmBgQuD+Z+PQiUYVqlXLt0ugLfBxqazgHM+TuDj9bphwwafk1BoFyB3wS+pNyIbqf+rowS+ItyK/etVhMeAuZkZDAeOcH2AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAGAGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDktMTJUMjI6MDk6NDctMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA5LTEyVDIyOjIxOjM5LTA1OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA5LTEyVDIyOjIxOjM5LTA1OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjYxYmMzYjk1LWE4ZDItNDFjZC1iMTFhLTFjMzY3NWYxY2IyZiIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmUxMGM5NWJkLWI1NmEtNzI0Zi1hMzJlLTJjZTk1NDRmMDljNCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjhhZDQ5Y2Q5LWMyZGEtNGMxYi1iMmJhLTBiZDZiMjJmZmM5MyI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OGFkNDljZDktYzJkYS00YzFiLWIyYmEtMGJkNmIyMmZmYzkzIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIyOjA5OjQ3LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NjFiYzNiOTUtYThkMi00MWNkLWIxMWEtMWMzNjc1ZjFjYjJmIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIyOjIxOjM5LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6mqJQFAAADHklEQVRYhc2YTWhcVRSAv3Pfve/NNKbtdNKg0bQlFUOxakyVlnZR6EbQVTciFMSli26qBTei0B/cZO1OsHTjTkRcuZAKarASNG1J29CKEap2TJqQSTLv597r4iWDSnWmneFNDjzeD+ee93Huuefcc8V7z2YRKR85QbT/2Nuq8vgoNhY8RdIJJvJu6e7t5MqXE9qMHDird4+96xvL4KMCOZo4mOGn8Y3lIam+d8mLUvgsKR5kQwIDgALf8GncOxCALAFn1xTOpoj0FkYEvMtUbyn+Kbr5JAKioMilnnuk+U/d/GhTkAB0mCsUAWIzcFkewN6vwwSGiVf2Xnnj4K5nUmtrUEQMeUwQ7Pzkh1+nTn4xN04Wr8PYjKHtfXUAEwQ7CyBpyhPV/jo2BaAZwGmWhUVCbEiSZs1Mu6lWU9dgZq99ytLibx3Z6BrM4t3P+Xnmo45sdA1Gm3727fqO6W/eZKW+0FuYJDX8uZAwsPU2tZuvMjP92QPb0K0Urk5dRPvrxMm/M3P+LgJZllBWP1FfcaSZpxwpquUP+fHbSZ49dA6lgu7AlN3HlMKAsvrvrCwlYXXNkWUeJdCIHXGS8FhlitnLx4mq77DnySOdw6wlIWka41zrmrVR/DfutfmYvj5LOTnD5UvjvHj0g/8d3zpmfGelwTlPEICw2lK3pWe2lGKiUN/fMwLOepyHOHZY6/NCvK46sCOkvgL33Fu8cPSlzmEW0+Po+AaNv20GZX0enPOEYYCQoNwMoRGs9YShsH2r4c7CPkafP0up3N8SpC2Y8UMn2zI0+dUpqpWreJ975vfV13nu8Im2xrYN065EJp+W2V8GGBo9x3B1+IFtdA0mS+aZmRtj7PD5h7bRNZhtgy9TGTzQkY2uwTy1/7WObWzO/YzWOu0FgDG62cpqlNIozfzyagmqWOfuFQUSKFWpLa2UCAzYNJDq+1/nabNRx4sgOiqmdxLJ21rvINqCiBCEI+M7gsGRg3iHMmHeyKkCLlGINqA0UnqEbG76gk5vfX9a9VVqatuju12jIVDc+YwHxETYP27dSW5OTshmOrn6C2gfIpLerWS0AAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/sample_view.e92880b7.gif\";","import axios from 'axios';\r\n\r\n// export const url = 'https://kf6.ikit.org';\r\n// export const url = 'https://kf6-stage.ikit.org';\r\nexport let url = localStorage.getItem(\"server\");\r\nexport let apiUrl = `${url}/api`;\r\n\r\nexport function setServer(server) {\r\n    //SET SERVER ON SESSION STORAGE\r\n    if (server.endsWith(\"/\")){\r\n        server = server.substring(0, server.length -1);\r\n    }\r\n    localStorage.setItem(\"server\", server);\r\n    url = server;\r\n    apiUrl = `${url}/api`;\r\n    return url;\r\n}\r\n\r\nexport function setToken(token) {\r\n    axios.defaults.headers.common['Authorization'] =\r\n        `Bearer ${token}`;\r\n}\r\n\r\nexport const removeToken = () => {\r\n    delete axios.defaults.headers.common.Authorization\r\n}\r\n\r\n\r\nconst token = sessionStorage.getItem('token');\r\nif (token) {\r\n    setToken(token)\r\n}\r\n\r\n//USER\r\nexport const getUser = async () => {\r\n    return (await axios.get(`${apiUrl}/users/me`)).data\r\n}\r\n\r\n//Contribution\r\nexport const postContribution = (communityId, obj) => {\r\n    return axios.post(`${apiUrl}/contributions/${communityId}`, obj);//, {mode: 'cors'});\r\n}\r\n\r\n//Community\r\nexport const getCommunity = (communityId) => {\r\n    return axios.get(`${apiUrl}/communities/${communityId}`);//, {mode: 'cors'});\r\n}\r\n\r\nexport const putCommunity = async (object, communityId) => {\r\n    return (await axios.put(`${apiUrl}/communities/${communityId}`, object)).data\r\n}\r\n\r\nexport const getCommunities = async () => {\r\n    return (await axios.get(`${apiUrl}/communities/`)).data\r\n}\r\n\r\nexport const getUserCommunities = async () => {\r\n    return (await axios.get(`${apiUrl}/users/myRegistrations`)).data\r\n}\r\n\r\nexport const getGroups = async (communityId) => {\r\n    return (await axios.get(`${apiUrl}/communities/${communityId}/groups`)).data\r\n}\r\n\r\nexport const getCommunityViews = async (communityId) => {\r\n    return (await axios.get(`${apiUrl}/communities/${communityId}/views`)).data\r\n}\r\n\r\n//Links\r\nexport const getLinks = async (objectId, direction, type) => {\r\n    let links = await axios.get(`${apiUrl}/links/${direction}/${objectId}`);\r\n    links = links.data;\r\n    if (type) {\r\n        links = links.filter(function (each) {\r\n            return each.type === type;\r\n        });\r\n    }\r\n    return links\r\n}\r\n\r\nexport const putLink = async (linkId, link) => {\r\n    return (await axios.put(`${apiUrl}/links/${linkId}`, link)).data\r\n}\r\nexport const postLink = async (fromId, toId, type, data) => {\r\n    return (await axios.post(`${apiUrl}/links`, { from: fromId, to: toId, type: type, data: data })).data\r\n}\r\n\r\nexport const deleteLink = async (linkId) => {\r\n    return (await axios.delete(`${apiUrl}/links/${linkId}`)).data\r\n}\r\n\r\nexport const linksSearch = async (communityId, query) => {\r\n    return (await axios.post(`${apiUrl}/links/${communityId}/search`, { \"query\": query })).data\r\n}\r\n\r\n//Object\r\nexport const getObject = async (objectId) => {\r\n    return (await axios.get(`${apiUrl}/objects/${objectId}`)).data\r\n}\r\n\r\nexport const putObject = async (object, communityId, objectId) => {\r\n    return (await axios.put(`${apiUrl}/objects/${communityId}/${objectId}`, object)).data\r\n}\r\n\r\n//Record\r\nexport const read = (communityId, objectId) => {\r\n    return axios.post(`${apiUrl}/records/read/${communityId}/${objectId}`)\r\n}\r\n\r\nexport const postAttachment = (communityId, authorId) => {\r\n    var newobj = {\r\n        communityId: communityId,\r\n        type: 'Attachment',\r\n        title: 'an Attachment',\r\n        authors: [authorId],\r\n        status: 'unsaved',\r\n        permission: 'protected',\r\n        data: {\r\n            version: 0\r\n        }\r\n    };\r\n    return axios.post(`${apiUrl}/contributions/${communityId}`, newobj)\r\n}\r\n\r\nexport const postContribObject = async (communityId, obj) => {\r\n    return (await axios.post(`${apiUrl}/contributions/${communityId}`, obj)).data\r\n}\r\n\r\n//Author\r\nexport const getAuthor = (communityId) => {\r\n    return axios.get(`${apiUrl}/authors/${communityId}/me`)\r\n}\r\nexport const getCommunityAuthors = async (communityId) => {\r\n    return (await axios.get(`${apiUrl}/communities/${communityId}/authors`)).data\r\n}\r\n\r\n//Records\r\nexport const getRecords = async (contribId) => {\r\n    return (await axios.get(`${apiUrl}/records/object/${contribId}`)).data\r\n}\r\n\r\nexport const uploadFile = (file, onProgress) => {\r\n    var formData = new FormData();\r\n    formData.append(\"file\", file);\r\n    return axios.post(`${apiUrl}/upload`, formData, {\r\n        headers: {\r\n            'Content-Type': 'multipart/form-data',\r\n            // ...config.headers\r\n        },\r\n        onUploadProgress: onProgress,\r\n    })\r\n}\r\n\r\nexport const getLinkForObj = (objId) => {\r\n    return axios.get(`${apiUrl}/links/either/${objId}`)\r\n}\r\n\r\nexport const getViews = async (communityId) => {\r\n    return (await axios.get(`${apiUrl}/communities/${communityId}/views`)).data\r\n}\r\n\r\nexport const postView = (query,communityId) => {\r\n    return axios.post(`${apiUrl}/contributions/${communityId}`,query);\r\n}\r\n\r\n// returns a promise that on fullfillment returns an array of the read note ids only\r\nexport function getApiLinksReadStatus(communityId, viewId){\r\n    return axios.get(`${apiUrl}/records/myreadstatusview/${communityId}/${viewId}`).then(function(result) {\r\n        const body = result.data\r\n        var results = [];\r\n        for(var i in body){\r\n            if(body[i].type === \"read\"){ results.push(body[i].to); }\r\n        }\r\n        return (results);\r\n    }).catch(function(error) {\r\n        return (\"Error:\", error);\r\n    });\r\n}\r\n\r\n// used to mark notes as read according to the given parameters\r\nexport function postReadStatus(communityId, contributionId){\r\n    return axios.post(`${apiUrl}/records/read/${communityId}/${contributionId}`).then(function(body) {\r\n        return body\r\n    }).catch(function(error) {\r\n        return (\"Error:\", error);\r\n    });\r\n}\r\n","import { createAction, createReducer } from '@reduxjs/toolkit';\r\nimport * as api from './api.js'\r\n\r\nexport const addUser = createAction('ADD_USER')\r\nexport const addAuthors = createAction('ADD_AUTHORS')\r\nexport const resetAuthors = createAction('SET_AUTHORS')\r\nconst initState = {}\r\nexport const userReducer = createReducer(initState, {\r\n    [addUser]: (state, action) => {\r\n        state[action.payload._id] = action.payload\r\n    },\r\n    [addAuthors]: (state, action) => {\r\n        action.payload.forEach((author) => state[author._id] = author )\r\n    },\r\n    [resetAuthors]: (state, action) => {\r\n        return {}\r\n    }\r\n})\r\n\r\nexport const fetchAuthors = (communityId) => async (dispatch) => {\r\n    const authors = await api.getCommunityAuthors(communityId)\r\n    dispatch(addAuthors(authors))\r\n}\r\n\r\nexport const clearAuthors = () => (dispatch) => {\r\n    dispatch(resetAuthors([]))\r\n}\r\n","import { createAction, createReducer } from '@reduxjs/toolkit';\r\nimport * as api from './api.js'\r\n\r\nexport const requestScaffold = createAction('REQUEST_SCAFFOLD')\r\nexport const receiveScaffold= createAction('RECEIVE_SCAFFOLD')\r\n\r\nconst initState = {isFetching: false,\r\n                   items: [],\r\n                   fetched: false,\r\n                  }\r\n\r\nexport const scaffoldReducer = createReducer(initState, {\r\n    [receiveScaffold]: (state, action) => {\r\n        state.items = action.payload\r\n        state.isFetching = false\r\n        state.fetched = true\r\n    },\r\n    [requestScaffold]: (state, action) => {\r\n        state.isFetching = true\r\n    }\r\n});\r\n\r\nexport const fetchScaffolds = (communityId, contextId) => {\r\n    return dispatch => {\r\n        dispatch(requestScaffold)\r\n\r\n        let scaffold_promise = api.getCommunity(communityId).then( res => {\r\n            return Promise.all(res.data.scaffolds.map((scaffoldId) => {\r\n                return api.getObject(scaffoldId);\r\n            }));\r\n        });\r\n\r\n        return Promise.all([scaffold_promise, api.getLinks(contextId, 'from', 'uses')]).then(async res =>{\r\n            let links = res[1].map((link) => link.to);\r\n            let scaffolds = res[0].filter((el) => links.includes(el._id));\r\n            /* const scaffolds = this.state.scaffolds; */\r\n            let supports = await Promise.all(scaffolds.map((el) => api.getLinks(el._id, 'from')));\r\n            scaffolds = scaffolds.map((scaffold, i) => {\r\n                scaffold.supports = supports[i];\r\n                return scaffold;\r\n            })\r\n\r\n            dispatch(receiveScaffold(scaffolds))\r\n        });\r\n    }\r\n}\r\n","import { createAction, createReducer } from '@reduxjs/toolkit';\r\n\r\nexport const openDialog = createAction('OPEN_DIALOG');\r\nexport const closeDialog = createAction('CLOSE_DIALOG');\r\nexport const focusDialog = createAction('FOCUS_DIALOG')\r\nexport const openAttachPanel = createAction('OPEN_ATTACH_PANEL')\r\nexport const closeAttachPanel = createAction('CLOSE_ATTACH_PANEL')\r\n\r\nlet dialogCounter= 0\r\nconst defaultZIndex = 999\r\nconst focusedZindex = 1000\r\n//Dialog content\r\n// dialog = {id, noteId, title, content, confirmButton, zIndex}\r\nconst initState = { dialogs: [], drawTool: null, focused: null, attachPanel: {}};\r\nexport const dialogReducer = createReducer(initState, {\r\n    // actionCreator.toString() will automatically be called here\r\n    [openDialog] : (state, action) => {\r\n        //Unfocus previous focused dialog\r\n        const dlgs = state.dialogs.map(dlg => {\r\n            if (dlg.id === state.focused)\r\n                dlg.zIndex = defaultZIndex\r\n            return dlg\r\n        })\r\n        //Add new dialog\r\n        state.focused = dialogCounter\r\n        state.dialogs = [...dlgs, {id: dialogCounter++, zIndex: focusedZindex, ...action.payload}]\r\n        //Update index of focused\r\n        // state.dialogs.push({id: dialogCounter++, ...action.payload});\r\n    },\r\n\r\n    // Or, you can reference the .type field:\r\n    [closeDialog] : (state, action) => {\r\n        state.dialogs = state.dialogs.filter((dlg) => dlg.id !== action.payload)\r\n    },\r\n\r\n    [openAttachPanel]: (state, action) => {\r\n        state.attachPanel = action.payload;\r\n    },\r\n\r\n    [closeAttachPanel]: (state, action) => {\r\n        state.attachPanel = {};\r\n    },\r\n\r\n    [focusDialog]: (state, action) => {\r\n        if (state.focused !== action.payload) {\r\n            state.dialogs = state.dialogs.map( dlg => {\r\n                if (dlg.id === state.focused)\r\n                    dlg.zIndex = defaultZIndex\r\n                else if (dlg.id === action.payload)\r\n                    dlg.zIndex = focusedZindex\r\n                return dlg\r\n            })\r\n            state.focused = action.payload\r\n        }\r\n    }\r\n});\r\n\r\n","import $ from 'jquery'\r\nimport {postLink, deleteLink} from './api.js'\r\n\r\n//Count words inside scaffold labels\r\nexport const scaffoldWordCount = (text) => {\r\n    const doc = '<div>' + text + '</div>';\r\n    const jq = $(doc); //convert to jquery dom element\r\n    let labels = jq.find('.kfSupportStartLabel')\r\n    let numwords = 0;\r\n    for (let i = 0; i< labels.length; i++){\r\n        numwords += labels[i].innerHTML.split(' ').length\r\n    }\r\n    return numwords\r\n}\r\n\r\nconst createScaffoldStartTag = (title, isTemplate) => {\r\n    let tag = '';\r\n    tag = tag + ' '; //important for mce\r\n    if (!isTemplate) {\r\n        tag = tag + '<span class=\"kfSupportStartMark\"> &nbsp; </span>';\r\n    } else {\r\n        tag = tag + '<span class=\"kfSupportStartMark kfTemplateStartMark\"> &nbsp; </span>';\r\n    }\r\n    tag = tag + ' '; //important for mce\r\n    if (!isTemplate) {\r\n        tag = tag + '<span class=\"kfSupportStartLabel\">' + title + '</span>';\r\n    } else {\r\n        tag = tag + '<span class=\"kfSupportStartLabel kfTemplateStartLabel\">' + title + '</span>';\r\n    }\r\n    tag = tag + ' '; //important for mce\r\n    return tag;\r\n};\r\n\r\nconst createScaffoldEndTag = (isTemplate) => {\r\n    let tag = '';\r\n    tag = tag + ' '; //important for mce\r\n    if (!isTemplate) {\r\n        tag = tag + '<span class=\"kfSupportEndMark\"> &nbsp; </span>';\r\n    } else {\r\n        tag = tag + '<span class=\"kfSupportEndMark kfTemplateEndMark\"> &nbsp; </span>';\r\n    }\r\n    tag = tag + ' '; //important for mce\r\n    return tag;\r\n};\r\n\r\nconst createReferenceTag = (contId, title, authors, text) => {\r\n    const authorText = '(missing authors)'//TODO $community.makeAuthorStringByIds(authors);\r\n    let tag = '';\r\n    if (text && text.length > 0) {\r\n        tag = tag + '<span class=\"KFReferenceQuote\"><span>\"</span><span class=\"KFReferenceText\">' + text + '</span><span>\"</span></span>';\r\n    }\r\n    tag = tag + '<span> (<a href=\"contribution/' + contId + '\" target=\"' + contId + '\">';\r\n    tag = tag + '<img src=\"/manual_assets/kf4images/icon-note-unread-othr-.gif\">\"' + title + '\"</a>';\r\n    tag = tag + '<span class=\"KFReferenceAuthor\"> by ' + authorText + '</span>)</span>';\r\n    tag = tag + '</span>';\r\n    return tag;\r\n};\r\n\r\nexport const preProcess = (body, toConnections, fromConnections) => {\r\n    const doc = '<div>' + body + '</div>';\r\n    const jq = $(doc);\r\n\r\n    const supportStart = jq.find('.KFSupportStart')\r\n    supportStart.addClass('mceNonEditable');\r\n    for (let i = 0; i < supportStart.length; i++) {\r\n        const elem = supportStart[i]\r\n        if (!elem.id.startsWith('supportid_')) {\r\n            const isTemplate = $(elem).hasClass('KFTemplateStart');\r\n            const ref = toConnections.filter((conn) => conn._id === elem.id)\r\n            if (ref.length) {\r\n                elem.innerHTML =createScaffoldStartTag(ref[0]._from.title, isTemplate);\r\n            } else {\r\n                if(toConnections !== 'Annotation'){\r\n                    elem.innerHTML = createScaffoldStartTag('(missing link)', isTemplate);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    const supportEnd = jq.find('.KFSupportEnd')\r\n    supportEnd.addClass('mceNonEditable');\r\n    for (let i = 0; i < supportEnd.length; i++) {\r\n        const elem = supportEnd[i]\r\n        const isTemplate = $(elem).hasClass('KFTemplateEnd');\r\n        elem.innerHTML = createScaffoldEndTag(isTemplate);\r\n    }\r\n\r\n    const references = jq.find('.KFReference')\r\n    references.addClass('mceNonEditable');\r\n    for (let i = 0; i < references.length; i++) {\r\n        const elem = supportEnd[i]\r\n        let ref = fromConnections.filter((conn) => conn._id === elem.id)\r\n        if (ref.length) {\r\n            ref = ref[0]\r\n            let text = '';\r\n            if (ref.data) {\r\n                text = ref.data.text;\r\n            }\r\n            elem.innerHTML = createReferenceTag(ref.to, ref._to.title, ref._to.authors, text);\r\n        } else {\r\n            elem.innerHTML = createReferenceTag('', '(missing link)', '', '');\r\n        }\r\n    }\r\n    return jq.html();\r\n};\r\n\r\nexport const postProcess = async (text, contributionId, toConnections, fromConnections, handler) => {\r\n    const doc = '<div>' + text + '</div>';\r\n    const jq = $(doc); //convert to jquery dom element\r\n    const endtags = {};\r\n    const supportLinksIds = toConnections.filter((each) => each.type === 'supports')\r\n          .map((each) => each._id) //get only toConnections of type = supports\r\n    let supportStarts = jq.find('.KFSupportStart')\r\n    const supportEnds = jq.find('.KFSupportEnd')\r\n    const toCreate = []\r\n    const supportStartsIds = []\r\n\r\n    for (let i = 0; i < supportEnds.length; i++) {\r\n        const elem = supportEnds[i]\r\n        elem.innerHTML = '';\r\n        var id = elem.id;\r\n        endtags[id] = elem;\r\n    }\r\n    for (let i = 0; i < supportStarts.length; i++) {\r\n        const elem = supportStarts[i]\r\n        let supportId = elem.id;\r\n        elem.innerHTML = '';\r\n        if (supportId.startsWith('supportid_')) {\r\n            supportId = supportId.split('_')[1];\r\n        }\r\n        supportStartsIds.push(supportId)\r\n        if (!supportLinksIds.includes(supportId)) {//Is a new supportLink\r\n            //promise to create link\r\n            toCreate.push(postLink(supportId, contributionId, 'supports').then((link) => {\r\n                //Replace id with id of new created link\r\n                const oldId = elem.id;\r\n                const newId = link._id;\r\n                elem.id = newId;\r\n                if (endtags[oldId]) {\r\n                    endtags[oldId].id = newId;\r\n                }\r\n            }))\r\n        }\r\n    }\r\n    const toDeleteSupports = supportLinksIds.filter((each) => !supportStartsIds.includes(each))\r\n          .map((each) => deleteLink(each)) //Select toConnections that no longer appear in the tinymce text\r\n\r\n\r\n    const referenceLinksIds = fromConnections.filter((each) => each.type === 'references').map((each) => each._id) //get only ids of fromConnections of type=references\r\n    const kfReferences = jq.find('.KFReferenceText') //Get references dom elements\r\n    const kfreferenceIds = []\r\n\r\n    for (var i = 0; i < kfReferences.length; i++) {\r\n        const elem = kfReferences[i]\r\n        const data = {text:$(elem).find('.KFReferenceText').html()}\r\n        elem.innerHTML = '';\r\n        const referenceId = elem.id;\r\n        kfreferenceIds.push(referenceId)\r\n        if (!referenceLinksIds.includes(referenceId)) {//Is a new supportLink\r\n            //promise to create link\r\n            toCreate.push(postLink(contributionId, referenceId, 'references', data).then((link) => {\r\n                //Replace id with id of new created link\r\n                const oldId = elem.id;\r\n                const newId = link._id;\r\n                elem.id = newId;\r\n                if (endtags[oldId]) {\r\n                    endtags[oldId].id = newId;\r\n                }\r\n            }))\r\n        }\r\n    }\r\n\r\n    const toDeleteReferences = referenceLinksIds.filter((each) => !kfreferenceIds.includes(each)).map((each) => deleteLink(each)) //Select fromConnections that no longer appear in the tinymce text\r\n\r\n    await Promise.all(toDeleteSupports)\r\n    await Promise.all(toDeleteReferences)\r\n    await Promise.all(toCreate)\r\n    return jq\r\n}\r\n\r\n","import { store } from 'react-notifications-component';\r\n\r\nconst notifConfig = {\r\n    type: \"success\",\r\n    insert: \"top\",\r\n    container: \"top-right\",\r\n    animationIn: [\"animated\", \"fadeIn\"],\r\n    animationOut: [\"animated\", \"fadeOut\"],\r\n    dismiss: {\r\n        duration: 5000,\r\n        // onScreen: true\r\n    },\r\n}\r\nexport const addNotification = ( notif ) => {\r\n    return store.addNotification({...notifConfig, ...notif});\r\n}\r\n\r\nexport const removeNotification = (notifId) => {\r\n    store.removeNotification(notifId)\r\n}\r\n","import { createAction, createReducer } from '@reduxjs/toolkit';\r\nimport { openDialog, closeDialog } from './dialogReducer.js'\r\nimport { preProcess, postProcess } from './kftag.service.js'\r\nimport * as api from './api.js'\r\nimport { addNotification } from './notifier.js'\r\nimport { dateFormatOptions } from './globalsReducer.js'\r\n\r\nexport const addNote = createAction('ADD_NOTE')\r\nexport const removeNote = createAction('REMOVE_NOTE')\r\nexport const editNote = createAction('EDIT_NOTE')\r\nexport const addAttachment = createAction('ADD_ATTACHMENT')\r\nexport const removeAttachment = createAction('REMOVE_ATTACHMENT')\r\nexport const setAttachments = createAction('SET_ATTACHMENTS')\r\nexport const setWordCount = createAction('SET_WORDCOUNT')\r\nexport const setLinks = createAction('SET_CONNECTIONS')\r\nexport const setRecords = createAction('SET_RECORDS')\r\nexport const removeContribAuthor = createAction('REMOVE_CONTRIB_AUTHOR')\r\nexport const addContribAuthor = createAction('ADD_CONTRIB_AUTHOR')\r\nexport const setAnnotation = createAction('SET_ANNOTATION')\r\nexport const setAnnotationsLoaded = createAction('SET_ANNOTATIONS_LOADED')\r\nexport const removeAnnotation = createAction('REMOVE_ANNOTATION')\r\nexport const setViewNotes = createAction('SET_VIEW_NOTES')\r\nexport const addViewNote = createAction('ADD_VIEW_NOTE')\r\nexport const setCheckedNotes = createAction('SET_CHECKED_NOTES')\r\nexport const updateCheckedNotes = createAction('UPDATE_CHECKED_NOTES')\r\nexport const setViewLinks = createAction('SET_VIEW_LINKS')\r\nexport const addViewLink = createAction('ADD_VIEW_LINK')\r\nexport const setBuildsOn = createAction('SET_BUILDS_ON')\r\nexport const setSupports = createAction('SET_SUPPORTS')\r\nexport const setRiseAboveViewNotes = createAction('SET_RISEABOVE_VIEW_NOTES')\r\nexport const setRiseAboveNotes = createAction('SET_RISEABOVE_NOTES')\r\nexport const setReadLinks = createAction('SET_READ_LINKS')\r\nexport const removeViewLink = createAction('REMOVE_READ_LINKS')\r\nexport const removeViewNote = createAction('REMOVE_VIEW_NOTE')\r\n\r\nconst initState = {attachments: {}, viewNotes: {}, checkedNotes: [], viewLinks: [], buildsOn: [], supports: [], riseAboveNotes: {}, riseAboveViewNotes: {}, readLinks: []}\r\n\r\nexport const noteReducer = createReducer(initState, {\r\n    [addNote]: (notes, action) => {\r\n        notes[action.payload._id] = action.payload\r\n    },\r\n    [removeNote]: (notes, action) => {\r\n        delete notes[action.payload]\r\n    },\r\n    [editNote]: (notes, action) => {\r\n        let note = notes[action.payload._id];\r\n        notes[action.payload._id] = Object.assign({}, note, action.payload)\r\n    },\r\n    [addAttachment]: (state, action) => {\r\n        let note = state[action.payload.noteId]\r\n        note.attachments.push(action.payload.attachment._id)\r\n        state.attachments[action.payload.attachment._id] = action.payload.attachment\r\n    },\r\n    [removeAttachment]: (state, action) => {\r\n        let note = state[action.payload.noteId]\r\n        note.attachments = note.attachments.filter((att) => att !== action.payload.attId)\r\n        delete state.attachments[action.payload.attId]\r\n    },\r\n    [setAttachments]: (state, action) => {\r\n        let note = state[action.payload.contribId]\r\n        note.attachments = action.payload.attachments.map((att) => att._id)\r\n        action.payload.attachments.forEach((att) => {\r\n            state.attachments[att._id] = att\r\n        })\r\n    },\r\n    [setWordCount]: (state, action) => {\r\n        let note = state[action.payload.contribId]\r\n        note.wordCount = action.payload.wc\r\n    },\r\n    [setLinks]: (state, action) => {\r\n        let contrib = state[action.payload.contribId]\r\n        if (action.payload.direction === 'from') {\r\n            contrib.fromLinks = action.payload.links\r\n        } else {\r\n            contrib.toLinks = action.payload.links\r\n        }\r\n    },\r\n    [setRecords]: (state, action) => {\r\n        let note = state[action.payload.contribId]\r\n        note.records = action.payload.records\r\n    },\r\n    [addContribAuthor]: (state, action) => {\r\n        let contrib = state[action.payload.contribId]\r\n        contrib.authors = [...contrib.authors, action.payload.author]\r\n    },\r\n    [removeContribAuthor]: (state, action) => {\r\n        let contrib = state[action.payload.contribId]\r\n        contrib.authors = contrib.authors.filter((auth) => auth !== action.payload.author)\r\n    },\r\n    [setAnnotation]: (state, action) => {\r\n        let contrib = state[action.payload.contribId]\r\n        contrib.annos[action.payload.annotation._id] = action.payload.annotation\r\n    },\r\n    [setAnnotationsLoaded]: (state, action) => {\r\n        let contrib = state[action.payload.contribId]\r\n        contrib['annotsFetched'] = action.payload.value\r\n    },\r\n    [removeAnnotation]: (state, action) => {\r\n        let contrib = state[action.payload.contribId]\r\n        delete contrib.annos[action.payload.annoId]\r\n    },\r\n    [setViewNotes]: (state, action) => {\r\n        const viewNotes = {}\r\n        for (let i in action.payload)\r\n            viewNotes[action.payload[i]._id] = action.payload[i]\r\n        state.viewNotes = viewNotes\r\n    },\r\n    [setCheckedNotes]: (state, action) => {\r\n        state.checkedNotes = action.payload\r\n    },\r\n    [updateCheckedNotes]: (state, action) => {\r\n        if (action.payload.checked) {\r\n            state.checkedNotes.push(action.payload.noteId)\r\n        } else {\r\n            state.checkedNotes = state.checkedNotes.filter(id => id !== action.payload.noteId)\r\n        }\r\n    },\r\n    [addViewNote]: (state, action) => {\r\n        state.viewNotes[action.payload._id] = action.payload\r\n    },\r\n    [removeViewNote]: (state, action) => {\r\n        delete state.viewNotes[action.payload._id]\r\n    },\r\n    [setViewLinks]: (state, action) => {\r\n        state.viewLinks = action.payload\r\n    },\r\n    [addViewLink]: (state, action) => {\r\n        const matchLink = state.viewLinks.filter((link) => link._id === action.payload._id)\r\n        if (matchLink.length === 0){\r\n            state.viewLinks.push(action.payload)\r\n        } else {//update view link\r\n            state.viewLinks = state.viewLinks.map((link) => link._id === action.payload._id ? action.payload : link);\r\n        }\r\n    },\r\n    [removeViewLink]: (state, action) => {\r\n        state.viewLinks = state.viewLinks.filter((link) => link._id !== action.payload._id)\r\n    },\r\n    [setBuildsOn]: (state, action) => {\r\n        state.buildsOn = action.payload\r\n    },\r\n    [setSupports]: (state, action) => {\r\n        state.supports = action.payload\r\n    },\r\n    [setRiseAboveViewNotes]: (state, action) => {\r\n        state.riseAboveViewNotes[action.payload.noteId] = [...action.payload.notes]\r\n        // state.riseAboveViewNotes = [...state.riseAboveViewNotes, action.payload]\r\n    },\r\n    [setRiseAboveNotes]: (state, action) => {\r\n        // let viewId = action.payload.viewId\r\n        // state.riseAboveNotes[viewId] = [...action.payload.notes]\r\n        action.payload.forEach(note => state.riseAboveNotes[note._id] = note)\r\n    },\r\n    [setReadLinks]: (state, action) =>{\r\n        state.readLinks = action.payload\r\n    }\r\n});\r\n\r\nconst createNote = (communityId, authorId, contextMode, fromId, content) => {\r\n    if (!content) { content = '' }\r\n    if (contextMode && !contextMode.permission) {\r\n        window.alert('invalid mode object')\r\n        return\r\n    }\r\n    let mode = {}\r\n    if (contextMode && contextMode.permission === 'private') {\r\n        mode.permission = contextMode.permission;\r\n        mode.group = contextMode.group;\r\n        mode._groupMembers = contextMode._groupMembers;\r\n    } else {\r\n        mode.permission = 'protected';\r\n        mode.group = undefined;\r\n        mode._groupMembers = [];\r\n    }\r\n    let title = contextMode && contextMode.title ? contextMode.title : '';\r\n    let status = contextMode && contextMode.status ? contextMode.status : 'unsaved';\r\n\r\n    const newobj = {\r\n        communityId: communityId,\r\n        type: 'Note',\r\n        title: title,\r\n        /* 6.6 the default title was changed to blank by Christian */\r\n        authors: [authorId],\r\n        status: status,\r\n        permission: mode.permission,\r\n        group: mode.group,\r\n        _groupMembers: mode._groupMembers,\r\n        data: {\r\n            body: contextMode && contextMode.body ? contextMode.body : ''\r\n        },\r\n        buildson: fromId,\r\n        langInNote: []\r\n\r\n    }\r\n\r\n    //save google document id, createdBy and coauthors, current doc permission granted\r\n    if (contextMode && contextMode.docId) {\r\n        newobj.docId = contextMode.docId;\r\n        var myself = newobj.authors[0];\r\n        if (contextMode.coauthors) {\r\n            var ca = contextMode.coauthors.split(',');\r\n            for (var i = 0; i < ca.length; i++) {\r\n                if (ca[i] !== myself) {\r\n                    newobj.authors.push(ca[i]);\r\n                }\r\n            }\r\n        }\r\n        if (contextMode.createdBy) {\r\n            newobj.createdBy = contextMode.createdBy;\r\n        }\r\n        newobj.docShared = [myself];\r\n        newobj.text4search = contextMode.text4search;\r\n    }\r\n\r\n    return newobj\r\n}\r\n\r\nexport const newNote = (view, communityId, authorId, buildson) => dispatch => {\r\n    const mode = { permission: view.permission, group: view.group, _groupMembers: view._groupMembers }\r\n\r\n    const newN = createNote(communityId, authorId, mode, buildson)\r\n\r\n    return api.postContribution(communityId, newN).then((res) => {\r\n        const note = {\r\n            attachments: [],\r\n            fromLinks: [],\r\n            toLinks: [],\r\n            records: [],\r\n            annos: {},\r\n            group: null,\r\n            ...res.data\r\n        }\r\n        const pos = { x: 100, y: 100 }\r\n\r\n        if (!buildson) {\r\n            api.postLink(view._id, note._id, 'contains', pos)\r\n        }\r\n        //TODO saveContainsLinktoITM x2\r\n\r\n        dispatch(addNote(note))\r\n\r\n        dispatch(openDialog({\r\n            title: 'New Note',\r\n            confirmButton: 'create',\r\n            noteId: note._id,\r\n            editable: true, // new note should open in write tab\r\n        }))\r\n    })\r\n\r\n}\r\n\r\nexport const buildOnNote = (noteId) => (dispatch, getState )=> {\r\n    const state = getState()\r\n    dispatch(newNote(state.globals.view, state.globals.communityId, state.globals.author._id, noteId))\r\n}\r\n\r\n\r\nexport const attachmentUploaded = (noteId, attachment, inline, x, y) => dispatch => {\r\n\r\n    return api.postLink(noteId, attachment._id, 'attach').then((res) => {\r\n\r\n        // TODO dispatch(getLinksFrom(noteId))\r\n        dispatch(addAttachment({ noteId, attachment }))\r\n\r\n    });\r\n}\r\n\r\nexport const fetchAttachments = (contribId) => async dispatch => {\r\n    const link_atts = await api.getLinks(contribId, 'from', 'attach')\r\n    const attachments = await Promise.all(link_atts.map((attach) => api.getObject(attach.to)))\r\n    dispatch(setAttachments({ contribId, attachments }))\r\n}\r\n\r\nexport const postContribution = (contrib, dialogId) => async (dispatch, getState) => {\r\n    contrib = Object.assign({}, contrib)\r\n    contrib.data = Object.assign({}, contrib.data)\r\n    if (!contrib.title) {\r\n        addNotification({ title: 'Error Saving Note!', type: 'danger', message: 'Title is required' })\r\n        return\r\n    }\r\n    //TODO sync checking?\r\n    //TODO status.contribution = 'saving'\r\n    if (contrib.type === 'Note') {\r\n        // TODO if isGoogleDoc\r\n        // const isNewNote = contrib.status === 'unsaved'\r\n        const wasActive = contrib.status === 'active'\r\n        contrib.status = 'active'\r\n        const jq = await postProcess(contrib.data.body, contrib._id, contrib.toLinks, contrib.fromLinks)\r\n\r\n        const text = jq.html()\r\n        const prev_text = contrib.data.body\r\n        contrib.data.body = text\r\n        const newNote = await api.putObject(contrib, contrib.communityId, contrib._id)\r\n        newNote.data.body = prev_text\r\n        dispatch(editNote(newNote))\r\n        dispatch(addViewNote(newNote))\r\n\r\n        dispatch(fetchLinks(contrib._id, 'from'))\r\n        dispatch(fetchLinks(contrib._id, 'to'))\r\n        if (dialogId !== undefined)\r\n            dispatch(closeDialog(dialogId))\r\n        if (!wasActive) //To update builds on hierarchy\r\n            dispatch(fetchBuildsOn(newNote.communityId))\r\n        addNotification({ title: 'Saved!', type: 'success', message: 'Contribution updated!' })\r\n    }\r\n}\r\n\r\nexport const fetchLinks = (contribId, direction) => async (dispatch) => {\r\n    const links = await api.getLinks(contribId, direction)\r\n    dispatch(setLinks({ contribId, direction, links }))\r\n\r\n    if (direction === \"to\"){\r\n        const viewLink = links.filter((link) => link.type === \"contains\")[0];\r\n        dispatch(addViewLink(viewLink));\r\n    }\r\n}\r\n\r\nexport const fetchRecords = (contribId) => async (dispatch, getState) => {\r\n    const authors = getState().users\r\n    const records = await api.getRecords(contribId)\r\n    const formatter = new Intl.DateTimeFormat('default', dateFormatOptions)\r\n    records.forEach((record) => {\r\n        if (authors[record.authorId]) {\r\n            const author = authors[record.authorId]\r\n            record['author'] = `${author.firstName} ${author.lastName}`\r\n        } else {\r\n            record['author'] = 'NA'\r\n        }\r\n        record['date'] = formatter.format(new Date(record.timestamp))\r\n    })\r\n    dispatch(setRecords({ contribId, records }))\r\n}\r\n\r\nexport const openContribution = (contribId) => async (dispatch, getState) => {\r\n\r\n    const [contrib, fromLinks, toLinks] = await Promise.all([api.getObject(contribId),\r\n    api.getLinks(contribId, 'from'),\r\n    api.getLinks(contribId, 'to')])\r\n    const author = getState().globals.author;\r\n    const note = { attachments: [], fromLinks, toLinks, records: [], annos: {}, ...contrib }\r\n    const noteBody = preProcess(note.data.body, toLinks, fromLinks)\r\n    note.data.body = noteBody\r\n    dispatch(addNote(note))\r\n    dispatch(fetchAttachments(contribId))\r\n    dispatch(openDialog({\r\n        title: 'Edit Note',\r\n        confirmButton: 'edit',\r\n        noteId: note._id,\r\n        editable: author && (note.authors.includes(author._id) || author.role === \"manager\"), // read or write tab\r\n        buildOn: true\r\n    }))\r\n    //annotations\r\n    const annoLinks = toLinks.filter((link) => link.type === 'annotates')\r\n\r\n    const annotations = await Promise.all(\r\n        annoLinks.map((annLink) =>\r\n            api.getObject(annLink.from).then(anno => {\r\n                anno.data.linkId = annLink._id\r\n                anno.data.modelId = anno._id\r\n                return anno\r\n            })\r\n        )\r\n    )\r\n\r\n    annotations.forEach((annot) => dispatch(setAnnotation({ annotation: annot, contribId })))\r\n    dispatch(setAnnotationsLoaded({ contribId, value: 1 }))\r\n\r\n    if (note.status === 'active') {\r\n        api.read(note.communityId, note._id)\r\n    }\r\n}\r\n\r\nexport const createAnnotation = (communityId, contribId, authorId, annotation) => async (dispatch) => {\r\n    const newobj = {\r\n        communityId: communityId,\r\n        type: 'Annotation',\r\n        title: 'an Annotation',\r\n        authors: [authorId],\r\n        status: 'active',\r\n        permission: 'private',\r\n        data: annotation\r\n    };\r\n    const ann = await api.postContribObject(communityId, newobj)\r\n\r\n    const link = await api.postLink(ann._id, contribId, 'annotates')\r\n\r\n    annotation.linkId = link._id;\r\n    annotation.modelId = ann._id;\r\n    dispatch(setAnnotation({ contribId, annotation: ann }))\r\n    // TODO save in store link\r\n    // $scope.annoLinks[link._id] = link;\r\n}\r\n\r\nexport const deleteAnnotation = (linkId, contribId, annoId) => async (dispatch) => {\r\n    await api.deleteLink(linkId)\r\n    return dispatch(removeAnnotation({ contribId, annoId }))\r\n}\r\n\r\nexport const modifyAnnotation = (annotation, communityId, contribId) => async (dispatch) => {\r\n    const anno_updated = await api.putObject(annotation, communityId, annotation._id)\r\n    return dispatch(setAnnotation({ contribId, annotation: anno_updated }))\r\n}\r\n\r\nexport const fetchViewNotes = (viewId) => async (dispatch) => {\r\n    const links = (await api.getLinks(viewId, 'from'))\r\n    const noteLinks = links\r\n        .filter(obj => (obj._to.type === \"Note\" && obj._to.title !== \"\" && obj._to.status === \"active\"))\r\n\r\n    dispatch(setViewLinks(links))\r\n    const notes = await Promise.all(noteLinks.map((filteredObj) => api.getObject(filteredObj.to)))\r\n\r\n    dispatch(setViewNotes(notes))\r\n\r\n    //RISEABOVE\r\n    notes.forEach(async note => {\r\n        if (note.data && note.data.riseabove) {\r\n            //SET NOTES INTO RISEABOVE LIST\r\n            let viewId = note.data.riseabove.viewId\r\n            const riseAboveNoteIds = (await api.getLinks(viewId, 'from'))\r\n                  .filter(obj => (obj._to.type === \"Note\" && obj._to.title !== \"\" && obj._to.status === \"active\")).map(lnk => lnk.to)\r\n            const riseAboveNotes = await Promise.all(riseAboveNoteIds.map((noteId) => api.getObject(noteId)))\r\n            // let data = {\r\n            //     viewId: viewId,\r\n            //     notes: riseAboveNotes,\r\n            // }\r\n\r\n            dispatch(setRiseAboveNotes(riseAboveNotes))\r\n            dispatch(setRiseAboveViewNotes({noteId: note._id, notes: riseAboveNoteIds}))\r\n            // riseAboveNotes.forEach(note => dispatch(setRiseAboveViewNotes(note)))\r\n        }\r\n    })\r\n}\r\n\r\nexport const fetchBuildsOn = (communityId) => async (dispatch) => {\r\n    let buildOnResult = await api.linksSearch(communityId, { \"type\": \"buildson\" })\r\n    buildOnResult = buildOnResult.reverse();\r\n    const filteredBuildOn = buildOnResult.filter(\r\n        (obj) =>\r\n            (obj._to.type === \"Note\" && obj._to.status === \"active\" && obj._from.type === \"Note\" && obj._from.status === \"active\")\r\n    )\r\n    dispatch(setBuildsOn(filteredBuildOn))\r\n}\r\n\r\nexport const fetchSupports = (communityId) => async (dispatch) => {\r\n    let supports = await api.linksSearch(communityId, { \"type\": \"supports\" })\r\n    dispatch(setSupports(supports))\r\n}\r\n\r\nexport const deleteAttachment = (contribId, attId) => async (dispatch, getState) => {\r\n    const state = getState()\r\n    let contrib = state.notes[contribId]\r\n    const att_link = contrib.fromLinks.filter((lnk) => lnk.to === attId)[0]\r\n    await api.deleteLink(att_link._id)\r\n    dispatch(removeAttachment({ attId, noteId: contribId }))\r\n    dispatch(fetchLinks(contribId, 'from'))\r\n}\r\n\r\nexport const fetchReadLinks = (communityId, viewId) => async (dispatch) =>{\r\n    const readLinks = await api.getApiLinksReadStatus(communityId, viewId)\r\n    dispatch(setReadLinks(readLinks))\r\n}\r\n","import { createAction, createReducer } from '@reduxjs/toolkit'\r\nimport { getObject, getCommunity, getGroups, getUser, getAuthor, getCommunityViews, getCommunities, getUserCommunities } from './api.js'\r\nimport { fetchAuthors } from './userReducer.js';\r\nimport { fetchScaffolds } from './scaffoldReducer.js'\r\nimport { fetchViewNotes, fetchBuildsOn, setCheckedNotes, fetchSupports, fetchReadLinks } from './noteReducer.js'\r\nexport const setGlobalToken = createAction('SET_TOKEN')\r\nexport const setCurrentLoginForm = createAction('SET_CURRENT_LOGIN_FORM')\r\nexport const setCommunity = createAction('SET_COMMUNITY')\r\nexport const setCommunityId = createAction('SET_COMMUNITY_ID')\r\nexport const setCurrentServer = createAction('SET_CURRENT_SERVER')\r\nexport const setViewId = createAction('SET_VIEW_ID')\r\nexport const setLoggedUser = createAction('SET_AUTHOR')\r\nexport const setView = createAction('SET_VIEW')\r\nexport const setAuthor = createAction('SET_AUTHOR')\r\nexport const setViews = createAction('SET_VIEWS')\r\nexport const editCommunity = createAction('EDIT_COMMUNITY')\r\nexport const setUserId = createAction('SET_USERID')\r\nexport const setIsAuthenticated = createAction('SET_ISAUTHENTICATED')\r\nexport const setCommunities = createAction('SET_COMMUNITIES')\r\nexport const setUserCommunities = createAction('SET_USER_COMMUNITIES')\r\nexport const setSocketStatus = createAction('SET_SOCKET_STATUS')\r\nexport const dateFormatOptions = {\r\n    year: 'numeric', month: 'numeric', day: 'numeric',\r\n    hour: 'numeric', minute: 'numeric', second: 'numeric',\r\n    hour12: true\r\n};\r\n\r\nconst initState = {\r\n    token: sessionStorage.getItem(\"token\"),\r\n    currentLoginForm: \"Login\",\r\n    communityId: null,\r\n    currentServer: null,\r\n    viewId: null,\r\n    contextId: '',\r\n    user: null,\r\n    view: null,\r\n    views: [],\r\n    community: null,\r\n    userId: '',\r\n    isAuthenticated: sessionStorage.getItem(\"token\") ? true : false,\r\n    communities: [],\r\n    userCommunities: [],\r\n    servers: [\r\n        {\r\n            id: 0,\r\n            key: \"kf6.ikit.org\",\r\n            value: \"https://kf6.ikit.org\"\r\n\r\n        },\r\n        {\r\n            id: 1,\r\n            key: \"kf6-stage.ikit.org\",\r\n            value: \"https://kf6-stage.ikit.org\"\r\n\r\n        },\r\n        {\r\n            id: 2,\r\n            key: \"kf6-stage.rit.albany.edu\",\r\n            value: \"https://kf6-stage.rit.albany.edu\"\r\n\r\n        },\r\n        {\r\n            id: 3,\r\n            key: \"kf.rdc.nie.edu.sg\",\r\n            value: \"https://kf.rdc.nie.edu.sg\"\r\n\r\n        },\r\n        {\r\n            id: 4,\r\n            key: \"kf.rit.albany.edu\",\r\n            value: \"https://kf6.rit.albany.edu\"\r\n\r\n        },\r\n        // {\r\n        //     id: 5,\r\n        //     key: \"localhost 9000\",\r\n        //     value: \"http://localhost:9000\"\r\n\r\n        // },\r\n    ],\r\n    socketStatus: false\r\n}\r\n\r\nexport const globalsReducer = createReducer(initState, {\r\n    [setGlobalToken]: (state, action) => {\r\n        state.token = action.payload\r\n        state.isAuthenticated = state.token ? true : false\r\n    },\r\n    [setIsAuthenticated]: (state, action) => {\r\n        state.isAuthenticated = state.token ? true : false\r\n    },\r\n    [setCurrentLoginForm]: (state, action) => {\r\n        state.currentLoginForm = action.payload\r\n    },\r\n    [setCommunityId]: (state, action) => {\r\n        state.communityId = action.payload\r\n    },\r\n    [setCurrentServer]: (state, action) => {\r\n        state.currentServer = action.payload\r\n    },\r\n    [setViewId]: (state, action) => {\r\n        state.viewId = action.payload\r\n    },\r\n    [setUserId]: (state, action) => {\r\n        state.userId = action.payload\r\n    },\r\n    [setLoggedUser]: (state, action) => {\r\n        state.user = action.payload\r\n    },\r\n    [setView]: (state, action) => {\r\n        state.view = action.payload\r\n    },\r\n    [setViews]: (state, action) => {\r\n        state.views = action.payload\r\n    },\r\n    [setCommunity]: (state, action) => {\r\n        state.community = action.payload\r\n        state.communityId = action.payload._id\r\n        state.contextId = action.payload.rootContextId\r\n    },\r\n    [editCommunity]: (state, action) => {\r\n        state.community = { ...state.community, ...action.payload }\r\n    },\r\n    [setCommunities]: (state, action) => {\r\n        state.communities = action.payload\r\n    },\r\n    [setUserCommunities]: (state, action) => {\r\n        state.userCommunities = action.payload\r\n    },\r\n    [setAuthor]: (state, action) => {\r\n        state.author = action.payload\r\n    },\r\n    [setSocketStatus]: (state, action) => {\r\n        state.socketStatus = action.payload\r\n    }\r\n});\r\n\r\nexport const fetchAuthor = (communityId) => {\r\n    return dispatch => {\r\n        return getAuthor(communityId).then(res => {\r\n            dispatch(setAuthor(res.data));\r\n        })\r\n    }\r\n}\r\nexport const fetchCommunities = () => {\r\n    return async dispatch => {\r\n        const communities = await getCommunities()\r\n        dispatch(setCommunities(communities))\r\n    }\r\n}\r\n\r\nexport const fetchUserCommunities = () => {\r\n    return async dispatch => {\r\n        const communities = await getUserCommunities()\r\n        dispatch(setUserCommunities(communities))\r\n    }\r\n}\r\n\r\nexport const fetchView = (viewId) => {\r\n    return dispatch => {\r\n        return getObject(viewId).then(res => {\r\n            dispatch(setView(res))\r\n        })\r\n    }\r\n}\r\n\r\nexport const fetchCommunity = (communityId) => {\r\n    return dispatch => {\r\n        return getCommunity(communityId).then(res => {\r\n            dispatch(setCommunity(\r\n                { groups: [], ...res.data }\r\n            ))\r\n        })\r\n    }\r\n}\r\n\r\nexport const fetchCommGroups = (communityId) => async (dispatch) => {\r\n    const groups = await getGroups(communityId)\r\n    dispatch(editCommunity({ groups }))\r\n}\r\n\r\nexport const fetchLoggedUser = () => async (dispatch) => {\r\n    try {\r\n        const user = await getUser()\r\n        dispatch(setUserId(user._id))\r\n        dispatch(setLoggedUser(user))\r\n    }catch (e){//Error with token, logout\r\n        sessionStorage.clear();\r\n        localStorage.clear();\r\n        window.location.replace('/')\r\n    }\r\n}\r\n\r\nexport const fetchCommunityViews = (communityId) => async (dispatch) => {\r\n    const views = await getCommunityViews(communityId)\r\n    dispatch(setViews(views))\r\n}\r\n\r\nexport const fetchViewCommunityData = (viewId) => async (dispatch) => {\r\n    dispatch(setCheckedNotes([]))\r\n    dispatch(setViewId(viewId))\r\n    const view = await getObject(viewId)\r\n    const commId = view.communityId\r\n    dispatch(setView(view))\r\n    dispatch(fetchViewNotes(view._id))\r\n    const community = (await getCommunity(commId)).data\r\n    dispatch(setCommunity(\r\n        { groups: [], ...community }\r\n    ))\r\n    dispatch(fetchBuildsOn(commId))\r\n    dispatch(fetchAuthor(commId))\r\n    dispatch(fetchCommunityViews(commId))\r\n    dispatch(fetchAuthors(commId))\r\n    dispatch(fetchReadLinks(commId, view._id))\r\n    dispatch(fetchScaffolds(commId, community.rootContextId))\r\n    dispatch(fetchSupports(commId))\r\n}\r\n\r\n// A COMPACT VERSION OF fetchViewCommunityData - only retrieves what will be different between views within a community\r\nexport const fetchNewViewDifference = (viewId) => async (dispatch) => {\r\n  dispatch(setCheckedNotes([]))\r\n  const view = await getObject(viewId)\r\n  const commId = view.communityId\r\n  dispatch(setView(view))\r\n  dispatch(fetchViewNotes(view._id))\r\n  dispatch(fetchReadLinks(commId, view._id))\r\n}\r\n","// returns a promise that on fullfillment returns the users token\r\nexport function getUserToken(username, password, server){\r\n  var body = {\r\n    'userName': username,\r\n    'password': password\r\n  };\r\n\r\n  return fetch(server + 'auth/local', {\r\n    method: \"POST\",\r\n    headers: {'Content-Type': 'application/json'},\r\n    body: JSON.stringify(body),\r\n  }).then(function(response) {\r\n      if(response.status !== 200){\r\n        console.log(\"Error: \" + server + 'auth/local');\r\n        console.log(response);\r\n      }\r\n      return response.json();\r\n  }).then(function(body) {\r\n      return body;\r\n  }).catch(function(error) {\r\n      return (\"Error:\", error);\r\n  });\r\n\r\n}\r\n\r\n\r\n// returns a promise that on fulfillment returns an [user token, server] object pair\r\nexport function getUserTokenServerPair(username, password, server){\r\n  var body = {\r\n    'userName': username,\r\n    'password': password\r\n  };\r\n\r\n  return fetch(server + 'auth/local', {\r\n    method: \"POST\",\r\n    headers: {'Content-Type': 'application/json'},\r\n    body: JSON.stringify(body),\r\n  }).then(function(response) {\r\n      if(response.status !== 200){\r\n        console.log(\"Error: \" + server + 'auth/local');\r\n        console.log(response);\r\n      }\r\n      return response.json();\r\n  }).then(function(body) {\r\n      return [body, server];\r\n  }).catch(function(error) {\r\n      console.log(\"Error: \" + server + 'auth/local');\r\n      console.log(error);\r\n      return [{error: \"Error: server unavailable\"}, server];\r\n  });\r\n}\r\n\r\n\r\n// returns a promise that on fullfillment returns the user information corresponding to the given token and server\r\nexport function getUserInfo(token, server){\r\n\r\n  return fetch(server + 'api/users/me', {\r\n    method: \"GET\",\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': 'Bearer ' + token\r\n    },\r\n  }).then(function(response) {\r\n      if(response.status !== 200 && response.status !== 304){\r\n        console.log(\"Error: \" + server + \"api/users/me\");\r\n        console.log(response);\r\n        return {error: true};\r\n      }\r\n      return response.json();\r\n  }).then(function(body) {\r\n      return (body);\r\n  }).catch(function(error) {\r\n      return (\"Error:\", error);\r\n  });\r\n\r\n}\r\n\r\n\r\n// returns a promse that on fulfillment returns the communities a user is registered to in a given server from their token\r\nexport function getUserCommunities(token, server){\r\n  return fetch(server + 'api/users/myRegistrations', {\r\n    method: \"GET\",\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': 'Bearer ' + token\r\n    },\r\n  }).then(function(response) {\r\n    if(response.status !== 200){\r\n      console.log(\"Error: \" + server + 'api/users/myRegistrations');\r\n      console.log(response);\r\n    }\r\n    return response.json();\r\n  }).then(function(body) {\r\n      return (body);\r\n  }).catch(function(error) {\r\n      return (\"Error:\", error);\r\n  });\r\n}\r\n\r\nexport function postNewUser(server, firstname, lastname, email, username, password, registrationKey){\r\n  var body;\r\n  if(registrationKey === null){\r\n    body = {\r\n      'email': email,\r\n      'firstName': firstname,\r\n      'lastName': lastname,\r\n      'password': password,\r\n      'userName': username\r\n    }\r\n  } else {\r\n    body = {\r\n      'email': email,\r\n      'firstName': firstname,\r\n      'lastName': lastname,\r\n      'password': password,\r\n      'registrationKey': registrationKey,\r\n      'userName': username\r\n    };\r\n  }\r\n\r\n\r\n  return fetch(server + 'api/users', {\r\n    method: \"POST\",\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify(body),\r\n  }).then(function(response) {\r\n    if(response.status !== 200){\r\n      console.log(\"Error: \" + server + 'api/users');\r\n      console.log(response);\r\n    }\r\n    return response.json();\r\n  }).then(function(body) {\r\n    return [body, server];\r\n  }).catch(function(error) {\r\n    return [{error: \"Error: server unavailable\"}, server];\r\n  });\r\n}\r\n","/*\r\n* EDIT AVAILABLE SERVERS HERE\r\n* {name:\"SERVER NAME\", url:\"SERVER URL\"}\r\n*/\r\nexport const SERVERS = [\r\n  {name:\"IKIT Stage\", url:\"https://kf6-stage.ikit.org/\"},\r\n  {name:\"Albany Stage\", url:\"https://kf6-stage.rit.albany.edu/\"},\r\n  {name:\"IKIT\", url:\"https://kf6.ikit.org/\"},\r\n  {name:\"Albany\", url:\"https://kf6.rit.albany.edu/\"},\r\n  {name:\"Singapore\", url:\"https://kf.rdc.nie.edu.sg/\"},\r\n  // {name:\"Local\", url:\"http://localhost:9000/\"}\r\n];\r\n\r\n// ZOOM VALUES FOR CYTOSCAPE GRAPH\r\nexport const MINZOOM = 0.75;\r\nexport const MAXZOOM = 2;\r\n\r\n// GOOGLE RECAPTCHA SITE KEY FOR SIGN UP PAGE\r\nexport const siteKey = \"6LdTo2oaAAAAALKB-WW7km7SabLVsBXSg4NAaX_K\";\r\n\r\n// Helper function to retrieve a servers name from its URL\r\nexport function getServerName(url){\r\n  for(var i in SERVERS){\r\n    if(SERVERS[i].url === url){ return SERVERS[i].name; }\r\n  }\r\n\r\n  return \"Error: server \" + url + \" does not exist\";\r\n}\r\n\r\n\r\n// Helper function to retrieve a servers URL from its name\r\nexport function getServerURL(name){\r\n  for(var i in SERVERS){\r\n    if(SERVERS[i].name === name){ return SERVERS[i].url; }\r\n  }\r\n\r\n  return \"Error: server \" + name + \" does not exist\";\r\n}\r\n\r\n\r\n// Helper function to retrieve the current users token for a specified server\r\nexport function extractTokenFromStorage(server) {\r\n  var uname = localStorage.getItem(\"Username\");\r\n  var data = JSON.parse(localStorage.getItem(uname));\r\n\r\n  for (var i in data) {\r\n    if (data[i][0] === server) {\r\n      return data[i][1];\r\n    }\r\n  }\r\n}\r\n\r\nexport const WS_BASE = '/socket.io-client';\r\n","/*\r\n* THIS FILE PROVIDES HELPER FUNCTIONS FOR LOGIN COMPONENT\r\n*/\r\nimport {getUserTokenServerPair} from '../api/user.js';\r\nimport {SERVERS} from '../config.js';\r\n\r\n\r\n// Executes all promises to get user token for each server at once\r\nexport function executePromises(uname, pwd, login_form_component){\r\n  const promises = [];\r\n\r\n  // if the checkbox on login page is checked clear the local storage\r\n  var firstLogin = document.getElementById(\"refreshCheckbox\").checked;\r\n  if(firstLogin){ localStorage.clear(); }\r\n\r\n  var userStorage = JSON.parse(localStorage.getItem(uname));\r\n\r\n  // If it is the first time logging in we test all servers (userStorage == null)\r\n  // else we only call the servers stored in users local storage list\r\n  if(userStorage == null){\r\n    for(let i in SERVERS){\r\n      promises.push(getUserTokenServerPair(uname, pwd, SERVERS[i].url));\r\n    }\r\n  } else {\r\n    for(let i in userStorage){\r\n      promises.push(getUserTokenServerPair(uname, pwd, userStorage[i][0]));\r\n    }\r\n  }\r\n\r\n  // execute all the login promises\r\n  return Promise.all(promises).then(function(data){\r\n    return responseHandler(uname, data, login_form_component);\r\n  }).catch(function(error){\r\n    console.log(error);\r\n  });\r\n}\r\n\r\n\r\n// Handles each servers response to the users credentials\r\n// If no succesful logins then displays error message to user\r\n// Otherwise redirects to next page\r\n// each item in data is [response body, server]\r\nexport function responseHandler(uname, data, login_form_component){\r\n  var successfulLogin = false;\r\n  var errorMessage = \"\";\r\n  var serverTokenPair = [];\r\n\r\n  // retrieve users server information from local storage in order to find last active server\r\n  // value will be null if its first login\r\n  var userStorage = JSON.parse(localStorage.getItem(uname));\r\n\r\n  for(var i in data){\r\n    if(data[i][0].token !== undefined) {\r\n      var token = data[i][0].token;\r\n      var server = data[i][1];\r\n\r\n      if((userStorage === null && successfulLogin === false) || (userStorage !== null && userStorage[i][2] === \"active\")){\r\n        serverTokenPair.push([server, token, \"active\"]);\r\n      } else {\r\n        serverTokenPair.push([server, token, \"inactive\"]);\r\n      }\r\n\r\n      successfulLogin = true;\r\n\r\n      // this else if case handles a user having the same username on multiple servers but with different passwords\r\n    } else if(data[i][0].message !== undefined && userStorage !== null){\r\n      var username = document.getElementById(\"uname\").value;\r\n      var password = document.getElementById(\"pwd\").value;\r\n      localStorage.removeItem(username);\r\n      return executePromises(username, password, login_form_component);\r\n    } else if(data[i][0].message !== undefined && errorMessage === \"\") {\r\n      errorMessage = data[i][0].message;\r\n    } else if(errorMessage === \"This userName is not registered.\" && data[i][0].message === \"This password is not correct.\") {\r\n      errorMessage = data[i][0].message;\r\n    } else if(data[i][0].error !== undefined && errorMessage === \"\") {\r\n      errorMessage = data[i][0].error;\r\n    }\r\n  }\r\n\r\n  if(!successfulLogin){\r\n    document.getElementById(\"errorMessage\").style.display = \"visible\";\r\n    login_form_component.setState({errorMessage: errorMessage});\r\n    return 0;\r\n  } else {\r\n    localStorage.setItem(\"Username\", uname);\r\n    localStorage.setItem(uname, JSON.stringify(serverTokenPair));\r\n    return 1;\r\n  }\r\n}\r\n\r\nexport function getLoginData(){\r\n    const uname = localStorage.getItem(\"Username\");\r\n    if (uname){\r\n        const servers = JSON.parse(localStorage.getItem(uname));\r\n        for(let server_data of servers){\r\n            if (server_data[2] === 'active' && server_data[1] !== \"\"){\r\n                return server_data;\r\n            }\r\n        }\r\n    }\r\n    return [null,null,null]\r\n}\r\n","import React, {Component} from 'react';\r\nimport {withRouter} from 'react-router';\r\nimport { connect } from 'react-redux';\r\nimport { compose } from 'redux';\r\nimport { setCurrentLoginForm, setGlobalToken } from './store/globalsReducer.js'\r\nimport $ from 'jquery';\r\nimport '../node_modules/bootstrap/dist/js/bootstrap.bundle.min.js';\r\nimport {executePromises, getLoginData} from './helper/Login_helper.js';\r\n\r\nimport './css/Login.css';\r\n\r\nclass LoginForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      uname: null,\r\n      pwd: null,\r\n      errorMessage: null,\r\n    }\r\n  }\r\n\r\n  inputChangeHandler = (event) => {\r\n    let name = event.target.name;\r\n    let val = event.target.value;\r\n\r\n    this.setState({[name] : val});\r\n  }\r\n\r\n  formSubmitHandler = (event) => {\r\n    event.preventDefault();\r\n    var uname = this.state.uname;\r\n    var pwd = this.state.pwd;\r\n    document.getElementById(\"errorMessage\").style.display = \"hidden\";\r\n    executePromises(uname, pwd, this).then((result) => {\r\n      if(result === 1){\r\n        this.props.setGlobalToken(getLoginData()[1]);\r\n        this.props.history.push(\"/dashboard\");\r\n      }\r\n    });\r\n    return false;\r\n  }\r\n\r\n  openSignUpForm = (event) => {\r\n    this.props.setCurrentLoginForm(\"SignUp\");\r\n  }\r\n\r\n  componentDidMount(){\r\n    // enables the popover for refreshing servers on login tool tip\r\n    $('[data-toggle=\"tooltip\"]').tooltip()\r\n    $('[data-toggle=\"popover\"]').popover()\r\n    if($(window).width() <= 768) {\r\n      document.getElementById(\"popover\").setAttribute(\"data-trigger\", \"focus\");\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <div className = \"row login-form-row\">\r\n        <div className = {\"col-lg-8 col-md-10 col-sm-12 login-form-wrapper\"}>\r\n          <h1>knowledgeforum.org</h1>\r\n          <form onSubmit={this.formSubmitHandler} className = \"loginForm\" id = \"loginForm\" autoComplete=\"on\">\r\n\r\n            <div className = \"login-input-wrapper\">\r\n              <i className=\"fas fa-user\"></i>\r\n              <input type=\"text\" id=\"uname\" name=\"uname\" placeholder=\"Username\" required onChange={this.inputChangeHandler}></input>\r\n            </div>\r\n\r\n            <div className = \"login-input-wrapper\">\r\n              <i className=\"fas fa-lock\"></i>\r\n              <input type=\"password\" id=\"pwd\" name=\"pwd\" placeholder=\"Password\" required onChange={this.inputChangeHandler}></input>\r\n            </div>\r\n\r\n            <div className = \"login-checkbox-wrapper\">\r\n              <input type=\"checkbox\" id=\"refreshCheckbox\" name=\"refreshCheckbox\"></input>\r\n              <label htmlFor=\"refreshCheckbox\">Refresh my servers on login?</label>\r\n              <span id=\"popover\" tabIndex=\"0\" role=\"button\" data-toggle=\"popover\"\r\n                data-trigger=\"hover\" data-content=\"Check this box if you have registered to any new knowledge forums servers since your last login.\">\r\n              <i className=\"far fa-question-circle\"></i></span>\r\n            </div>\r\n\r\n            <div>\r\n              <p style={{display:'hidden',color:'red'}} id = \"errorMessage\" name=\"errorMessage\">{this.state.errorMessage}</p>\r\n            </div>\r\n\r\n            <input className = \"login-button\" type=\"submit\" value=\"Login\"></input>\r\n\r\n          </form>\r\n\r\n          <p className=\"login-create-account-p\" onClick={this.openSignUpForm}>Don't have an account? Sign up <i className=\"far fa-arrow-alt-circle-right\"></i></p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nconst mapDispatchToProps = {\r\n    setGlobalToken,\r\n    setCurrentLoginForm\r\n};\r\n\r\nexport default compose(\r\n    withRouter,\r\n    connect(null, mapDispatchToProps)\r\n)(LoginForm)\r\n","import React, {Component} from 'react';\r\nimport Select from 'react-select';\r\nimport { withRouter } from 'react-router';\r\nimport { connect } from 'react-redux';\r\nimport { compose } from 'redux';\r\nimport ReCAPTCHA from 'react-google-recaptcha';\r\nimport { setCurrentLoginForm, setGlobalToken } from './store/globalsReducer.js'\r\nimport '../node_modules/bootstrap/dist/js/bootstrap.bundle.min.js';\r\nimport {SERVERS, getServerURL, siteKey} from './config.js';\r\nimport {postNewUser} from './api/user.js';\r\n\r\nimport './css/Login.css';\r\nimport './css/SignUpForm.css';\r\n\r\nclass SignUpForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      server: null,\r\n      firstname: null,\r\n      lastname: null,\r\n      email: null,\r\n      username: null,\r\n      password: null,\r\n      confirmPassword: null,\r\n      registrationKey: null,\r\n      errorMessage: null,\r\n      singaporeSelected: false,\r\n      recaptchaVerified: false,\r\n    }\r\n\r\n  }\r\n\r\n  inputChangeHandler = (event) => {\r\n    let name = event.target.name;\r\n    let val = event.target.value;\r\n\r\n    this.setState({[name] : val});\r\n  }\r\n\r\n  serverSelectHandler = (event) => {\r\n    event.value === getServerURL(\"Singapore\") ? this.setState({singaporeSelected: true}) : this.setState({singaporeSelected: false});\r\n    this.setState({server: event.value});\r\n  }\r\n\r\n  formSubmitHandler = (event) => {\r\n    event.preventDefault();\r\n    if(this.state.server === null) {\r\n      this.setState({errorMessage: \"Please select a server.\"});\r\n    } else if(/^[a-zA-Z][.0-9a-zA-Z@_-]{1,100}$/.test(this.state.username) === false) {\r\n      this.setState({errorMessage: [\"Username must meet the following requirements:\", <br />, \"1. Start with a letter\", <br />,\r\n      \"2. Not contain any white spaces\", <br />, \"3. Can only contain the special characters @._-\"]});\r\n    } else if(this.state.password !== this.state.confirmPassword){\r\n      this.setState({errorMessage: \"Passwords do not match.\"});\r\n    } else {\r\n      postNewUser(this.state.server, this.state.firstname, this.state.lastname, this.state.email, this.state.username, this.state.password, this.state.registrationKey).then((result) => {\r\n        if(result[0] && result[0].token !== undefined) {\r\n          localStorage.setItem(\"Username\", this.state.username);\r\n          localStorage.setItem(this.state.username, JSON.stringify([[result[1], result[0].token, \"active\"]]));\r\n          this.props.setGlobalToken(result[0].token);\r\n          this.props.history.push('/dashboard');\r\n        } else {\r\n          var resultErrorMessage = result[0].message || result[0].error || result[0].errorCode || result[0];\r\n          this.setState({errorMessage: resultErrorMessage});\r\n        }\r\n      });\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  openLoginForm = (event) => {\r\n    this.props.setCurrentLoginForm(\"Login\");\r\n  }\r\n\r\n  verifyRecaptcha = (event) => {\r\n    event === null ? this.setState({recaptchaVerified: false}) : this.setState({recaptchaVerified: true})\r\n  }\r\n\r\n  render() {\r\n    let userAuthenticationMethod;\r\n    if(this.state.singaporeSelected){\r\n      userAuthenticationMethod = <div className = \"login-input-wrapper\"><i className=\"fas fa-lock\"></i><input type=\"text\" id=\"registrationKey\" name=\"registrationKey\" placeholder=\"Singapore Account Creation Key\" required onChange={this.inputChangeHandler}></input></div>;\r\n    } else {\r\n      userAuthenticationMethod = <ReCAPTCHA sitekey={siteKey} onChange={this.verifyRecaptcha}/>;\r\n    }\r\n\r\n    let signUpButton;\r\n    if((this.state.recaptchaVerified === true && !this.state.singaporeSelected) || (this.state.singaporeSelected && this.state.registrationKey !== null)){\r\n      signUpButton = <input className = \"login-button\" type=\"submit\" value=\"Create Account\"></input>;\r\n    } else {\r\n      signUpButton = <input className = \"login-button login-disabled\" type=\"submit\" value=\"Create Account\" disabled></input>;\r\n    }\r\n\r\n    return(\r\n      <div className = \"row login-form-row\">\r\n        <div className = {\"col-lg-8 col-md-10 col-sm-12 login-form-wrapper\"}>\r\n          <h1>knowledgeforum.org</h1>\r\n          <form onSubmit={this.formSubmitHandler} className = \"loginForm\" id = \"loginForm\" autoComplete=\"on\">\r\n\r\n            <div className=\"login-input-wrapper signup-select-server\">\r\n              <i className=\"fas fa-server\"></i>\r\n              <div className=\"select-container\">\r\n                <Select\r\n                  placeholder={\"Select a Server\"}\r\n                  options={SERVERS.map((s) => ({value: s.url, label: s.name}))}\r\n                  onChange = {this.serverSelectHandler}\r\n                  className=\"basic-multi-select\"\r\n                  classNamePrefix=\"select\"\r\n                />\r\n              </div>\r\n              <div className=\"clearFix\"></div>\r\n            </div>\r\n\r\n            <div className = \"login-input-wrapper\">\r\n              <i className=\"fas fa-user\"></i>\r\n              <input type=\"text\" id=\"firstname\" name=\"firstname\" placeholder=\"First Name\" required onChange={this.inputChangeHandler}></input>\r\n            </div>\r\n\r\n            <div className = \"login-input-wrapper\">\r\n              <i className=\"fas fa-user\"></i>\r\n              <input type=\"text\" id=\"lastname\" name=\"lastname\" placeholder=\"Last Name\" required onChange={this.inputChangeHandler}></input>\r\n            </div>\r\n\r\n            <div className = \"login-input-wrapper\">\r\n              <i className=\"fas fa-envelope\"></i>\r\n              <input type=\"email\" id=\"email\" name=\"email\" placeholder=\"Email\" required onChange={this.inputChangeHandler}></input>\r\n            </div>\r\n\r\n            <div className = \"login-input-wrapper\">\r\n              <i className=\"fas fa-user\"></i>\r\n              <input type=\"text\" id=\"username\" name=\"username\" placeholder=\"Username\" minLength=\"3\" maxLength=\"49\" required onChange={this.inputChangeHandler}></input>\r\n            </div>\r\n\r\n            <div className = \"login-input-wrapper\">\r\n              <i className=\"fas fa-lock\"></i>\r\n              <input type=\"password\" id=\"password\" name=\"password\" placeholder=\"Password\" minLength=\"4\" required onChange={this.inputChangeHandler}></input>\r\n            </div>\r\n\r\n            <div className = \"login-input-wrapper\">\r\n              <i className=\"fas fa-lock\"></i>\r\n              <input type=\"password\" id=\"confirmPassword\" name=\"confirmPassword\" placeholder=\"Confirm Password\" required onChange={this.inputChangeHandler}></input>\r\n            </div>\r\n\r\n            {userAuthenticationMethod}\r\n\r\n            <div>\r\n              <p style={{color:'red'}} id = \"errorMessage\" name=\"errorMessage\">{this.state.errorMessage}</p>\r\n            </div>\r\n\r\n            {signUpButton}\r\n\r\n          </form>\r\n\r\n          <p className=\"login-create-account-p\" onClick={this.openLoginForm}>Already have an account? Login <i className=\"far fa-arrow-alt-circle-right\"></i></p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    setGlobalToken,\r\n    setCurrentLoginForm\r\n};\r\n\r\nexport default compose(\r\n    withRouter,\r\n    connect(null, mapDispatchToProps)\r\n)(SignUpForm)\r\n","// returns a promise that on fullfillment returns the object given by objectId\r\nexport function getApiObjectsObjectId(token, server, objectId) {\r\n  return fetch(server + 'api/objects/' + objectId, {\r\n    method: \"GET\",\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': 'Bearer ' + token\r\n    },\r\n  }).then(function(response) {\r\n    if(response.status !== 200){\r\n      console.log(\"Error: \" + server + 'api/objects/' + objectId);\r\n      console.log(response);\r\n    }\r\n    return response.json();\r\n  }).then(function(body) {\r\n    return (body);\r\n  }).catch(function(error) {\r\n    return (\"Error:\", error);\r\n  });\r\n}\r\n","import {getApiObjectsObjectId} from '../api/object.js';\r\n\r\n// adds the notes to the cytoscape graph\r\n// parameters are token, cytoscape instance, cytoscape-supportimage instance, notes map, getApiLinksFromViewId, getApiLinksReadStatus, and getCommunityAuthors results\r\nexport function addNodesToGraph(server, token, nodes, nodeData, authorData){\r\n  var graph_nodes = [];\r\n  for(var i = 0; i < nodeData.length; i++){\r\n    var id = createCytoscapeId(nodes, nodeData[i].to);\r\n\r\n    if(nodeData[i]._to.type === \"Note\" && nodeData[i]._to.title !== \"\" && nodeData[i]._to.status === \"active\"){\r\n      graph_nodes.push(handleNote(id, nodeData[i], authorData));\r\n    } else if(nodeData[i]._to.type === \"Attachment\" && nodeData[i]._to.title !== \"\" && nodeData[i]._to.status === \"active\"){\r\n      graph_nodes.push(handleAttachment(server, token, nodes, nodeData[i], authorData));\r\n    } else if(nodeData[i]._to.type === \"Drawing\" && nodeData[i]._to.title !== \"\" && nodeData[i]._to.status === \"active\"){\r\n      graph_nodes.push(handleDrawing(server, token, nodes, nodeData[i], authorData));\r\n    } else if(nodeData[i]._to.type === \"View\" && nodeData[i]._to.title !== \"\" && nodeData[i]._to.status === \"active\"){\r\n      graph_nodes.push(handleView(nodes, nodeData[i]));\r\n    }\r\n  }\r\n\r\n  return graph_nodes;\r\n}\r\n\r\n\r\n// adds the edges to the cytoscape graph\r\n// parameters are cytoscape instance, notes map, and postApiLinksCommunityIdSearch results\r\nexport function addEdgesToGraph(nodes, edgeData){\r\n  var graph_edges = [];\r\n  for(var i = 0; i < edgeData.length; i++){\r\n    var obj = edgeData[i];\r\n\r\n    if(obj._to.type === \"Note\" && obj._to.status === \"active\" && obj._to.title !== \"\" && obj._from.type === \"Note\" && obj._from.status === \"active\" && obj._from.title !== \"\"){\r\n        var fromCount = nodes.get(obj.from);\r\n        var toCount = nodes.get(obj.to);\r\n        if(fromCount !== 'undefined' && toCount !== 'undefined'){\r\n          for(var j = 0; j < fromCount; j++){\r\n            for(var k = 0; k < toCount; k++){\r\n              graph_edges.push({\r\n                group: 'edges',\r\n                data: {\r\n                  id: obj._id + '-' + (parseInt(j) + 1) + (parseInt(k) + 1),\r\n                  source: obj.from + '-' + (parseInt(j) + 1),\r\n                  target: obj.to + '-' + (parseInt(k) + 1)\r\n                }\r\n              });\r\n            }\r\n          }\r\n        } else {\r\n          console.log(obj.from + \" fromCount: \" + fromCount + \"\\n\" + obj.to + \" toCount: \" + toCount);\r\n        }\r\n    }\r\n  }\r\n  return graph_edges;\r\n}\r\n\r\n\r\n// handles adding notes to the cytoscape instance\r\nfunction handleNote(id, nodeData, authorData){\r\n  var authorName = matchAuthorId(nodeData._to.authors[0], authorData);\r\n  var date = parseDate(nodeData.created);\r\n  var readStatus, type;\r\n\r\n  // handles whether it is a note or a riseabove\r\n  if(nodeData._to.data === undefined){\r\n    readStatus = 'unread-note';\r\n    type = \"note\";\r\n  } else {\r\n    readStatus = 'unread-riseabove';\r\n    type = \"riseabove\";\r\n  }\r\n\r\n  return {\r\n      group: 'nodes',\r\n      data: {\r\n        id: id,\r\n        name: nodeData._to.title,\r\n        author: authorName,\r\n        date: date,\r\n        kfId: nodeData.to,\r\n        type: type\r\n      },\r\n      classes: readStatus,\r\n      position: {\r\n        x: nodeData.data.x,\r\n        y: nodeData.data.y\r\n      }\r\n  };\r\n}\r\n\r\n\r\n// handles adding attachments to the cytoscape instance\r\nfunction handleAttachment(server, token, nodes, nodeData, authorData){\r\n\r\n  var authorName = matchAuthorId(nodeData._to.authors[0], authorData);\r\n  var date = parseDate(nodeData.created);\r\n  var id = createCytoscapeId(nodes, nodeData.to);\r\n\r\n  return getApiObjectsObjectId(token, server, nodeData.to).then(function(result){\r\n    if(String(result.data.type).substring(0,5) === \"image\"){\r\n      var imageUrl =  (server + String(result.data.url).substring(1,)).replace(/\\s/g,\"%20\");\r\n\r\n      if(String(result.data.type).slice(-3) === \"gif\"){\r\n        imageUrl = imageUrl.substring(0, imageUrl.length - 3) + \"mp4\";\r\n      }\r\n\r\n      var bounds = {\r\n        x: nodeData.data.x || 0,\r\n        y: nodeData.data.y || 0,\r\n        width: nodeData.data.width || 0,\r\n        height: nodeData.data.height || 0,\r\n      };\r\n\r\n      return {\r\n        url: imageUrl,\r\n        name: nodeData._to.title,\r\n        bounds: bounds,\r\n        locked: false,\r\n      };\r\n\r\n    } else {\r\n      return {\r\n        group: 'nodes',\r\n        data: {\r\n          id: id,\r\n          name: nodeData._to.title,\r\n          author: authorName,\r\n          date: date,\r\n          kfId: nodeData.to,\r\n          type: nodeData._to.type,\r\n          download: server + result.data.url.substring(1,)\r\n        },\r\n        classes: \"attachment\",\r\n        position: {\r\n          x: nodeData.data.x,\r\n          y: nodeData.data.y\r\n        }\r\n      };\r\n    }\r\n  });\r\n}\r\n\r\n\r\n// handles adding drawings to the cytoscape instance\r\nfunction handleDrawing(server, token, nodes, nodeData, authorData){\r\n\r\n  return getApiObjectsObjectId(token, server, nodeData.to).then(function(result){\r\n    var parser = new DOMParser();\r\n    var doc = parser.parseFromString(result.data.svg, \"image/svg+xml\");\r\n\r\n    // use width and height from svg tag to find the aspect ratio\r\n    var svg_width = doc.childNodes[0].attributes.width.value;\r\n    var svg_height = doc.childNodes[0].attributes.height.value;\r\n    var aspect_ratio = svg_width/svg_height;\r\n\r\n    // use the given width and known aspect ratio to calculate appropiate height for svg\r\n    var node_width = parseInt(nodeData.data.width);\r\n    var node_height = node_width/aspect_ratio;\r\n\r\n    var bounds = {\r\n      x: nodeData.data.x,\r\n      y: nodeData.data.y,\r\n      height: node_height,\r\n      width: parseInt(nodeData.data.width)\r\n    };\r\n\r\n    return {\r\n      url: 'data:image/svg+xml;utf8,' + encodeURIComponent('<?xml version=\"1.0\" encoding=\"UTF-8\"?><!DOCTYPE svg>' + result.data.svg),\r\n      name: nodeData._to.title,\r\n      bounds: bounds,\r\n      locked: false,\r\n    };\r\n\r\n  });\r\n}\r\n\r\n\r\n// handles adding a link to another view\r\nfunction handleView(nodes, nodeData){\r\n  var id = createCytoscapeId(nodes, nodeData.to);\r\n  return {\r\n    group: 'nodes',\r\n    data: {\r\n      id: id,\r\n      name: nodeData._to.title,\r\n      kfId: nodeData.to,\r\n      type: nodeData._to.type,\r\n      communityId: nodeData.communityId,\r\n    },\r\n    classes: \"view\",\r\n    position: {\r\n      x: nodeData.data.x,\r\n      y: nodeData.data.y\r\n    }\r\n  };\r\n}\r\n\r\n\r\n// helper function to find an authors name from their author id using the getCommunityAuthors data\r\nfunction matchAuthorId(authorId, authorsInfo){\r\n    for(let i in authorsInfo){\r\n      if(authorId === authorsInfo[i]._id){\r\n        return authorsInfo[i].firstName + \" \" + authorsInfo[i].lastName;\r\n      }\r\n    }\r\n    return \"Author not found\";\r\n}\r\n\r\n\r\n// helper function to return formatted creation date of a note\r\nfunction parseDate(date){\r\n  var year = date.substring(0, 4);\r\n  var month = date.substring(5, 7);\r\n  var day = date.substring(8, 10);\r\n  var hour = date.substring(11, 13);\r\n  var minute = date.substring(14, 16);\r\n  var second = date.substring(17, 19);\r\n  if(hour < 12){\r\n    return(month + \"/\" + day + \"/\" + year + \", \" + hour + \":\" + minute + \":\" + second + \" AM\");\r\n  } else {\r\n    return(month + \"/\" + day + \"/\" + year + \", \" + (hour - 12) + \":\" + minute + \":\" + second + \" PM\");\r\n  }\r\n}\r\n\r\n\r\n// returns a unique cytoscape id corresponding to the given kf id\r\nfunction createCytoscapeId(nodes, kfId){\r\n  // create the notes unique id\r\n  // example id would be \"5a0497f1ad39ced746109d6e-1\"\r\n  // the number fixed on the end is the count of that id on this view\r\n  if(nodes.has(kfId)){\r\n    nodes.set(kfId, nodes.get(kfId) + 1);\r\n    return kfId + '-' + nodes.get(kfId);\r\n  } else {\r\n    nodes.set(kfId, 1);\r\n    return kfId + '-1';\r\n  }\r\n}\r\n","import React, {Component} from 'react'\r\nimport { connect } from 'react-redux'\r\nimport Cytoscape from 'cytoscape';\r\nimport CytoscapeComponent from 'react-cytoscapejs';\r\nimport CytoscapePanZoom from 'cytoscape-panzoom';\r\nimport CytoscapeNodeHtmlLabel from 'cytoscape-node-html-label';\r\nimport CytoscapeSupportImages from 'cytoscape-supportimages';\r\n\r\nimport { updateViewLink } from './store/async_actions.js'\r\nimport {addNodesToGraph, addEdgesToGraph} from './helper/Graph_helper.js';\r\nimport './css/cytoscape.js-panzoom.css';\r\nimport './css/Graph.css';\r\n\r\nimport unread_note_icon from './assets/icon_note_blue.png';\r\nimport read_note_icon from './assets/icon_note_red.png';\r\nimport unread_riseabove_icon from './assets/icon_riseabove_blue.png';\r\nimport read_riseabove_icon from './assets/icon_riseabove_red.png';\r\nimport attachment_icon from './assets/icon_attachment.gif';\r\nimport view_icon from './assets/icon_view.png';\r\n\r\nimport {MINZOOM, MAXZOOM} from './config.js';\r\n\r\nCytoscape.use(CytoscapePanZoom);\r\nCytoscape.use(CytoscapeNodeHtmlLabel);\r\nCytoscape.use(CytoscapeSupportImages);\r\n\r\nclass Graph extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      elements: {nodes: [], edges: []},\r\n      currViewLinksLength: 0,\r\n    };\r\n\r\n    this.loadElements = this.loadElements.bind(this);\r\n    this.supportImageIsDuplicate = this.supportImageIsDuplicate.bind(this);\r\n    this.compareSupportImages = this.compareSupportImages.bind(this);\r\n    this.findCyElemFromKfId = this.findCyElemFromKfId.bind(this);\r\n    this.updateReadLinks = this.updateReadLinks.bind(this);\r\n    this.focusRecentAddition = this.focusRecentAddition.bind(this);\r\n  };\r\n\r\n  loadElements(prevViewLinksLength) {\r\n      // ensure we have all the informationn needed to render the graph\r\n      if ((this.props.viewLinks.length !== this.state.currViewLinksLength || (this.props.viewLinks.length === 0 && prevViewLinksLength !== undefined))\r\n                                        && this.props.buildsOn.length !== 0 && Object.keys(this.props.authors).length !== 0){\r\n          this.setState({currViewLinksLength: this.props.viewLinks.length});\r\n          const cy = this.cy;\r\n          const si = cy.supportimages();\r\n\r\n          // we keep a map with (key, value) of (kfId, count) in order to create duplicate notes with unique ids\r\n          // simply append the count to the end of their note id\r\n          var nodes = new Map();\r\n\r\n          // clear the support images extension\r\n          si._private.supportImages = [];\r\n\r\n          var graph_nodes = addNodesToGraph(this.props.server, this.props.token, nodes, this.props.viewLinks, this.props.authors);\r\n          var graph_edges = addEdgesToGraph(nodes, this.props.buildsOn);\r\n          var self = this;\r\n\r\n          Promise.all(graph_nodes.concat(graph_edges)).then((graph_results) => {\r\n              var cy_elements = {nodes: [], edges: []};\r\n              for(let i = 0; i < graph_results.length; i++){\r\n                  if(graph_results[i].group === \"nodes\"){\r\n                      cy_elements.nodes.push(graph_results[i]);\r\n                  } else if(graph_results[i].group === \"edges\"){\r\n                      cy_elements.edges.push(graph_results[i]);\r\n                  } else if(graph_results[i].url && !this.supportImageIsDuplicate(si.images(), graph_results[i])){\r\n                      si.addSupportImage(graph_results[i]);\r\n                  }\r\n              }\r\n\r\n              self.setState({elements: cy_elements});\r\n              // support-images extension will not trigger a redraw if there are no images in the view - this line handles that\r\n              if(si.images().length === 0){ si._private.renderer.redraw(); }\r\n              // if a single new element was added to the graph - highlight it\r\n              if(this.props.viewLinks.length === prevViewLinksLength + 1){ this.focusRecentAddition(this.props.viewLinks[this.props.viewLinks.length - 1]); }\r\n\r\n          }).then(() => {\r\n            this.updateReadLinks();\r\n          });\r\n      }\r\n  }\r\n\r\n  // checks if the given image a is already present in the list of support images\r\n  supportImageIsDuplicate(imgs, a){\r\n    for(var i in imgs){\r\n      if(this.compareSupportImages(imgs[i], a)) return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  // returns a deep comparison of two support images\r\n  compareSupportImages(a, b){\r\n    return a.bounds.height === b.bounds.height && a.bounds.width === b.bounds.width && a.bounds.x === b.bounds.x && a.bounds.y === b.bounds.y\r\n        && a.name === b.name && a.url === b.url;\r\n  }\r\n\r\n  findCyElemFromKfId(kfId){\r\n    var cy_elements_nodes = this.state.elements.nodes;\r\n    for(let i = cy_elements_nodes.length - 1; i >= 0; i--){\r\n      if(cy_elements_nodes[i].data.kfId === kfId) return cy_elements_nodes[i];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  updateReadLinks(){\r\n    var cy = this.cy;\r\n    var readLinks = this.props.readLinks;\r\n    for(let i in readLinks){\r\n      var cy_elem = this.findCyElemFromKfId(readLinks[i]);\r\n      if(cy_elem !== null){\r\n        var isRiseAbove = cy.$('#'+cy_elem.data.id).hasClass('unread-riseabove') ? true : false; // the element will either be a riseabove or a regular note\r\n        var classToRemove = isRiseAbove ? 'unread-riseabove' : 'unread-note';\r\n        var classToAdd = isRiseAbove ? 'read-riseabove' : 'read-note';\r\n        cy.$('#'+cy_elem.data.id).removeClass(classToRemove);\r\n        cy.$('#'+cy_elem.data.id).addClass(classToAdd);\r\n      }\r\n    }\r\n  }\r\n\r\n  focusRecentAddition(note){\r\n    var cy = this.cy;\r\n    var kfId = note.to;\r\n    var cyElem = this.findCyElemFromKfId(kfId);\r\n\r\n    if(cyElem !== null){\r\n      cy.center(cyElem);\r\n      cy.$('#'+cyElem.data.id).flashClass('recentAddition', 10000);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    var cy = this.cy;\r\n\r\n    // CYTOSCAPE-PANZOOM EXTENSION\r\n    // the default values of each option are outlined below:\r\n    var defaults = {\r\n      zoomFactor: 0.05, // zoom factor per zoom tick\r\n      zoomDelay: 45, // how many ms between zoom ticks\r\n      minZoom: MINZOOM, // min zoom level\r\n      maxZoom: MAXZOOM, // max zoom level\r\n      fitPadding: 50, // padding when fitting\r\n      panSpeed: 10, // how many ms in between pan ticks\r\n      panDistance: 10, // max pan distance per tick\r\n      panDragAreaSize: 75, // the length of the pan drag box in which the vector for panning is calculated (bigger = finer control of pan speed and direction)\r\n      panMinPercentSpeed: 0.25, // the slowest speed we can pan by (as a percent of panSpeed)\r\n      panInactiveArea: 8, // radius of inactive area in pan drag box\r\n      panIndicatorMinOpacity: 0.5, // min opacity of pan indicator (the draggable nib); scales from this to 1.0\r\n      zoomOnly: false, // a minimal version of the ui only with zooming (useful on systems with bad mousewheel resolution)\r\n      fitSelector: undefined, // selector of elements to fit\r\n      animateOnFit: function(){ // whether to animate on fit\r\n        return false;\r\n      },\r\n      fitAnimationDuration: 1000, // duration of animation on fit\r\n\r\n      // icon class names\r\n      sliderHandleIcon: 'fa fa-minus',\r\n      zoomInIcon: 'fa fa-plus',\r\n      zoomOutIcon: 'fa fa-minus',\r\n      resetIcon: 'fa fa-expand'\r\n    };\r\n\r\n    // add the panzoom control\r\n    cy.panzoom( defaults );\r\n\r\n    // CYTOSCAPE-NODE-HTML-LABEL EXTENSION\r\n    cy.nodeHtmlLabel([\r\n      {\r\n        query: 'node',\r\n        halign: 'center', // title horizontal position. Can be 'left',''center, 'right'\r\n        valign: 'bottom', // title vertical position. Can be 'top',''center, 'bottom'\r\n        halignBox: 'right', // title relative box horizontal position. Can be 'left',''center, 'right'\r\n        valignBox: 'bottom', // title relative box vertical position. Can be 'top',''center, 'bottom'\r\n        cssClass: 'cytoscape-label', // any classes will be as attribute of <div> container for every title\r\n        tpl: function(data){\r\n          // we only want author and creation date listed for notes\r\n          if(data.type === 'note' || data.type === 'riseabove' || data.type === 'Attachment'){\r\n            return '<div>' + data.author + '<br>' + data.date + '</div>';\r\n          } else {\r\n            return '';\r\n          }\r\n        }\r\n      },\r\n    ]);\r\n\r\n    this.loadElements();\r\n\r\n    var ref = this;\r\n    // on single click of node log its kf id and mark it as read\r\n    cy.on('tap', 'node', function(event){\r\n      var kfId = this.data('kfId');\r\n      var type = this.data('type');\r\n\r\n      if(this.hasClass(\"image\")){\r\n        console.log(\"image\");\r\n      } else if(this.hasClass(\"attachment\")){\r\n        console.log(\"attachment\");\r\n      } else if(this.hasClass(\"view\")){\r\n          ref.props.onViewClick(kfId);\r\n      } else {\r\n        if(type === \"riseabove\"){\r\n            this.removeClass(\"unread-riseabove\");\r\n            this.addClass(\"read-riseabove\");\r\n        } else if(type === \"note\"){\r\n            ref.props.onNoteClick(kfId)\r\n            this.removeClass(\"unread-note\");\r\n            this.addClass(\"read-note\");\r\n        }\r\n      }\r\n    });\r\n\r\n      cy.on('dragfree', 'node', (evt) => {\r\n          const {x, y} = evt.target.position();\r\n\r\n          var kfId = evt.target.data().kfId;\r\n\r\n          let viewLink = this.props.viewLinks.filter((link) => link.to === kfId)\r\n          if (viewLink.length) {\r\n              viewLink = viewLink[0];\r\n              const data = {x, y}\r\n              const newViewLink = { ...viewLink }\r\n              newViewLink.data = { ...newViewLink.data, ...data };\r\n              this.props.updateViewLink(newViewLink)\r\n          }\r\n      })\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n      //If any prop is updated, re-load elements\r\n      if (this.props.viewId !== prevProps.viewId || this.props.buildsOn !== prevProps.buildsOn\r\n                          || this.props.authors !== prevProps.authors || this.props.viewLinks !== prevProps.viewLinks || this.props.readLinks !== prevProps.readLinks){\r\n          this.loadElements(prevProps.viewLinks.length);\r\n      }\r\n  }\r\n\r\n  render() {\r\n    return(\r\n          <CytoscapeComponent\r\n          cy={(cy) => { this.cy = cy }}\r\n          style={ { width: '100%', height: '100%' } }\r\n          elements={CytoscapeComponent.normalizeElements(this.state.elements)}\r\n          stylesheet={ [\r\n            {\r\n              selector: 'node',\r\n              style: {\r\n                'label': \"data(name)\",\r\n                'font-size': '11px',\r\n                'text-halign': 'right',\r\n                'text-valign': 'center',\r\n                'text-margin-x': '-5',\r\n                'padding': '0',\r\n                'background-opacity': '0',\r\n                'background-clip': 'none',\r\n                'background-width': '15px',\r\n                'background-height': '15px',\r\n              }\r\n            },\r\n            {\r\n              selector: 'edge',\r\n              style: {\r\n                'width': 1,\r\n                'line-color': '#29648f',\r\n                'target-arrow-color': '#29648f',\r\n                'target-arrow-shape': 'triangle',\r\n                'curve-style': 'bezier'\r\n              }\r\n            },\r\n\r\n            {selector: '.unread-note', style: {'background-image': [unread_note_icon]}},\r\n            {selector: '.read-note', style: {'background-image': [read_note_icon]}},\r\n            {selector: '.unread-riseabove', style: {'background-image': [unread_riseabove_icon]}},\r\n            {selector: '.read-riseabove', style: {'background-image': [read_riseabove_icon]}},\r\n            {selector: '.attachment', style: {'background-image': [attachment_icon]}},\r\n            {selector: '.view', style: {'background-image': [view_icon]}},\r\n            {selector: '.image', style: {'label': ''}},\r\n            {selector: '.drawing', style: {'label': ''}},\r\n            {\r\n              selector: '.recentAddition',\r\n              style: {\r\n                'border-style': 'solid',\r\n                'border-width': '2',\r\n                'border-color': 'red',\r\n              }\r\n            },\r\n          ] }\r\n          layout={ {name: 'grid'} }\r\n          hideEdgesonViewport={ false }\r\n          autolock={ false }\r\n          wheelSensitivity={ 0.15 }\r\n          minZoom={ MINZOOM }\r\n          maxZoom={ MAXZOOM }\r\n          />\r\n          );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        token: state.globals.token,\r\n        server: state.globals.currentServer,\r\n        viewId: state.globals.viewId,\r\n        view: state.globals.view,\r\n        author: state.globals.author,\r\n        authors: state.users,\r\n        viewNotes: state.notes.viewNotes,\r\n        viewLinks: state.notes.viewLinks,\r\n        readLinks: state.notes.readLinks,\r\n        buildsOn: state.notes.buildsOn,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    updateViewLink\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(Graph)\r\n","import * as api from './api.js'\r\nimport { addViewLink, addViewNote } from './noteReducer.js'\r\n\r\nexport const updateViewLink = (link) => async (dispatch, getState) => {\r\n    await api.putLink(link._id, link);\r\n}\r\n\r\n//When new view link received, add/update to store, fetch\r\nexport const onViewLink = (link) => async (dispatch, getState) => {\r\n    const viewId = getState().globals.viewId;\r\n    if (viewId === link.from){\r\n        dispatch(addViewLink(link));\r\n        if (link._to.type === \"Note\"){\r\n            const note = await api.getObject(link.to)\r\n            dispatch(addViewNote(note))\r\n        }\r\n    }\r\n}\r\n","import React, {Component} from 'react';\r\nimport {withRouter} from 'react-router';\r\nimport { connect } from 'react-redux';\r\nimport { compose } from 'redux';\r\nimport { Modal, Button } from 'react-bootstrap';\r\nimport LoginForm from './LoginForm';\r\nimport SignUpForm from './SignUpForm';\r\nimport Graph from './GraphView';\r\nimport $ from 'jquery';\r\nimport '../node_modules/bootstrap/dist/js/bootstrap.bundle.min.js';\r\nimport {getUserToken} from './api/user.js';\r\n\r\nimport './css/Login.css';\r\nimport sample_view from './assets/sample_view.gif';\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      demoToken: null,\r\n      demoServer: \"https://kf6-stage.ikit.org/\",\r\n      demoCommunityId: \"5ea995a6cbdc04a6f53a1b5c\",\r\n      demoViewId: \"5ea995a7cbdc04a6f53a1b5f\",\r\n      showModal: false,\r\n    }\r\n\r\n    this.handleShow = this.handleShow.bind(this);\r\n    this.handleClose = this.handleClose.bind(this);\r\n  }\r\n\r\n  handleShow(){\r\n    this.setState({showModal: true});\r\n    var ref = this;\r\n    var demoTokenPromise = getUserToken(\"demo1\", \"demo1\", this.state.demoServer);\r\n    demoTokenPromise.then(function(result) {\r\n      ref.setState({demoToken: result.token});\r\n    });\r\n  }\r\n\r\n  handleClose(){\r\n    this.setState({showModal: false});\r\n  }\r\n\r\n  componentDidMount(){\r\n    // enables the popover for refreshing servers on login tool tip\r\n    $('[data-toggle=\"tooltip\"]').tooltip()\r\n    $('[data-toggle=\"popover\"]').popover()\r\n    if($(window).width() <= 768) {\r\n      document.getElementById(\"popover\").setAttribute(\"data-trigger\", \"focus\");\r\n    }\r\n  }\r\n\r\n  render() {\r\n    let formToRender;\r\n    if(this.props.currentLoginForm === \"Login\"){\r\n      formToRender = <LoginForm></LoginForm>;\r\n    } else if(this.props.currentLoginForm === \"SignUp\"){\r\n      formToRender = <SignUpForm></SignUpForm>;\r\n    }\r\n\r\n    return(\r\n      <div className='container-fluid login-main'>\r\n\r\n        <div className = \"row login-row\">\r\n\r\n            <div className = \"col-md-6 login-col login\" id = \"login\">\r\n              {formToRender}\r\n            </div>\r\n\r\n\r\n            <div className = \"col-md-6 login-about\">\r\n\r\n              <div className = \"login-about-wrapper\">\r\n                <h1>What is knowledgeforum.org?</h1>\r\n                <p>A knowledge forum is an electronic group workspace designed to support the process of knowledge building.\r\n                    There are multiple installations of knowledge forums hosted by many universities and private entities all over the world.\r\n                    Knowledgeforum.org unites all of these installations and hence the stakeholders to help confluence knowledge building research,\r\n                    widen the reach of the tool & provide a central location for all global stakeholders.</p>\r\n\r\n                  <div className=\"login-overlay-container login-demo-image\" onClick={this.handleShow} id=\"demo-image-container\">\r\n                    <img className=\"d-block w-100\" src={sample_view} alt={\"First slide\"}></img>\r\n                    <div className=\"login-overlay\">\r\n                        <div className=\"login-overlay-text\">Demo a Knowledge Forum</div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <Modal dialogClassName=\"login-modal-dialog\" /*show={this.state.showModal}*/ onHide={this.handleClose}>\r\n                    <Modal.Header closeButton>\r\n                      <Modal.Title>Knowledge Forum Demo</Modal.Title>\r\n                    </Modal.Header>\r\n                    <Modal.Body className=\"login-modal-body\">\r\n                      <Graph style={{width: '100%', height: '100%'}} token={this.state.demoToken} server={this.state.demoServer} communityId={this.state.demoCommunityId} viewId={this.state.demoViewId}/>\r\n                    </Modal.Body>\r\n                    <Modal.Footer>\r\n                      <Button variant=\"primary\" onClick={this.handleClose} className=\"login-modal-btn\">\r\n                        Close\r\n                      </Button>\r\n                    </Modal.Footer>\r\n                </Modal>\r\n\r\n              </div>\r\n            </div>\r\n\r\n\r\n          </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        currentLoginForm: state.globals.currentLoginForm,\r\n    }\r\n}\r\n\r\nexport default compose(\r\n    withRouter,\r\n    connect(mapStateToProps, null)\r\n)(Login)\r\n","/*\r\n* THIS FILE PROVIDES HELPER FUNCTIONS FOR LOGIN COMPONENT\r\n*/\r\nimport {getServerName} from '../config.js';\r\nimport {extractTokenFromStorage} from '../config.js';\r\nimport {getUserInfo} from '../api/user.js';\r\nimport {getUserCommunities} from '../api/user.js';\r\nimport {getCommunities} from '../api/community.js';\r\nimport {postCommunityRegistration} from '../api/community.js';\r\n\r\n// adds the users servers to the side bar\r\nexport function appendUserServers(dashboard_component){\r\n  var uname = localStorage.getItem(\"Username\");\r\n  var data = JSON.parse(localStorage.getItem(uname));\r\n  var servers = [];\r\n\r\n  dashboard_component.setState({username: uname});\r\n\r\n  for(var i = 0; i < data.length; i++){\r\n    var serverName = getServerName(data[i][0]);\r\n\r\n    // set the last active server as the default\r\n    if(data[i][2] === \"active\"){\r\n      dashboard_component.setState({currentServerURL: data[i][0]});\r\n      dashboard_component.setState({currentServerName: getServerName(data[i][0])});\r\n      dashboard_component.setState({token: data[i][1]});\r\n      servers.push({\r\n        name: serverName,\r\n        class: 'active',\r\n        url: data[i][0]\r\n      });\r\n      loadServer(data[i][0], dashboard_component);\r\n    } else {\r\n      servers.push({\r\n        name: serverName,\r\n        class: '',\r\n        url: data[i][0]\r\n      });\r\n    }\r\n  }\r\n\r\n  dashboard_component.setState({serverList: servers});\r\n}\r\n\r\n\r\n// replaces the \"join community\" and \"my knowledge building communities\" sections\r\n// with the relevant information for the specified server\r\nexport function loadServer(server, dashboard_component){\r\n  var token = extractTokenFromStorage(server);\r\n\r\n  // LOAD USER COMMUNITY DATA AND UPDATE REACT STATE\r\n  var userCommunitiesData = getUserCommunities(token, server);\r\n  userCommunitiesData.then(function(result) {\r\n    result.sort((a, b) => compareStrings(a._community.title, b._community.title));\r\n    updateUserCommunities(result, server, dashboard_component);\r\n  });\r\n\r\n  // LOAD USER DATA AND UPDATE REACT STATE\r\n  var userInfo = getUserInfo(token, server);\r\n  userInfo.then(function(result) {\r\n    if(result.error === true){\r\n      tokenErrorHandler();\r\n    } else {\r\n      dashboard_component.setState({name: result.firstName + ' ' + result.lastName});\r\n      dashboard_component.setState({userId: result._id});\r\n    }\r\n\r\n  });\r\n\r\n  // LOAD SERVER COMMUNITY DATA AND UPDATE REACT STATE\r\n  var serverCommunitiesData = getCommunities(token, server);\r\n  serverCommunitiesData.then(function(result) {\r\n    result.sort((a, b) => compareStrings(a.title, b.title));\r\n    updateCommunities(result, dashboard_component);\r\n  });\r\n\r\n}\r\n\r\n// updates the server community data react state\r\nfunction updateCommunities(result, dashboard_component){\r\n  var serverCommunityData = [];\r\n  for(var i = 0; i < result.length; i++){\r\n    var title = result[i].title;\r\n    var communityId = result[i]._id;\r\n    serverCommunityData.push({title: title, communityId: communityId});\r\n  }\r\n\r\n  const community_options = serverCommunityData.map(c => ({\r\n    \"value\": c.communityId,\r\n    \"label\": c.title\r\n  }));\r\n\r\n  dashboard_component.setState({serverCommunityData: community_options});\r\n}\r\n\r\n\r\n// updates the user community data react state\r\nfunction updateUserCommunities(data, server, dashboard_component) {\r\n  var userCommunityData = [];\r\n\r\n  // for loop to append the users communities\r\n  for(var i = 0; i < data.length; i++){\r\n    if(data[i] && data[i]._id){\r\n      userCommunityData.push({\r\n          title: data[i]._community.title,\r\n          server: dashboard_component.state.currentServerURL,\r\n          token: dashboard_component.state.token,\r\n          communityId: data[i].communityId\r\n      });\r\n    }\r\n  }\r\n\r\n  dashboard_component.setState({userCommunityData: userCommunityData});\r\n}\r\n\r\n\r\n// registers the user for a community\r\nexport function joinCommunity(userId, server, registrationKey, communityId, dashboard_component){\r\n  var token = extractTokenFromStorage(server);\r\n  var ref = dashboard_component;\r\n  var promise = postCommunityRegistration(token, communityId, server, userId, registrationKey);\r\n  promise.then(result => {\r\n    if(result[0].error){\r\n      document.getElementById('communityKey').value = '';\r\n      ref.setState({joinCommunityErrorMessage: \"Registration key does not match or you are already registered.\"});\r\n    }\r\n    else {\r\n      document.getElementById('communityKey').value = '';\r\n      loadServer(server, ref);\r\n    }\r\n  })\r\n}\r\n\r\n\r\n// function to handle an expired/invalid user token\r\n// called if response status is 401 (might be errors other than invalid token)\r\nfunction tokenErrorHandler(){\r\n  alert(\"User authorization token expired\");\r\n  logout();\r\n}\r\n\r\n\r\n// clears local storage of the username and their user tokens and redircts to the login page\r\nexport function logout(dashboard_component){\r\n  var uname = localStorage.getItem(\"Username\");\r\n  var userinfo = JSON.parse(localStorage.getItem(uname));\r\n\r\n  if(uname === null || userinfo === null){\r\n    localStorage.clear();\r\n  } else {\r\n    for(var i in userinfo){\r\n      userinfo[i][1] = \"\";\r\n    }\r\n    localStorage.setItem(uname, JSON.stringify(userinfo));\r\n    localStorage.removeItem(\"Username\");\r\n  }\r\n\r\n  dashboard_component.props.history.push('/');\r\n}\r\n\r\n\r\n// function to add to buttons to toggle the side bar\r\nexport function toggleSidebar(){\r\n  var div = document.getElementById('wrapper');\r\n  if (div.className === \"d-flex\") {\r\n    div.className = \"d-flex toggled\";\r\n  } else {\r\n    div.className = \"d-flex\";\r\n  }\r\n}\r\n\r\n\r\n// function to return which string is higher alphabetically\r\n// 1 if a is higher, -1 if b is higher, 0 if a == b\r\nfunction compareStrings(a, b){\r\n    if(a.toLowerCase() < b.toLowerCase()) { return -1; }\r\n    if(a.toLowerCase() > b.toLowerCase()) { return 1; }\r\n    return 0;\r\n}\r\n","// returns a promise that on fullfillment returns all the communities from the specified server\r\nexport function getCommunities(token, server) {\r\n  return fetch(server + 'api/communities', {\r\n    method: \"GET\",\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': 'Bearer ' + token\r\n    },\r\n  }).then(function(response) {\r\n      if(response.status !== 200){\r\n        console.log(\"Error: \" + server + 'api/communities');\r\n        console.log(response);\r\n      }\r\n      return response.json();\r\n  }).then(function(body) {\r\n      return (body);\r\n  }).catch(function(error) {\r\n      return (\"Error:\", error);\r\n  });\r\n}\r\n\r\n\r\n// returns a promise that on fullfillment returns all the views from the specified community on the specified server\r\nexport function getCommunityViews(token, communityId, server){\r\n  return fetch(server + 'api/communities/' + communityId + '/views', {\r\n    method: \"GET\",\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': 'Bearer ' + token\r\n    },\r\n  }).then(function(response) {\r\n      if(response.status !== 200){\r\n        console.log(\"Error: \" + server + 'api/communities/' + communityId + '/views');\r\n        console.log(response);\r\n      }\r\n      return response.json();\r\n  }).then(function(body) {\r\n      return (body);\r\n  }).catch(function(error) {\r\n      return (\"Error:\", error);\r\n  });\r\n}\r\n\r\n\r\n// returns a promise that on fullfillment returns the welcome view from the specified community on the specified server\r\nexport function getCommunityWelcomeView(token, communityId, server){\r\n  return fetch(server + 'api/communities/' + communityId + '/views', {\r\n    method: \"GET\",\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': 'Bearer ' + token\r\n    },\r\n  }).then(function(response) {\r\n      if(response.status !== 200){\r\n        console.log(\"Error: \" + server + 'api/communities/' + communityId + '/views');\r\n        console.log(response);\r\n      }\r\n      return response.json();\r\n  }).then(function(body) {\r\n      return (body[0]);\r\n  }).catch(function(error) {\r\n      return (\"Error:\", error);\r\n  });\r\n}\r\n\r\n\r\n// returns a promise that on fullfillment returns the authors from the specified community on the specified server\r\nexport function getCommunityAuthors(token, communityId, server){\r\n  return fetch(server + 'api/communities/' + communityId + '/authors', {\r\n    method: \"GET\",\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': 'Bearer ' + token\r\n    },\r\n  }).then(function(response) {\r\n    if(response.status !== 200){\r\n      console.log(\"Error: \" + server + 'api/communities/' + communityId + '/authors');\r\n      console.log(response);\r\n    }\r\n    return response.json();\r\n  }).then(function(body) {\r\n    return (body);\r\n  }).catch(function(error) {\r\n    return (\"Error:\", error);\r\n  });\r\n}\r\n\r\n\r\n// registers a given user to the specified community on the specified server\r\nexport function postCommunityRegistration(token, communityId, server, userId, registrationKey){\r\n  var body = {\r\n    'communityId': communityId,\r\n    'registrationKey': registrationKey,\r\n    'userId': userId\r\n  };\r\n\r\n  return fetch(server + 'api/authors', {\r\n    method: \"POST\",\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': 'Bearer ' + token\r\n    },\r\n    body: JSON.stringify(body),\r\n  }).then(function(response) {\r\n      if(response.status !== 200){\r\n        console.log(\"Error: \" + server + 'api/authors');\r\n        console.log(response);\r\n      }\r\n      return response.json();\r\n  }).then(function(body) {\r\n      return (\"Success:\", [body, server]);\r\n  }).catch(function(error) {\r\n      return (\"Error:\", error);\r\n  });\r\n}\r\n","import React, {Component} from 'react';\r\nimport { connect } from 'react-redux'\r\nimport Select from 'react-select';\r\n\r\nimport { setGlobalToken, setCurrentServer, setCommunityId, setViewId, fetchLoggedUser } from './store/globalsReducer.js';\r\n\r\nimport $ from 'jquery';\r\nimport { setToken, setServer } from './store/api';\r\nimport { getCommunityWelcomeView } from './api/community.js';\r\nimport { appendUserServers, loadServer, joinCommunity, toggleSidebar, logout } from './helper/Dashboard_helper.js';\r\nimport { getServerURL } from './config.js';\r\n\r\nimport './css/Dashboard.css';\r\n\r\nclass Dashboard extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      token: null,\r\n      username: null,\r\n      name: null,\r\n      userId: null,\r\n      currentServerURL: null,\r\n      currentServerName: null,\r\n      serverList: [],\r\n      userCommunityData: [],\r\n      serverCommunityData: [],\r\n      selectedCommunityToJoin: null,\r\n      communityRegistrationKey: null,\r\n      joinCommunityErrorMessage: null,\r\n      viewType: {value: 'Classic', label: 'Classic'}\r\n    }\r\n\r\n    this.enterCommunity = this.enterCommunity.bind(this);\r\n  }\r\n\r\n  inputChangeHandler = (event) => {\r\n    let name = event.target.name;\r\n    let value = event.target.value;\r\n    this.setState({[name]: value});\r\n  }\r\n\r\n  serverSelectHandler = (event) => {\r\n    var domElement = event.target;\r\n    var serverName = event.target.innerText;\r\n    var serverURL = getServerURL(event.target.innerText);\r\n    var serverTokenPairs = JSON.parse(localStorage.getItem(this.state.username));\r\n\r\n    this.setState({currentServerURL: getServerURL(serverName)});\r\n    this.setState({currentServerName: serverName});\r\n\r\n    // handles active tag in html\r\n    $(domElement).addClass('active').siblings().removeClass('active');\r\n\r\n    // handles the active tag in local storage\r\n    var activeServerURL = getServerURL(serverName);\r\n    var serverTokenPair = [];\r\n    for(var i in serverTokenPairs){\r\n      var server = serverTokenPairs[i][0];\r\n      var token = serverTokenPairs[i][1];\r\n      var status = (server === activeServerURL) ? \"active\" : \"inactive\";\r\n      if(server === activeServerURL) { this.setState({token: serverTokenPairs[i][1]}); }\r\n      serverTokenPair.push([server, token, status]);\r\n    }\r\n    localStorage.setItem(this.state.username, JSON.stringify(serverTokenPair));\r\n\r\n    // loads the server specific data\r\n    loadServer(serverURL, this);\r\n  }\r\n\r\n  handleViewChange = (event) => {\r\n    this.setState({viewType: {value: event.value, label: event.label}});\r\n  }\r\n\r\n  handleCommunityDropDownChange = (event) => {\r\n    this.setState({selectedCommunityToJoin: {value: event.value, label: event.label}});\r\n  }\r\n\r\n  enterCommunity(c){\r\n    var welcomeViewId = getCommunityWelcomeView(c.token, c.communityId, c.server);\r\n    var self = this;\r\n\r\n    welcomeViewId.then(function(response){\r\n      if(self.state.viewType.value === \"Classic\") {\r\n        var aTag = document.createElement('a');\r\n        aTag.href = c.server + 'auth/jwt?token=' + c.token + '&redirectUrl=/view/' + response._id;\r\n        aTag.target = \"_blank\";\r\n        document.body.appendChild(aTag);\r\n        aTag.click();\r\n      } else if(self.state.viewType.value === \"Enhanced\" || self.state.viewType.value === \"Light\") {\r\n        setServer(c.server);\r\n        setToken(c.token);\r\n        sessionStorage.setItem('token', c.token);\r\n        sessionStorage.setItem('communityId', c.communityId);\r\n        sessionStorage.setItem('viewId', response._id);\r\n        self.props.setGlobalToken(c.token);\r\n        self.props.fetchLoggedUser();\r\n        self.props.setCommunityId(c.communityId);\r\n        self.props.setViewId(response._id);\r\n        self.props.setCurrentServer(c.server);\r\n        self.props.history.push({\r\n          pathname: `/view/${response._id}`,\r\n          state: { currentView: self.state.viewType.value, communityTitle: c.title }\r\n        });\r\n      }\r\n\r\n    }).catch(function(error){\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    appendUserServers(this);\r\n  }\r\n\r\n  render(){\r\n    return (\r\n      <div className=\"d-flex\" id=\"wrapper\">\r\n\r\n        <div className=\"sidebar-custom dashboard-sidebar-custom\" id=\"sidebar-wrapper\">\r\n          <h1 className=\"sidebar-heading dashboard-sidebar-heading\">Your Servers:</h1>\r\n          <div className=\"list-group list-group-flush\">\r\n            <ul className = \"dashboard-server-list\" id = \"server-list\">{this.state.serverList.map((s) =>\r\n                    <li key={s.name} onClick={this.serverSelectHandler} className={s.class}>{s.name}</li>)}</ul>\r\n            <div className=\"dashboard-viewDropDownContainer\">\r\n              <p>View Type:</p>\r\n              <Select isSearchable={false}\r\n                      value = {this.state.viewType}\r\n                      onChange = {this.handleViewChange}\r\n                      options={[\r\n                        { value: 'Classic', label: 'Classic' },\r\n                        { value: 'Enhanced', label: 'Enhanced' },\r\n                        { value: 'Light', label: 'Light' },\r\n                      ]} />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div id=\"page-content-wrapper\">\r\n\r\n          <nav className=\"navbar navbar-expand-lg navbar-light bg-light border-bottom dashboard-navbar\">\r\n            <button className=\"d-none d-md-block btn btn-primary dashboard-select-server\" id=\"menu-toggle\" onClick={toggleSidebar}>Select Server</button>\r\n            <button className=\"d-md-none btn btn-primary dashboard-select-server\" id=\"menu-toggle\" onClick={toggleSidebar}><i className=\"fas fa-server\"></i></button>\r\n            <div className=\"dashboard-currentInfo\" id=\"currentInfo\">{this.state.name}<div></div>{this.state.currentServerName}</div>\r\n\r\n            <button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n              <span className=\"navbar-toggler-icon\"></span>\r\n            </button>\r\n\r\n            <div className=\"collapse navbar-collapse\" id=\"navbarSupportedContent\">\r\n              <ul className=\"navbar-nav ml-auto mt-2 mt-lg-0\">\r\n                <li className=\"nav-item\">\r\n                  <button className=\"nav-link dashboard-nav-link btn btn-link\" href=\"\" id=\"logout\" onClick={() => logout(this)}>Logout</button>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </nav>\r\n\r\n          <div className=\"container-fluid\">\r\n            <div className = \"row\">\r\n\r\n              <div className = \"col-md-6 dashboard-mainContentCol\">\r\n                <h1>My Knowledge Building Communities</h1>\r\n                <table className=\"dashboard-userCommunities table\" id = \"userCommunities\">\r\n                  <tbody>\r\n                    {this.state.userCommunityData.map((c) => {\r\n                        return(\r\n                          <tr key={c.communityId} onClick={() => this.enterCommunity(c)}>\r\n                            <td className=\"dashboard-userCommunities-row\">\r\n                              {c.title}<button className=\"dashboard-enterButton\" type=\"button\"><i className=\"fas fa-door-open\"></i></button>\r\n                            </td>\r\n                          </tr>)\r\n                    })}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n\r\n              <div className = \"col-md-6 dashboard-mainContentCol\">\r\n                <h1>Join Community</h1>\r\n                <form className=\"col-lg-8 col-md-10 col-sm-12 dashboard-joinCommunityForm\" id = \"joinCommunityForm\" autoComplete=\"off\">\r\n\r\n                  <label htmlFor=\"server\">Community:</label><br></br>\r\n                  <Select value={this.state.selectedCommunityToJoin}\r\n                          className=\"dashboard-communityChoiceDropdown\"\r\n                          id=\"communityChoiceDropdown\"\r\n                          options={this.state.serverCommunityData}\r\n                          onChange={this.handleCommunityDropDownChange}\r\n                          required>\r\n                  </Select><br></br>\r\n\r\n                  <label htmlFor=\"communityKey\">Community Registration Key:</label><br></br>\r\n                  <input className=\"dashboard-communityKeyInput\" type=\"text\" id=\"communityKey\" name=\"communityRegistrationKey\" required onChange={this.inputChangeHandler}></input><br></br>\r\n\r\n                  <div>\r\n                    <p style={{color: 'red'}} id = \"errorMessage\">{this.state.joinCommunityErrorMessage}</p>\r\n                  </div>\r\n\r\n                  <input className = \"dashboard-joinButton\" type=\"button\" value=\"Join\"\r\n                      onClick={() => joinCommunity(this.state.userId, this.state.currentServerURL, this.state.communityRegistrationKey, this.state.selectedCommunityToJoin.value, this)} id=\"joinCommunityButton\"></input>\r\n\r\n                </form>\r\n              </div>\r\n\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n\r\n\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    setGlobalToken,\r\n    setCurrentServer,\r\n    setCommunityId,\r\n    setViewId,\r\n    fetchLoggedUser,\r\n}\r\n\r\nexport default connect(\r\n    null,\r\n    mapDispatchToProps,\r\n)(Dashboard)\r\n","import React, { Component } from 'react'\r\nimport { Navbar, Nav, Button } from 'react-bootstrap'\r\nimport { Col, Form, FormGroup, Input } from 'reactstrap'\r\nimport { connect } from 'react-redux'\r\nimport { withRouter } from 'react-router'\r\n\r\nimport { removeToken } from '../store/api.js'\r\nimport { setViewId, setGlobalToken } from '../store/globalsReducer'\r\n\r\nclass TopNavbar extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  logout() {\r\n    sessionStorage.clear();\r\n    removeToken()//remove token from api header\r\n    setGlobalToken(null)//Remove token from store\r\n  }\r\n\r\n  handleChange(e) {\r\n    /* e.persist(); */\r\n    const viewId = e.target.value;\r\n    this.props.onViewClick(viewId);\r\n    // this.props.setViewId(viewId);\r\n    // //TODO EMPTY CHECKEDNOTES\r\n    // this.props.history.push(`/view/${viewId}`)\r\n  }\r\n\r\n  signUp = (e) => {\r\n    this.props.history.push(\"/signup\");\r\n  }\r\n\r\n\r\n  render() {\r\n    const isLoggedIn = this.props.isAuthenticated\r\n    const userName = this.props.user ? `${this.props.user.firstName} ${this.props.user.lastName}` : null\r\n    const isViewUrl = this.props.location.pathname.startsWith('/view/')\r\n    return (\r\n      <Navbar className=\"viewNavBar\">\r\n        <Navbar.Brand className=\"viewNavBar-brand\">{this.props.communityTitle}</Navbar.Brand>\r\n        {isViewUrl ?\r\n          (\r\n            <Nav className=\"mr-auto\">\r\n              {this.props.view ?\r\n                <Form className=\"mrg-1-top\">\r\n                  <Col>\r\n                    <FormGroup>\r\n                      <Input type=\"select\" name=\"viewId\" value={this.props.view._id} onChange={this.handleChange}>\r\n                        {\r\n                          this.props.views.map((obj) => {\r\n                            return <option key={obj._id} value={obj._id}> {obj.title} </option>\r\n                          })\r\n                        }\r\n                      </Input>\r\n                    </FormGroup>\r\n                  </Col>\r\n                </Form>\r\n                : null}\r\n            </Nav>\r\n          )\r\n          : null}\r\n\r\n        {isLoggedIn ? (\r\n          <>\r\n            <Nav className=\"ml-auto\">\r\n              <Nav.Link className=\"white mr-auto\"> {userName} </Nav.Link>\r\n              <Button className='ml-2 viewNavBar-logout-btn' href=\"/\" onClick={this.logout}>Logout</Button>\r\n            </Nav>\r\n          </>\r\n        ) :\r\n          <>\r\n            <Nav className=\"ml-auto\">\r\n              <Nav.Link onClick={this.signUp}>Signup</Nav.Link>\r\n              <Nav.Link href=\"/\">Login</Nav.Link>\r\n            </Nav>\r\n          </>\r\n        }\r\n\r\n      </Navbar>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n  return {\r\n    communityId: state.globals.communityId,\r\n    viewId: state.globals.viewId,\r\n    isAuthenticated: state.globals.isAuthenticated,\r\n    user: state.globals.author,\r\n    views: state.globals.views,\r\n    view: state.globals.view\r\n  }\r\n}\r\nconst mapDispatchToProps = {\r\n  setViewId,\r\n  setGlobalToken\r\n}\r\n\r\nexport default withRouter(connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(TopNavbar));\r\n","let authorRequirementTable = {\r\n    private: {\r\n        r: true,\r\n        w: true\r\n    },\r\n    protected: {\r\n        r: false,\r\n        w: true\r\n    },\r\n    public: {\r\n        r: false,\r\n        w: false\r\n    }\r\n};\r\n\r\nexport let fullfillRequirement = (object, author, requiredPermission) => {\r\n    if (!object || !author) {\r\n        return false;\r\n    }\r\n\r\n    if (author.role === 'manager') {\r\n        return true;\r\n    }\r\n\r\n    if (authorRequirementTable[object.permission][requiredPermission] === false) {\r\n        return true;\r\n    }\r\n\r\n    //author requirement\r\n    return isAuthorOrGroupMember(object, author);\r\n};\r\n\r\nexport let isAuthorOrGroupMember = (object, author) => {\r\n    return isAuthor(object, author) || isGroupMember(object, author);\r\n};\r\n\r\nexport let isAuthor = (object, author) => {\r\n    return object.authors.includes(author._id)\r\n};\r\n\r\nexport let isGroupMember = (object, author) => {\r\n    if (!object._groupMembers) {\r\n        return false;\r\n    }\r\n    return object._groupMembers.includes(author._id)    \r\n};\r\n\r\nexport let isManager = function(author) {\r\n    if (!author) {\r\n        return false;\r\n    }\r\n    return author.role === 'manager';\r\n};\r\n\r\nexport let isEditable = (object, author) => {\r\n    return fullfillRequirement(object, author, 'w')\r\n};","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Button, Row, Col, } from 'react-bootstrap';\r\nimport { Form, FormGroup, Input, Alert } from 'reactstrap';\r\nimport { dateFormatOptions } from '../../store/globalsReducer'\r\nimport Axios from 'axios';\r\n\r\nimport './NoteContent.css';\r\nimport { url, apiUrl } from '../../store/api.js'\r\nimport * as access from '../../store/access'\r\nimport { openContribution, updateCheckedNotes } from '../../store/noteReducer'\r\nimport { fetchViewCommunityData } from '../../store/globalsReducer'\r\nimport { createRiseAbove } from '../../store/riseAboveReducer'\r\n\r\nclass NoteContent extends Component {\r\n    noteList = [];\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            token: sessionStorage.getItem('token'),\r\n            addView: this.props.viewId,\r\n            communityId: sessionStorage.getItem('communityId'),\r\n            visible: false,\r\n            viewError: false,\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n\r\n        this.handleRiseAbove = this.handleRiseAbove.bind(this);\r\n        this.getRiseAboveNotes = this.getRiseAboveNotes.bind(this);\r\n        this.openNote = this.openNote.bind(this);\r\n        this.editNote = this.editNote.bind(this);\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n    }\r\n\r\n    handleChange(e) {\r\n        e.persist();\r\n        let target = e.target;\r\n        let id = target.value;\r\n\r\n        this.setState({\r\n            addView: id,\r\n        });\r\n\r\n    }\r\n\r\n    // CREATE VIEW->NOTE LINK\r\n    handleSubmit = (e) => {\r\n        if (this.props.viewId === this.state.addView) {\r\n            this.setState({\r\n                viewError: true,\r\n            })\r\n            window.setTimeout(() => {\r\n                this.setState({ viewError: false })\r\n            }, 1500)\r\n        }\r\n        else {\r\n            const topleft = { x: 1000, y: 1000 };\r\n            let url = `${apiUrl}/links`;\r\n            let config = {\r\n                headers: { Authorization: `Bearer ${this.state.token}` }\r\n            };\r\n            this.props.checkedNotes.forEach(note => {\r\n                const ref = this.props.viewLinks.filter((lnk) => lnk.to === note._id)[0]\r\n                topleft.x = Math.min(topleft.x, ref.data.x);\r\n                topleft.y = Math.min(topleft.y, ref.data.y);\r\n            })\r\n            this.props.checkedNotes.forEach(note => {\r\n                let noteId = note._id;\r\n                let query = {\r\n                    \"from\": this.state.addView,\r\n                    \"to\": noteId,\r\n                    \"type\": \"contains\",\r\n                    'data': topleft\r\n                };\r\n                Axios.post(url, query, config).then(\r\n                    res => {\r\n                        this.setState({ visible: true }, () => {\r\n                            window.setTimeout(() => {\r\n                                this.setState({ visible: false })\r\n                            }, 1000)\r\n                        });\r\n\r\n                    }\r\n                );\r\n            });\r\n        }\r\n        // TODO POST LINKS ALERT THEY'RE ADDED TO VIEW TITLE\r\n\r\n    }\r\n\r\n    handleRiseAbove = async (e) => {\r\n        let noOfNotes = this.props.checkedNotes.length;\r\n        //IF CHECKED NOTES\r\n        if (noOfNotes > 0) {\r\n            let confirmation = window.confirm(\"Are you sure to create riseabove using the selected \" + noOfNotes + \" object(s)?\");\r\n            if (!confirmation) {\r\n                return;\r\n            }\r\n            //CREATE RISEABOVE\r\n            let view = this.props.view;\r\n            let communityId = this.props.communityId;\r\n            let author = this.props.author._id;\r\n            let notes = this.props.checkedNotes;\r\n            await this.props.createRiseAbove(view, communityId, author, notes);\r\n            this.props.fetchViewCommunityData(this.props.viewId)\r\n\r\n\r\n        } else {\r\n            alert(\"Please select at least 1 note to create RiseAbove\");\r\n        }\r\n    }\r\n\r\n    editNote = (contribId, mode) => {\r\n        this.props.openContribution(contribId, mode);\r\n    }\r\n\r\n    getRiseAboveNotes = (riseAboveId) => {\r\n        if (this.props.riseAboveViewNotes[riseAboveId]) {\r\n            let riseAboveNotes = this.props.riseAboveViewNotes[riseAboveId].map((noteId) => this.props.riseAboveNotes[noteId])\r\n            return riseAboveNotes;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    openNote = (noteId) => {\r\n        this.props.openContribution(noteId, \"read\")\r\n    }\r\n\r\n    render() {\r\n        const formatter = new Intl.DateTimeFormat('default', dateFormatOptions)\r\n        return (\r\n            <>\r\n                <Form className=\"mrg-1-top\">\r\n                    <Row>\r\n                        <Col md=\"6\">\r\n                            <FormGroup>\r\n                                <Input type=\"select\" name=\"viewId\" onChange={this.handleChange}>{\r\n                                    this.props.views.map((obj, i) => {\r\n                                        return <option key={i} value={obj._id}> {obj.title} </option>\r\n                                    })\r\n                                }</Input>\r\n                            </FormGroup>\r\n                        </Col>\r\n\r\n                        <Col md=\"3\">\r\n                            <Button onClick={this.handleSubmit} >Add to View</Button>\r\n                        </Col>\r\n\r\n                        <Col md=\"3\">\r\n                            <Button onClick={this.handleRiseAbove} >create RiseAbove</Button>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col>\r\n                            <Alert color=\"danger\" isOpen={this.state.viewError} >\r\n                                Please select a Different View.\r\n                            </Alert>\r\n                            <Alert color=\"info\" isOpen={this.state.visible} >\r\n                                Notes added to View!\r\n                            </Alert>\r\n                        </Col>\r\n                    </Row>\r\n                </Form>\r\n                {this.props.checkedNotes.map(\r\n                    (obj, i) => {\r\n                        let riseAboveNotes = this.getRiseAboveNotes(obj._id);\r\n                        let RiseAboveNotes;\r\n                        if (riseAboveNotes) {\r\n                            RiseAboveNotes = <Row>\r\n                                <Col className=\"pd-1-left\">\r\n                                    <Row className=\"sz-1 primary-800 font-weight-bold\" >RiseAbove Notes</Row>\r\n                                    {riseAboveNotes.map((note, i) => {\r\n                                        return <Row key={i}>\r\n                                            <Button variant=\"light\" className=\"min-width-10 rounded-pill pd-05\" onClick={() => this.openNote(note._id)}>{note.title}</Button>\r\n                                        </Row>\r\n                                    })}\r\n                                </Col>\r\n                            </Row>\r\n                        }\r\n                        let data;\r\n                        if (this.props.query && obj.data.English) {\r\n                            let innerHTML = obj.data.English;\r\n                            let index = innerHTML.indexOf(this.props.query);\r\n                            if (index >= 0) {\r\n                                data = innerHTML.substring(0, index) + \"<span class='highlight'>\" + innerHTML.substring(index, index + this.props.query.length) + \"</span>\" + innerHTML.substring(index + this.props.query.length);\r\n                            }\r\n                        } else if (this.props.query && obj.data.body) {\r\n                            let innerHTML = obj.data.body;\r\n                            let index = innerHTML.indexOf(this.props.query);\r\n                            if (index >= 0) {\r\n                                data = innerHTML.substring(0, index) + \"<span class='highlight'>\" + innerHTML.substring(index, index + this.props.query.length) + \"</span>\" + innerHTML.substring(index + this.props.query.length);\r\n                            }\r\n                        } else {\r\n                            data = obj.data.English ? obj.data.English : obj.data.body;\r\n                        }\r\n\r\n                        //eslint-disable-next-line\r\n                        while (data && data.includes(\"src=\\\"\\/attachments\")) {\r\n                            //eslint-disable-next-line\r\n                            data = data.replace(\"src=\\\"\\/attachments\", \"src=\\\"\" + url + \"\\/attachments\");\r\n                        }\r\n\r\n                        // EDIT BUTTON\r\n                        let EditNoteButton;\r\n                        if (access.isEditable(obj, this.props.author) === true) {\r\n                            EditNoteButton = <Button className=\"float-right\" variant=\"outline-info\" onClick={() => this.editNote(obj._id, \"write\")}>Edit Note</Button>\r\n                        } else {\r\n                            EditNoteButton = <Button className=\"float-right\" variant=\"outline-info\" onClick={() => this.editNote(obj._id, \"read\")}>Read Note</Button>\r\n                        }\r\n\r\n                        return (\r\n                            <Row className=\"min-height-2 mrg-05 border rounded mrg-1-bot pd-1\" key={i}>\r\n                                <Col>\r\n                                    <Row>\r\n                                        <Col md=\"10\" className=\"pd-1 primary-800 font-weight-bold\">{obj.title}</Col>\r\n                                        <Col md=\"2\">\r\n                                            <Button variant=\"outline-secondary\" className=\"circular-border float-right\"\r\n                                                onClick={() => this.props.updateCheckedNotes({ checked: false, noteId: obj._id })}>\r\n                                                <i className=\"fas fa-times\"></i>\r\n                                            </Button>\r\n                                        </Col>\r\n                                    </Row>\r\n                                    <Row>\r\n                                        <Col>\r\n                                            <span className=\"pd-1\" dangerouslySetInnerHTML={{ __html: data ? (data) : (obj.data.English ? obj.data.English : obj.data.body) }} />\r\n                                        </Col>\r\n                                    </Row>\r\n                                    {RiseAboveNotes}\r\n                                    <Row>\r\n                                        <Col>\r\n                                            <Col><div className=\"primary-600 sz-075 pd-05 float-left\">{this.props.users[obj.authors[0]].firstName + \" \"+ this.props.users[obj.authors[0]].lastName } &nbsp; {formatter.format(new Date(obj.created))}</div></Col>\r\n                                            <Col><Button className=\"float-right mrg-1-left\" variant=\"outline-info\" onClick={() => this.props.buildOn(obj._id)}>BuildOn</Button></Col>\r\n                                            <Col>{EditNoteButton}</Col>\r\n                                        </Col>\r\n                                    </Row>\r\n                                </Col>\r\n                            </Row>\r\n                        )\r\n                    }\r\n                )}\r\n            </>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    const viewNotes = state.notes.viewNotes\r\n    const users = state.users\r\n    return {\r\n        viewId: state.globals.viewId,\r\n        views: state.globals.views,\r\n        view: state.globals.view,\r\n        checkedNotes: state.notes.checkedNotes.map(\r\n            noteId => noteId in viewNotes ? //Find note in viewNotes or in riseAboveNotes\r\n                viewNotes[noteId] : state.notes.riseAboveNotes[noteId]\r\n        ),\r\n        viewLinks: state.notes.viewLinks,\r\n        author: state.globals.author,\r\n        communityId: state.globals.communityId,\r\n        riseAboveViewNotes: state.notes.riseAboveViewNotes,\r\n        riseAboveNotes: state.notes.riseAboveNotes,\r\n        users: users,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    openContribution,\r\n    updateCheckedNotes,\r\n    createRiseAbove,\r\n    fetchViewCommunityData\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(NoteContent);\r\n","import { createAction, createReducer } from '@reduxjs/toolkit';\r\nimport * as api from './api.js'\r\n\r\nexport const addNote = createAction('ADD_NOTE')\r\nconst initState = {\r\n\r\n}\r\n\r\nexport const riseAboveReducer = createReducer(initState, {});\r\n\r\nexport const createRiseAbove = (view, communityId, author, notes) => dispatch => {\r\n    let object = {};\r\n    let riseAboveId;\r\n    let riseAboveNoteId;\r\n    let viewId = view._id;\r\n    object.authors = author.split(',')\r\n    object.communityId = communityId;\r\n    object.permission = view.permission ? view.permission : \"public\";\r\n    object.status = \"active\"\r\n    object.title = \"riseabove:\"\r\n    object.type = \"View\"\r\n    object._groupMembers = view._groupMembers;\r\n    console.log(\"OBJECT\", object);\r\n    //CONTRIBUTE RISEABOVE VIEW\r\n    api.postContribObject(communityId, object).then(response => {\r\n        riseAboveId = response._id;\r\n        console.log(\"Response\", response);\r\n        let note = {};\r\n        note.authors = object.authors;\r\n        note.buildson = null;\r\n        note.communityId = communityId;\r\n        note.data = { body: \"\" };\r\n        note.langInNote = [];\r\n        note.permission = \"protected\";\r\n        note.status = \"unsaved\";\r\n        note.title = \"\";\r\n        note.type = \"Note\";\r\n        note._groupMembers = view._groupMembers;\r\n        console.log(\"NOTE\", note);\r\n        //CONTRIBUTE RISEABOVE NOTE\r\n        api.postContribObject(communityId, note).then(noteResponse => {\r\n            console.log(\"noteResponse\", noteResponse);\r\n            riseAboveNoteId = noteResponse._id;\r\n            noteResponse.data = {\r\n                body: \"\",\r\n                riseabove: { viewId: `${riseAboveId}` }\r\n            }\r\n            noteResponse.status = \"active\";\r\n            noteResponse.title = \"Riseabove\"\r\n            console.log(\"noteResponse noteResponse\", noteResponse);\r\n            api.putObject(noteResponse, communityId, riseAboveNoteId).then(putResponse => {\r\n                //POST API LINKS\r\n                let pos = { x: 200, y: 200 }\r\n                api.postLink(viewId, riseAboveNoteId, 'contains', pos).then(res => {\r\n                    notes.forEach(note => {\r\n                        let pos = { x: 20, y: 20 }\r\n                        api.postLink(riseAboveId, note._id, 'contains', pos).then(res => {\r\n                            //EITHER AND THEN DELETE\r\n                            api.getLinkForObj(note._id).then(linkRes => {\r\n                                let links = linkRes.data;\r\n                                let link = links.filter(obj => {\r\n                                    return obj.from.includes(viewId)\r\n                                })\r\n                                api.deleteLink(link[0]._id);\r\n                            })\r\n                        })\r\n                    });\r\n                })\r\n            })\r\n        }).catch(error => {\r\n            console.log(\"error\", error);\r\n        })\r\n\r\n    }).catch(error => {\r\n        console.log(\"Error\", error);\r\n    });\r\n\r\n}\r\n","\r\nconst newScaffoldTag = (supportId, title, isTemplate, addHyphen) => (initText) => {\r\n\r\n    let supportContentId = new Date().getTime().toString();\r\n    var contentTagStr = '<span id=\"' + supportContentId + '\"></span>';\r\n    var text = contentTagStr + initText;\r\n    if (addHyphen) {\r\n        text = ' -&nbsp;' + text + '&nbsp;- ';\r\n    }\r\n\r\n    var tag = '';\r\n    tag = tag + '<br>';\r\n    tag = tag + '&nbsp;&nbsp;'; //important for mce\r\n    if (!isTemplate) {\r\n        tag = tag + '<span id=\"' + supportId + '\" class=\"KFSupportStart mceNonEditable\">';\r\n    } else {\r\n        tag = tag + '<span id=\"' + supportId + '\" class=\"KFSupportStart KFTemplateStart mceNonEditable\">';\r\n    }\r\n    tag = tag + createScaffoldStartTag(title, isTemplate);\r\n    tag = tag + '</span>';\r\n    if (isTemplate) {\r\n        tag = tag + '<p class=\"kfTemplateContent\">';\r\n        tag = tag + '<br><br><br><br>';\r\n    }\r\n    tag = tag + text;\r\n    if (isTemplate) {\r\n        tag = tag + '</p>';\r\n    }\r\n    if (!isTemplate) {\r\n        tag = tag + '<span id=\"' + supportId + '\" class=\"KFSupportEnd mceNonEditable\">';\r\n    } else {\r\n        tag = tag + '<span id=\"' + supportId + '\" class=\"KFSupportEnd KFTemplateEnd mceNonEditable\">';\r\n    }\r\n    tag = tag + createScaffoldEndTag(isTemplate);\r\n    tag = tag + '</span>';\r\n    tag = tag + '&nbsp;&nbsp;'; //important for mce\r\n    tag = tag + '<br>';\r\n    return {tag, supportContentId};\r\n};\r\n\r\nconst createNewScaffoldTag = function(supportId, title, text, isTemplate) {\r\n    var tag = '';\r\n    tag = tag + '<br>';\r\n    tag = tag + '&nbsp;&nbsp;'; //important for mce\r\n    if (!isTemplate) {\r\n        tag = tag + '<span id=\"' + supportId + '\" class=\"KFSupportStart mceNonEditable\">';\r\n    } else {\r\n        tag = tag + '<span id=\"' + supportId + '\" class=\"KFSupportStart KFTemplateStart mceNonEditable\">';\r\n    }\r\n    tag = tag + createScaffoldStartTag(title, isTemplate);\r\n    tag = tag + '</span>';\r\n    if (isTemplate) {\r\n        tag = tag + '<p class=\"kfTemplateContent\">';\r\n        tag = tag + '<br><br><br><br>';\r\n    }\r\n    tag = tag + text;\r\n    if (isTemplate) {\r\n        tag = tag + '</p>';\r\n    }\r\n    if (!isTemplate) {\r\n        tag = tag + '<span id=\"' + supportId + '\" class=\"KFSupportEnd mceNonEditable\">';\r\n    } else {\r\n        tag = tag + '<span id=\"' + supportId + '\" class=\"KFSupportEnd KFTemplateEnd mceNonEditable\">';\r\n    }\r\n    tag = tag + createScaffoldEndTag(isTemplate);\r\n    tag = tag + '</span>';\r\n    tag = tag + '&nbsp;&nbsp;'; //important for mce\r\n    tag = tag + '<br>';\r\n    return tag;\r\n};\r\n\r\n\r\nconst createScaffoldStartTag = function(title, isTemplate) {\r\n    var tag = '';\r\n    tag = tag + ' '; //important for mce\r\n    if (!isTemplate) {\r\n        tag = tag + '<span class=\"kfSupportStartMark\"> &nbsp; </span>';\r\n    } else {\r\n        tag = tag + '<span class=\"kfSupportStartMark kfTemplateStartMark\"> &nbsp; </span>';\r\n    }\r\n    tag = tag + ' '; //important for mce\r\n    if (!isTemplate) {\r\n        tag = tag + '<span class=\"kfSupportStartLabel\">' + title + '</span>';\r\n    } else {\r\n        tag = tag + '<span class=\"kfSupportStartLabel kfTemplateStartLabel\">' + title + '</span>';\r\n    }\r\n    tag = tag + ' '; //important for mce\r\n    return tag;\r\n};\r\n\r\nconst createScaffoldEndTag = function(isTemplate) {\r\n    var tag = '';\r\n    tag = tag + ' '; //important for mce\r\n    if (!isTemplate) {\r\n        tag = tag + '<span class=\"kfSupportEndMark\"> &nbsp; </span>';\r\n    } else {\r\n        tag = tag + '<span class=\"kfSupportEndMark kfTemplateEndMark\"> &nbsp; </span>';\r\n    }\r\n    tag = tag + ' '; //important for mce\r\n    return tag;\r\n};\r\n\r\nexport default { createNewScaffoldTag, newScaffoldTag }\r\n","import React from 'react';\r\nimport {Form, Container, Row, Col} from 'react-bootstrap';\r\nimport { connect } from 'react-redux'\r\nimport {fetchScaffolds} from '../../store/scaffoldReducer.js'\r\nimport scaffoldService from './scaffold.service'\r\nimport './scaffold.css'\r\n\r\nclass ScaffoldSelect extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {selected: props.initVal};\r\n        this.onSelectChange = this.onSelectChange.bind(this);\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        if (!this.props.fetched){\r\n            const {communityId, contextId} = this.props;\r\n            this.props.fetchScaffolds(communityId, contextId);\r\n        }\r\n    }\r\n\r\n    onSelectChange(event) {\r\n        this.setState({selected: event.target.value});\r\n    }\r\n\r\n    scaffoldSelected = (scaffoldId, support) => {\r\n        if (this.props.returnSupport){\r\n            this.props.onScaffoldSelected(support)\r\n            return\r\n        }\r\n        const scaffold = this.props.items[scaffoldId];\r\n        let addhyphen = true;\r\n        let initialText = '';\r\n        const isTemplate = scaffold.data && scaffold.data.isTemplate\r\n        if (isTemplate) {\r\n            addhyphen = false;\r\n            initialText = '<br><br>'\r\n        }\r\n\r\n        const scaffold_text = support._to.title\r\n        const tagCreator = scaffoldService.newScaffoldTag(support.to, scaffold_text, isTemplate, addhyphen);\r\n        this.props.onScaffoldSelected(tagCreator, initialText)\r\n    }\r\n\r\n    render() {\r\n        const scaffolds = this.props.items;\r\n        const options = scaffolds.map((scaffold, i) =>\r\n            <option key={i} value={i}>{scaffold.title}</option>\r\n        );\r\n        let supports = '';\r\n        if (scaffolds.length && scaffolds[this.state.selected].supports) {\r\n            supports = scaffolds[this.state.selected].supports.map((support, i) =>\r\n                <Col className=\"mt-1 p-0\" key={i} md={12}>\r\n                    <div className='KFSupportButton' size='sm' onClick={() => this.scaffoldSelected(this.state.selected, support) }>\r\n                        {support._to.title}\r\n                    </div>\r\n                </Col>\r\n            );\r\n        }\r\n\r\n        return (\r\n            <Container>\r\n                <Row>\r\n                    <Col className='p-0'>\r\n                        <Form>\r\n                            <Form.Group className='mb-1' controlId=\"exampleForm.ControlSelect2\">\r\n                                <Form.Control className=\"scaffold-select-input\" size='sm' as=\"select\" onChange={this.onSelectChange}>\r\n                                    {options}\r\n                                </Form.Control>\r\n                            </Form.Group>\r\n                        </Form>\r\n                    </Col>\r\n                </Row>\r\n                <Row>\r\n                    {supports}\r\n                </Row>\r\n            </Container>\r\n\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        communityId: state.globals.communityId,\r\n        contextId: state.globals.contextId,\r\n        ...state.scaffolds\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = { fetchScaffolds }\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ScaffoldSelect)\r\n","import React, { Component } from 'react';\r\nimport { Col, Row } from 'react-bootstrap';\r\nimport { connect } from 'react-redux'\r\nimport { Form, FormGroup, Input } from 'reactstrap';\r\nimport { Button, Collapse } from 'react-bootstrap';\r\nimport ListOfNotes from '../ListOfNotes.js'\r\nimport { dateFormatOptions } from '../../../store/globalsReducer'\r\nimport { newNote, updateCheckedNotes, openContribution } from '../../../store/noteReducer'\r\nimport { Breakpoint } from 'react-socks';\r\nimport { url } from '../../../store/api'\r\nimport * as access from '../../../store/access'\r\n\r\nclass Notes extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            note: {},\r\n            showNote: false,\r\n            open: false,\r\n            riseAboveData: {},\r\n            isCheckedMobile: false,\r\n        };\r\n        this.checkNote = this.checkNote.bind(this)\r\n        this.editNote = this.editNote.bind(this);\r\n        this.buildOn = this.buildOn.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n    }\r\n\r\n    buildOn = (buildOn) => {\r\n        this.props.newNote(this.props.view, this.props.communityId, this.props.authorObj._id, buildOn);\r\n    }\r\n\r\n    editNote = (contribId, mode) => {\r\n        this.props.openContribution(contribId, mode);\r\n    }\r\n\r\n    setOpen = (value) => {\r\n        this.setState((prevState) => {\r\n            return { open: !prevState.open }\r\n        })\r\n    }\r\n\r\n    checkNote = (evt, noteId) => {\r\n        this.props.updateCheckedNotes({ noteId, checked: evt.target.checked })\r\n    }\r\n\r\n    updateNoteMobile = (e, note) => {\r\n        this.setState({\r\n            isCheckedMobile: e.target.checked\r\n        })\r\n    }\r\n\r\n    render() {\r\n        const hasChildren = this.props.children && Object.keys(this.props.children).length !== 0;;\r\n        const icon = this.state.open ? \"fa-chevron-down\" : \"fa-chevron-right\"\r\n        const formatter = new Intl.DateTimeFormat('default', dateFormatOptions)\r\n        let NoteMobile;\r\n        let data = this.props.note.data.body;\r\n        //eslint-disable-next-line\r\n        while (data.includes(\"src=\\\"\\/attachments\")) {\r\n            //eslint-disable-next-line\r\n            data = data.replace(\"src=\\\"\\/attachments\", \"src=\\\"\" + url + \"\\/attachments\");\r\n        }\r\n\r\n        let EditNoteButton;\r\n        if (access.isEditable(this.props.note, this.props.authorObj) === true) {\r\n            EditNoteButton = <Button className=\"float-right\" variant=\"outline-info\" onClick={() => this.editNote(this.props.note._id, \"write\")}>Edit Note</Button>\r\n        } else {\r\n            EditNoteButton = <Button className=\"float-right\" variant=\"outline-info\" onClick={() => this.editNote(this.props.note._id, \"read\")}>Read Note</Button>\r\n        }\r\n\r\n        if (this.state.isCheckedMobile) {\r\n            NoteMobile = <div>\r\n                <Row>\r\n                    <Col>\r\n                        <Row dangerouslySetInnerHTML={{ __html: data }}></Row>\r\n                        <Row>\r\n                            <Button className=\"float-right mrg-1-left mrg-1-right\" variant=\"outline-info\" onClick={() => this.buildOn(this.props.note._id)}>BuildOn</Button>\r\n                            {EditNoteButton}\r\n                        </Row>\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n        }\r\n\r\n        return (\r\n            <>\r\n                <Breakpoint medium up>\r\n                    <div>\r\n                        <Row>\r\n                            <Col className=\"mr-auto rounded\">\r\n                                <Row className=\"pd-05\">\r\n                                    <Col md=\"10\" className=\"primary-800 font-weight-bold\">\r\n                                        {hasChildren ?\r\n                                            <Button variant='link' onClick={() => this.setOpen(!this.open)} aria-controls=\"example-collapse-text\" aria-expanded={this.state.open}>\r\n                                                <i className={`fa ${icon}`}></i>\r\n                                            </Button>\r\n                                            : null}\r\n                                        {this.props.note.title}</Col>\r\n                                    <Col md=\"2\">\r\n                                        <Form className=\"mrg-1-min pd-2-right\">\r\n                                            <FormGroup>\r\n                                                <Input type=\"checkbox\" checked={this.props.isChecked} ref={this.props.note._id} onChange={e => this.checkNote(e, this.props.note._id)} />\r\n                                            </FormGroup>\r\n                                        </Form>\r\n                                    </Col>\r\n                                </Row>\r\n                                <Row className=\"primary-600 sz-075 pd-05\">\r\n                                    <Col><span> {this.props.author} </span>&nbsp; {formatter.format(new Date(this.props.note.created))}</Col>\r\n                                    <Col md=\"2\">\r\n                                        {/* <Button onClick={() => this.buildOn(this.props.oneHirarchy.to)}>BuildOn</Button> */}\r\n                                    </Col>\r\n                                </Row>\r\n                                {this.props.children ?\r\n                                    <Collapse in={this.state.open}>\r\n                                        <Row>\r\n                                            <Col md=\"1\"></Col>\r\n                                            <Col md=\"11\">\r\n                                                <ListOfNotes hierarchy={this.props.children}></ListOfNotes>\r\n                                            </Col>\r\n                                        </Row>\r\n                                    </Collapse>\r\n                                    : null}\r\n                            </Col>\r\n                        </Row>\r\n                    </div>\r\n                </Breakpoint>\r\n\r\n                {/* MOBILE SCREEN */}\r\n                <Breakpoint small down>\r\n                    <div>\r\n                        <Row>\r\n                            <Col className=\"mr-auto rounded\">\r\n                                <Row className=\"pd-05\">\r\n                                    <Col md=\"10\" className=\"primary-800 font-weight-bold\">\r\n                                        {hasChildren ?\r\n                                            <Button variant='link' onClick={() => this.setOpen(!this.open)} aria-controls=\"example-collapse-text\" aria-expanded={this.state.open}>\r\n                                                <i className={`fa ${icon}`}></i>\r\n                                            </Button>\r\n                                            : null}\r\n                                        {this.props.note.title}</Col>\r\n                                    <Col md=\"2\">\r\n                                        <Form className=\"mrg-1-min pd-2-right\">\r\n                                            <FormGroup>\r\n                                                <Input type=\"checkbox\" checked={this.state.isCheckedMobile} ref={this.props.note._id} onChange={e => this.updateNoteMobile(e, this.props.note)} />\r\n                                            </FormGroup>\r\n                                        </Form>\r\n                                    </Col>\r\n                                </Row>\r\n                                <Row className=\"primary-600 sz-075 pd-05\">\r\n                                    <Col><span> {this.props.author} </span>&nbsp; {formatter.format(new Date(this.props.note.created))}</Col>\r\n                                    <Col md=\"2\">\r\n                                        {/* <Button onClick={() => this.buildOn(this.props.oneHirarchy.to)}>BuildOn</Button> */}\r\n                                    </Col>\r\n                                </Row>\r\n                                {this.props.children ?\r\n                                    <Collapse in={this.state.open}>\r\n                                        <Row>\r\n                                            <Col md=\"1\"></Col>\r\n                                            <Col md=\"11\">\r\n                                                <ListOfNotes hierarchy={this.props.children}></ListOfNotes>\r\n                                            </Col>\r\n                                        </Row>\r\n                                    </Collapse>\r\n                                    : null}\r\n                            </Col>\r\n                        </Row>\r\n                        {NoteMobile}\r\n                    </div>\r\n                </Breakpoint>\r\n            </>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    const author = state.users[ownProps.note.authors[0]]\r\n    return {\r\n        author: (author && `${author.firstName} ${author.lastName}`) || 'NA',\r\n        isChecked: state.notes.checkedNotes.includes(ownProps.note._id),\r\n        riseAboveViewNotes: state.notes.riseAboveViewNotes,\r\n        riseAboveNotes: state.notes.riseAboveNotes,\r\n        view: state.globals.view,\r\n        communityId: state.globals.communityId,\r\n        authorObj: state.globals.author,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    updateCheckedNotes,\r\n    openContribution,\r\n    newNote,\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(Notes)\r\n","import React, { Component } from 'react';\r\nimport Notes from './Notes/Notes';\r\nimport { connect } from 'react-redux'\r\nclass ListOfNotes extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.getNotes = this.getNotes.bind(this)\r\n    }\r\n\r\n    componentDidMount() {\r\n    }\r\n\r\n    getNotes() {\r\n        const notes = []\r\n        for (let noteId in this.props.hierarchy) {\r\n            if (noteId in this.props.notes)\r\n                notes.push(this.props.notes[noteId])\r\n        }\r\n        //SORT THEM\r\n        return notes.sort((a, b) => { return new Date(b.created) - new Date(a.created) })\r\n\r\n    }\r\n\r\n    render() {\r\n        const notes = this.props.noteLinks || this.getNotes()\r\n        return (<>\r\n            {\r\n                notes.map((note, i) => {\r\n                    const children = this.props.hierarchy && this.props.hierarchy[note._id].children\r\n                    return <div key={i} className=\"shadow p-1 mb-1 rounded\">\r\n                        <Notes note={note} children={children} notes={this.props.notes} />\r\n                    </div>\r\n                })\r\n            }\r\n        </>)\r\n    }\r\n\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        notes: state.notes.viewNotes,\r\n        riseAboveNotes: state.notes.riseAboveNotes\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(ListOfNotes)\r\n","import React, { Component } from 'react';\r\nimport { Row, Col } from 'react-bootstrap';\r\nimport { Form, Input, InputGroup, InputGroupAddon, InputGroupText } from 'reactstrap';\r\nimport { newNote } from '../store/noteReducer.js'\r\nimport { connect } from 'react-redux'\r\nimport NoteContent from '../components/NoteContent/NoteContent'\r\nimport ScaffoldSelect from '../components/scaffold/ScaffoldSelect'\r\nimport ListOfNotes from './ListOfNotes/ListOfNotes'\r\nimport { Breakpoint } from 'react-socks'\r\nimport '../css/index.css';\r\nimport './View.css';\r\n\r\nclass View extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            showView: false,\r\n            showRiseAbove: false,\r\n            query: \"\",\r\n            filteredData: [],\r\n            filter: 'title',\r\n            hideScaffold: true,\r\n        };\r\n\r\n        this.getBuildOnHierarchy = this.getBuildOnHierarchy.bind(this)\r\n        this.onCloseDialog = this.onCloseDialog.bind(this);\r\n        this.onConfirmDrawDialog = this.onConfirmDrawDialog.bind(this);\r\n        this.handleInputChange = this.handleInputChange.bind(this);\r\n        this.filterResults = this.filterResults.bind(this);\r\n        this.getScaffoldSupports = this.getScaffoldSupports.bind(this);\r\n        this.clearSearch = this.clearSearch.bind(this);\r\n        this.onScaffoldSelected = this.onScaffoldSelected.bind(this)\r\n    }\r\n\r\n    // GET BUILDON HIERARCHY\r\n    getBuildOnHierarchy() {\r\n        const hierarchy = {}\r\n        for (let noteId in this.props.viewNotes) {\r\n            hierarchy[noteId] = { children: {} }\r\n        }\r\n        this.props.buildsOn.forEach(note => {\r\n            const parent = note.to\r\n            const child = note.from\r\n            if (!(parent in hierarchy))\r\n                hierarchy[parent] = { children: {} }\r\n            if (!(child in hierarchy))\r\n                hierarchy[child] = { parent: parent, children: {} }\r\n            else\r\n                hierarchy[child]['parent'] = parent\r\n            hierarchy[parent]['children'][child] = hierarchy[child]\r\n        })\r\n        const final_h = {}\r\n        for (let [key, value] of Object.entries(hierarchy)) {\r\n            if (!('parent' in value))\r\n                final_h[key] = value\r\n        }\r\n        return final_h\r\n    }\r\n\r\n    // GET SCAFFOLD SUPPORTS\r\n    getScaffoldSupports() {\r\n        let supports = []\r\n        this.props.scaffolds.forEach(scaffold => {\r\n            supports = [...supports, ...scaffold.supports]\r\n        })\r\n        return supports\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n    }\r\n\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n\r\n    }\r\n\r\n    newRiseAbove() {\r\n        this.setState({\r\n            showView: false,\r\n            showModel: true,\r\n        })\r\n    }\r\n\r\n    // FILTER RESULTS ON SCAFFOLD SELECT\r\n    onScaffoldSelected = (support) => {\r\n        this.setState({\r\n            filteredData: this.filterResults(support.to)\r\n        });\r\n    }\r\n\r\n    onConfirmDrawDialog(drawing) {\r\n        this.props.addDrawing(drawing);\r\n        this.props.closeDrawDialog();\r\n    }\r\n\r\n    onCloseDialog(dlg) {\r\n        this.props.removeNote(dlg.noteId);\r\n        this.props.closeDialog(dlg.id);\r\n    }\r\n\r\n    filterResults(q) {\r\n        const query = q || this.state.query\r\n        let filteredResults = [];\r\n        const notes = Object.values(this.props.viewNotes)\r\n        if (query || this.state.filter) {\r\n            switch (this.state.filter) {\r\n                case \"title\":\r\n                    filteredResults = notes.filter(note => note.title.toLowerCase().includes(query.toLowerCase()));\r\n                    break;\r\n\r\n                case \"content\":\r\n                    filteredResults = notes.filter(function (obj) {\r\n                        if (obj.data && obj.data.English) {\r\n                            return obj.data.English.includes(query);\r\n                        }\r\n                        else if (obj.data && obj.data.body) {\r\n                            return obj.data.body.includes(query);\r\n                        }\r\n                        return false\r\n                    });\r\n\r\n                    break;\r\n\r\n                case \"author\":\r\n                    const authors = [];\r\n                    Object.values(this.props.authors).forEach(obj => {\r\n                        const authName = `${obj.firstName} ${obj.lastName}`.toLowerCase()\r\n                        if (authName.includes(query.toLowerCase())) {\r\n                            authors.push(obj._id);\r\n                        }\r\n                    });\r\n                    filteredResults = notes.filter(note => note.authors.some(author => authors.includes(author)))\r\n\r\n                    break;\r\n                case \"scaffold\":\r\n                    const noteIds = this.props.supports.filter(support => support.from === query).map(support => support.to)\r\n                    filteredResults = notes.filter(note => noteIds.includes(note._id))\r\n                    break;\r\n\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        return filteredResults\r\n    }\r\n    handleInputChange = (event) => {\r\n        const query = event.target.value\r\n        this.setState({\r\n            query: query,\r\n            filteredData: this.filterResults(query)\r\n        });\r\n    };\r\n\r\n    clearSearch() {\r\n        this.setState({\r\n            query: \"\",\r\n            filteredData: this.filterResults(null),\r\n        });\r\n    };\r\n\r\n    handleFilter = (e) => {\r\n        let value = e.target.value;\r\n        this.setState({\r\n            filter: value,\r\n            query: ''\r\n        });\r\n    }\r\n\r\n    buildOn = (buildOn) => {\r\n        this.props.newNote(this.props.view, this.props.communityId, this.props.author._id, buildOn);\r\n    }\r\n\r\n\r\n    render() {\r\n        const showScffold = !this.hideScaffold && this.state.filter === \"scaffold\";\r\n        const hierarchy = this.getBuildOnHierarchy()\r\n        /* const filteredResults = this.filterResults() */\r\n        let scaffolds;\r\n        if (showScffold) {\r\n            scaffolds = <ScaffoldSelect initVal={0} onScaffoldSelected={this.onScaffoldSelected} returnSupport={true} />\r\n        }\r\n\r\n        return (\r\n            <>\r\n                {/*<TopNavBar></TopNavBar>*/}\r\n                <Breakpoint medium up>\r\n\r\n                    <div className=\"row min-width\">\r\n\r\n                        {/* NOTES */}\r\n                        <Col md=\"5\" sm=\"12\" className=\"mrg-1-top pd-2-right v-scroll\">\r\n                            <Form className=\"mrg-1-bot\">\r\n                                <Row>\r\n                                    <Col>\r\n                                        <InputGroup>\r\n                                            <InputGroupAddon addonType=\"prepend\">\r\n                                                <Input type=\"select\" name=\"filter\" id=\"filter\" onChange={this.handleFilter}>\r\n                                                    <option key=\"title\" value=\"title\">Search By Title</option>\r\n                                                    <option key=\"scaffold\" value=\"scaffold\">Search By Scaffold</option>\r\n                                                    <option key=\"content\" value=\"content\">Search By Content</option>\r\n                                                    <option key=\"author\" value=\"author\">Search By Author</option>\r\n                                                </Input>\r\n                                            </InputGroupAddon>\r\n                                            <Input\r\n                                                className=\"form-control\"\r\n                                                value={this.state.query}\r\n                                                placeholder=\"Search Your Note\"\r\n                                                onChange={this.handleInputChange}\r\n                                            />\r\n\r\n                                            <InputGroupAddon addonType=\"append\">\r\n                                                <InputGroupText>\r\n                                                    <i className=\"fa fa-search\"></i>\r\n                                                </InputGroupText>\r\n                                            </InputGroupAddon>\r\n\r\n                                            <InputGroupAddon addonType=\"append\">\r\n                                                <InputGroupText style={{ cursor: \"pointer\" }} onClick={this.clearSearch} >\r\n                                                    <i className=\"fa fa-refresh\"></i>\r\n                                                </InputGroupText>\r\n                                            </InputGroupAddon>\r\n                                        </InputGroup>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Form>\r\n                            {scaffolds}\r\n                            {this.state.query === \"\" && !showScffold ?\r\n                                (<ListOfNotes hierarchy={hierarchy} />)\r\n                                :\r\n                                (<ListOfNotes noteLinks={this.state.filteredData} />)\r\n                            }\r\n                        </Col>\r\n\r\n                        {/* NOTE CONTENT */}\r\n                        {this.props.checkedNotes.length ?\r\n                            (<>\r\n                                <Col md=\"5\" sm=\"12\" className=\"mrg-1-top v-scroll\">\r\n                                    <NoteContent query={this.state.query} buildOn={this.buildOn} />\r\n                                </Col>\r\n                            </>)\r\n                            : null\r\n                        }\r\n\r\n                    </div>\r\n\r\n\r\n\r\n                </Breakpoint>\r\n\r\n                <Breakpoint small down>\r\n\r\n                    <div className=\"row min-width\">\r\n\r\n                        {/* NOTES */}\r\n                        <Col md=\"5\" sm=\"12\" className=\"mrg-05-top pd-2-right primary-bg-50\">\r\n                            <Form className=\"mrg-1-bot\">\r\n                                <Row>\r\n                                    <Col>\r\n                                        <InputGroup>\r\n                                            <InputGroupAddon addonType=\"prepend\">\r\n                                                <Input type=\"select\" name=\"filter\" id=\"filter\" onChange={this.handleFilter}>\r\n                                                    <option key=\"title\" value=\"title\">Search By Title</option>\r\n                                                    <option key=\"scaffold\" value=\"scaffold\">Search By Scaffold</option>\r\n                                                    <option key=\"content\" value=\"content\">Search By Content</option>\r\n                                                    <option key=\"author\" value=\"author\">Search By Author</option>\r\n                                                </Input>\r\n                                            </InputGroupAddon>\r\n                                            <Input\r\n                                                className=\"form-control\"\r\n                                                value={this.state.query}\r\n                                                placeholder=\"Search Your Note\"\r\n                                                onChange={this.handleInputChange}\r\n                                            />\r\n\r\n                                            <InputGroupAddon addonType=\"append\">\r\n                                                <InputGroupText>\r\n                                                    <i className=\"fa fa-search\"></i>\r\n                                                </InputGroupText>\r\n                                            </InputGroupAddon>\r\n\r\n                                            <InputGroupAddon addonType=\"append\">\r\n                                                <InputGroupText style={{ cursor: \"pointer\" }} onClick={this.clearSearch} >\r\n                                                    <i className=\"fa fa-refresh\"></i>\r\n                                                </InputGroupText>\r\n                                            </InputGroupAddon>\r\n                                        </InputGroup>\r\n                                    </Col>\r\n                                </Row>\r\n                            </Form>\r\n                            {scaffolds}\r\n                            {this.state.query === \"\" && !showScffold ?\r\n                                (<ListOfNotes hierarchy={hierarchy} />)\r\n                                :\r\n                                (<ListOfNotes noteLinks={this.state.filteredData} />)\r\n                            }\r\n                        </Col>\r\n                    </div>\r\n                </Breakpoint>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        communityId: state.globals.communityId,\r\n        viewId: state.globals.viewId,\r\n        view: state.globals.view,\r\n        author: state.globals.author,\r\n        noteContent: state.globals.noteContent,\r\n        communities: state.globals.communities,\r\n        myViews: state.globals.views,\r\n        authors: state.users,\r\n        scaffolds: state.scaffolds.items,\r\n        viewNotes: state.notes.viewNotes,\r\n        checkedNotes: state.notes.checkedNotes,\r\n        viewLinks: state.notes.viewLinks,\r\n        buildsOn: state.notes.buildsOn,\r\n        supports: state.notes.supports,\r\n        riseAboveViewNotes: state.notes.riseAboveViewNotes\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    newNote\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(View)\r\n","import React from 'react';\r\nimport {Rnd} from 'react-rnd';\r\nimport {Card, Button} from 'react-bootstrap';\r\nimport './dialog.css';\r\nconst dialog_style = {\r\n    zIndex: 999,\r\n    display: 'flex'\r\n}\r\n\r\nconst Dialog = props => {\r\n    return (\r\n            <Rnd\r\n                id={`contrib-dialog-${props.id}`}\r\n                className={\"contrib-dialog\"}\r\n                style={{...dialog_style, ...props.style}}\r\n                default={{\r\n                    x: 400 + window.pageXOffset,\r\n                    y: 50 + window.pageYOffset,\r\n                    width: 920,\r\n                    height: 500,\r\n                }}\r\n                onClick={props.onClick}\r\n                onMouseDown={props.onMouseDown}\r\n                dragHandleClassName='dlg-card-header'\r\n                bounds='window'\r\n            >\r\n                <Card className='dlg-card'>\r\n                    <Card.Header className='dlg-card-header py-0' style={{alignItems: 'center', display: 'flex'}}>\r\n                        <span>{props.title}</span>\r\n                        <Button onClick={props.onClose} variant='link' size='sm' style={{marginLeft:'auto'}}>x</Button>\r\n                    </Card.Header>\r\n                    <Card.Body className='dlg-card-body' style={{position: 'relative'}}>\r\n                        {props.children}\r\n                    </Card.Body>\r\n                    <Card.Footer className=\"dlg-card-footer py-0\">\r\n                        <Button size='sm' className=\"dlg-button\"\r\n                            onClick={props.onConfirm}\r\n                            disabled={false ||!props.editable}\r\n                        >\r\n                            Contribute\r\n                        </Button>\r\n                        {props.buildon ?\r\n                         <Button size='sm' className=\"dlg-button\"\r\n                                 onClick={props.onBuildOnClick}>\r\n                             Build-on\r\n                         </Button>\r\n                        : ''}\r\n                    </Card.Footer>\r\n                </Card>\r\n            </Rnd>\r\n    )\r\n}\r\n\r\nexport default Dialog;\r\n","import React from 'react';\r\nimport Dialog from '../dialog/Dialog.js'\r\n\r\nclass DrawDialog extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.onConfirm = this.onConfirm.bind(this);\r\n        this.onLoad = this.onLoad.bind(this);\r\n        this.getIframeRef = this.getIframeRef.bind(this);\r\n    }\r\n\r\n    onConfirm(){\r\n        var wnd1 = this.iframe_ref.contentWindow;\r\n        var bg = wnd1.svgCanvas.current_drawing_.all_layers[0];\r\n        var wnd2 = wnd1.svgCanvas.current_drawing_.all_layers[1];\r\n\r\n        var widd = wnd2[1].getBBox().width;\r\n        var heig = wnd2[1].getBBox().height;\r\n        if (widd === 0 || heig === 0){\r\n            this.props.onClose()\r\n            return;\r\n        }\r\n\r\n        wnd1.svgCanvas.current_drawing_.svgElem_.setAttribute(\"width\", widd);\r\n        wnd1.svgCanvas.current_drawing_.svgElem_.setAttribute(\"height\", heig);\r\n        bg[1].childNodes[1].setAttribute(\"width\", widd);\r\n        bg[1].childNodes[1].setAttribute(\"height\", heig);\r\n        wnd1.svgCanvas.selectAllInCurrentLayer();\r\n        wnd1.svgCanvas.groupSelectedElements();\r\n        wnd1.svgCanvas.alignSelectedElements('l', 'page');\r\n        wnd1.svgCanvas.alignSelectedElements('t', 'page');\r\n        wnd1.svgCanvas.ungroupSelectedElement();\r\n        wnd1.svgCanvas.clearSelection();\r\n        wnd1.svgCanvas.current_drawing_.svgElem_.setAttribute(\"padding\", '2em');\r\n        wnd1.svgCanvas.setResolution('fit', 100);\r\n        var svg = wnd1.svgCanvas.getSvgString();\r\n\r\n        var canvas = document.createElement(\"canvas\");\r\n\r\n        canvas.width = widd + 4;\r\n        canvas.height = heig + 4;\r\n\r\n        var ctx = canvas.getContext(\"2d\");\r\n\r\n        var img = document.createElement(\"img\");\r\n\r\n        img.setAttribute(\"src\", \"data:image/svg+xml;base64,\" + btoa(svg));\r\n\r\n        img.onload = function () {\r\n            ctx.drawImage(img, 0, 0);\r\n            var p = canvas.toDataURL(\"image/png\");\r\n            const drawing = \"<img alt='\" + svg + \"' src='\" + p + \"'/>\";\r\n\r\n            this.props.onConfirm(drawing);\r\n        }.bind(this);\r\n    }\r\n\r\n    getIframeRef(frame) {\r\n        if(!frame) {\r\n            return\r\n        }\r\n        this.iframe_ref = frame\r\n    }\r\n\r\n    onLoad(e){\r\n        const svg = this.props.svg\r\n        if (svg){\r\n            e.target.contentWindow.svgCanvas.setSvgString(svg)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Dialog\r\n                title='DrawTool'\r\n                style={{zIndex: 3000}}\r\n                onClose={this.props.onClose}\r\n                onConfirm={this.onConfirm}\r\n                editable={true}\r\n                confirmButton='Add'>\r\n\r\n\r\n                <iframe onLoad={this.onLoad} title='DrawingTool' src='/drawing-tool/svg/index.html' ref={this.getIframeRef} width='100%' height='100%'></iframe>\r\n            </Dialog>\r\n        )\r\n    }\r\n}\r\n\r\nexport default DrawDialog\r\n","import React from 'react';\r\nimport { Editor } from '@tinymce/tinymce-react';\r\n/* import './editor.css' */\r\n\r\nclass MCEditor extends React.Component {\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Editor\r\n                    value={this.props.value}\r\n                    apiKey=\"arg05azt52qbujpnf831szuswhmyhoqute0q48btk5bqigoj\"\r\n                    init={{\r\n                        setup: (editor) => {this.props.onEditorSetup(editor)},\r\n                        content_css: '/editor.css',\r\n                        height: 300,\r\n                        menubar: false,\r\n                        statusbar: false,\r\n                        media_live_embeds: true,\r\n                        plugins: [\r\n                            'advlist autolink lists link image charmap print preview anchor',\r\n                            'searchreplace visualblocks code fullscreen',\r\n                            'insertdatetime media table paste code wordcount media help'\r\n                        ],\r\n                        external_plugins: {\r\n                            'drawingTool': '/drawing-tool/plugin.min.js'\r\n                        },\r\n                        toolbar: 'styleselect | bold italic underline strikethrough | forecolor backcolor bullist numlist | link code | ltr rtl | charmap | drawingTool media'\r\n                    }}\r\n                    onEditorChange={this.props.onEditorChange}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default MCEditor;\r\n","import React, {useState} from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { Modal, Button, Form, ProgressBar} from 'react-bootstrap'\r\nimport { addNotification } from '../../store/notifier.js'\r\nimport { fetchAttachments, fetchLinks } from '../../store/noteReducer.js'\r\nimport { FileDrop } from 'react-file-drop';\r\nimport {url as serverUrl} from '../../store/api.js'\r\nimport './AttachPanel.css'\r\n\r\nimport {postAttachment, uploadFile, putObject, postLink} from '../../store/api.js'\r\n\r\n//TODO if dropping files is not supported\r\nconst AttachPanel = props => {\r\n    const author = useSelector(state => state.globals.author);\r\n    const dispatch = useDispatch();\r\n    const [progress, setProgress] = useState(0);\r\n\r\n    const  handleClose= (e) => {\r\n        props.onClose();\r\n    }\r\n    const onFileChange = (e) => {\r\n        onFileSelect(e.target.files);\r\n        // TODO After upload, clear input\r\n        /* e.target.value = null; */\r\n\r\n    }\r\n    const onFileSelect = async (fileList) => {\r\n        const files = Array.from(fileList)\r\n        setProgress(0)\r\n        // TODO googleOauth, googledrive\r\n        const upload_promises = []\r\n        files.forEach(async (file) => {\r\n            if (file.type.indexOf(\"image/\") >= 0){\r\n                const _URL = window.URL || window.webkitURL;\r\n                const img = await addImageProcess(_URL.createObjectURL(file))\r\n                var width  = img.naturalWidth  || img.width;\r\n                var height = img.naturalHeight || img.height;\r\n                file.width = width;\r\n                file.height = height;\r\n                upload_promises.push(createAttachment(file, 'image'))\r\n            }else if (file.type.startsWith('video')){\r\n                upload_promises.push(createAttachment(file, 'video'))\r\n            }else{\r\n                upload_promises.push(createAttachment(file, 'link'))\r\n            }\r\n        });\r\n\r\n        await Promise.all(upload_promises)\r\n        handleClose()\r\n        addNotification({title: 'Uploaded!', type:'success', message:'Attachments uploaded!'})\r\n    }\r\n    const addImageProcess = (src) => {\r\n        return new Promise((resolve, reject) => {\r\n            let img = document.createElement(\"img\")\r\n            img.onload = () => resolve(img)\r\n            img.onerror = reject\r\n            img.src = src\r\n        })\r\n    }\r\n    const createAttachment = async (file, type) => {\r\n        try {\r\n            const attachRes = await postAttachment(author.communityId, author._id)\r\n            const uploadRes = await uploadFile(file, onUploadProgress)\r\n            const attachment = attachRes.data\r\n            const data = uploadRes.data\r\n            attachment.title = data.filename;\r\n            attachment.status = 'active';\r\n            data.version = attachment.data.version + 1;\r\n            attachment.data = data;\r\n            attachment.tmpFilename = data.tmpFilename;\r\n            const newAttachment = await putObject(attachment, author.communityId, attachment._id)\r\n\r\n            newAttachment.data.width = file.width;\r\n            newAttachment.data.height = file.height;\r\n\r\n\r\n            await postLink(props.noteId, attachment._id, 'attach')\r\n            //TODO updateFromConnections\r\n            dispatch(fetchLinks(props.noteId, 'from'))\r\n            if (props.inlineAttach){\r\n                const data_mce_src = `${serverUrl}${newAttachment.data.url}`;\r\n                const title = newAttachment.title;\r\n                let html = '';\r\n                if (type==='image') {\r\n                    html = '<img class=\"inline-attachment ' + attachment._id + '\" src=\"' + data_mce_src +'\" width=\"100px\" alt=\"' + title + '\" data-mce-src=\"' + data_mce_src + '\">';\r\n                } else if (type==='video') {\r\n                    html = `<video controls=\"controls\" width=\"300\" height=\"150\"> <source src=\"${data_mce_src}\" type=\"video/mp4\" /></video>`\r\n                } else {\r\n                    html ='<a class=\"inline-attachment ' + attachment._id + '\" href=\"' + data_mce_src + '\" target=\"_blank\" download>';\r\n                    html += `<img src=\"${serverUrl}/manual_assets/kf6images/03-toolbar-attachment.png\" alt=\"` + title + '\">' + title + '</a>';\r\n                }\r\n                props.onNewInlineAttach(html)\r\n            }\r\n            dispatch(fetchAttachments(props.noteId))\r\n            //TODO googledrive\r\n            /* if(newAttachment.data.type.indexOf('video') === 0 && $community.isPluginEnabled('googledrive')){\r\n             *     $scope.save2GoogleDrive(userName, newAttachment);\r\n             * } */\r\n        } catch (err) {\r\n            console.log(err)\r\n        } finally {\r\n\r\n        }\r\n\r\n    }\r\n\r\n    const onUploadProgress = (progressEvent) => {\r\n        const percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total)\r\n        setProgress(percentCompleted)\r\n    }\r\n\r\n    const styles = { width: '100%', color: 'black' };\r\n    return (\r\n        <Modal show={props.attachPanel} onHide={handleClose}>\r\n            <Modal.Header closeButton>\r\n                <Modal.Title>Insert Attachment File</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n                <Form.File id=\"custom-file\">\r\n                    <Form.File.Input onChange={onFileChange}/>\r\n                </Form.File>\r\n                <div style={styles}>\r\n                    <FileDrop\r\n                        onFrameDragEnter={(event) => console.log('onFrameDragEnter', event)}\r\n                        onFrameDragLeave={(event) => console.log('onFrameDragLeave', event)}\r\n                        onFrameDrop={(event) => console.log('onFrameDrop', event)}\r\n                        onDragOver={(event) => console.log('onDragOver', event)}\r\n                        onDragLeave={(event) => console.log('onDragLeave', event)}\r\n                        onDrop={(files, event) => onFileSelect(files)}\r\n                    >\r\n                        or drop some files here!\r\n                    </FileDrop>\r\n                </div>\r\n                <ProgressBar now={progress} />\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"primary\" onClick={handleClose}>\r\n                    Close\r\n                </Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    )\r\n\r\n};\r\n\r\nexport default AttachPanel;\r\n","import React, {useState} from 'react';\r\nimport {useSelector} from 'react-redux'\r\nimport { Row, Col, Button} from 'react-bootstrap'\r\nimport {url as serverUrl} from '../../store/api'\r\nimport './attachArea.css'\r\n\r\nconst AttachArea = props => {\r\n\r\n    const attachments = useSelector(state => {\r\n        const atts = []\r\n        props.attachments.forEach((attId) => {\r\n            const att = state.notes.attachments[attId]\r\n            if (att){ atts.push(att) }\r\n        })\r\n        return atts;\r\n    })\r\n    const [selectedImgs, setSelectedImgs] = useState([])\r\n    const getFileNameString = (name) => {\r\n       return name\r\n    }\r\n\r\n    const getFileSizeString = (size) => {\r\n        return size\r\n    }\r\n\r\n    const addImages = () => {\r\n        const  selectedImgs = Array.from(document.getElementById(`attachbox-${props.noteId}`).getElementsByClassName(\"selected\"))\r\n        if (selectedImgs.length === 0) {\r\n            return;\r\n        }\r\n        let html = \"\";\r\n        const maxWidth = 200;\r\n        selectedImgs.forEach((img) => {\r\n            const tagName = img.tagName;\r\n            let width = img.naturalWidth;\r\n            if(width > maxWidth){\r\n                width = maxWidth;\r\n            }\r\n            if (tagName === 'IMG') {\r\n                const data_mce_src = img.getAttribute(\"src\");\r\n                let className = '';\r\n                img.classList.forEach(cls_name => {\r\n                    if (cls_name.length === 24) { //Find 24 char long classes, one of them might be MongoDB id\r\n                        className += cls_name + ' ';\r\n                    }\r\n                })\r\n                html += '<img class=\"inline-attachment ' + className + '\" src=\"' + data_mce_src + '\" width=\"' + width + 'px\" alt=\"\" data-mce-src=\"' + data_mce_src + '\">';\r\n            }\r\n\r\n        })\r\n        props.onNewInlineAttach(html)\r\n\r\n    }\r\n    const selectedImg = (attId, e) => {\r\n        if (selectedImgs.includes(attId)){\r\n            setSelectedImgs((imgs) => imgs.filter( img => img !== attId))\r\n        }else{\r\n            setSelectedImgs((imgs) => [...imgs, attId])\r\n        }\r\n    }\r\n    const deleteAttachment = (attId) => {\r\n        if (window.confirm('Are you sure to delete the attachment?')) {\r\n            props.onAttachDelete(attId)\r\n        }\r\n    }\r\n    return (\r\n        <Col>\r\n            <Row>\r\n                <Col>\r\n                    <span className=''>Insert image or file: </span>\r\n                    <Button className='attach-button mx-2' size='sm' variant='outline-dark' onClick={()=> props.onNewAttachClick(true)}>Inline</Button>\r\n                    <Button className='attach-button mx-2' size='sm' variant='outline-dark' onClick={()=>props.onNewAttachClick(false)}>As an attachment</Button>\r\n                    <Button className='attach-button mx-2' size='sm' variant='outline-dark' onClick={addImages} disabled={selectedImgs.length === 0}>Insert</Button>\r\n                </Col>\r\n            </Row>\r\n            <Row id={`attachbox-${props.noteId}`} className='attachment-box'>\r\n                {\r\n                    attachments.map((attachment) => (\r\n                            <div key={attachment._id} className=\"attachment-inner-box col-auto\">\r\n                                <div className=\"attachment-thumbnail\">\r\n                                    {\r\n                                        attachment.data.type.indexOf('image/') === 0 ?\r\n                                        <img className={attachment._id + \" \" + (selectedImgs.includes(attachment._id) ? 'selected' : '')} src={`${serverUrl}${attachment.data.url}`} onClick={(e) => selectedImg(attachment._id, e)} alt='attachment'/>\r\n                                        :\r\n                                        <a href={`${serverUrl}${(attachment.data.downloadUrl || attachment.data.url)}`} title={attachment.title} download>\r\n                                            <img className={attachment._id} src={`${serverUrl}/manual_assets/kf6images/03-toolbar-attachment.png`}\r\n                                                 title=\"{attachment.title}\" alt='attachment' />\r\n                                        </a>\r\n                                    }\r\n                                </div>\r\n                                <div className=\"attachment-buttons\">\r\n                                    <p>\r\n                                        <a href={`${serverUrl}${(attachment.data.downloadUrl || attachment.data.url)}`}\r\n                                           title={attachment.title} download>\r\n                                            <img className=\"download-attachment\" src={`${serverUrl}/manual_assets/kf6images/cloud-download-2x.png`}\r\n                                                 alt=\"Download\" height=\"15px\" />\r\n                                        </a>\r\n                                    </p>\r\n                                    <p>\r\n                                        <button className=\"delete-attachment\" onClick={() => deleteAttachment(attachment._id)}>\r\n                                            <img src={`${serverUrl}/manual_assets/kf6images/trash.png`} alt='Delete attachment' width=\"10px\" height=\"15px\"/>\r\n                                        </button>\r\n                                    </p>\r\n                                </div>\r\n                                <div className=\"attachment-info\">\r\n                                    <p title=\"{attachment.title}\">{getFileNameString(attachment.title)}</p>\r\n                                    <p>{getFileSizeString(attachment.data.size)}</p>\r\n                                </div>\r\n                            </div>\r\n                ))\r\n                }\r\n            </Row>\r\n        </Col>\r\n    )\r\n\r\n};\r\n\r\nexport default AttachArea;\r\n","import React from 'react';\r\nimport MCEditor from '../editor/MCEditor'\r\nimport AttachPanel from '../attachmentCollapse/AttachPanel.js'\r\nimport {Container, Row, Col, Form} from 'react-bootstrap'\r\nimport ScaffoldSelect from '../scaffold/ScaffoldSelect'\r\nimport AttachArea from '../attachmentArea/AttachArea.js'\r\n\r\nimport './WriteTab.css';\r\nclass WriteTab extends React.Component {\r\n\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {inlineAttach: true, attachPanel: false}\r\n        this.onScaffoldSelected = this.onScaffoldSelected.bind(this);\r\n        this.onNewAttachmentClick = this.onNewAttachmentClick.bind(this);\r\n        this.closeAttachPanel = this.closeAttachPanel.bind(this);\r\n        this.onNewInlineAttach = this.onNewInlineAttach.bind(this);\r\n        this.onAttachDelete = this.onAttachDelete.bind(this)\r\n    }\r\n\r\n    onScaffoldSelected(tagCreator, initialText){\r\n        this.props.onChange({scaffold: {tagCreator, initialText}})\r\n    }\r\n\r\n    onNewAttachmentClick(inline){\r\n        this.setState({inlineAttach: inline, attachPanel: true})\r\n    }\r\n    onNewInlineAttach(inlineAttach) {\r\n        this.props.onChange({attach: inlineAttach})\r\n    }\r\n    closeAttachPanel()  {\r\n        this.setState({attachPanel: false})\r\n    }\r\n    onAttachDelete(attachId) {\r\n        this.props.onChange({deleteAttach: attachId})\r\n    }\r\n    render() {\r\n        const {note, onChange, onEditorSetup} = this.props;\r\n        return (\r\n            <Container className='write-container p-0'>\r\n                    <Row>\r\n                        <Col>\r\n                            <Form.Group className=\"write-title-form\" controlId=\"note-title\">\r\n                                <Form.Control type=\"text\"\r\n                                              className=\"write-tab-input\"\r\n                                              size=\"sm\"\r\n                                              placeholder=\"Enter title\"\r\n                                              value={note.title}\r\n                                              onChange={(val) => {onChange({title: val.target.value})}}/>\r\n                            </Form.Group>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col md={2} className='pr-0'>\r\n                            <ScaffoldSelect initVal={0} onScaffoldSelected={this.onScaffoldSelected}/>\r\n                        </Col>\r\n                        <Col md={10}>\r\n                            <MCEditor value={note.data.body}\r\n                                      onEditorSetup={onEditorSetup}\r\n                                      onEditorChange={(content, editor) => onChange({ data: {body: content}})}/>\r\n                            <div className='wordcount-bar text-right'>{note.wordCount} words</div>\r\n\r\n                        </Col>\r\n                    </Row>\r\n                    <Row className='mt-2'>\r\n                        <AttachPanel noteId={note._id} onClose={this.closeAttachPanel} onNewInlineAttach={this.onNewInlineAttach} {...this.state}></AttachPanel>\r\n                        <AttachArea\r\n                            noteId={note._id}\r\n                            attachments={note.attachments}\r\n                            onNewAttachClick={this.onNewAttachmentClick}\r\n                            onNewInlineAttach={this.onNewInlineAttach}\r\n                            onAttachDelete={this.onAttachDelete}\r\n                        >\r\n                        </AttachArea>\r\n                    </Row>\r\n            </Container>\r\n        )\r\n    }\r\n}\r\n\r\nexport default WriteTab;\r\n","import React from 'react';\r\n\r\nconst History = props => {\r\n\r\n    const [read, edit] = props.records.reduce(\r\n        (acc, el) => {\r\n            if (el.type === 'read') {\r\n                acc[0].push(el)\r\n            }else{\r\n                acc[1].push(el)\r\n            }\r\n            return acc\r\n        }, [[],[]])\r\n    return (\r\n        <div>\r\n            <h5>Edit logs:</h5>\r\n            <p className='mb-0'>{edit.length} edits</p>\r\n            <ul>\r\n                {edit.map((record) =>\r\n                    <li key={record._id}>{record.date}: {record.author}</li>\r\n                )}\r\n            </ul>\r\n            <h5>Read logs:</h5>\r\n            <p className='mb-0'>{read.length} reads</p>\r\n            <ul>\r\n                {read.map((record) =>\r\n                    <li key={record._id}>{record.date}: {record.author}</li>\r\n                )}\r\n            </ul>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default History\r\n","import React from 'react';\r\n\r\nconst Properties = props => {\r\n\r\n    const onPermissionChange = (evt) => {\r\n        props.onChange({permission: evt.target.value})\r\n    }\r\n    //TODO\r\n    const isTemplateChange = (evt) => {\r\n        props.onChange({data: {isTemplate: evt.target.checked}})\r\n    }\r\n\r\n    return (\r\n        <div className=\"m-2\">\r\n            <div>\r\n                <label className='mt-1 font-weight-bold'>Permission:</label>\r\n                <div>\r\n                    <table className=\"KFPermission table table-sm\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>&nbsp;</th>\r\n                                <th>Authors</th>\r\n                                <th>Group Members</th>\r\n                                <th>Others</th>\r\n                            </tr>\r\n                        </thead>\r\n                                <tbody>\r\n                                    <tr>\r\n                                        <td>\r\n                                            <form action=\"\">\r\n                                                <div className=\"form-check form-check-inline\">\r\n                                                    <input className=\"form-check-input\" type=\"radio\" name='permission' value=\"private\" id=\"contrib-permission1\"\r\n                                                           onChange={onPermissionChange} checked={props.contribution.permission === 'private'}\r\n                                                    />\r\n                                                        <label className=\"form-check-label font-weight-normal\" htmlFor=\"contrib-permission1\">\r\n        &nbsp;private\r\n                                                        </label>\r\n                                                </div>\r\n                                            </form>\r\n                                        </td>\r\n                                        <td>rw</td>\r\n                                        <td>rw</td>\r\n                                        <td>-</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>\r\n                                            <form action=\"\">\r\n                                                <div className=\"form-check form-check-inline\">\r\n                                                    <input className=\"form-check-input\" type=\"radio\" value=\"protected\" id=\"contrib-permission2\" name='permission'\r\n                                                           onChange={onPermissionChange} checked={props.contribution.permission === 'protected'}\r\n                                                    />\r\n                                                        <label className=\"form-check-label font-weight-normal\" htmlFor=\"contrib-permission2\">\r\n        &nbsp;protected\r\n                                                        </label>\r\n                                                </div>\r\n                                            </form>\r\n                                        </td>\r\n                                        <td>rw</td>\r\n                                        <td>rw</td>\r\n                                        <td>r</td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td>\r\n                                            <form action=\"\">\r\n                                                <div className=\"form-check form-check-inline\">\r\n                                                    <input className=\"form-check-input\" type=\"radio\" value=\"public\" id=\"contrib-permission3\" name='public'\r\n                                                           onChange={onPermissionChange} checked={props.contribution.permission === 'public'}\r\n                                                    />\r\n                                                        <label className=\"form-check-label font-weight-normal\" htmlFor=\"contrib-permission3\">\r\n        &nbsp;public\r\n                                                        </label>\r\n                                                </div>\r\n                                            </form>\r\n                                        </td>\r\n                                        <td>rw</td>\r\n                                        <td>rw</td>\r\n                                        <td>rw</td>\r\n                                    </tr>\r\n                                </tbody>\r\n                    </table>\r\n                </div>\r\n                <label className=\"mt-1 font-weight-bold\">Status:</label>\r\n                <div className=\"ml-2\">\r\n                    {props.contribution.status}\r\n                </div>\r\n                <label className=\"mt-2 font-weight-bold\">Template:</label>\r\n                <form className=\"ml-2\" action=\"\">\r\n                    <div className=\"form-check  form-check-inline\">\r\n                        <input className=\"form-check-input\" type=\"checkbox\" id=\"c-isTemplate\" checked={props.contribution.data.isTemplate} onChange={isTemplateChange}/>\r\n\r\n                            <label className=\"form-check-label font-weight-normal\" htmlFor=\"c-isTemplate\">\r\n                                isTemplate\r\n                            </label>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n            {/* { props.contribution.type === 'Note' &&\r\n                (<div>\r\n                <label className=\"mt-1 mr-1 font-weight-bold\">Riseabove:</label>\r\n                {\r\n                (props.contribution.type === 'Note' && props.contribution.data && props.contribution.data.riseabove && props.contribution.data.riseabove.viewId) ?\r\n\r\n                \"This note has riseabove view. Please look it at 'Read' tab.\"\r\n                :\r\n\r\n                <button type=\"submit\" className=\"btn btn-primary btn-sm\" onClick={makeRiseAbove()}>MakeRiseabove</button>\r\n                }\r\n                </div>)\r\n                } */}\r\n        </div>\r\n\r\n    )\r\n}\r\n\r\nexport default Properties\r\n","import React, {useState} from 'react';\r\nimport {Button, Row, Col} from 'react-bootstrap'\r\nimport Select from 'react-select'\r\nconst AuthorSelect = props => {\r\n    const select_options = Object.entries(props.authors).map(\r\n        (auth) => { return {value: auth[1]._id, label: `${auth[1].firstName} ${auth[1].lastName}`} })\r\n\r\n    const [selectedOption, setSelectedOption] = useState(null);\r\n    const handleChange = selected => {\r\n        setSelectedOption(selected)\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Row>\r\n                <Col>\r\n                    <Select options={select_options} onChange={handleChange} isClearable={true}/>\r\n                </Col>\r\n                <Col md='auto'>\r\n                    <Button disabled={!selectedOption}\r\n                        onClick={() => props.onAuthorSelected(selectedOption)}>Add</Button>\r\n                </Col>\r\n            </Row>\r\n            <p>{select_options.length} possible author(s) in this community.</p>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AuthorSelect\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Button, Col, Row } from 'react-bootstrap'\r\nimport { addNotification } from '../../store/notifier.js'\r\nimport AuthorSelect from '../authorSelect/AuthorSelect'\r\nimport Select from 'react-select'\r\n\r\nconst AuthorTab = props => {\r\n    const authors = useSelector((state) => props.contrib.authors.map((auth) => state.users[auth]))\r\n    const communityAuthors = useSelector((state) => state.users)\r\n    const groups = useSelector((state) => state.globals.community.groups)\r\n    const group_options = groups.map((g) => ({value: g._id, label: g.title}))\r\n    const contribGroup = groups.find(group => group._id === props.contrib.group)\r\n    const g = contribGroup ? {value: contribGroup._id, label: contribGroup.title} : {value: null, label: 'No Group selected'}\r\n\r\n\r\n    const removeAuthor = (author, idx) => {\r\n        if (idx === 0) {\r\n            addNotification({title: 'Error!', type:'danger', message:'cannot remove the Primary Author'})\r\n            return;\r\n        }else if (idx >= 0) {\r\n            props.onChange({authors: props.contrib.authors.filter(auth => auth !== author._id)})\r\n        }\r\n    }\r\n\r\n    const addAuthor = (author) => {\r\n        if (!props.contrib.authors.includes(author.value)){\r\n            props.onChange({authors: [...props.contrib.authors, author.value]})\r\n        }\r\n    }\r\n\r\n    const selectGroup = (selected) => {\r\n        props.onChange({group: selected && selected.value})\r\n    }\r\n\r\n    //TODO\r\n    const isEditable = () => {\r\n        return true\r\n    }\r\n    return (\r\n                <div className=\"authorTab mt-2\" style={{height: '100%'}}>\r\n                    <Row>\r\n                        <Col>\r\n                            <h5>Authors:</h5>\r\n                            <ul>\r\n                                {\r\n                                    authors.map((author, idx) => (\r\n\r\n                                        <li key={author._id} style={{cursor: 'move'}}>\r\n                                            {author.firstName} {author.lastName}\r\n                                            <Button size='sm' className='ml-1'\r\n                                                    onClick={() => removeAuthor(author, idx)}>x</Button>\r\n                                        </li>\r\n\r\n                                    ))\r\n                                }\r\n                            </ul>\r\n                        </Col>\r\n                        <Col>\r\n                            <div>\r\n                                <h5>Add author:</h5>\r\n                                <AuthorSelect authors={communityAuthors} onAuthorSelected={addAuthor}/>\r\n                            </div>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col>\r\n                            <h5>Group:</h5>\r\n                            <div>\r\n                                {\r\n                                    isEditable()?\r\n                                    <form method=\"\" id=\"\" action=\"\">\r\n                                        <Select value={g} options={group_options} onChange={selectGroup} isClearable={true}/>\r\n                                    </form>\r\n                                    :\r\n                                    <div>{g.label}</div>\r\n                                }\r\n                            </div>\r\n                        </Col>\r\n                    </Row>\r\n                </div>\r\n\r\n    )\r\n}\r\n\r\nexport default AuthorTab\r\n","/*global Annotator*/\r\n/*global $*/\r\nimport tinymce from 'tinymce/tinymce';\r\nimport ReactDOM from 'react-dom';\r\n// Default icons are required for TinyMCE 5.3 or above\r\nimport 'tinymce/icons/default';\r\n\r\n// A theme is also required\r\nimport 'tinymce/themes/silver';\r\n// Any plugins you want to use has to be imported\r\nimport 'tinymce/plugins/media';\r\nimport 'tinymce/plugins/image';\r\nimport 'tinymce/plugins/insertdatetime';\r\nimport 'tinymce/plugins/link';\r\nimport 'tinymce/plugins/code';\r\n\r\nexport const setKFPlugin = (elem, annotatorHandler, uname, scaffoldElement) => {\r\n    Annotator.Plugin.KFPlugin = function( /*element*/ ) {\r\n        return {\r\n            pluginInit: function() {\r\n                this.annotator\r\n                    .subscribe('annotationCreated', function(annotation) {\r\n                        if (annotatorHandler) {\r\n                            annotatorHandler.annotationCreated(annotation);\r\n                        }\r\n                    })\r\n                    .subscribe('annotationUpdated', function(annotation) {\r\n                        if (annotatorHandler) {\r\n                            annotatorHandler.annotationUpdated(annotation);\r\n                        }\r\n                    })\r\n                    .subscribe('annotationDeleted', function(annotation) {\r\n                        if (annotatorHandler) {\r\n                            annotatorHandler.annotationDeleted(annotation);\r\n                        }\r\n                    })\r\n                    .subscribe('annotationEditorShown', function(editor, annotation){\r\n                        if (annotatorHandler) {\r\n                            annotatorHandler.displayEditor(editor, annotation);\r\n                        }\r\n                    })\r\n                    .subscribe('annotationViewerShown', function(viewer, annotations) {\r\n                        if (annotatorHandler) {\r\n                            annotatorHandler.displayViewer(viewer, annotations);\r\n                        }\r\n                    })\r\n                    .subscribe('annotationEditorHidden', function(editor, annotation){\r\n                        if (annotatorHandler) {\r\n                            annotatorHandler.editorHidden(editor, annotation);\r\n                        }\r\n                    })\r\n\r\n                ;\r\n\r\n                if (annotatorHandler) {\r\n                    annotatorHandler.annotatorInitialized(this.annotator);\r\n                }\r\n            }\r\n        };\r\n    };\r\n\r\n\r\n    //----------------------------Rich Text Annotator Plugin: START -----------------------------\r\n    /*\r\n      Rich Text Annotator Plugin v1.0 (https://github.com/danielcebrian/richText-annotator)\r\n      Copyright (C) 2014 Daniel Cebrián Robles\r\n      License: https://github.com/danielcebrian/richText-annotator/blob/master/License.rst\r\n      This program is free software; you can redistribute it and/or\r\n      modify it under the terms of the GNU General Public License\r\n      as published by the Free Software Foundation; either version 2\r\n      of the License, or (at your option) any later version.\r\n      This program is distributed in the hope that it will be useful,\r\n      but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n      GNU General Public License for more details.\r\n      You should have received a copy of the GNU General Public License\r\n      along with this program; if not, write to the Free Software\r\n      Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\r\n    */\r\n    // Generated by CoffeeScript 1.6.3\r\n    /* jshint ignore:start */\r\n    var _ref,\r\n        // __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\r\n        __hasProp = {}.hasOwnProperty,\r\n        __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\r\n\r\n\r\n    Annotator.Plugin.RichText = (function(_super) {\r\n        __extends(RichText, _super);\r\n\r\n\r\n        // FILE - GLOBALS -----\r\n        var editorId =\"\";\r\n\r\n        //----------------------\r\n        //Default tinymce configuration\r\n        RichText.prototype.options = {\r\n            tinymce:{\r\n                selector: \"li.annotator-item textarea\",\r\n                content_css: '/editor.css',\r\n                height:\"170px\",\r\n                statusbar: false,\r\n                plugins: \"media image insertdatetime link code\",\r\n                menubar: false,\r\n                toolbar_items_size: 'small',\r\n                extended_valid_elements : \"iframe[src|frameborder|style|scrolling|class|width|height|name|align|id]\",\r\n                toolbar: \"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | code | mysidebar\",\r\n            }\r\n        };\r\n\r\n        function RichText(element,options) {\r\n            _ref = RichText.__super__.constructor.apply(this, arguments);\r\n            return _ref;\r\n        }\r\n\r\n\r\n        RichText.prototype.pluginInit = function() {\r\n            var annotator = this.annotator,\r\n                editor = this.annotator.editor;\r\n            //Check that annotator is working\r\n            if (!Annotator.supported()) {\r\n                return;\r\n            }\r\n\r\n            //Editor Setup\r\n            annotator.editor.addField({\r\n                type: 'input',\r\n                load: this.updateEditor,\r\n            });\r\n\r\n            //Viewer setup\r\n            annotator.viewer.addField({\r\n                load: this.updateViewer,\r\n            });\r\n\r\n\r\n            annotator.subscribe(\"annotationEditorShown\", function(){\r\n                // $(annotator.editor.element).find('.mce-tinymce')[0].style.display='block';\r\n                // $(annotator.editor.element).find('.mce-container').css('z-index',3000000000);\r\n                // annotator.editor.checkOrientation();\r\n            });\r\n            annotator.subscribe(\"annotationEditorHidden\", function(){\r\n                // $(annotator.editor.element).find('.mce-tinymce')[0].style.display='none';\r\n                // $(annotator.editor.element).find(\"#annoSide\").remove();\r\n            });\r\n\r\n            //set listener for tinymce;\r\n            this.options.tinymce.setup = function(ed) {\r\n                RichText.prototype.mceditor = ed\r\n                ed.on('change', function(e) {\r\n                    //set the modification in the textarea of annotator\r\n                    $(editor.element).find('textarea')[0].value = tinymce.activeEditor.getContent();\r\n                });\r\n                ed.on('Init', function(ed){\r\n                    $('.mce-container').css('z-index','3090000000000000000');\r\n\r\n                });\r\n                ed.on('remove', function(){\r\n                    ReactDOM.unmountComponentAtNode(RichText.prototype.scaffoldSidebar)\r\n                })\r\n                ed.ui.registry.addSidebar('mysidebar', {\r\n                    tooltip: 'View Scaffold',\r\n                    icon: 'settings',\r\n                    onSetup: function (api) {\r\n                        const sidebar = api.element()\r\n                        document.sidebar = sidebar\r\n                        sidebar.style.width = \"200px\"\r\n                        sidebar.style.overflow = \"scroll\"\r\n                        sidebar.style.fontSize = \"0.7rem\"\r\n                        ReactDOM.render(scaffoldElement, sidebar, null)\r\n                        RichText.prototype.scaffoldSidebar = sidebar\r\n                    },\r\n                    onShow: function (api) {\r\n                        // var str = \"\\\"\\'components/kfutils/scaffold/scaffold.html\\'\\\"\";\r\n                        // api.element().innerHTML = \"<div id='annoSide'><div ng-include=\"+str+\"></div></div>\";\r\n                        // var scope = angular.element(document.getElementById(\"scaffoldContainer\")).scope();\r\n                        // scope.$apply(function () {\r\n                        //     scope.annotatorScaffoldInit(editorId);\r\n                        // });\r\n                    },\r\n                    onHide: function (api) {\r\n                        // api.element().innerHTML = \"\";\r\n                        // var scope = angular.element(document.getElementById(\"scaffoldContainer\")).scope();\r\n                        // scope.$apply(function () {\r\n                        //     scope.annotatorScaffoldClose();\r\n                        // });\r\n                        //console.log('Hide panel', api.element());\r\n                    }\r\n                });\r\n\r\n            };\r\n            tinymce.init(this.options.tinymce);\r\n        };\r\n\r\n        RichText.prototype.updateEditor = function(field, annotation) {\r\n            var text = typeof annotation.text!=='undefined'?annotation.text:'';\r\n            var count = tinymce.editors.length;\r\n            editorId = tinymce.editors[count-2].id;\r\n            tinymce.get(editorId).setContent(text);\r\n            //tinymce.activeEditor.setContent(text);\r\n            $(field).remove(); //this is the auto create field by annotator and it is not necessary\r\n        };\r\n\r\n        RichText.prototype.updateViewer = function(field, annotation) {\r\n            var textDiv = $(field.parentNode).find('div:first-of-type')[0];\r\n            textDiv.innerHTML =annotation.text;\r\n            $(textDiv).addClass('richText-annotation');\r\n            $(field).remove(); //this is the auto create field by annotator and it is not necessary\r\n        };\r\n\r\n        return RichText;\r\n\r\n    })(Annotator.Plugin);\r\n\r\n            /* jshint ignore:end */\r\n\r\n\r\n            //----------------------------Rich Text Annotator Plugin: END -----------------------------\r\n\r\n    elem.annotator('addPlugin', 'KFPlugin');\r\n    elem.annotator('addPlugin', 'Tags');\r\n    elem.annotator('addPlugin', 'RichText');\r\n\r\n    if (uname) {\r\n        elem.annotator('addPlugin', 'Permissions', {\r\n            user: uname,\r\n            permissions: {\r\n                read: [uname],\r\n                update: [uname],\r\n                delete: [uname],\r\n                admin: [uname]\r\n            },\r\n            showEditPermissionsCheckbox: false\r\n        });\r\n    }\r\n}\r\n\r\nexport const vm2m = (anno) => {\r\n    const isPublic = anno.permissions.read.length === 0;\r\n    if (isPublic) {\r\n        anno.permission = 'protected';\r\n    } else {\r\n        anno.permission = 'private';\r\n    }\r\n    const loc = anno.ranges[0];\r\n    if (loc.start.indexOf('/div[1]') === 0) {\r\n        loc.start = loc.start.substring(7);\r\n    }\r\n    if (loc.end.indexOf('/div[1]') === 0) {\r\n        loc.end = loc.end.substring(7);\r\n    }\r\n    return anno;\r\n};\r\n\r\nexport const m2vm = (anno) => {\r\n    const loc = Object.assign({}, anno.ranges[0]);\r\n    loc.start = '/div[1]' + loc.start;\r\n    loc.end = '/div[1]' + loc.end;\r\n    anno.ranges[0] = loc\r\n    return anno;\r\n};\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport { globalsReducer } from './globalsReducer.js'\r\nimport { dialogReducer } from './dialogReducer.js'\r\nimport { noteReducer } from './noteReducer.js'\r\nimport { scaffoldReducer } from './scaffoldReducer.js'\r\nimport { userReducer } from './userReducer.js'\r\n\r\nexport default configureStore({\r\n  reducer: {\r\n      dialogs: dialogReducer,\r\n      notes: noteReducer,\r\n      scaffolds: scaffoldReducer,\r\n      globals: globalsReducer,\r\n      users: userReducer\r\n  },\r\n    devTools: true\r\n});\r\n","import React from 'react';\r\nimport ScaffoldSelect from '../scaffold/ScaffoldSelect'\r\nimport * as annotPlugins from './annotator.service'\r\nimport './annotator.css'\r\nimport store from '../../store/store';\r\nimport { Provider } from 'react-redux';\r\n/*global $*/\r\nclass Annotator extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.contentRef = React.createRef();\r\n        this.annotatorInitialized = this.annotatorInitialized.bind(this)\r\n        this.annotationCreated = this.annotationCreated.bind(this)\r\n        this.annotationUpdated = this.annotationUpdated.bind(this)\r\n        this.annotator = null\r\n\r\n        this.displayEditor = this.displayEditor.bind(this)\r\n        this.displayViewer = this.displayViewer.bind(this)\r\n        this.fixPopupLocation = this.fixPopupLocation.bind(this)\r\n        this.editorHidden = this.editorHidden.bind(this)\r\n        this.loadAnnotations = this.loadAnnotations.bind(this)\r\n        this.onScaffoldSelected = this.onScaffoldSelected.bind(this)\r\n        this.dlg = null\r\n    }\r\n\r\n    componentDidMount() {\r\n        const annotatedElem = $(this.contentRef.current)\r\n        annotatedElem.annotator()\r\n        this.scaffoldElem = (\r\n            <Provider store={store}>\r\n                <ScaffoldSelect initVal={0} onScaffoldSelected={this.onScaffoldSelected}/>\r\n            </Provider>)\r\n\r\n        annotPlugins.setKFPlugin(annotatedElem, {\r\n            annotationCreated: this.annotationCreated,\r\n            annotationUpdated: this.annotationUpdated,\r\n            annotationDeleted: this.props.onDelete,\r\n            displayEditor: this.displayEditor,\r\n            displayViewer: this.displayViewer,\r\n            annotatorInitialized: this.annotatorInitialized,\r\n            editorHidden: this.editorHidden\r\n        }, this.props.author.userName, this.scaffoldElem)\r\n        this.dlg = $(`#contrib-dialog-${this.props.containerId}`)\r\n\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.annotsFetched === 1 && this.props.annotsFetched !== prevProps.annotsFetched) {\r\n            this.loadAnnotations()\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        //Need to remove editor when closing dialog\r\n        if (this.annotator && this.annotator.plugins.RichText.mceditor)\r\n            this.annotator.plugins.RichText.mceditor.remove()\r\n    }\r\n    editorHidden(editor, annotation){\r\n        $(editor.element.find(\".annotator-controls\")).off()\r\n    }\r\n    loadAnnotations(){\r\n        const annotations = Object.values(this.props.annots).map((annot) => {\r\n            const anno = Object.assign({}, annot.data)\r\n            anno.ranges = [...anno.ranges]\r\n            anno.highlights = [...anno.highlights]\r\n            annotPlugins.m2vm(anno)\r\n            return anno\r\n        })\r\n        this.annotator.loadAnnotations(annotations)\r\n        this.props.onAnnotsLoaded()\r\n    }\r\n    annotatorInitialized(annotator){\r\n        this.annotator = annotator\r\n        this.loadAnnotations()\r\n\r\n        var $element = $('div.annotator-adder');\r\n        $element.attr('title', 'Annotation');\r\n        $element.addClass('tooltip1');\r\n        $element.append('<span class=\"tooltiptext\">Annotation</span>');\r\n\r\n        document.annotator = this.annotator\r\n        const adder = annotator.adder.get(0)\r\n        this.observer = new MutationObserver(function(mutationsList){\r\n            for(let mutation of mutationsList) {\r\n                if (mutation.type === 'attributes') {\r\n                    //mutation.oldValue.startsWith(\"display: none\") &&\r\n                    if( adder.style.display !== 'none'){\r\n                        this.fixPopupLocation(annotator.adder)\r\n                        this.observer.takeRecords()\r\n                        return\r\n                    }\r\n                }\r\n            }\r\n        }.bind(this));\r\n        //TODO disconnect? when?\r\n        this.observer.observe(adder, { attributes: true, attributeOldValue: true });\r\n    }\r\n    annotationCreated(annotation){\r\n        this.props.onCreate(annotPlugins.vm2m(annotation))\r\n    }\r\n    annotationUpdated(annotation){\r\n        this.props.onUpdate(annotPlugins.vm2m(annotation))\r\n    }\r\n    displayEditor(editor, annotation){\r\n        /* $(editor.element.find(\".annotator-controls\")).off()*/\r\n        if (!editor.element.hasClass(editor.classes.invert.y)) {\r\n            editor.element.addClass(editor.classes.invert.y);\r\n        }\r\n    }\r\n    fixPopupLocation(popup){\r\n        const dlgOffset = this.dlg.offset()\r\n        const ppOffset = popup.offset()\r\n        popup.offset({top: ppOffset.top - dlgOffset.top, left: ppOffset.left - dlgOffset.left})\r\n    }\r\n    displayViewer(viewer, annotation){\r\n        this.fixPopupLocation(viewer.element)\r\n        viewer.element.addClass(viewer.classes.invert.y);\r\n    }\r\n\r\n    onScaffoldSelected(tagCreator, initialText) {\r\n        const mceditor = this.annotator.plugins.RichText.mceditor\r\n        const selected = mceditor.selection.getContent();\r\n        let text = selected.length ? selected : initialText;\r\n        const {tag, supportContentId} = tagCreator(text);\r\n        mceditor.insertContent(tag)\r\n        //select text after insert\r\n        const contentTag = mceditor.dom.get(supportContentId);\r\n        if (contentTag)\r\n            mceditor.selection.setCursorLocation(contentTag)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div ref={this.contentRef}>\r\n                <div dangerouslySetInnerHTML={{__html: this.props.content}}>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default Annotator\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Col, Row, Card, Button } from 'react-bootstrap';\r\nimport './RiseAboveView.css';\r\n\r\nclass RiseAboveView extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            riseAboveNotes: [],\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.riseAboveViewId) {\r\n            let notes = this.props.riseAboveViewNotes[this.props.riseAboveViewId].map((noteId) => this.props.riseAboveNotes[noteId])\r\n            this.setState({\r\n                riseAboveNotes: notes\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Col>\r\n                <Row>\r\n                    <Col className=\"\">\r\n                        <Card className=\"pd-05\">\r\n                            <Card.Title>RiseAbove Notes</Card.Title>\r\n                            <Card.Body className=\"mrg-05-top\">\r\n                                {this.state.riseAboveNotes ?\r\n                                    (<>\r\n                                        {this.state.riseAboveNotes.map((note, i) => {\r\n                                            return <Row key={i}><Button variant=\"light\" className=\"min-width-10 rounded-pill pd-05\" onClick={() => this.props.editNote(note._id)}>{note.title}</Button></Row>\r\n                                            // return <Row key={i}><Button variant=\"light\" onClick={() => this.editNote(note._id)}>{note.title}</Button></Row>\r\n                                        })}\r\n                                    </>)\r\n                                    : null}\r\n                            </Card.Body>\r\n                        </Card>\r\n                    </Col>\r\n                </Row>\r\n            </Col>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        riseAboveViewNotes: state.notes.riseAboveViewNotes,\r\n        riseAboveNotes: state.notes.riseAboveNotes\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(RiseAboveView)\r\n\r\n","import React from 'react';\r\nimport { Tabs, Tab, Col, Row } from 'react-bootstrap';\r\nimport WriteTab from '../writeTab/WriteTab'\r\nimport History from '../historyTab/History'\r\nimport Properties from '../propertiesTab/Properties'\r\nimport AuthorTab from '../authorsTab/AuthorTab'\r\nimport Annotator from '../annotator/Annotator'\r\nimport RiseAboveView from '../RiseAboveView/RiseAboveView'\r\nimport { connect } from 'react-redux'\r\nimport {\r\n    editNote, setAnnotationsLoaded,\r\n    fetchAttachments, fetchRecords,\r\n    createAnnotation, deleteAnnotation, modifyAnnotation, deleteAttachment, openContribution\r\n} from '../../store/noteReducer.js'\r\nimport { scaffoldWordCount } from '../../store/kftag.service.js'\r\nimport { dateFormatOptions, fetchCommGroups } from '../../store/globalsReducer.js'\r\nimport './Note.css'\r\n\r\nclass Note extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            riseAboveNotes: false,\r\n            selectedTab: this.props.mode ? this.props.mode : \"write\",\r\n        }\r\n        this.onEditorSetup = this.onEditorSetup.bind(this)\r\n        this.addDrawing = this.addDrawing.bind(this)\r\n        this.onNoteChange = this.onNoteChange.bind(this)\r\n        this.wordCount = this.wordCount.bind(this)\r\n        this.onTabSelected = this.onTabSelected.bind(this)\r\n        this.onAnnotationCreated = this.onAnnotationCreated.bind(this)\r\n        this.onAnnotationDeleted = this.onAnnotationDeleted.bind(this)\r\n        this.onAnnotationUpdated = this.onAnnotationUpdated.bind(this)\r\n        this.editNote = this.editNote.bind(this)\r\n    }\r\n\r\n    componentDidMount() {\r\n        // if (this.props.riseAboveViewNotes[this.props.note._id]) {\r\n        //     this.setState({\r\n        //         // riseAboveNotes: this.props.riseAboveViewNotes[this.props.note._id].map((noteId) => this.props.riseAboveNotes[noteId])\r\n        //         riseAboveNotes: true,\r\n        //         selectedTab: \"read\"\r\n        //     })\r\n        // }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (this.props.drawing && prevProps.drawing !== this.props.drawing) {\r\n            this.editor.insertContent(this.props.drawing)\r\n            this.props.onDrawingInserted()\r\n        }\r\n    }\r\n\r\n    onNoteChange(note) {\r\n        if (note.scaffold) {\r\n            const { tagCreator, initialText } = note.scaffold;\r\n            this.addSupport(true, initialText, tagCreator)\r\n        } else if (note.attach) {\r\n            this.editor.insertContent(note.attach)\r\n        } else if (note.deleteAttach) {\r\n            this.props.deleteAttachment(this.props.note._id, note.deleteAttach)\r\n            this.editor.dom.remove(this.editor.dom.select('.' + note.deleteAttach))\r\n        }\r\n        else {\r\n            if (note.data && note.data.body){\r\n                this.props.onNoteChange({ ...note, wordCount: this.wordCount(note.data.body) })\r\n            }else{\r\n                this.props.onNoteChange({ ...note })\r\n            }\r\n        }\r\n    }\r\n\r\n    wordCount(text) {\r\n        return this.editor.plugins.wordcount.getCount() - scaffoldWordCount(text);\r\n    }\r\n\r\n    onEditorSetup(editor) {\r\n        editor.onDrawButton = this.props.onDrawToolOpen;\r\n        this.editor = editor;\r\n    }\r\n\r\n    addDrawing(drawing) {\r\n        // Add draw to editor\r\n        this.editor.insertContent(drawing);\r\n    }\r\n\r\n    addSupport(selection, initialText, tagCreator) {\r\n        const selected = this.editor.selection.getContent();\r\n        let text = selected.length ? selected : initialText;\r\n        const { tag, supportContentId } = tagCreator(text);\r\n        this.editor.insertContent(tag)\r\n        //select text after insert\r\n        if (selection) {\r\n            const contentTag = this.editor.dom.get(supportContentId);\r\n            if (contentTag)\r\n                this.editor.selection.setCursorLocation(contentTag)\r\n        }\r\n    }\r\n\r\n    onTabSelected(tab) {\r\n        this.setState({selectedTab: tab })\r\n        if (tab === 'history') { //Refresh records\r\n            this.props.fetchRecords(this.props.note._id)\r\n        } if (tab === 'author') { //Refresh groups, and authors?\r\n            this.props.fetchCommGroups(this.props.note.communityId)\r\n        }\r\n    }\r\n\r\n    onAnnotationCreated(annotation) {\r\n        console.log(annotation)\r\n        this.props.createAnnotation(this.props.note.communityId, this.props.note._id, this.props.noteAuthor._id, annotation)\r\n    }\r\n\r\n    onAnnotationDeleted(annotation) {\r\n        if (annotation.linkId && annotation.modelId) {\r\n            this.props.deleteAnnotation(annotation.linkId, this.props.note._id, annotation.modelId);\r\n        }\r\n    }\r\n\r\n    onAnnotationUpdated(annotation) {\r\n        if (!annotation.linkId || !annotation.modelId) {\r\n            console.error('ERROR! annoVM doesn\\'t have id on update');\r\n            return;\r\n        }\r\n        const model = Object.assign({}, this.props.note.annos[annotation.modelId])\r\n        if (!model) {\r\n            console.error('ERROR! model couldn\\'t find');\r\n            return;\r\n        }\r\n        model.data = annotation;\r\n        this.props.modifyAnnotation(model, this.props.note.communityId, this.props.note._id)\r\n    }\r\n\r\n    editNote = (noteId) => {\r\n        this.props.openContribution(noteId)\r\n    }\r\n\r\n    render() {\r\n        const formatter = new Intl.DateTimeFormat('default', dateFormatOptions)\r\n        return (\r\n            <div>\r\n                <div className='contrib-info'>\r\n                    Created By: {this.props.noteAuthor.firstName} {this.props.noteAuthor.lastName} <br />\r\n                    Last modified: {formatter.format(new Date(this.props.note.modified))}\r\n                </div>\r\n                <Tabs activeKey={this.state.selectedTab} transition={false} onSelect={this.onTabSelected}>\r\n                    <Tab eventKey=\"read\" title=\"read\">\r\n                        <Row>\r\n                            {!this.state.riseAboveNotes ?\r\n                                <Col>\r\n                                    <Annotator containerId={this.props.dlgId}\r\n                                        content={this.props.note.data.body}\r\n                                        annots={this.props.note.annos}\r\n                                        annotsFetched={this.props.note.annotsFetched}\r\n                                        author={this.props.noteAuthor}\r\n                                        onCreate={this.onAnnotationCreated}\r\n                                        onUpdate={this.onAnnotationUpdated}\r\n                                        onDelete={this.onAnnotationDeleted}\r\n                                        onAnnotsLoaded={() => this.props.setAnnotationsLoaded({ contribId: this.props.note._id, value: 0 })}\r\n                                    >\r\n                                    </Annotator>\r\n                                </Col>\r\n                                :\r\n                                (<>\r\n                                    <Col md=\"6\">\r\n                                        <Annotator containerId={this.props.dlgId}\r\n                                            content={this.props.note.data.body}\r\n                                            annots={this.props.note.annos}\r\n                                            annotsFetched={this.props.note.annotsFetched}\r\n                                            author={this.props.noteAuthor}\r\n                                            onCreate={this.onAnnotationCreated}\r\n                                            onUpdate={this.onAnnotationUpdated}\r\n                                            onDelete={this.onAnnotationDeleted}\r\n                                            onAnnotsLoaded={() => this.props.setAnnotationsLoaded({ contribId: this.props.note._id, value: 0 })}\r\n                                        >\r\n                                        </Annotator>\r\n                                    </Col>\r\n                                    <Col md=\"5\">\r\n                                        <RiseAboveView riseAboveViewId={this.props.note._id} editNote = {this.editNote}/>\r\n                                    </Col>\r\n                                    <Col></Col>\r\n                                </>)}\r\n                        </Row>\r\n                    </Tab>\r\n                    {\r\n                        this.props.mode !== \"read\" ?\r\n\r\n                        <Tab eventKey=\"write\" title=\"write\">\r\n                            <WriteTab\r\n                                note={this.props.note}\r\n                                onScaffoldSelected={this.scaffoldSelected}\r\n                                onChange={this.onNoteChange}\r\n                                onEditorSetup={this.onEditorSetup}\r\n                            ></WriteTab>\r\n                        </Tab>\r\n                        :\r\n                        ''\r\n                    }\r\n                    <Tab eventKey=\"author\" title=\"author(s)\">\r\n                        <AuthorTab contrib={this.props.note} onChange={this.onNoteChange} />\r\n                    </Tab>\r\n                    <Tab eventKey='history' title='history'><History records={this.props.note.records} /></Tab>\r\n                    <Tab eventKey='properties' title='properties'><Properties contribution={this.props.note} onChange={this.props.onNoteChange} /></Tab>\r\n                </Tabs>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        noteAuthor: ownProps.note && (state.users[ownProps.note.authors[0]] || 'NA'),\r\n        riseAboveViewNotes: state.notes.riseAboveViewNotes,\r\n        riseAboveNotes: state.notes.riseAboveNotes,\r\n        currentAuthor: state.globals.author,\r\n        editable: false || (ownProps.note && ownProps.note.authors.includes(state.globals.author._id))\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    editNote,\r\n    fetchAttachments, fetchRecords,\r\n    deleteAnnotation, fetchCommGroups, createAnnotation, modifyAnnotation,\r\n    setAnnotationsLoaded, deleteAttachment, openContribution}\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(Note)\r\n\r\n","import React, {useEffect, useState} from 'react'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport Dialog from './Dialog.js'\r\nimport DrawDialog from '../drawDialog/DrawDialog.js'\r\nimport Note from '../note/Note.js'\r\nimport {removeNote, postContribution, buildOnNote} from '../../store/noteReducer.js'\r\nimport {closeDialog } from '../../store/dialogReducer.js'\r\n\r\nconst NoteDialog = props => {\r\n\r\n    const dialog = props.dialog\r\n    const reduxNote = useSelector(state => state.notes[dialog.noteId])\r\n    const dispatch = useDispatch();\r\n    const [note, setNote] = useState(null);//make copy of note from redux\r\n    const [drawTool, setDrawTool] = useState(false);\r\n    const [svg, setSvg] = useState(null);\r\n    const [drawing, setDrawing] = useState(null);\r\n\r\n    useEffect(()=>{\r\n        setNote(prevNote => {\r\n            if (prevNote === null) //Initialize once\r\n                return {...reduxNote}\r\n            else //Only update attachmets\r\n                return {...prevNote, attachments: reduxNote.attachments }\r\n        })\r\n    }, [reduxNote])\r\n\r\n\r\n    const onDialogClose = (dlg) => {\r\n        dispatch(closeDialog(dlg.id));\r\n        dispatch(removeNote(dlg.noteId));\r\n    }\r\n\r\n    const onDialogConfirm = () => {\r\n        dispatch(postContribution(note, dialog.id));\r\n    }\r\n\r\n    const onBuildOnClick = (noteId) => {\r\n        dispatch(buildOnNote(noteId));\r\n    }\r\n\r\n    const onNoteChange = (noteChanged) => {\r\n        setNote(prevNote => ({...prevNote, ...noteChanged}))\r\n    }\r\n\r\n    const openDrawDialog = (svg) => {\r\n        if (svg) {\r\n            setSvg(svg)\r\n        }\r\n        setDrawTool(true)\r\n    }\r\n\r\n    const closeDrawDialog = () => {\r\n        setSvg(null)\r\n        setDrawTool(false);\r\n    }\r\n\r\n    const onDrawingInserted = () => { setDrawing(null)}\r\n\r\n    const onConfirmDrawDialog = (drawing) => {\r\n        setDrawing(drawing)\r\n        closeDrawDialog()\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Dialog key={dialog.id}\r\n                    id={dialog.id}\r\n                    onMouseDown={props.onMouseDown}\r\n                    title={dialog.title}\r\n                    style={{zIndex: dialog.zIndex}}\r\n                    onClose={()=>onDialogClose(dialog)}\r\n                    onConfirm={()=> onDialogConfirm(dialog)}\r\n                    confirmButton={dialog.confirmButton}\r\n                    editable={dialog.editable}\r\n                    buildon={dialog.buildOn}\r\n                    onBuildOnClick={()=>onBuildOnClick(dialog.noteId)}\r\n            >\r\n                {note ?\r\n                 <Note\r\n                     key={dialog.noteId}\r\n                     dlgId={dialog.id}\r\n                     note={note}\r\n                     mode={dialog.editable? \"write\": \"read\"}\r\n                     drawing={drawing}\r\n                     onNoteChange={onNoteChange}\r\n                     onDrawToolOpen={openDrawDialog}\r\n                     onDrawingInserted={onDrawingInserted}\r\n                 />\r\n                : null}\r\n\r\n            </Dialog>\r\n            { drawTool ?\r\n             <DrawDialog onClose={closeDrawDialog}\r\n                         onConfirm={onConfirmDrawDialog}\r\n                         svg={svg}\r\n             /> : null}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NoteDialog;\r\n","import React, {useCallback} from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport {focusDialog } from '../../store/dialogReducer.js'\r\nimport NoteDialog from '../dialog/NoteDialog.js'\r\n\r\nconst DialogHandler = props => {\r\n    const dialogs = useSelector(state => state.dialogs);\r\n    const dispatch = useDispatch();\r\n\r\n    const onFocusDialog = useCallback(\r\n        (dlgId) => dispatch(focusDialog(dlgId)),\r\n        [dispatch]\r\n    );\r\n\r\n    return (\r\n        <div>{\r\n            dialogs.dialogs.map((elt, i) =>\r\n                <NoteDialog\r\n                    key={elt.id}\r\n                    dialog={elt}\r\n                    onMouseDown={() => onFocusDialog(elt.id)}\r\n                >\r\n                </NoteDialog>\r\n            )\r\n        }\r\n\r\n        </div>\r\n    )\r\n\r\n}\r\nexport default DialogHandler;\r\n","\r\nimport React, { createContext } from  'react';\r\nimport io from 'socket.io-client';\r\nimport { WS_BASE } from './config.js'\r\nimport { useDispatch } from 'react-redux';\r\nimport {setSocketStatus } from './store/globalsReducer.js'\r\nimport { removeViewLink, removeViewNote } from './store/noteReducer.js'\r\nimport { onViewLink } from './store/async_actions'\r\nimport { url } from './store/api.js'\r\nconst WebSocketContext = createContext(null)\r\n\r\nexport { WebSocketContext }\r\n\r\nexport default (({ children }) => {\r\n    let socket;\r\n    let ws;\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    const emit = (model, message) => {\r\n        socket.emit(model, message);\r\n    }\r\n\r\n\r\n    const syncUpdates = (modelName) => {\r\n        /**\r\n         * Syncs item creation/updates on 'model:save'\r\n         */\r\n        socket.on(modelName + ':save', (item) => {\r\n            if (modelName === 'link' && item.type === 'contains' && item._to.status === 'active'){\r\n                dispatch(onViewLink(item));\r\n            }\r\n        });\r\n\r\n        /**\r\n         * Syncs removed items on 'model:remove'\r\n         */\r\n        socket.on(modelName + ':remove', function(item) {\r\n            if (modelName === 'link' && item._to.status === 'active'){\r\n                dispatch(removeViewLink(item));\r\n                dispatch(removeViewNote({'_id': item.to}))\r\n            }\r\n        });\r\n    };\r\n\r\n    const subscribeToView = (viewId) => {\r\n        socket.emit('subscribe', `linkfrom:${viewId}`);\r\n        socket.emit('subscribe', `noteCount:${viewId}`);\r\n    }\r\n    /**\r\n     * Removes listeners for a models updates on the socket\r\n     *\r\n     * @param modelName\r\n     */\r\n    const unsyncUpdates  = (modelName) => {\r\n        socket.removeAllListeners(modelName + ':save');\r\n        socket.removeAllListeners(modelName + ':remove');\r\n    }\r\n\r\n    const openConnection = (subscribe, sync) => {\r\n        if (!socket){\r\n            socket = io.connect(\r\n                url,\r\n                {path: WS_BASE,\r\n                 log: true,\r\n                 \"close timeout\": 60\r\n                 , \"heartbeat timeout\": 60\r\n                 , \"heartbeat interval\": 20\r\n                });\r\n            socket.on('connect', ()=>{\r\n                dispatch(setSocketStatus(true));\r\n                if (subscribe){\r\n                    subscribeToView(subscribe)\r\n                }\r\n                if (sync){\r\n                    syncUpdates(sync)\r\n                }\r\n            });\r\n            socket.on('error', function (data) {\r\n                console.log(data || 'error');\r\n                dispatch(setSocketStatus(false));\r\n            });\r\n\r\n            socket.on('connect_failed', function (data) {\r\n                console.log(data || 'connect_failed');\r\n                dispatch(setSocketStatus(false));\r\n            });\r\n\r\n        }\r\n    }\r\n\r\n    const disconnect = () => {\r\n        if (socket)\r\n            socket.disconnect();\r\n    }\r\n\r\n    ws = {\r\n        socket: socket,\r\n        openConnection: openConnection,\r\n        emit: emit,\r\n        unsyncUpdates: unsyncUpdates,\r\n        syncUpdates: syncUpdates,\r\n        subscribeToView: subscribeToView,\r\n        disconnect: disconnect\r\n    }\r\n\r\n    return (\r\n        <WebSocketContext.Provider value={ws}>\r\n            {children}\r\n        </WebSocketContext.Provider>\r\n    )\r\n\r\n})\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux'\r\nimport { Link } from \"react-router-dom\";\r\nimport { DropdownButton, Dropdown, Button, Row, Col, Modal, OverlayTrigger, Tooltip } from 'react-bootstrap';\r\nimport { Form, FormGroup, Label, Input } from 'reactstrap';\r\nimport Axios from 'axios';\r\nimport { apiUrl, getCommunity, putCommunity, postLink, getViews } from '../store/api.js';\r\nimport { setViewId, fetchViewCommunityData, fetchNewViewDifference } from '../store/globalsReducer.js'\r\nimport { setViewLinks, setBuildsOn, setReadLinks, newNote, openContribution } from '../store/noteReducer.js'\r\nimport { clearAuthors } from '../store/userReducer.js';\r\nimport TopNavBar from '../TopNavBar/TopNavbar';\r\nimport GraphView from '../GraphView.jsx';\r\nimport LightView from '../View/LightView.js';\r\nimport '../css/index.css';\r\nimport \"./View.css\";\r\nimport DialogHandler from './dialogHandler/DialogHandler.js'\r\nimport { WebSocketContext } from '../WebSocket.js'\r\n\r\nclass View extends Component {\r\n\r\n    constructor(props){\r\n        super(props)\r\n        this.state = {\r\n          token: sessionStorage.getItem('token'),\r\n          currentView: this.props.location.state === undefined ? \"Enhanced\" : this.props.location.state.currentView,\r\n          communityTitle: this.props.location.state === undefined ? null : this.props.location.state.communityTitle,\r\n          addView: '',\r\n          showModal: false,\r\n          showView: false,\r\n        }\r\n\r\n        this.clearGraphViewProps = this.clearGraphViewProps.bind(this);\r\n        this.onViewClick = this.onViewClick.bind(this);\r\n        this.handleNewViewInput = this.handleNewViewInput.bind(this);\r\n        this.handleNewViewSubmit = this.handleNewViewSubmit.bind(this);\r\n        this.newView = this.newView.bind(this);\r\n        this.handleShow = this.handleShow.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        var viewId = this.props.viewId ? this.props.viewId : this.props.match.params.viewId;\r\n        this.context.openConnection(viewId, 'link');//Open websocket connection and subscribe to view\r\n        this.props.fetchViewCommunityData(viewId);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.viewId && this.props.viewId !== prevProps.viewId) {\r\n            this.props.fetchNewViewDifference(this.props.viewId);\r\n            if (this.props.socketStatus && prevProps.viewId){//If changing view and socket connection\r\n                this.context.emit('unsubscribe', `linkfrom:${prevProps.viewId}`);\r\n                this.context.subscribeToView(this.props.viewId);\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        if (this.props.socketStatus){\r\n            this.context.unsyncUpdates('link');\r\n            this.context.emit('unsubscribe', `linkfrom:${this.props.viewId}`);\r\n            this.context.disconnect();\r\n        }\r\n    }\r\n\r\n    clearGraphViewProps(){\r\n      this.props.setViewLinks([]);\r\n      this.props.setBuildsOn([]);\r\n      this.props.setReadLinks([]);\r\n      this.props.clearAuthors([]);\r\n    }\r\n\r\n    onViewClick(viewId){\r\n        this.handleShow(false);\r\n        this.props.setViewId(viewId);\r\n        this.props.history.push({\r\n          pathname: `/view/${viewId}`,\r\n          state: { currentView: this.state.currentView, communityTitle: this.state.communityTitle }\r\n        });\r\n    }\r\n\r\n    newView() {\r\n        this.setState({\r\n            showView: true,\r\n            showModel: true,\r\n        })\r\n    }\r\n\r\n    // SET VALUES\r\n    handleNewViewInput = (e) => {\r\n        let target = e.target;\r\n        let name = target.name;\r\n        let value = target.value;\r\n\r\n        this.setState({\r\n            [name]: value\r\n        });\r\n    }\r\n\r\n    handleNewViewSubmit(e) {\r\n        e.preventDefault();\r\n        var config = {\r\n            headers: { Authorization: `Bearer ${this.state.token}` }\r\n        };\r\n\r\n        var addViewUrl = `${apiUrl}/contributions/${this.props.communityId}`;\r\n\r\n        var query = {\r\n            \"authors\": [this.props.author._id],\r\n            \"communityId\": this.props.communityId,\r\n            \"permission\": \"public\",\r\n            \"status\": \"active\",\r\n            \"title\": this.state.addView,\r\n            \"type\": \"View\"\r\n        }\r\n        Axios.post(addViewUrl, query, config)\r\n            .then(result => {\r\n                //get new view Id\r\n                let newViewId = result.data._id\r\n                getCommunity(this.props.communityId).then(data => {\r\n                    data.data.views.push(newViewId)\r\n                    putCommunity(data.data, this.props.communityId).then(obj => {\r\n                        getViews(this.props.communityId).then(viewsObj => {\r\n                            let pos = {\r\n                                x: 1000,\r\n                                y: 1000\r\n                            }\r\n                            postLink(this.props.viewId, newViewId, 'contains', pos).then(linkObj => {\r\n                                alert(\"View Added\")\r\n                                window.location.reload(false);\r\n                            })\r\n                        })\r\n                    })\r\n                }).catch(error => {\r\n                    console.log(error);\r\n                })\r\n            }\r\n            ).catch(\r\n                error => {\r\n                    console.log(error);\r\n\r\n                }\r\n            );\r\n    }\r\n\r\n    handleShow(value) {\r\n        this.setState({\r\n            showModel: value,\r\n        });\r\n    }\r\n\r\n    goToDashboard = () => {\r\n        this.clearGraphViewProps();\r\n        this.props.history.push(\"/dashboard\");\r\n    }\r\n\r\n    switchView = () => {\r\n      var nextView = this.state.currentView === \"Enhanced\" ? \"Light\" : \"Enhanced\";\r\n      this.setState({ currentView: nextView });\r\n    }\r\n\r\n    renderTooltip = (props) => (\r\n        <Tooltip id=\"button-tooltip\" {...props}>\r\n            {props.message}\r\n        </Tooltip>\r\n    );\r\n\r\n    render(){\r\n      let viewToRender = this.state.currentView === \"Enhanced\" ?\r\n                <GraphView currentView={this.state.currentView} onViewClick={this.onViewClick} onNoteClick={(noteId)=>this.props.openContribution(noteId, \"write\")}/> : <LightView/>;\r\n\r\n      return(\r\n          <div className=\"container-fluid d-flex flex-column\" id=\"container-fluid-for-view-js\">\r\n              <DialogHandler />\r\n\r\n              <div className=\"row\">\r\n                  {<TopNavBar onViewClick={this.onViewClick} communityTitle={this.state.communityTitle}></TopNavBar>}\r\n              </div>\r\n\r\n              <div className=\"row flex-grow-1\">\r\n\r\n                  {/* SIDEBAR */}\r\n                  <div className=\"col-md-1\" id=\"sticky-sidebar\">\r\n                    <div className=\"row sidebar-list\">\r\n                      <div className=\"sidebar-list-col col-4 col-sm-4 col-md-12\">\r\n                      <DropdownButton drop=\"right\" className=\"dropdown-btn-parent\" title={<i className=\"fas fa-plus-circle\"></i>}>\r\n\r\n                          <Dropdown.Item onClick={() => this.props.newNote(this.props.view, this.props.communityId, this.props.author._id)}>\r\n                              New Note\r\n                          </Dropdown.Item>\r\n\r\n                          <Dropdown.Item onClick={() => this.newView()}>\r\n                              New View\r\n                          </Dropdown.Item>\r\n                      </DropdownButton>\r\n                      </div>\r\n\r\n                      <div className=\"sidebar-list-col col-4 col-sm-4 col-md-12\">\r\n                      <OverlayTrigger\r\n                          placement=\"right\"\r\n                          delay={{ show: 250, hide: 400 }}\r\n                          overlay={this.renderTooltip({ message: \"Exit Community\" })}>\r\n                          <Button onClick={this.goToDashboard} className=\"circle-button sidebar-btn\"><i className=\"fa fa-arrow-left\"></i></Button>\r\n                      </OverlayTrigger>\r\n                      </div>\r\n\r\n                      <div className=\"sidebar-list-col col-4 col-sm-4 col-md-12\">\r\n                      <OverlayTrigger\r\n                          placement=\"right\"\r\n                          delay={{ show: 250, hide: 400 }}\r\n                          overlay={this.renderTooltip({ message: \"Change View\" })}>\r\n                          <Button onClick={this.switchView} className=\"circle-button pad sidebar-btn\">\r\n                              <i className=\"fa fa-globe\"></i>\r\n                          </Button>\r\n                      </OverlayTrigger>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  {/* END SIDEBAR */}\r\n\r\n                  {/* MAIN CANVAS */}\r\n                  <div className=\"col-md-11\" id=\"main-canvas\">\r\n                      {viewToRender}\r\n                  </div>\r\n                  {/* END MAIN CANVAS */}\r\n\r\n              </div>\r\n\r\n              {/* MODAL */}\r\n              <Modal show={this.state.showModel} onHide={() => this.handleShow(false)}>\r\n\r\n                  {this.state.showView ? (\r\n                      <>\r\n                          <Modal.Header closeButton>\r\n                              <Modal.Title>\r\n                                  <Row>\r\n                                      <Col>Views</Col>\r\n                                  </Row>\r\n                                  <Row>\r\n                                      <Col>\r\n                                          <Row>\r\n                                              <Form onSubmit={this.handleNewViewSubmit} className=\"form\">\r\n                                                  <Col>\r\n                                                      <FormGroup>\r\n                                                          <Label htmlFor=\"addView\" style={{ fontSize: \"1rem\" }}>Add View</Label>\r\n                                                          <Input type=\"text\" id=\"addView\" placeholder=\"Enter View Name\" name=\"addView\" value={this.state.addView} onChange={this.handleNewViewInput} />\r\n                                                      </FormGroup>\r\n                                                  </Col>\r\n                                                  <Col>\r\n                                                      <Button varient=\"secondary\" type=\"submit\">Add</Button>\r\n                                                  </Col>\r\n                                              </Form>\r\n                                          </Row>\r\n                                      </Col>\r\n                                  </Row>\r\n                              </Modal.Title>\r\n                          </Modal.Header>\r\n                          <Modal.Body style={{ 'maxHeight': 'calc(100vh - 210px)', 'overflowY': 'auto' }}>\r\n                              {this.props.myViews.map((obj, i) => {\r\n                                  return <Row key={i} value={obj.title} className=\"mrg-05-top\">\r\n                                      <Col><Link onClick={() => this.onViewClick(obj._id)}> {obj.title} </Link></Col>\r\n                                  </Row>\r\n                              })}\r\n                          </Modal.Body>\r\n                      </>) : null}\r\n\r\n                  <Modal.Footer>\r\n                      <Button variant=\"secondary\" onClick={() => this.handleShow(false)}>\r\n                          Close\r\n                  </Button>\r\n                  </Modal.Footer>\r\n              </Modal>\r\n              {/* END MODAL */}\r\n\r\n          </div>\r\n      )\r\n    }\r\n}\r\nView.contextType = WebSocketContext;\r\n\r\nconst mapStateToProps = (state, ownProps) => {\r\n    return {\r\n        token: state.globals.token,\r\n        currentServer: state.globals.currentServer,\r\n        communityId: state.globals.communityId,\r\n        viewId: state.globals.viewId,\r\n        view: state.globals.view,\r\n        author: state.globals.author,\r\n        myViews: state.globals.views,\r\n        socketStatus: state.globals.socketStatus\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    setViewId,\r\n    setViewLinks,\r\n    setBuildsOn,\r\n    setReadLinks,\r\n    clearAuthors,\r\n    fetchViewCommunityData,\r\n    fetchNewViewDifference,\r\n    openContribution,\r\n    newNote\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(View)\r\n","import React from 'react'\r\nimport {Route, Redirect} from 'react-router-dom'\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst ProtectedRoute = ({ component: Component, ...rest }) => {\r\n    const loggedIn = useSelector(state=> state.globals.isAuthenticated);\r\n    return (<Route {...rest} render={(props) => (\r\n       loggedIn ?\r\n        <Component {...props} />\r\n        : <Redirect to='/' />\r\n    )} />)\r\n}\r\nexport default ProtectedRoute;\r\n","import React from 'react';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport ReactNotification from 'react-notifications-component';\r\nimport Login from './Login';\r\nimport Dashboard from './Dashboard';\r\nimport View from './components/View.js'\r\nimport { setGlobalToken, setCurrentServer, fetchLoggedUser } from './store/globalsReducer.js'\r\nimport { setToken, setServer } from './store/api.js'\r\nimport { getLoginData } from './helper/Login_helper.js'\r\nimport ProtectedRoute from './ProtectedRoute.jsx'\r\nimport 'react-notifications-component/dist/theme.css'\r\nfunction App() {\r\n\r\n    const dispatch = useDispatch();\r\n    //Check if user loged in, if logged in set token,server and user info in store\r\n    const [server, token, ] = getLoginData();\r\n    if (token) {\r\n        setToken(token);\r\n        setServer(server);\r\n        dispatch(setGlobalToken(token))\r\n        dispatch(setCurrentServer(server))\r\n        dispatch(fetchLoggedUser())\r\n    }\r\n\r\n    return (\r\n        <div id=\"sub-root\">\r\n            <ReactNotification />\r\n            <Router>\r\n                <Switch>\r\n                    <Route exact path=\"/\" component={Login}/>\r\n                    <ProtectedRoute exact path=\"/dashboard\" component={Dashboard}></ProtectedRoute>\r\n                    <ProtectedRoute path=\"/view/:viewId\" component={View}></ProtectedRoute>\r\n                    <ProtectedRoute component={Dashboard}></ProtectedRoute>\r\n                </Switch>\r\n            </Router>\r\n        </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport App from './App';\r\nimport { Provider } from 'react-redux';\r\nimport store from './store/store';\r\nimport WebSocketProvider from './WebSocket.js'\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <WebSocketProvider>\r\n            <App />\r\n        </WebSocketProvider>\r\n    </Provider>,\r\n    document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}