(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{115:function(e,t,a){},145:function(e,t,a){},165:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAC4jAAAuIwF4pT92AAAGaGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDYtMjFUMTE6Mjc6NDYtMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA5LTEyVDE2OjU4OjM1LTA1OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA5LTEyVDE2OjU4OjM1LTA1OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjEyZTJiMzk4LThjNzQtNDE1OS1iNTRiLTQxNjNhZGNiNmY4MyIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmM5Y2JkYzI3LTEwYmMtOWQ0Yy05MjFmLTg1MGRjOTBmZTAwNiIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjk3YjYxMzJlLTM1ZGItNDE3OS04MDMyLTYxMWRkMWYwNzVhYSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTdiNjEzMmUtMzVkYi00MTc5LTgwMzItNjExZGQxZjA3NWFhIiBzdEV2dDp3aGVuPSIyMDE4LTA2LTIxVDExOjI3OjQ2LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxMmUyYjM5OC04Yzc0LTQxNTktYjU0Yi00MTYzYWRjYjZmODMiIHN0RXZ0OndoZW49IjIwMTgtMDktMTJUMTY6NTg6MzUtMDU6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE4IChNYWNpbnRvc2gpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pia9hzQAAAD6SURBVFiF7dY/SgNBGIbx366LghqCf25kG1MJXsMDeAjxGFqaFCnU0kN4B1MZsDEW7sJImDVCxkkxT/OywzfwzAffzFYn149j3OJYPua4anCP3YwiMMBdjSazSEdV4z23Rcuizm0QUmRiFJkYRSZGkYlRZGIUmRhFJkaRibFNMoPU/7/PeMFyjdqPlDJPOPvLhpQyszYrDNvsYyelzGGbQ7xiv6e2wl5KmTrI0zXqp/8xTUssfql5wGgbRnuCMfnvmSnOu4+cMhOMwoVcMj860lHrH7lNEd7AKx0JZT4TCYSHPAhEVjrS0eASNzjasMy8zRpvvt+pi74NXzMDHXjf0mfDAAAAAElFTkSuQmCC"},166:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAC4jAAAuIwF4pT92AAAKp2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDYtMjFUMTE6Mjc6NDYtMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA5LTEyVDE4OjA1OjUwLTA1OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA5LTEyVDE4OjA1OjUwLTA1OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmExYzgwOTQwLTIzMjYtNDc4NS05ZTA0LWE0MDJjMDdiNDI2ZCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjcyNzMyNjhjLTE1OTEtYzA0Mi1iM2IxLWM5NjVhNzE5MzRkOCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjcwMTg5MDJiLTU5YjctNDNkNy1iODc1LTk5YmUyNTM2MWJiNCIgdGlmZjpPcmllbnRhdGlvbj0iMSIgdGlmZjpYUmVzb2x1dGlvbj0iMzAwMDAwMC8xMDAwMCIgdGlmZjpZUmVzb2x1dGlvbj0iMzAwMDAwMC8xMDAwMCIgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIgZXhpZjpDb2xvclNwYWNlPSIxIiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMTg3MSIgZXhpZjpQaXhlbFlEaW1lbnNpb249IjE4NzEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjcwMTg5MDJiLTU5YjctNDNkNy1iODc1LTk5YmUyNTM2MWJiNCIgc3RFdnQ6d2hlbj0iMjAxOC0wNi0yMVQxMToyNzo0Ni0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjBiYzRiZGFkLTVkNTQtNDAzYS1iNGIwLWY0ZmViZTgyNzM0YSIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQxODowMDozMi0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmMxM2M1OWI3LWE1MmItNDdkZC1hMmUwLTE3M2E1MGY3OGEyNCIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQxODowNTo1MC0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmExYzgwOTQwLTIzMjYtNDc4NS05ZTA0LWE0MDJjMDdiNDI2ZCIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQxODowNTo1MC0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOmMxM2M1OWI3LWE1MmItNDdkZC1hMmUwLTE3M2E1MGY3OGEyNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3MDE4OTAyYi01OWI3LTQzZDctYjg3NS05OWJlMjUzNjFiYjQiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3MDE4OTAyYi01OWI3LTQzZDctYjg3NS05OWJlMjUzNjFiYjQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7C07tpAAAA+0lEQVRYhe3WMUoDQRSH8d+ui4IaguKBBNuYSvAatt5CPIaWJkUaLT2BlXcwlQEbY+EujIRZI2ScFPM1f3Z4A988eDNbvVyfjnGLY/mY46rBPXYzisAAdzWazCIdVY333BYtizq3QUiRiVFkYhSZGEUmRpGJUWRiFJkYRSbGNskMUv//PuEZyzVqP1LKPOLsLxtSyszarDBss4+dlDKHbQ7xiv2e2gp7KWXqIE/WqJ/+xzQtsfil5gGjbRjtCcbkv2emOO8+cspMMAoXcsn86EhHrX/kNkV4A690JJT5TCQQHvIgEFnpSEeDS9zgaMMy8zZrvPl+py76NnwBLFcduiEp6KQAAAAASUVORK5CYII="},167:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAJ/mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDE4LTA5LTEyVDIxOjI1OjE0LTA1OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0wOS0xMlQyMTo1MjozNC0wNTowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wOS0xMlQyMTo1MjozNC0wNTowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxYWYyNTA0Yy1hMDg0LTQwZDAtOTBjYi00N2VjOTM3MDk5MGIiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0NmM4MjBiYi01NGUyLTYxNDgtODE0Ny04ZGI2N2MxYjlkYzQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZTRlNGRmMi0zYjYwLTQ0OWQtOWY1OS1hZDBlZjExMWNlMDMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQyMToyNToxNC0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBpbWFnZS9wbmcgdG8gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6M2E4ZGZjNmQtZmVkNC00MzI4LTgzMjgtMzRmY2M2YjIyMzExIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjM4OjQ1LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MjZlZDljYjYtOGJlZi00NDllLWI2NzQtNzZiYzAzNDIxYjY0IiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjUyOjM0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MWFmMjUwNGMtYTA4NC00MGQwLTkwY2ItNDdlYzkzNzA5OTBiIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjUyOjM0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjZlZDljYjYtOGJlZi00NDllLWI2NzQtNzZiYzAzNDIxYjY0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu/x7K8AAAkXSURBVFiFvVhpkFxVFf7OuW/r6WV6m+7ZiBIlBAOCLGICkigVBUeBKiuSgCguP4JQSgGJCEFERYkkJD9iWSWLUJRYgiAoUQqKUFAolBZCINEYIAskk+np6emeXub12+7xR/eIBYGaGOP3/937nfOdc893Ho2sXoeSKiIgBVNCBGTAkgABTBgIAQABmbDEh0cWLAkAAAoR2rBHSip3nQv7eEe8VwtSvSUh07/xyIISDY9M2BLAJxMsERQ0NBgMjYgUlEQIyYCCRjEcB+MQQBDY8KHBc/Zz8Ve71dCj03AWmQhTLjmn7OWBB97k4iMh1LE2fDAEApr1+bMmYyGAgQjjnFu9V/XvrFFyuUIECwEEBBMhDESoUfK8N7m4o8S573GX/P+MzMyFDYov3c+FF0cpvzaCYTvw3hE5QeB0yY1y/sZ9XPhHg3rOs6QTyH9N5i1J1PAY5e7ew4OPT8M5yYEPhehd0y8AFDQc8dGGNX8PDz4yyvn7I6i5Hek05FDIdCQJUebMVbvV4M4qJb9sIILVLejZwupKV+fEsr1qYGeJc2sYGg6C9yYjAAxEsCVAg+Kf2KeKfx2lwvoARsyBD4K8a0TvBkE3w+IjglIHKP+DN9TAtjrFP2OL/w7peOYDRwJE4MIY5+7cw4Nbmug51Ubng0PpiIOTIihEcOBjGs6CPTy4eZT77guh5tjSCRQgsCUhLISoUO/lu9TQzknq/arRLdojARMhTISYpNSKXWronxOcXmVKCBM+OCSjZ48a2HJA5TeFMHpnJDmSmOk6DeUc4PxPdquh532YeSWLV/5ylAsjcXHBR5jE28EQmIgwRclhn62TqXfN02IcYpccCYRkgAkSReDDLNHDgwaDIOC54ZtrXHIQQB3xWnk7CEAERotiOCocvVUtXHjqsyFZUZPinwxgQkH/37LkkwmAMSSlW+YHr1/LTU4iL1M/nKv3HZuWxh8CGAhgHDFCBCCEggcTSZl+aq7ed1K/rnynxXEoY/HXbnY5ZuR07S8ZNO4zEe3yyPqYS3aSIWDo7hGHT0JA8GDBQlgd0JUrB3X5m0mZLpU4t7jOyYvV9JIrn/RgXeKTmejR7SfS0ng5Lu4mAlItip0+Y34OFz4MCBhZqd8xrEsjOan/OSSFUdV30zhnf1Hj1Nmq/+OfP7fGqeE22Ysa1PNFAG8k4G5P68ZjDvynAjJPcOEMAoA6xAInCCIYCGAiIe1XBmTi0n6Z2GBL4E1weul+Lj48Sb1fiMCwEUKdsfDkLZMqu8wnMxmSka1TYnmb7A9ZCJ7LSGNbQqZvN0hPeWQvbsMyFfSsHJmA4JEJhSgqSnXNoC5fnJLmay7ZmVFV+NkY59d7ZBUBgAn1Y8LdK9SCRWdXLYo2anDBh3WaBqNN9oI6xy8PoabjcJ9L68bzcWnfIURDLXJO0FDvKV3HSilkpPnwsC6N5HX1USHCOGdXjqrC5jolThcQGBo5qd0zqCtLc7q6VeXOWpEP2GwVdHWzA//JEOr4gMyhiAyjwfFPt9AzwiSvJqW1PStTD1qIXvDIPMUlJ0+QLikCofN4+TARg7d3UE+sLErlBgderUap0/dz4dcVzlwWwrABII7pVwZ15ZIBXb5Ng3wNzit/yRVjLfSca8F/PCe17Um4dzBJ3YN1VgRl+mwO1Sl+qUfmsAP/qYw0tiVlehMD7JKzOIQBhnSfA0FeauuG9PhIEq3tLhzjAOc3lDh3u0vOHAAwEeqCVG8Y1uMXpaWxq0Wx7CgXHiqrzHpK3vCMiBBMBH6frq7p09VbLQSoU6K/zJmNNU5eqIUBAhzxJvt0dXVOpu60xMck9x5b4tz1Hqx5FoI9eV1bm5PaiwEMlDmzokbJdS7sQXQlSUnz93mpfSur67s9MlGh3svLnP2xBzMJItD86x64a5c66isxaSMihaRuvZCX2tVZPfW0EGGC0udVOL22hdj8mQ5JSmtLUVeuisHf2uQe1CiJtDSR0C24sI8Z58yGOiVGZgq5B+6evJ76dlam7lcSok7J00qcu61OPWcqCFyyMCcae1gtXHja5iYnTmhx7DhDIvhkDU5R8lKfzCFb/C0ZqW+Li/tTBU1tspZoKHhkHt3k+Mo2We+LwB6IYwHUiXWKrypz9p4WxeYBHRvbJ7Vbh3T5sxlpbG+TxSXOb9ivCnd6ZM1R3WUuI43HFwQ7l9P5q9aibPRhgtPLJym1wYPVr6ARkoIjXqVPV6/J6drdBiLUKT5vnHObpiixVAhQImBEYAg0CBHUvy1qSlrP5qV2RUZPbY2gUOHeC8ucWeeSM6wkggbDRlDN6Po1Oand1ReNQ33wzHNQVylYCLaldevnIEm6ZH+0M1FVT52TF7TJXsSkX8zo+o6ktO41EL3hk3VGQGZP5/rO/hRBwUbY6NcTVw9I5bKY+KU6x48+wPm7xzm3JoJKUZduRup3FWXygri4f4rIQEy7UPPO+BSanIAHEyZFflLcP8bgPRGSWuDDGmZotNn+QJ0S3wjINGPibclK46W4uJsE1OeRfUpnzjPS0rh3WErnZHX9GZdtlDlz/Rj3/XaaYsd19iVGXNpb+2Xykow0NgrRdEidoZzQTdDI6nUYM4rwYXY2ASEYCMEQ1Ch55QSnbw5g9Mws63FxX83r2qq8nnwkgoGSyh01RYkTU9LaUdDV15QEmOT00jJn1rmwP8zdZd9EGGakfmNWT/2IAbTJArrjRUFQDMfeykwE1fXAhJA6D34c7ecTcO8hSJ9LzokEQQgjN0WJ5T7ZCyLil01Eu0zSOx3xJgOo95dVbuM459aHUEXudlNamg8OSOX8JKZ/F5FCSAr/6QS4mxnj4AOuc0ibbJgI9w/qiS/FqX3fBPeuc+EsUNCYpN5lUxRf5oj/NwYmGxxL+zBOnXn8BAwH3ut5XVudlNZDERg+mZipmYON3IOSeYuUIOx6v4S4j8Uj97Eqp75bod6bhAAIwSX75LcHwdDo09W1vWhcb0kY+TBnNe9n/UvEIwMCIK+r35+jx47r1c1HO5XF3a2TEcBASppb5uixj+Sldi2AyJslkUMiMzMI27BgItwxrEufG9Lli2z4L4Uw6o54fx+S8a8P6fLZMfgveWR1Xf/s8S+0s1o+OdaCaQAAAABJRU5ErkJggg=="},168:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAJ/mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcDpDcmVhdGVEYXRlPSIyMDE4LTA5LTEyVDIxOjI1OjE0LTA1OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0wOS0xMlQyMTo0ODoyNC0wNTowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wOS0xMlQyMTo0ODoyNC0wNTowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowZmU3NjVjNi01NjhmLTRhY2UtYTVlMi1kMjJmMDA5NDBiNmMiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpiODQwOTQzYS1iNjliLTdhNDItODNiZS0zOTY2YWEwNmIxMDQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxZTRlNGRmMi0zYjYwLTQ0OWQtOWY1OS1hZDBlZjExMWNlMDMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIgc3RFdnQ6d2hlbj0iMjAxOC0wOS0xMlQyMToyNToxNC0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBpbWFnZS9wbmcgdG8gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6M2E4ZGZjNmQtZmVkNC00MzI4LTgzMjgtMzRmY2M2YjIyMzExIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjM4OjQ1LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTdmMzAzOWEtODMwNC00MDhlLWI2ZDQtNjRhNTczZGZlNTNiIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjQ4OjI0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MGZlNzY1YzYtNTY4Zi00YWNlLWE1ZTItZDIyZjAwOTQwYjZjIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIxOjQ4OjI0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NTdmMzAzOWEtODMwNC00MDhlLWI2ZDQtNjRhNTczZGZlNTNiIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjFlNGU0ZGYyLTNiNjAtNDQ5ZC05ZjU5LWFkMGVmMTExY2UwMyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PotzvqwAAAlFSURBVFiFxVhpkF1FFf7O6b7v3vu2mSSTbTKTmYTJPkkGCISlCFjBsIiouEAoUNSSkooiGFNlJQiFSyRKAqXID1ZTilJlEbFYRAxgFSUIgjFBskwWMhMyM1kmM2/ee/e9d+/tPv54bxLWOKx+f+6Pru77ne/rPud009prL8HEhIVDglDoTd9YCIAgQYKKMFyujkEIIRhZCi+YooJVaY7bC1Z3dhv/liPW3eApC2sFHgvKluCSwIBgBGACrACaBJFUx2IQ+kIGY4QgABaEwCookuaZeuiB+U7u8ToOzwyF6rIcnTLXyT002xn6YwJmWiAaBgQa6Q+AkZMJRCESRqsOvjdXD3ZO4NLlkRBKokAAysIIRWE8lz87R+V2TNXFG60QAlGQWjAfiAwBiIQRiMZoDhfPVrmXp6n8zx1Yryga9g2RV5UDiqLAALWp/M2zde7VBg4vKkOhIvw/Cb0jmWFLiqKhSRrbdOH++U5uYx2HJxVFI8K7L0wA4trcFEWz5zm5R6ar/IMO2dbCWwIYEZmSKITCmKyD6zucwc5GDq4atuS9oCwKoRDGc/nS+Xqwc6ouroyEUHyXdY6SOWaJwigOz56jcy/OUEPrXLKpt1oyUhxTWEHDOm0q/5O5enBLgwrPD2oBv3FNPua1hiZpOEEX7prv5P42isNTiqLfNuH9gABEYBRFo56jufP04J+n6/wDLtmmN1rHFWFURKFRla7pcAY6mzj4xvuxZKQY3gKNXLr8RGews1kFy0PLKAuDHRK/3RnaOF0N3emSHfV+LRkp3nQ4YP02lb91XmLwOY/saH2SV7hvsgoWH7HOiPPBh0UqAiMSxkQun36Sp35HnSvPllgI8jGReCcIgAQJ2IJiBfm/kREAGgIBCW+tpFZmOEYC9mMnJAAcCOo4Rmfor1HtCzqeY+ZojAoXe2QRgz/yvSOoJjifYhARdpjM6n+XUys5pYBum179r2jUtAPWe9QjAw/mI1NJALiw8MjgsPWe2hTVz98dp1clFUEtX9TyoxQb3WP8lw5a7/cV8K4Um4UZirMW9KEdcwGgIEiSRRm6f49JX7crzlx3xDoHWnXprLEqXKpWnzPh6SzCKz2yySGrNx6w/iuD4vxSQNl6jk5L1Kz7oPDJgAnosf7d2+Psp/Yb/3mHLKY5xZtOUIX141R4rrr0jOlLxqtKc5aiM0er6HIAXUfE3XbQuk8URT/lkW3PcjyJqFqN34tKAiBRsyQn7uadJvOVPXH69pJwpUmVzp3pDG2YxOXLNAnKwlDtJ3c8Pd6JvuCTzbpkxjSoytIMm1llUX/vs97WfnHvicEDKYoXpSlOmBFYV92ggiQZROB4r02v6ozTVxy23u4MRfUzdP7ONl1clyYzAQBiUoObKtml6qyF7YMF8m5jwtgkmVMdABmK2hs4XJYgKeas848+47+QE+duJjTWczTPITmudR4ZOCQ4YP0N20z2wn0m+RhBMEUVr56p84+O5crpBMCAsN8k799pskt648QW9eUzp41m5tLrxn+8KPqvCbJzPLJNDokew+H59RxdaEA7+8Xd2me8DWXRL/lsTsxSNFZAR/vc4eSVJIu81Xt3mszVe+LMTUVRufFcOWWmLjzYooJlCbIeQBgQZ/Muk75yl0nfRoTQRTxa3Xx2Y+8oDi8oi/pLj/W29Vv3XkM0mCSzyCFxkhRPGqsqVyUpbgxEPdNnvVeP2MSvhAgZis9xqZosXbIQIuwz/s92mOxFh627NUuRatPFdW2qcG+WoxYAKIs2XTZ1w444e8Uh4+2p56h+hs4/NFmV1tLulYtEwaIkutxt/FXdJrWuBIUGLo+fzMHtE1T5Ml3LOgXR/XtNasV+499fFsZEVZneqoNVKcTTS1B79xn/lp7Y35wgg8m6fOlEDtZmKJ5EqF5VDlrvT/tM8ju9xu3yyaJJBd9sUcEtScR1lhj05Irz72lP5L9etAoOCQ7bxD+7TWp5j/WeZQiaVOmiZg7W1HM0myCwIPRbd+Nuk1xeEGdLli1G6xgDRmPQKGQRtbXo4tqxHF7MEBAEg5J47XWTXLHf+g+FljBOlRdMVcW1DRwuMkJIssGOKLVBzV3Q8VhGy5w6jmbH1YFJ41Xlqz6ZiSVRT/UZf+uAuHfGIEmT+YQmiyTFUxs4vCbFpllDKkTk+4jnjqPyiim6uL6eo5kEQSSMLptasyPOfLrPutvSZKhNF9bN0Pn70mRajBA0CXqt/8SL5exSuuXbn0eDCzSp8pcmcXBbiuLGWAgOWRRFH+oyqeX7jP+bSBgNXGmboot3jOPKeQTACCGubWIFgYat9rEADtvEs10m9a0+621xYNGoSl9sVcHaDMXNsRAUCQJRR/bb5Hf3G3/9wQpBXXjaLNRri0CcVw9Z7y4B0lmOFwKAJqTGceVzGY5PN+CX+6zX2W/d34ZQe5NkznDJpEztiBMAhwQlUUN7TPr6XSa7rCD6QANXWqfrwn1TVPFGh2ydAAAReq1/zx6T+UxOnOddsigZQC1ZOAsZLfDJIgKFh637RF6cJxOws5Jkmo0QMhy3jVOVZS6syovzTK94mwescwcBDRkyC3StzveJt74zzlzQY/1nU2zQqorfn6YKD9dxNNsKQREwaBObdpv0FT0m+QtFKHlkISDkDYHWXnsJJrq2egGXaoQVUbAAJqjytZM5WO2SSZmadQOS2LHPpFZ0x94jDgEtOmgaw9H8AXG2d8f+7kgIk1Rp8WQV3JqlqMPULCmLinqt/4P9xl9jAaTIYFhSI4SeCkOdV1NGU/XKMiw3iJCziRcGJPFrARoyHHdYAB7ZhnFcXpokM0sRtlSgXytyYmdJeMCjuKVVFW+fqovrXDITRAhEwAHr/WG3yVx82LqPJcgiQfZYOSEcXxmg2sErCCpgVIQxlitLmlVwax1Fc40QuPZMEoh+OSbVr2HrfcSnemQwfEry4uzqNskV/dZ9WJOFCwuL4XYCb1NGH6fe1dpCC0WCAes+mRNn3kQu39DEwQ8VhLhax04mREcDqJYGQpdJ/rTX+jeEwtaj+GjJOB5G3KgkyYAh6DbJH79i6mcesN4jCbJQBFRqDwEuWRyy7sZX4rqOLpNayRCbJDPitmPEZIY7tTTFqAh3bouzF2+Ps5cVRG9KkOQK0P/ZbjJf2x5nP1kUtTlFMd7rreO/jQ6xxai3LRoAAAAASUVORK5CYII="},169:function(e,t){e.exports="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAArCAYAAADyijE0AAAACXBIWXMAAC4jAAAuIwF4pT92AAAKp2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDYtMjFUMTE6Mjc6NDYtMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTExLTE4VDE1OjQyOjQ3LTA2OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTExLTE4VDE1OjQyOjQ3LTA2OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmJjZmIyYjEwLWEzZmEtNDEzNC04MTRlLWFkOTk1MzY0YWI2MSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjE4MzhiYWEzLTQ0OTEtODU0MC1hZDBkLTZlNDYxYjg1Y2FmNyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmMyZmRkYmUwLTkxNTktNDUzZi1hNTc0LTQyYWJlMjJmM2ViOCIgdGlmZjpPcmllbnRhdGlvbj0iMSIgdGlmZjpYUmVzb2x1dGlvbj0iMzAwMDAwMC8xMDAwMCIgdGlmZjpZUmVzb2x1dGlvbj0iMzAwMDAwMC8xMDAwMCIgdGlmZjpSZXNvbHV0aW9uVW5pdD0iMiIgZXhpZjpDb2xvclNwYWNlPSIxIiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMTg3MSIgZXhpZjpQaXhlbFlEaW1lbnNpb249IjE4NzEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmMyZmRkYmUwLTkxNTktNDUzZi1hNTc0LTQyYWJlMjJmM2ViOCIgc3RFdnQ6d2hlbj0iMjAxOC0wNi0yMVQxMToyNzo0Ni0wNTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjRjNTVlYzUyLTNhMmItNDU4NC04ZWJmLThhNWQ5ODFmNGNhYiIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xOFQxNTozOTozOC0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjQzZjE3NmNiLWFhMGYtNDZkYS1iZTk1LTczZjUyNTI2MGZkOCIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xOFQxNTo0Mjo0Ny0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmJjZmIyYjEwLWEzZmEtNDEzNC04MTRlLWFkOTk1MzY0YWI2MSIgc3RFdnQ6d2hlbj0iMjAxOC0xMS0xOFQxNTo0Mjo0Ny0wNjowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQzZjE3NmNiLWFhMGYtNDZkYS1iZTk1LTczZjUyNTI2MGZkOCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpjMmZkZGJlMC05MTU5LTQ1M2YtYTU3NC00MmFiZTIyZjNlYjgiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjMmZkZGJlMC05MTU5LTQ1M2YtYTU3NC00MmFiZTIyZjNlYjgiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7y32vAAAADuklEQVRYhe2YTWhjVRTHf/e+jzRtMglaW1tSptC0tpShC0EQKqUutG6qojgrF8Iwiu4GcSEuFXfqTgYd7FpBMLNxNkJFunDRLrIouugH/bax9pm2JO+93DuL5MUmmYQOzWu78L+5eSfn8n7v3nPOe/cIrTUAs7Oz1EkAt4BpQAIOcA/4vd4xUCaTafbXmWQ2sSeBB8BzdfbbwCfAZ+e662PAJIA/gaeAPeCryvgC8A7wKdAPfNBuGPkI290KyDzwLHAIjALfAS9XfN4HXgobpge4Wfn9IfAD8DXwEfArkALuACil3jVNk46ODrTWKKXaB1MoFJBSjmqtkVJmDMN4TWv9PDCvtb5VcfsmmBOJRJ45OjpiZWUF0zTp6upqH8zAwAD5fF7bto3jOEe7u7v9AK7rfuF53j2lVEZKKT3Pu1YoFDAMw8hms2xtbWHbNqVS6dwwYm5u7gngY63106urq/2Li4vTsVhs3TAMXSqVBoeGhuaHh4dXFhYWXtzY2Lg+MjKS3dzcvBGNRv+dmpr6CZCWZbnn5PgH+NwEXgfei0ajXd3d3eRyOfr6+q7PzMzgOA5CiKlEIjFlWRa5XI7p6ekbk5OT5PP5a7Ztv62Uake8nAB/mMC3AL7vo5RCCAGAYRhEIhG01ggh0FoTFEjLsrBtu8Z2TnUCd03ABWwhBL7vA6C1xvM8fN9Ha12NByEESil836/6tlGuBIrBValUqt78dEC6rovrukhZjnfP89oNAlCsZpPneViWhRACKWV1VQCKxSK2bSOlrFmpdqum6AUxUB8HpmkihKiuSAhb1AjTSgFgEOBXAiZMnRnmInS1YZRSmKaJZVn/OUmJZVkopULdroZsqrwoOT4+rtpd18VxHGzbDg2kASYej9Pb28vh4SHr6+tV+87ODnt7eySTSTo7O0PLqJrPzkgkQjqdJpvNsrS0xNraGkII9vf3UUoxMTFBMpkMbasavoHHxsYQQrC8vMzBwQFQjpl0Os34+DjRaJSTk5OLgQEYHR0lFouxvb0NQE9PD4ODg0A5fsJSs6MKqVSKVCrVYA/rVQBXvc5cpv6HaaarBBNvmk1t0s/Ab8BZqmQxTJgHwCuPMyFMmF8qowSepNzvaSUZJky8MiaAFcpno2YSgAgTRpwaY2fw//4isklTPr620o/AzauQ2hngDbj8OpMBXg0uLhOmBgQuD+Z+PQiUYVqlXLt0ugLfBxqazgHM+TuDj9bphwwafk1BoFyB3wS+pNyIbqf+rowS+ItyK/etVhMeAuZkZDAeOcH2AAAAAElFTkSuQmCC"},170:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAjCAYAAAAe2bNZAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAGAGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDAgNzkuMTYwNDUxLCAyMDE3LzA1LzA2LTAxOjA4OjIxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTgtMDktMTJUMjI6MDk6NDctMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA5LTEyVDIyOjIxOjM5LTA1OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA5LTEyVDIyOjIxOjM5LTA1OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjYxYmMzYjk1LWE4ZDItNDFjZC1iMTFhLTFjMzY3NWYxY2IyZiIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmUxMGM5NWJkLWI1NmEtNzI0Zi1hMzJlLTJjZTk1NDRmMDljNCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjhhZDQ5Y2Q5LWMyZGEtNGMxYi1iMmJhLTBiZDZiMjJmZmM5MyI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OGFkNDljZDktYzJkYS00YzFiLWIyYmEtMGJkNmIyMmZmYzkzIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIyOjA5OjQ3LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NjFiYzNiOTUtYThkMi00MWNkLWIxMWEtMWMzNjc1ZjFjYjJmIiBzdEV2dDp3aGVuPSIyMDE4LTA5LTEyVDIyOjIxOjM5LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6mqJQFAAADHklEQVRYhc2YTWhcVRSAv3Pfve/NNKbtdNKg0bQlFUOxakyVlnZR6EbQVTciFMSli26qBTei0B/cZO1OsHTjTkRcuZAKarASNG1J29CKEap2TJqQSTLv597r4iWDSnWmneFNDjzeD+ee93Huuefcc8V7z2YRKR85QbT/2Nuq8vgoNhY8RdIJJvJu6e7t5MqXE9qMHDird4+96xvL4KMCOZo4mOGn8Y3lIam+d8mLUvgsKR5kQwIDgALf8GncOxCALAFn1xTOpoj0FkYEvMtUbyn+Kbr5JAKioMilnnuk+U/d/GhTkAB0mCsUAWIzcFkewN6vwwSGiVf2Xnnj4K5nUmtrUEQMeUwQ7Pzkh1+nTn4xN04Wr8PYjKHtfXUAEwQ7CyBpyhPV/jo2BaAZwGmWhUVCbEiSZs1Mu6lWU9dgZq99ytLibx3Z6BrM4t3P+Xnmo45sdA1Gm3727fqO6W/eZKW+0FuYJDX8uZAwsPU2tZuvMjP92QPb0K0Urk5dRPvrxMm/M3P+LgJZllBWP1FfcaSZpxwpquUP+fHbSZ49dA6lgu7AlN3HlMKAsvrvrCwlYXXNkWUeJdCIHXGS8FhlitnLx4mq77DnySOdw6wlIWka41zrmrVR/DfutfmYvj5LOTnD5UvjvHj0g/8d3zpmfGelwTlPEICw2lK3pWe2lGKiUN/fMwLOepyHOHZY6/NCvK46sCOkvgL33Fu8cPSlzmEW0+Po+AaNv20GZX0enPOEYYCQoNwMoRGs9YShsH2r4c7CPkafP0up3N8SpC2Y8UMn2zI0+dUpqpWreJ975vfV13nu8Im2xrYN065EJp+W2V8GGBo9x3B1+IFtdA0mS+aZmRtj7PD5h7bRNZhtgy9TGTzQkY2uwTy1/7WObWzO/YzWOu0FgDG62cpqlNIozfzyagmqWOfuFQUSKFWpLa2UCAzYNJDq+1/nabNRx4sgOiqmdxLJ21rvINqCiBCEI+M7gsGRg3iHMmHeyKkCLlGINqA0UnqEbG76gk5vfX9a9VVqatuju12jIVDc+YwHxETYP27dSW5OTshmOrn6C2gfIpLerWS0AAAAAElFTkSuQmCC"},171:function(e,t,a){e.exports=a.p+"static/media/sample_view.e92880b7.gif"},172:function(e,t,a){e.exports=a.p+"static/media/appstore.9eadb2de.svg"},173:function(e,t,a){e.exports=a.p+"static/media/googleplaystore.10b871ef.png"},187:function(e,t,a){e.exports=a(323)},232:function(e,t,a){},253:function(e,t,a){},254:function(e,t,a){},255:function(e,t,a){},257:function(e,t,a){},258:function(e,t,a){},266:function(e,t,a){},267:function(e,t,a){},271:function(e,t,a){},272:function(e,t,a){},273:function(e,t,a){},274:function(e,t,a){},289:function(e,t,a){},290:function(e,t,a){},318:function(e,t){},323:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(24),i=a.n(o),c=(a(192),a(25)),s=a(72),l=a(22),u=a(12),d=a(74),m=a.n(d),p=a(16),h=a(17),b=a(8),f=a(19),v=a(18),g=a(34),y=a(343),E=a(174),w=a(11),I=a(3),N=a.n(I),O=a(13),j=a(14),A=a(10),k=a(20),S=a.n(k),C=localStorage.getItem("server"),M="".concat(C,"/api");function T(e){return e.endsWith("/")&&(e=e.substring(0,e.length-1)),localStorage.setItem("server",e),M="".concat(C=e,"/api"),C}function Z(e){S.a.defaults.headers.common.Authorization="Bearer ".concat(e)}var L=sessionStorage.getItem("token");L&&Z(L);var G,D=function(){var e=Object(O.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(M,"/users/me"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(e,t){return S.a.post("".concat(M,"/contributions/").concat(e),t)},R=function(e){return S.a.get("".concat(M,"/communities/").concat(e))},Y=function(){var e=Object(O.a)(N.a.mark((function e(t,a){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.put("".concat(M,"/communities/").concat(a),t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),W=function(){var e=Object(O.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(M,"/communities/").concat(t,"/groups"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(O.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(M,"/communities/").concat(t,"/views"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(O.a)(N.a.mark((function e(t,a,n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(M,"/links/").concat(a,"/").concat(t));case 2:return r=(r=e.sent).data,n&&(r=r.filter((function(e){return e.type===n}))),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),F=function(){var e=Object(O.a)(N.a.mark((function e(t,a){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.put("".concat(M,"/links/").concat(t),a);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),B=function(){var e=Object(O.a)(N.a.mark((function e(t,a,n,r){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("".concat(M,"/links"),{from:t,to:a,type:n,data:r});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),U=function(){var e=Object(O.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.delete("".concat(M,"/links/").concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(O.a)(N.a.mark((function e(t,a){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("".concat(M,"/links/").concat(t,"/search"),{query:a});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),J=function(){var e=Object(O.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(M,"/objects/").concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(O.a)(N.a.mark((function e(t,a,n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.put("".concat(M,"/objects/").concat(a,"/").concat(n),t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),H=function(e,t){var a={communityId:e,type:"Attachment",title:"an Attachment",authors:[t],status:"unsaved",permission:"protected",data:{version:0}};return S.a.post("".concat(M,"/contributions/").concat(e),a)},_=function(){var e=Object(O.a)(N.a.mark((function e(t,a){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.post("".concat(M,"/contributions/").concat(t),a);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),X=function(){var e=Object(O.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(M,"/communities/").concat(t,"/authors"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(O.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(M,"/records/object/").concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(e,t){var a=new FormData;return a.append("file",e),S.a.post("".concat(M,"/upload"),a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})},ee=function(){var e=Object(O.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.get("".concat(M,"/communities/").concat(t,"/views"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(e,t){return S.a.post("".concat(M,"/contributions/").concat(t),e)};function ae(e,t){return S.a.get("".concat(M,"/records/myreadstatusview/").concat(e,"/").concat(t)).then((function(e){var t=e.data,a=[];for(var n in t)"read"===t[n].type&&a.push(t[n].to);return a})).catch((function(e){return e}))}var ne,re,oe,ie,ce=Object(A.b)("ADD_USER"),se=Object(A.b)("ADD_AUTHORS"),le=Object(A.b)("SET_AUTHORS"),ue=Object(A.c)({},(G={},Object(w.a)(G,ce,(function(e,t){e[t.payload._id]=t.payload})),Object(w.a)(G,se,(function(e,t){t.payload.forEach((function(t){return e[t._id]=t}))})),Object(w.a)(G,le,(function(e,t){return{}})),G)),de=function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,X(e);case 2:n=t.sent,a(se(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},me=Object(A.b)("REQUEST_SCAFFOLD"),pe=Object(A.b)("RECEIVE_SCAFFOLD"),he=Object(A.c)({isFetching:!1,items:[],fetched:!1},(ne={},Object(w.a)(ne,pe,(function(e,t){e.items=t.payload,e.isFetching=!1,e.fetched=!0})),Object(w.a)(ne,me,(function(e,t){e.isFetching=!0})),ne)),be=function(e,t){return function(a){a(me);var n=R(e).then((function(e){return Promise.all(e.data.scaffolds.map((function(e){return J(e)})))}));return Promise.all([n,z(t,"from","uses")]).then(function(){var e=Object(O.a)(N.a.mark((function e(t){var n,r,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t[1].map((function(e){return e.to})),r=t[0].filter((function(e){return n.includes(e._id)})),e.next=4,Promise.all(r.map((function(e){return z(e._id,"from")})));case 4:o=e.sent,r=r.map((function(e,t){return e.supports=o[t],e})),a(pe(r));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},fe=a(40),ve=Object(A.b)("OPEN_DIALOG"),ge=Object(A.b)("CLOSE_DIALOG"),ye=Object(A.b)("FOCUS_DIALOG"),Ee=Object(A.b)("OPEN_ATTACH_PANEL"),we=Object(A.b)("CLOSE_ATTACH_PANEL"),Ie=0,Ne=Object(A.c)({dialogs:[],drawTool:null,focused:null,attachPanel:{}},(re={},Object(w.a)(re,ve,(function(e,t){var a=e.dialogs.map((function(t){return t.id===e.focused&&(t.zIndex=999),t}));e.focused=Ie,e.dialogs=[].concat(Object(fe.a)(a),[Object(j.a)({id:Ie++,zIndex:1e3},t.payload)])})),Object(w.a)(re,ge,(function(e,t){e.dialogs=e.dialogs.filter((function(e){return e.id!==t.payload}))})),Object(w.a)(re,Ee,(function(e,t){e.attachPanel=t.payload})),Object(w.a)(re,we,(function(e,t){e.attachPanel={}})),Object(w.a)(re,ye,(function(e,t){e.focused!==t.payload&&(e.dialogs=e.dialogs.map((function(a){return a.id===e.focused?a.zIndex=999:a.id===t.payload&&(a.zIndex=1e3),a})),e.focused=t.payload)})),re)),Oe=a(31),je=a.n(Oe),Ae=function(e,t){var a="";return a+=" ",a+=t?'<span class="kfSupportStartMark kfTemplateStartMark"> &nbsp; </span>':'<span class="kfSupportStartMark"> &nbsp; </span>',a+=" ",a=t?a+'<span class="kfSupportStartLabel kfTemplateStartLabel">'+e+"</span>":a+'<span class="kfSupportStartLabel">'+e+"</span>",a+=" "},ke=function(e){var t="";return t+=" ",t+=e?'<span class="kfSupportEndMark kfTemplateEndMark"> &nbsp; </span>':'<span class="kfSupportEndMark"> &nbsp; </span>',t+=" "},Se=function(e,t,a,n){var r="";return n&&n.length>0&&(r=r+'<span class="KFReferenceQuote"><span>"</span><span class="KFReferenceText">'+n+'</span><span>"</span></span>'),r=(r=r+'<span> (<a href="contribution/'+e+'" target="'+e+'">')+'<img src="/manual_assets/kf4images/icon-note-unread-othr-.gif">"'+t+'"</a>',r+='<span class="KFReferenceAuthor"> by (missing authors)</span>)</span>',r+="</span>"},Ce=function(e,t,a){var n="<div>"+e+"</div>",r=je()(n),o=r.find(".KFSupportStart");o.addClass("mceNonEditable");for(var i=function(e){var a=o[e];if(!a.id.startsWith("supportid_")){var n=je()(a).hasClass("KFTemplateStart"),r=t.filter((function(e){return e._id===a.id}));r.length?a.innerHTML=Ae(r[0]._from.title,n):"Annotation"!==t&&(a.innerHTML=Ae("(missing link)",n))}},c=0;c<o.length;c++)i(c);var s=r.find(".KFSupportEnd");s.addClass("mceNonEditable");for(var l=0;l<s.length;l++){var u=s[l],d=je()(u).hasClass("KFTemplateEnd");u.innerHTML=ke(d)}var m=r.find(".KFReference");m.addClass("mceNonEditable");for(var p=function(e){var t=s[e],n=a.filter((function(e){return e._id===t.id}));if(n.length){var r="";(n=n[0]).data&&(r=n.data.text),t.innerHTML=Se(n.to,n._to.title,n._to.authors,r)}else t.innerHTML=Se("","(missing link)",0,"")},h=0;h<m.length;h++)p(h);return r.html()},Me=function(){var e=Object(O.a)(N.a.mark((function e(t,a,n,r,o){var i,c,s,l,u,d,m,p,h,b,f,v,g,y,E,w,I,O,j,A;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(i="<div>"+t+"</div>",c=je()(i),s={},l=n.filter((function(e){return"supports"===e.type})).map((function(e){return e._id})),u=c.find(".KFSupportStart"),d=c.find(".KFSupportEnd"),m=[],p=[],h=0;h<d.length;h++)(b=d[h]).innerHTML="",f=b.id,s[f]=b;for(v=function(e){var t=u[e],n=t.id;t.innerHTML="",n.startsWith("supportid_")&&(n=n.split("_")[1]),p.push(n),l.includes(n)||m.push(B(n,a,"supports").then((function(e){var a=t.id,n=e._id;t.id=n,s[a]&&(s[a].id=n)})))},g=0;g<u.length;g++)v(g);for(y=l.filter((function(e){return!p.includes(e)})).map((function(e){return U(e)})),E=r.filter((function(e){return"references"===e.type})).map((function(e){return e._id})),w=c.find(".KFReferenceText"),I=[],O=function(){var e=w[j],t={text:je()(e).find(".KFReferenceText").html()};e.innerHTML="";var n=e.id;I.push(n),E.includes(n)||m.push(B(a,n,"references",t).then((function(t){var a=e.id,n=t._id;e.id=n,s[a]&&(s[a].id=n)})))},j=0;j<w.length;j++)O();return A=E.filter((function(e){return!I.includes(e)})).map((function(e){return U(e)})),e.next=20,Promise.all(y);case 20:return e.next=22,Promise.all(A);case 22:return e.next=24,Promise.all(m);case 24:return e.abrupt("return",c);case 25:case"end":return e.stop()}}),e)})));return function(t,a,n,r,o){return e.apply(this,arguments)}}(),Te={type:"success",insert:"top",container:"top-right",animationIn:["animated","fadeIn"],animationOut:["animated","fadeOut"],dismiss:{duration:5e3}},Ze=function(e){return d.store.addNotification(Object(j.a)(Object(j.a)({},Te),e))},Le=Object(A.b)("ADD_RA_VIEW"),Ge=Object(A.b)("REMOVE_RA_VIEW"),De=Object(A.b)("ADD_TO_RA_VIEW"),xe=function(){var e=Object(O.a)(N.a.mark((function e(t,a,n,r,o){var i,c,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(j.a)({communityId:n,type:"View",title:t,authors:[a],status:"active",permission:"public"},r),e.next=3,te(i,n);case 3:if(c=e.sent.data,!o){e.next=10;break}return e.next=7,R(n);case 7:(s=e.sent.data).views.push(c),Y(s,n);case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t,a,n,r,o){return e.apply(this,arguments)}}(),Re=function(){var e=Object(O.a)(N.a.mark((function e(t,a,n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.data||(t.data={}),t.status="active",t.data.riseabove={viewId:a},e.next=5,Q(t,n,t._id);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),Ye=function(){var e=Object(O.a)(N.a.mark((function e(t,a,n){var r,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t,"from");case 2:return r=e.sent,e.next=5,ae(a,t);case 5:o=e.sent,n(De({viewId:t,data:{viewLinks:r,readLinks:o}}));case 7:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),We=Object(A.b)("ADD_NOTE"),Ve=Object(A.b)("REMOVE_NOTE"),ze=Object(A.b)("EDIT_NOTE"),Fe=Object(A.b)("ADD_ATTACHMENT"),Be=Object(A.b)("REMOVE_ATTACHMENT"),Ue=Object(A.b)("SET_ATTACHMENTS"),Pe=Object(A.b)("SET_WORDCOUNT"),Je=Object(A.b)("SET_CONNECTIONS"),Qe=Object(A.b)("SET_RECORDS"),He=Object(A.b)("REMOVE_CONTRIB_AUTHOR"),_e=Object(A.b)("ADD_CONTRIB_AUTHOR"),Xe=Object(A.b)("SET_ANNOTATION"),Ke=Object(A.b)("SET_ANNOTATIONS_LOADED"),qe=Object(A.b)("REMOVE_ANNOTATION"),$e=Object(A.b)("SET_VIEW_NOTES"),et=Object(A.b)("ADD_VIEW_NOTE"),tt=Object(A.b)("SET_CHECKED_NOTES"),at=Object(A.b)("UPDATE_CHECKED_NOTES"),nt=Object(A.b)("SET_VIEW_LINKS"),rt=Object(A.b)("ADD_VIEW_LINK"),ot=Object(A.b)("SET_BUILDS_ON"),it=Object(A.b)("SET_SUPPORTS"),ct=Object(A.b)("SET_RISEABOVE_VIEW_NOTES"),st=Object(A.b)("SET_RISEABOVE_NOTES"),lt=Object(A.b)("SET_READ_LINKS"),ut=Object(A.b)("REMOVE_READ_LINKS"),dt=Object(A.b)("REMOVE_VIEW_NOTE"),mt=Object(A.c)({attachments:{},viewNotes:{},checkedNotes:[],viewLinks:[],buildsOn:[],supports:[],riseAboveNotes:{},riseAboveViewNotes:{},readLinks:[],raViews:{}},(oe={},Object(w.a)(oe,We,(function(e,t){e[t.payload._id]=t.payload})),Object(w.a)(oe,Ve,(function(e,t){var a,n=e[t.payload];delete e[t.payload],(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.riseabove)&&delete e.raViews[n.data.riseabove.viewId]})),Object(w.a)(oe,ze,(function(e,t){var a=e[t.payload._id];e[t.payload._id]=Object.assign({},a,t.payload)})),Object(w.a)(oe,Fe,(function(e,t){e[t.payload.noteId].attachments.push(t.payload.attachment._id),e.attachments[t.payload.attachment._id]=t.payload.attachment})),Object(w.a)(oe,Be,(function(e,t){var a=e[t.payload.noteId];a.attachments=a.attachments.filter((function(e){return e!==t.payload.attId})),delete e.attachments[t.payload.attId]})),Object(w.a)(oe,Ue,(function(e,t){e[t.payload.contribId].attachments=t.payload.attachments.map((function(e){return e._id})),t.payload.attachments.forEach((function(t){e.attachments[t._id]=t}))})),Object(w.a)(oe,Pe,(function(e,t){e[t.payload.contribId].wordCount=t.payload.wc})),Object(w.a)(oe,Je,(function(e,t){var a=e[t.payload.contribId];"from"===t.payload.direction?a.fromLinks=t.payload.links:a.toLinks=t.payload.links})),Object(w.a)(oe,Qe,(function(e,t){e[t.payload.contribId].records=t.payload.records})),Object(w.a)(oe,_e,(function(e,t){var a=e[t.payload.contribId];a.authors=[].concat(Object(fe.a)(a.authors),[t.payload.author])})),Object(w.a)(oe,He,(function(e,t){var a=e[t.payload.contribId];a.authors=a.authors.filter((function(e){return e!==t.payload.author}))})),Object(w.a)(oe,Xe,(function(e,t){e[t.payload.contribId].annos[t.payload.annotation._id]=t.payload.annotation})),Object(w.a)(oe,Ke,(function(e,t){e[t.payload.contribId].annotsFetched=t.payload.value})),Object(w.a)(oe,qe,(function(e,t){delete e[t.payload.contribId].annos[t.payload.annoId]})),Object(w.a)(oe,$e,(function(e,t){var a={};for(var n in t.payload)a[t.payload[n]._id]=t.payload[n];e.viewNotes=a})),Object(w.a)(oe,tt,(function(e,t){e.checkedNotes=t.payload})),Object(w.a)(oe,at,(function(e,t){t.payload.checked?e.checkedNotes.push(t.payload.noteId):e.checkedNotes=e.checkedNotes.filter((function(e){return e!==t.payload.noteId}))})),Object(w.a)(oe,et,(function(e,t){e.viewNotes[t.payload._id]=t.payload})),Object(w.a)(oe,dt,(function(e,t){delete e.viewNotes[t.payload._id]})),Object(w.a)(oe,nt,(function(e,t){e.viewLinks=t.payload})),Object(w.a)(oe,rt,(function(e,t){0===e.viewLinks.filter((function(e){return e._id===t.payload._id})).length?e.viewLinks.push(t.payload):e.viewLinks=e.viewLinks.map((function(e){return e._id===t.payload._id?t.payload:e}))})),Object(w.a)(oe,ut,(function(e,t){e.viewLinks=e.viewLinks.filter((function(e){return e._id!==t.payload._id}))})),Object(w.a)(oe,ot,(function(e,t){e.buildsOn=t.payload})),Object(w.a)(oe,it,(function(e,t){e.supports=t.payload})),Object(w.a)(oe,ct,(function(e,t){e.riseAboveViewNotes[t.payload.noteId]=Object(fe.a)(t.payload.notes)})),Object(w.a)(oe,st,(function(e,t){t.payload.forEach((function(t){return e.riseAboveNotes[t._id]=t}))})),Object(w.a)(oe,lt,(function(e,t){e.readLinks=t.payload})),Object(w.a)(oe,Le,(function(e,t){e.raViews[t.payload]||(e.raViews[t.payload]={})})),Object(w.a)(oe,Ge,(function(e,t){delete e.raViews[t.payload]})),Object(w.a)(oe,De,(function(e,t){e.raViews[t.payload.viewId]=Object(j.a)(Object(j.a)({},e.raViews[t.payload]),t.payload.data)})),oe)),pt=function(e,t,a,n,r){if(r||(r=""),!a||a.permission){var o={};a&&"private"===a.permission?(o.permission=a.permission,o.group=a.group,o._groupMembers=a._groupMembers):(o.permission="protected",o.group=void 0,o._groupMembers=[]);var i={communityId:e,type:"Note",title:a&&a.title?a.title:"",authors:[t],status:a&&a.status?a.status:"unsaved",permission:o.permission,group:o.group,_groupMembers:o._groupMembers,data:{body:a&&a.body?a.body:""},buildson:n,langInNote:[]};if(a&&a.docId){i.docId=a.docId;var c=i.authors[0];if(a.coauthors)for(var s=a.coauthors.split(","),l=0;l<s.length;l++)s[l]!==c&&i.authors.push(s[l]);a.createdBy&&(i.createdBy=a.createdBy),i.docShared=[c],i.text4search=a.text4search}return i}window.alert("invalid mode object")},ht=function(e,t,a,n){return function(r){var o={permission:e.permission,group:e.group,_groupMembers:e._groupMembers},i=pt(t,a,o,n);return x(t,i).then((function(t){var a=Object(j.a)({attachments:[],fromLinks:[],toLinks:[],records:[],annos:{},group:null},t.data);n||B(e._id,a._id,"contains",{x:100,y:100}),r(We(a)),r(ve({title:"New Note",confirmButton:"create",contribId:a._id,type:"Note",editable:!0}))}))}},bt=function(e){return function(t,a){var n=a();t(ht(n.globals.view,n.globals.communityId,n.globals.author._id,e))}},ft=function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){var n,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(e,"from","attach");case 2:return n=t.sent,t.next=5,Promise.all(n.map((function(e){return J(e.to)})));case 5:r=t.sent,a(Ue({contribId:e,attachments:r}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},vt=function(e,t){return function(){var a=Object(O.a)(N.a.mark((function a(n,r){var o,i,c,s,l;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if((e=Object.assign({},e)).data=Object.assign({},e.data),e.title){a.next=5;break}return Ze({title:"Error Saving Note!",type:"danger",message:"Title is required"}),a.abrupt("return");case 5:if("Note"!==e.type){a.next=24;break}return o="active"===e.status,e.status="active",a.next=10,Me(e.data.body,e._id,e.toLinks,e.fromLinks);case 10:return i=a.sent,c=i.html(),s=e.data.body,e.data.body=c,a.next=16,Q(e,e.communityId,e._id);case 16:(l=a.sent).data.body=s,n(et(l)),void 0!==t&&n(ge(t)),o||n(It(l.communityId)),n(Ve(e._id)),a.next=28;break;case 24:return e.status="active",a.next=27,Q(e,e.communityId,e._id);case 27:void 0!==t&&(n(ge(t)),n(Ve(e._id)));case 28:Ze({title:"Saved!",type:"success",message:"Contribution updated!"});case 29:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},gt=function(e,t){return function(){var a=Object(O.a)(N.a.mark((function a(n){var r,o;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,z(e,t);case 2:r=a.sent,n(Je({contribId:e,direction:t,links:r})),"to"===t&&(o=r.filter((function(e){return"contains"===e.type}))[0],n(rt(o)));case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},yt=function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a,n){var r,o,i;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().users,t.next=3,K(e);case 3:o=t.sent,i=new Intl.DateTimeFormat("default",Bt),o.forEach((function(e){if(r[e.authorId]){var t=r[e.authorId];e.author="".concat(t.firstName," ").concat(t.lastName)}else e.author="NA";e.date=i.format(new Date(e.timestamp))})),a(Qe({contribId:e,records:o}));case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},Et=function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a,n){var r,o,i,s,l,u,d,m,p,h;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J(e);case 2:if(r=t.sent,o=n().globals.author,"Note"!==r.type){t.next=26;break}return t.next=7,Promise.all([z(e,"from"),z(e,"to")]);case 7:return i=t.sent,s=Object(c.a)(i,2),l=s[0],u=s[1],d=Object(j.a)({attachments:[],fromLinks:l,toLinks:u,records:[],annos:{}},r),m=Ce(d.data.body,u,l),d.data.body=m,a(We(d)),d.data.riseabove&&(a(Le(d.data.riseabove.viewId)),Ye(d.data.riseabove.viewId,d.communityId,a)),a(ft(e)),a(ve({title:"Edit Note",confirmButton:"edit",contribId:d._id,type:"Note",editable:o&&(d.authors.includes(o._id)||"manager"===o.role),buildOn:!0})),p=u.filter((function(e){return"annotates"===e.type})),t.next=21,Promise.all(p.map((function(e){return J(e.from).then((function(t){return t.data.linkId=e._id,t.data.modelId=t._id,t}))})));case 21:t.sent.forEach((function(t){return a(Xe({annotation:t,contribId:e}))})),a(Ke({contribId:e,value:1})),t.next=29;break;case 26:h=Object(j.a)({records:[]},r),a(We(h)),a(ve({title:"Edit ".concat(r.type),confirmButton:"edit",contribId:r._id,type:r.type,editable:o&&(r.authors.includes(o._id)||"manager"===o.role),buildOn:!0}));case 29:return console.log(r),"active"===r.status&&(b=r.communityId,f=r._id,S.a.post("".concat(M,"/records/read/").concat(b,"/").concat(f))),t.abrupt("return");case 32:case"end":return t.stop()}var b,f}),t)})));return function(e,a){return t.apply(this,arguments)}}()},wt=function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){var n,r,o;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(e,"from");case 2:return n=t.sent,r=n.filter((function(e){return"Note"===e._to.type&&""!==e._to.title&&"active"===e._to.status})),a(nt(n)),t.next=7,Promise.all(r.map((function(e){return J(e.to)})));case 7:o=t.sent,a($e(o)),o.forEach(function(){var e=Object(O.a)(N.a.mark((function e(t){var n,r,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.data||!t.data.riseabove){e.next=10;break}return n=t.data.riseabove.viewId,e.next=4,z(n,"from");case 4:return r=e.sent.filter((function(e){return"Note"===e._to.type&&""!==e._to.title&&"active"===e._to.status})).map((function(e){return e.to})),e.next=7,Promise.all(r.map((function(e){return J(e)})));case 7:o=e.sent,a(st(o)),a(ct({noteId:t._id,notes:r}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},It=function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){var n,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(e,{type:"buildson"});case 2:n=(n=t.sent).reverse(),r=n.filter((function(e){return"Note"===e._to.type&&"active"===e._to.status&&"Note"===e._from.type&&"active"===e._from.status})),a(ot(r));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Nt=function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,P(e,{type:"supports"});case 2:n=t.sent,a(it(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ot=function(e,t){return function(){var a=Object(O.a)(N.a.mark((function a(n){var r;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,ae(e,t);case 2:r=a.sent,n(lt(r));case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},jt=Object(A.b)("SET_TOKEN"),At=Object(A.b)("SET_CURRENT_LOGIN_FORM"),kt=Object(A.b)("SET_COMMUNITY"),St=Object(A.b)("SET_COMMUNITY_ID"),Ct=Object(A.b)("SET_CURRENT_SERVER"),Mt=Object(A.b)("SET_VIEW_ID"),Tt=Object(A.b)("SET_AUTHOR"),Zt=Object(A.b)("SET_VIEW"),Lt=Object(A.b)("SET_AUTHOR"),Gt=Object(A.b)("SET_VIEWS"),Dt=Object(A.b)("EDIT_COMMUNITY"),xt=Object(A.b)("SET_USERID"),Rt=Object(A.b)("SET_ISAUTHENTICATED"),Yt=Object(A.b)("SET_COMMUNITIES"),Wt=Object(A.b)("SET_USER_COMMUNITIES"),Vt=Object(A.b)("SET_SEARCH_QUERY"),zt=Object(A.b)("SET_SEARCH_FILTER"),Ft=Object(A.b)("SET_SOCKET_STATUS"),Bt={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0},Ut={token:sessionStorage.getItem("token"),currentLoginForm:"Login",communityId:null,currentServer:null,viewId:null,contextId:"",user:null,view:null,views:[],community:null,userId:"",isAuthenticated:!!sessionStorage.getItem("token"),communities:[],userCommunities:[],searchQuery:"",searchFilter:"title",servers:[{id:0,key:"kf6.ikit.org",value:"https://kf6.ikit.org"},{id:1,key:"kf6-stage.ikit.org",value:"https://kf6-stage.ikit.org"},{id:2,key:"kf6-stage.rit.albany.edu",value:"https://kf6-stage.rit.albany.edu"},{id:3,key:"kf.rdc.nie.edu.sg",value:"https://kf.rdc.nie.edu.sg"},{id:4,key:"kf.rit.albany.edu",value:"https://kf6.rit.albany.edu"}],socketStatus:!1},Pt=Object(A.c)(Ut,(ie={},Object(w.a)(ie,jt,(function(e,t){e.token=t.payload,e.isAuthenticated=!!e.token})),Object(w.a)(ie,Rt,(function(e,t){e.isAuthenticated=!!e.token})),Object(w.a)(ie,At,(function(e,t){e.currentLoginForm=t.payload})),Object(w.a)(ie,St,(function(e,t){e.communityId=t.payload})),Object(w.a)(ie,Ct,(function(e,t){e.currentServer=t.payload})),Object(w.a)(ie,Mt,(function(e,t){e.viewId=t.payload})),Object(w.a)(ie,xt,(function(e,t){e.userId=t.payload})),Object(w.a)(ie,Tt,(function(e,t){e.user=t.payload})),Object(w.a)(ie,Zt,(function(e,t){e.view=t.payload})),Object(w.a)(ie,Gt,(function(e,t){e.views=t.payload})),Object(w.a)(ie,kt,(function(e,t){e.community=t.payload,e.communityId=t.payload._id,e.contextId=t.payload.rootContextId})),Object(w.a)(ie,Dt,(function(e,t){e.community=Object(j.a)(Object(j.a)({},e.community),t.payload)})),Object(w.a)(ie,Yt,(function(e,t){e.communities=t.payload})),Object(w.a)(ie,Wt,(function(e,t){e.userCommunities=t.payload})),Object(w.a)(ie,Vt,(function(e,t){e.searchQuery=t.payload})),Object(w.a)(ie,zt,(function(e,t){e.searchFilter=t.payload})),Object(w.a)(ie,Lt,(function(e,t){e.author=t.payload})),Object(w.a)(ie,Ft,(function(e,t){e.socketStatus=t.payload})),ie)),Jt=function(e){return function(t){return function(e){return S.a.get("".concat(M,"/authors/").concat(e,"/me"))}(e).then((function(e){t(Lt(e.data))}))}},Qt=function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W(e);case 2:n=t.sent,a(Dt({groups:n}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ht=function(){return function(){var e=Object(O.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D();case 3:a=e.sent,t(xt(a._id)),t(Tt(a)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),sessionStorage.clear(),localStorage.clear(),window.location.replace("/");case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},_t=function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){var n;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,V(e);case 2:n=t.sent,a(Gt(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Xt=function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){var n,r,o;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(tt([])),a(Mt(e)),t.next=4,J(e);case 4:return n=t.sent,r=n.communityId,a(Zt(n)),a(wt(n._id)),t.next=10,R(r);case 10:o=t.sent.data,a(kt(Object(j.a)({groups:[]},o))),a(It(r)),a(Jt(r)),a(_t(r)),a(de(r)),a(Ot(r,n._id)),a(be(r,o.rootContextId)),a(Nt(r));case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Kt=(a(114),a(89));function qt(e,t,a){var n={userName:e,password:t};return fetch(a+"auth/local",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return 200!==e.status&&(console.log("Error: "+a+"auth/local"),console.log(e)),e.json()})).then((function(e){return[e,a]})).catch((function(e){return console.log("Error: "+a+"auth/local"),console.log(e),[{error:"Error: server unavailable"},a]}))}var $t=[{name:"IKIT Stage",url:"https://kf6-stage.ikit.org/"},{name:"Albany Stage",url:"https://kf6-stage.rit.albany.edu/"},{name:"IKIT",url:"https://kf6.ikit.org/"},{name:"Albany",url:"https://kf6.rit.albany.edu/"},{name:"Singapore",url:"https://kf.rdc.nie.edu.sg/"}];function ea(e){for(var t in $t)if($t[t].url===e)return $t[t].name;return"Error: server "+e+" does not exist"}function ta(e){for(var t in $t)if($t[t].name===e)return $t[t].url;return"Error: server "+e+" does not exist"}function aa(e){var t=localStorage.getItem("Username"),a=JSON.parse(localStorage.getItem(t));for(var n in a)if(a[n][0]===e)return a[n][1]}function na(e,t,a){var n=[];document.getElementById("refreshCheckbox").checked&&localStorage.clear();var r=JSON.parse(localStorage.getItem(e));if(null==r)for(var o in $t)n.push(qt(e,t,$t[o].url));else for(var i in r)n.push(qt(e,t,r[i][0]));return Promise.all(n).then((function(t){return function(e,t,a){var n=!1,r="",o=[],i=JSON.parse(localStorage.getItem(e));for(var c in t)if(void 0!==t[c][0].token){var s=t[c][0].token,l=t[c][1],u=null!==i&&i[c][3]?i[c][3]:{value:"Classic",label:"Classic"};null===i&&!1===n||null!==i&&"active"===i[c][2]?o.push([l,s,"active",u]):o.push([l,s,"inactive",u]),n=!0}else{if(void 0!==t[c][0].message&&null!==i){var d=document.getElementById("uname").value,m=document.getElementById("pwd").value;return localStorage.removeItem(d),na(d,m,a)}void 0!==t[c][0].message&&""===r||"This userName is not registered."===r&&"This password is not correct."===t[c][0].message?r=t[c][0].message:void 0!==t[c][0].error&&""===r&&(r=t[c][0].error)}return n?(localStorage.setItem("Username",e),localStorage.setItem(e,JSON.stringify(o)),1):(document.getElementById("errorMessage").style.display="visible",a.setState({errorMessage:r}),0)}(e,t,a)})).catch((function(e){console.log(e)}))}function ra(){var e=localStorage.getItem("Username");if(e){var t,a=JSON.parse(localStorage.getItem(e)),n=Object(Kt.a)(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("active"===r[2]&&""!==r[1])return r}}catch(o){n.e(o)}finally{n.f()}}return[null,null,null,null]}a(115);var oa=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).inputChangeHandler=function(e){var t=e.target.name,a=e.target.value;n.setState(Object(w.a)({},t,a))},n.formSubmitHandler=function(e){e.preventDefault();var t=n.state.uname,a=n.state.pwd;return document.getElementById("errorMessage").style.display="hidden",na(t,a,Object(b.a)(n)).then((function(e){1===e&&(n.props.setGlobalToken(ra()[1]),n.props.history.push("/dashboard"))})),!1},n.openSignUpForm=function(e){n.props.setCurrentLoginForm("SignUp")},n.state={uname:null,pwd:null,errorMessage:null},n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){je()('[data-toggle="tooltip"]').tooltip(),je()('[data-toggle="popover"]').popover(),je()(window).width()<=768&&document.getElementById("popover").setAttribute("data-trigger","focus")}},{key:"render",value:function(){return r.a.createElement("div",{className:"row login-form-row"},r.a.createElement("div",{className:"col-lg-8 col-md-10 col-sm-12 login-form-wrapper"},r.a.createElement("h1",null,"knowledgeforum.org"),r.a.createElement("form",{onSubmit:this.formSubmitHandler,className:"loginForm",id:"loginForm",autoComplete:"on"},r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-user"}),r.a.createElement("input",{type:"text",id:"uname",name:"uname",placeholder:"Username",required:!0,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-lock"}),r.a.createElement("input",{type:"password",id:"pwd",name:"pwd",placeholder:"Password",required:!0,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"login-checkbox-wrapper"},r.a.createElement("input",{type:"checkbox",id:"refreshCheckbox",name:"refreshCheckbox"}),r.a.createElement("label",{htmlFor:"refreshCheckbox"},"Refresh my servers on login?"),r.a.createElement("span",{id:"popover",tabIndex:"0",role:"button","data-toggle":"popover","data-trigger":"hover","data-content":"Check this box if you have registered to any new knowledge forums servers since your last login."},r.a.createElement("i",{className:"far fa-question-circle"}))),r.a.createElement("div",null,r.a.createElement("p",{style:{display:"hidden",color:"red"},id:"errorMessage",name:"errorMessage"},this.state.errorMessage)),r.a.createElement("input",{className:"login-button",type:"submit",value:"Login"})),r.a.createElement("p",{className:"login-create-account-p",onClick:this.openSignUpForm},"Don't have an account? Sign up ",r.a.createElement("i",{className:"far fa-arrow-alt-circle-right"}))))}}]),a}(n.Component),ia={setGlobalToken:jt,setCurrentLoginForm:At},ca=Object(g.d)(l.g,Object(u.b)(null,ia))(oa),sa=a(47),la=a(183),ua=(a(232),function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).inputChangeHandler=function(e){var t=e.target.name,a=e.target.value;n.setState(Object(w.a)({},t,a))},n.serverSelectHandler=function(e){e.value===ta("Singapore")?n.setState({singaporeSelected:!0}):n.setState({singaporeSelected:!1}),n.setState({server:e.value})},n.formSubmitHandler=function(e){return e.preventDefault(),null===n.state.server?n.setState({errorMessage:"Please select a server."}):!1===/^[a-zA-Z][.0-9a-zA-Z@_-]{1,100}$/.test(n.state.username)?n.setState({errorMessage:["Username must meet the following requirements:",r.a.createElement("br",null),"1. Start with a letter",r.a.createElement("br",null),"2. Not contain any white spaces",r.a.createElement("br",null),"3. Can only contain the special characters @._-"]}):n.state.password!==n.state.confirmPassword?n.setState({errorMessage:"Passwords do not match."}):function(e,t,a,n,r,o,i){var c;return c=null===i?{email:n,firstName:t,lastName:a,password:o,userName:r}:{email:n,firstName:t,lastName:a,password:o,registrationKey:i,userName:r},fetch(e+"api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then((function(t){return 200!==t.status&&(console.log("Error: "+e+"api/users"),console.log(t)),t.json()})).then((function(t){return[t,e]})).catch((function(t){return[{error:"Error: server unavailable"},e]}))}(n.state.server,n.state.firstname,n.state.lastname,n.state.email,n.state.username,n.state.password,n.state.registrationKey).then((function(e){if(e[0]&&void 0!==e[0].token)localStorage.setItem("Username",n.state.username),localStorage.setItem(n.state.username,JSON.stringify([[e[1],e[0].token,"active"]])),n.props.setGlobalToken(e[0].token),n.props.history.push("/dashboard");else{var t=e[0].message||e[0].error||e[0].errorCode||e[0];n.setState({errorMessage:t})}})),!1},n.openLoginForm=function(e){n.props.setCurrentLoginForm("Login")},n.verifyRecaptcha=function(e){null===e?n.setState({recaptchaVerified:!1}):n.setState({recaptchaVerified:!0})},n.state={server:null,firstname:null,lastname:null,email:null,username:null,password:null,confirmPassword:null,registrationKey:null,errorMessage:null,singaporeSelected:!1,recaptchaVerified:!1},n}return Object(h.a)(a,[{key:"render",value:function(){var e,t;return e=this.state.singaporeSelected?r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-lock"}),r.a.createElement("input",{type:"text",id:"registrationKey",name:"registrationKey",placeholder:"Singapore Account Creation Key",required:!0,onChange:this.inputChangeHandler})):r.a.createElement(la.a,{sitekey:"6LdTo2oaAAAAALKB-WW7km7SabLVsBXSg4NAaX_K",onChange:this.verifyRecaptcha}),t=!0===this.state.recaptchaVerified&&!this.state.singaporeSelected||this.state.singaporeSelected&&null!==this.state.registrationKey?r.a.createElement("input",{className:"login-button",type:"submit",value:"Create Account"}):r.a.createElement("input",{className:"login-button login-disabled",type:"submit",value:"Create Account",disabled:!0}),r.a.createElement("div",{className:"row login-form-row"},r.a.createElement("div",{className:"col-lg-8 col-md-10 col-sm-12 login-form-wrapper"},r.a.createElement("h1",null,"knowledgeforum.org"),r.a.createElement("form",{onSubmit:this.formSubmitHandler,className:"loginForm",id:"loginForm",autoComplete:"on"},r.a.createElement("div",{className:"login-input-wrapper signup-select-server"},r.a.createElement("i",{className:"fas fa-server"}),r.a.createElement("div",{className:"select-container"},r.a.createElement(sa.a,{placeholder:"Select a Server",options:$t.map((function(e){return{value:e.url,label:e.name}})),onChange:this.serverSelectHandler,className:"basic-multi-select",classNamePrefix:"select"})),r.a.createElement("div",{className:"clearFix"})),r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-user"}),r.a.createElement("input",{type:"text",id:"firstname",name:"firstname",placeholder:"First Name",required:!0,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-user"}),r.a.createElement("input",{type:"text",id:"lastname",name:"lastname",placeholder:"Last Name",required:!0,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-envelope"}),r.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"Email",required:!0,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-user"}),r.a.createElement("input",{type:"text",id:"username",name:"username",placeholder:"Username",minLength:"3",maxLength:"49",required:!0,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-lock"}),r.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Password",minLength:"4",required:!0,onChange:this.inputChangeHandler})),r.a.createElement("div",{className:"login-input-wrapper"},r.a.createElement("i",{className:"fas fa-lock"}),r.a.createElement("input",{type:"password",id:"confirmPassword",name:"confirmPassword",placeholder:"Confirm Password",required:!0,onChange:this.inputChangeHandler})),e,r.a.createElement("div",null,r.a.createElement("p",{style:{color:"red"},id:"errorMessage",name:"errorMessage"},this.state.errorMessage)),t),r.a.createElement("p",{className:"login-create-account-p",onClick:this.openLoginForm},"Already have an account? Login ",r.a.createElement("i",{className:"far fa-arrow-alt-circle-right"}))))}}]),a}(n.Component)),da={setGlobalToken:jt,setCurrentLoginForm:At},ma=Object(g.d)(l.g,Object(u.b)(null,da))(ua),pa=a(75),ha=a.n(pa),ba=a(128),fa=a.n(ba),va=a(162),ga=a.n(va),ya=a(163),Ea=a.n(ya),wa=a(164),Ia=a.n(wa);function Na(e,t,a){return fetch(t+"api/objects/"+a,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return 200!==e.status&&(console.log("Error: "+t+"api/objects/"+a),console.log(e)),e.json()})).then((function(e){return e})).catch((function(e){return e}))}function Oa(e,t,a){var n,r,o=Sa(t._to.authors[0],a),i=Ca(t.created);return void 0===t._to.data?(n="unread-note",r="note"):(n="unread-riseabove",r="riseabove"),{group:"nodes",data:{id:e,name:t._to.title,author:o,date:i,kfId:t.to,type:r},classes:n,position:{x:t.data.x,y:t.data.y}}}function ja(e,t,a,n,r){var o=Sa(n._to.authors[0],r),i=Ca(n.created),c=Ma(a,n.to);return Na(t,e,n.to).then((function(t){if("image"===String(t.data.type).substring(0,5)){var a=(e+String(t.data.url).substring(1)).replace(/\s/g,"%20");"gif"===String(t.data.type).slice(-3)&&(a=a.substring(0,a.length-3)+"mp4");var r={x:n.data?n.data.x:0,y:n.data?n.data.y:0,width:n.data?n.data.width:0,height:n.data?n.data.height:0};return{url:a,name:n._to.title,bounds:r,locked:!1,linkId:n._id,author:o,kfId:n.to,type:n._to.type}}return{group:"nodes",data:{id:c,name:n._to.title,author:o,date:i,kfId:n.to,type:n._to.type,download:e+t.data.url.substring(1)},classes:"attachment",position:{x:n.data.x,y:n.data.y}}}))}function Aa(e,t,a,n,r){var o=Sa(n._to.authors[0],r);return Na(t,e,n.to).then((function(e){var t=(new DOMParser).parseFromString(e.data.svg,"image/svg+xml"),a=t.childNodes[0].attributes.width.value/t.childNodes[0].attributes.height.value,r=parseInt(n.data.width)/a,i={x:n.data?n.data.x:0,y:n.data?n.data.y:0,height:n.data?r:0,width:n.data?parseInt(n.data.width):0};return{url:"data:image/svg+xml;utf8,"+encodeURIComponent('<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg>'+e.data.svg),name:n._to.title,bounds:i,locked:!1,author:o,kfId:n.to,type:n._to.type,linkId:n._id}}))}function ka(e,t,a){return{group:"nodes",data:{id:Ma(e,t.to),author:Sa(t._to.authors[0],a),name:t._to.title,kfId:t.to,type:t._to.type,communityId:t.communityId},classes:"view",position:{x:t.data.x,y:t.data.y}}}function Sa(e,t){for(var a in t)if(e===t[a]._id)return t[a].firstName+" "+t[a].lastName;return"Author not found"}function Ca(e){var t=e.substring(0,4),a=e.substring(5,7),n=e.substring(8,10),r=e.substring(11,13),o=e.substring(14,16),i=e.substring(17,19);return r<12?a+"/"+n+"/"+t+", "+r+":"+o+":"+i+" AM":a+"/"+n+"/"+t+", "+(r-12)+":"+o+":"+i+" PM"}function Ma(e,t){return e.has(t)?(e.set(t,e.get(t)+1),t+"-"+e.get(t)):(e.set(t,1),t+"-1")}a(253),a(254);var Ta=a(165),Za=a.n(Ta),La=a(166),Ga=a.n(La),Da=a(167),xa=a.n(Da),Ra=a(168),Ya=a.n(Ra),Wa=a(169),Va=a.n(Wa),za=a(170),Fa=a.n(za);ha.a.use(ga.a),ha.a.use(Ea.a),ha.a.use(Ia.a);var Ba=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={elements:{nodes:[],edges:[]},kfToCyMap:null,removedElements:null,currViewLinksLength:0},n.loadElements=n.loadElements.bind(Object(b.a)(n)),n.supportImageIsDuplicate=n.supportImageIsDuplicate.bind(Object(b.a)(n)),n.compareSupportImages=n.compareSupportImages.bind(Object(b.a)(n)),n.findCyIdsFromKfId=n.findCyIdsFromKfId.bind(Object(b.a)(n)),n.updateReadLinks=n.updateReadLinks.bind(Object(b.a)(n)),n.focusRecentAddition=n.focusRecentAddition.bind(Object(b.a)(n)),n.filterNodes=n.filterNodes.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"loadElements",value:function(e,t){var a=this;if((this.props.viewLinks.length!==this.state.currViewLinksLength||t)&&0!==this.props.buildsOn.length&&0!==Object.keys(this.props.authors).length){this.setState({currViewLinksLength:this.props.viewLinks.length});var n=this.cy.supportimages(),r=new Map;n._private.supportImages=[];var o=function(e,t,a,n,r){for(var o=[],i=0;i<n.length;i++){var c=Ma(a,n[i].to);"Note"===n[i]._to.type&&""!==n[i]._to.title&&"active"===n[i]._to.status?o.push(Oa(c,n[i],r)):"Attachment"===n[i]._to.type&&""!==n[i]._to.title&&"active"===n[i]._to.status?o.push(ja(e,t,a,n[i],r)):"Drawing"===n[i]._to.type&&""!==n[i]._to.title&&"active"===n[i]._to.status?o.push(Aa(e,t,a,n[i],r)):"View"===n[i]._to.type&&""!==n[i]._to.title&&"active"===n[i]._to.status&&o.push(ka(a,n[i],r))}return o}(this.props.server,this.props.token,r,this.props.viewLinks,this.props.authors),i=function(e,t){for(var a=[],n=0;n<t.length;n++){var r=t[n];if("Note"===r._to.type&&"active"===r._to.status&&""!==r._to.title&&"Note"===r._from.type&&"active"===r._from.status&&""!==r._from.title){var o=e.get(r.from),i=e.get(r.to);if("undefined"!==o&&"undefined"!==i)for(var c=0;c<o;c++)for(var s=0;s<i;s++)a.push({group:"edges",data:{id:r._id+"-"+(parseInt(c)+1)+(parseInt(s)+1),source:r.from+"-"+(parseInt(c)+1),target:r.to+"-"+(parseInt(s)+1)}});else console.log(r.from+" fromCount: "+o+"\n"+r.to+" toCount: "+i)}}return a}(r,this.props.buildsOn),c=this;Promise.all(o.concat(i)).then((function(t){for(var o={nodes:[],edges:[]},i=0;i<t.length;i++)"nodes"===t[i].group?o.nodes.push(t[i]):"edges"===t[i].group?o.edges.push(t[i]):t[i].url&&!a.supportImageIsDuplicate(n.images(),t[i])&&n.addSupportImage(t[i]);c.setState({elements:o}),c.setState({kfToCyMap:r}),0===n.images().length&&n._private.renderer.redraw(),a.props.viewLinks.length===e+1&&a.focusRecentAddition(a.props.viewLinks[a.props.viewLinks.length-1]),a.updateReadLinks()}))}}},{key:"supportImageIsDuplicate",value:function(e,t){for(var a in e)if(this.compareSupportImages(e[a],t))return!0;return!1}},{key:"compareSupportImages",value:function(e,t){return e.bounds.height===t.bounds.height&&e.bounds.width===t.bounds.width&&e.bounds.x===t.bounds.x&&e.bounds.y===t.bounds.y&&e.name===t.name&&e.url===t.url}},{key:"findCyIdsFromKfId",value:function(e){var t=this.state.kfToCyMap;if(t.has(e)){for(var a=[],n=t.get(e),r=1;r<=n;r++)a.push(e+"-"+r);return a}return null}},{key:"updateReadLinks",value:function(){var e=this.cy,t=this.props.readLinks,a=this;e.batch((function(){for(var n in t){var r=a.findCyIdsFromKfId(t[n]);if(null!==r&&0!==r.length){var o=!!e.$("#"+r[0]).hasClass("unread-riseabove"),i=o?"unread-riseabove":"unread-note",c=o?"read-riseabove":"read-note";for(var s in r)e.$("#"+r[s]).removeClass(i).addClass(c)}}}))}},{key:"focusRecentAddition",value:function(e){var t=this.cy,a=e.to,n=this.findCyIdsFromKfId(a);if(null!==n){var r=t.$("#"+n[n.length-1]);t.center(r),r.flashClass("recentAddition",1e4)}}},{key:"filterNodes",value:function(e){var t=this.cy,a=t.supportimages();null!==this.state.removedElements&&this.state.removedElements.restore(),this.setState({removedElements:null});var n=a.images();for(var r in n)a.setImageVisible(n[r],!0);var o=t.collection(),i=e||this.props.searchQuery,c=Object.values(this.props.viewNotes),s=this.props.searchFilter,l=this;switch(s){case"title":o=t.filter((function(e,t){var a=e.data("type"),n=e.data("name");if(("note"===a||"View"===a||"riseabove"===a||"Attachment"===a)&&!n.toLowerCase().includes(i.toLowerCase()))return e}));break;case"content":c.filter((function(e){if(e.data&&(e.data.English&&!e.data.English.includes(i)||e.data.body&&!e.data.body.includes(i))){var a=l.findCyIdsFromKfId(e._id);for(var n in a)o=o.union(t.$("#"+a[n]))}}));break;case"author":o=t.filter((function(e,t){var a=e.data("type"),n=e.data("author");if(("note"===a||"View"===a||"riseabove"===a||"Attachment"===a)&&!n.toLowerCase().includes(i.toLowerCase()))return e}));break;case"scaffold":var u=this.props.supports.filter((function(e){return e.from===i})).map((function(e){return e.to}));c.filter((function(e){if(!u.includes(e._id)){var a=l.findCyIdsFromKfId(e._id);for(var n in a)o=o.union(t.$("#"+a[n]))}}))}if(0!==o.length){var d=t.remove(o);this.setState({removedElements:d})}}},{key:"componentDidMount",value:function(){var e=this,t=this.cy,a={zoomFactor:.05,zoomDelay:45,minZoom:.75,maxZoom:2,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,zoomOnly:!1,fitSelector:void 0,animateOnFit:function(){return!1},fitAnimationDuration:1e3,sliderHandleIcon:"fa fa-minus",zoomInIcon:"fa fa-plus",zoomOutIcon:"fa fa-minus",resetIcon:"fa fa-expand"};t.panzoom(a),t.nodeHtmlLabel([{query:"node",halign:"center",valign:"bottom",halignBox:"right",valignBox:"bottom",cssClass:"cytoscape-label",tpl:function(e){return"note"===e.type||"riseabove"===e.type||"Attachment"===e.type?"<div>"+e.author+"<br>"+e.date+"</div>":""}}]),this.loadElements();var n=this;t.on("tap","node",(function(e){var t=this.data("kfId"),a=this.data("type");this.hasClass("image")?console.log("image"):this.hasClass("attachment")?n.props.onNoteClick(t):this.hasClass("view")?n.props.onViewClick(t):"riseabove"===a?(n.props.onNoteClick(t),this.removeClass("unread-riseabove"),this.addClass("read-riseabove")):"note"===a&&(n.props.onNoteClick(t),this.removeClass("unread-note"),this.addClass("read-note"))})),t.on("dragfree","node",(function(t){var a=t.target.position(),n=a.x,r=a.y,o=t.target.data().kfId,i=e.props.viewLinks.filter((function(e){return e.to===o}));if(i.length){i=i[0];var c={x:n,y:r},s=Object(j.a)({},i);s.data=Object(j.a)(Object(j.a)({},s.data),c),e.props.updateViewLink(s)}})),t.on("cysupportimages.imagemoved",(function(t,a){var n=e.props.viewLinks.filter((function(e){return e._id===a.linkId}));if(n.length){n=n[0];var r={x:a.bounds.x,y:a.bounds.y},o=Object(j.a)({},n);o.data=Object(j.a)(Object(j.a)({},o.data),r),e.props.updateViewLink(o)}})),t.on("cysupportimages.imageresized",(function(t,a,n,r){var o=e.props.viewLinks.filter((function(e){return e._id===a.linkId}));if(o.length){o=o[0];var i={width:a.bounds.width,height:a.bounds.height},c=Object(j.a)({},o);c.data=Object(j.a)(Object(j.a)({},c.data),i),e.props.updateViewLink(c)}}))}},{key:"componentDidUpdate",value:function(e,t){var a={anyPropUpdated:this.props.viewId!==e.viewId||this.props.buildsOn!==e.buildsOn||this.props.authors!==e.authors||this.props.viewLinks!==e.viewLinks||this.props.readLinks!==e.readLinks,nodePositionUpdated:this.props.viewId===e.viewId&&this.props.buildsOn===e.buildsOn&&this.props.authors===e.authors&&this.props.viewLinks!==e.viewLinks&&this.props.viewLinks.length===e.viewLinks.length&&this.props.readLinks===e.readLinks,switchedToEmptyView:this.props.viewId!==e.viewId&&this.props.buildsOn===e.buildsOn&&this.props.authors===e.authors&&this.props.viewLinks!==e.viewLinks&&0===this.props.viewLinks.length&&void 0!==e.viewLinks.length,searchTriggered:this.props.searchQuery!==e.searchQuery||this.props.searchFilter!==e.searchFilter},n=a.nodePositionUpdated||a.switchedToEmptyView;a.searchTriggered&&this.filterNodes(),a.anyPropUpdated&&this.loadElements(e.viewLinks.length,n)}},{key:"render",value:function(){var e=this;return r.a.createElement(fa.a,{cy:function(t){e.cy=t},style:{width:"100%",height:"100%"},elements:fa.a.normalizeElements(this.state.elements),stylesheet:[{selector:"node",style:{label:"data(name)","font-size":"11px","text-halign":"right","text-valign":"center","text-margin-x":"-5",padding:"0","background-opacity":"0","background-clip":"none","background-width":"15px","background-height":"15px"}},{selector:"edge",style:{width:1,"line-color":"#29648f","target-arrow-color":"#29648f","target-arrow-shape":"triangle","curve-style":"bezier"}},{selector:".unread-note",style:{"background-image":[Za.a]}},{selector:".read-note",style:{"background-image":[Ga.a]}},{selector:".unread-riseabove",style:{"background-image":[xa.a]}},{selector:".read-riseabove",style:{"background-image":[Ya.a]}},{selector:".attachment",style:{"background-image":[Va.a]}},{selector:".view",style:{"background-image":[Fa.a]}},{selector:".image",style:{label:""}},{selector:".drawing",style:{label:""}},{selector:".recentAddition",style:{"border-style":"solid","border-width":"2","border-color":"red"}}],layout:{name:"grid"},hideEdgesonViewport:!1,autolock:!1,wheelSensitivity:.15,minZoom:.75,maxZoom:2})}}]),a}(n.Component),Ua={updateViewLink:function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a,n){return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F(e._id,e);case 2:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}},Pa=Object(u.b)((function(e,t){return{token:e.globals.token,server:e.globals.currentServer,viewId:e.globals.viewId,author:e.globals.author,authors:e.users,viewNotes:e.notes.viewNotes,viewLinks:e.notes.viewLinks,readLinks:e.notes.readLinks,buildsOn:e.notes.buildsOn,supports:e.notes.supports,searchQuery:e.globals.searchQuery,searchFilter:e.globals.searchFilter}}),Ua)(Ba),Ja=a(171),Qa=a.n(Ja),Ha=a(172),_a=a.n(Ha),Xa=a(173),Ka=a.n(Xa),qa=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={demoToken:null,demoServer:"https://kf6-stage.ikit.org/",demoCommunityId:"5ea995a6cbdc04a6f53a1b5c",demoViewId:"5ea995a7cbdc04a6f53a1b5f",showModal:!1},n.handleShow=n.handleShow.bind(Object(b.a)(n)),n.handleClose=n.handleClose.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"handleShow",value:function(){this.setState({showModal:!0});var e=this;(function(e,t,a){var n={userName:e,password:t};return fetch(a+"auth/local",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return 200!==e.status&&(console.log("Error: "+a+"auth/local"),console.log(e)),e.json()})).then((function(e){return e})).catch((function(e){return e}))})("demo1","demo1",this.state.demoServer).then((function(t){e.setState({demoToken:t.token})}))}},{key:"handleClose",value:function(){this.setState({showModal:!1})}},{key:"componentDidMount",value:function(){je()('[data-toggle="tooltip"]').tooltip(),je()('[data-toggle="popover"]').popover(),je()(window).width()<=768&&document.getElementById("popover").setAttribute("data-trigger","focus")}},{key:"render",value:function(){var e;return"Login"===this.props.currentLoginForm?e=r.a.createElement(ca,null):"SignUp"===this.props.currentLoginForm&&(e=r.a.createElement(ma,null)),r.a.createElement("div",{className:"container-fluid login-main"},r.a.createElement("div",{className:"row login-row"},r.a.createElement("div",{className:"col-md-6 login-col login",id:"login"},e),r.a.createElement("div",{className:"col-md-6 login-about"},r.a.createElement("div",{className:"login-about-wrapper"},r.a.createElement("h1",null,"What is knowledgeforum.org?"),r.a.createElement("p",null,"A knowledge forum is an electronic group workspace designed to support the process of knowledge building. There are multiple installations of knowledge forums hosted by many universities and private entities all over the world. Knowledgeforum.org unites all of these installations and hence the stakeholders to help confluence knowledge building research, widen the reach of the tool & provide a central location for all global stakeholders."),r.a.createElement("div",{className:"login-overlay-container login-demo-image",onClick:this.handleShow,id:"demo-image-container"},r.a.createElement("img",{className:"d-block w-100",src:Qa.a,alt:"First slide"}),r.a.createElement("div",{className:"login-overlay"},r.a.createElement("div",{className:"login-overlay-text"},"Demo a Knowledge Forum"))),r.a.createElement("div",{className:"login-apps-div"},r.a.createElement("a",{href:"itms-apps://apps.apple.com/us/app/id1554705711"},r.a.createElement("img",{className:"login-appstore-img",src:_a.a,alt:"Apple App Store"})),r.a.createElement("a",{style:{marginLeft:"10px"},href:"https://play.google.com/store/apps/details?id=com.kf6mobile&hl=en_US&gl=US"},r.a.createElement("img",{className:"login-appstore-img",src:Ka.a,alt:"Google Play Store"}))),r.a.createElement(y.a,{dialogClassName:"login-modal-dialog",onHide:this.handleClose},r.a.createElement(y.a.Header,{closeButton:!0},r.a.createElement(y.a.Title,null,"Knowledge Forum Demo")),r.a.createElement(y.a.Body,{className:"login-modal-body"},r.a.createElement(Pa,{style:{width:"100%",height:"100%"},token:this.state.demoToken,server:this.state.demoServer,communityId:this.state.demoCommunityId,viewId:this.state.demoViewId})),r.a.createElement(y.a.Footer,null,r.a.createElement(E.a,{variant:"primary",onClick:this.handleClose,className:"login-modal-btn"},"Close")))))))}}]),a}(n.Component),$a=Object(g.d)(l.g,Object(u.b)((function(e,t){return{currentLoginForm:e.globals.currentLoginForm}}),null))(qa);function en(e,t){var a=aa(e);(function(e,t){return fetch(t+"api/users/myRegistrations",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return 200!==e.status&&(console.log("Error: "+t+"api/users/myRegistrations"),console.log(e)),e.json()})).then((function(e){return e})).catch((function(e){return e}))})(a,e).then((function(e){e.sort((function(e,t){return rn(e._community.title,t._community.title)})),function(e,t,a){for(var n=[],r=0;r<e.length;r++)e[r]&&e[r]._id&&n.push({title:e[r]._community.title,server:a.state.currentServerURL,token:a.state.token,communityId:e[r].communityId});a.setState({userCommunityData:n})}(e,0,t)})),function(e,t){return fetch(t+"api/users/me",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return 200!==e.status&&304!==e.status?(console.log("Error: "+t+"api/users/me"),console.log(e),{error:!0}):e.json()})).then((function(e){return e})).catch((function(e){return e}))}(a,e).then((function(e){!0===e.error?(alert("User authorization token expired"),an()):(t.setState({name:e.firstName+" "+e.lastName}),t.setState({userId:e._id}))})),function(e,t){return fetch(t+"api/communities",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}}).then((function(e){return 200!==e.status&&(console.log("Error: "+t+"api/communities"),console.log(e)),e.json()})).then((function(e){return e})).catch((function(e){return e}))}(a,e).then((function(e){e.sort((function(e,t){return rn(e.title,t.title)})),function(e,t){for(var a=[],n=0;n<e.length;n++){var r=e[n].title,o=e[n]._id;a.push({title:r,communityId:o})}var i=a.map((function(e){return{value:e.communityId,label:e.title}}));t.setState({serverCommunityData:i})}(e,t)}))}function tn(e,t,a,n,r){var o=aa(t),i=r;(function(e,t,a,n,r){var o={communityId:t,registrationKey:r,userId:n};return fetch(a+"api/authors",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e},body:JSON.stringify(o)}).then((function(e){return 200!==e.status?(console.log("Error: "+a+"api/authors"),console.log(e),e):e.json()})).then((function(e){return[e,a]})).catch((function(e){return e}))})(o,n,t,e,a).then((function(e){document.getElementById("communityKey").value="",201!==e[0].status?i.setState({joinCommunityErrorMessage:"Registration key does not match or you are already registered."}):(i.setState({joinCommunityErrorMessage:""}),en(t,i))}))}function an(e){var t=localStorage.getItem("Username"),a=JSON.parse(localStorage.getItem(t));if(null===t||null===a)localStorage.clear();else{for(var n in a)a[n][1]="";localStorage.setItem(t,JSON.stringify(a)),localStorage.removeItem("Username")}e.props.history.push("/")}function nn(){var e=document.getElementById("wrapper");"d-flex"===e.className?e.className="d-flex toggled":e.className="d-flex"}function rn(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0}a(255);var on=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).inputChangeHandler=function(e){var t=e.target.name,a=e.target.value;n.setState(Object(w.a)({},t,a))},n.serverSelectHandler=function(e){var t=e.target,a=e.target.innerText,r=ta(e.target.innerText),o=JSON.parse(localStorage.getItem(n.state.username));n.setState({currentServerURL:ta(a)}),n.setState({currentServerName:a}),je()(t).addClass("active").siblings().removeClass("active");var i=ta(a),c=[];for(var s in o){var l=o[s][0],u=o[s][1],d=l===i?"active":"inactive",m=o[s][3];l===i&&n.setState({token:o[s][1]}),c.push([l,u,d,m])}localStorage.setItem(n.state.username,JSON.stringify(c)),en(r,Object(b.a)(n))},n.handleViewChange=function(e){var t={value:e.value,label:e.label};n.setState({viewType:t});var a=JSON.parse(localStorage.getItem(n.state.username)),r=[];for(var o in a)r.push([a[o][0],a[o][1],a[o][2],t]);localStorage.setItem(n.state.username,JSON.stringify(r))},n.handleCommunityDropDownChange=function(e){n.setState({selectedCommunityToJoin:{value:e.value,label:e.label}})},n.state={token:null,username:null,name:null,userId:null,currentServerURL:null,currentServerName:null,serverList:[],userCommunityData:[],serverCommunityData:[],selectedCommunityToJoin:null,communityRegistrationKey:null,joinCommunityErrorMessage:null,viewType:JSON.parse(localStorage.getItem(localStorage.getItem("Username")))[0][3]},n.enterCommunity=n.enterCommunity.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"enterCommunity",value:function(e){var t,a,n,r=(t=e.token,a=e.communityId,n=e.server,fetch(n+"api/communities/"+a+"/views",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}}).then((function(e){return 200!==e.status&&(console.log("Error: "+n+"api/communities/"+a+"/views"),console.log(e)),e.json()})).then((function(e){return e[0]})).catch((function(e){return e}))),o=this;r.then((function(t){if("Classic"===o.state.viewType.value){var a=document.createElement("a");a.href=e.server+"auth/jwt?token="+e.token+"&redirectUrl=/view/"+t._id,a.target="_blank",document.body.appendChild(a),a.click()}else"Enhanced"!==o.state.viewType.value&&"Light"!==o.state.viewType.value||(T(e.server),Z(e.token),sessionStorage.setItem("token",e.token),sessionStorage.setItem("communityId",e.communityId),sessionStorage.setItem("viewId",t._id),o.props.setGlobalToken(e.token),o.props.fetchLoggedUser(),o.props.setCommunityId(e.communityId),o.props.setViewId(t._id),o.props.setCurrentServer(e.server),o.props.history.push({pathname:"/view/".concat(t._id),state:{currentView:o.state.viewType.value,communityTitle:e.title}}))})).catch((function(e){console.log(e)}))}},{key:"componentDidMount",value:function(){!function(e){var t=localStorage.getItem("Username"),a=JSON.parse(localStorage.getItem(t)),n=[];e.setState({username:t});for(var r=0;r<a.length;r++){var o=ea(a[r][0]);"active"===a[r][2]?(e.setState({currentServerURL:a[r][0]}),e.setState({currentServerName:ea(a[r][0])}),e.setState({token:a[r][1]}),n.push({name:o,class:"active",url:a[r][0]}),en(a[r][0],e)):n.push({name:o,class:"",url:a[r][0]})}e.setState({serverList:n})}(this)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"d-flex",id:"wrapper"},r.a.createElement("div",{className:"sidebar-custom dashboard-sidebar-custom",id:"sidebar-wrapper"},r.a.createElement("h1",{className:"sidebar-heading dashboard-sidebar-heading"},"Your Servers:"),r.a.createElement("div",{className:"list-group list-group-flush"},r.a.createElement("ul",{className:"dashboard-server-list",id:"server-list"},this.state.serverList.map((function(t){return r.a.createElement("li",{key:t.name,onClick:e.serverSelectHandler,className:t.class},t.name)}))),r.a.createElement("div",{className:"dashboard-viewDropDownContainer"},r.a.createElement("p",null,"View Type:"),r.a.createElement(sa.a,{isSearchable:!1,value:this.state.viewType,onChange:this.handleViewChange,options:[{value:"Classic",label:"Classic"},{value:"Enhanced",label:"Enhanced"},{value:"Light",label:"Light"}]})))),r.a.createElement("div",{id:"page-content-wrapper"},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light border-bottom dashboard-navbar"},r.a.createElement("button",{className:"d-none d-md-block btn btn-primary dashboard-select-server",id:"menu-toggle",onClick:nn},"Select Server"),r.a.createElement("button",{className:"d-md-none btn btn-primary dashboard-select-server",id:"menu-toggle",onClick:nn},r.a.createElement("i",{className:"fas fa-server"})),r.a.createElement("div",{className:"dashboard-currentInfo",id:"currentInfo"},this.state.name,r.a.createElement("div",null),this.state.currentServerName),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav ml-auto mt-2 mt-lg-0"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("button",{className:"nav-link dashboard-nav-link btn btn-link",href:"",id:"logout",onClick:function(){return an(e)}},"Logout"))))),r.a.createElement("div",{className:"container-fluid",id:"dashboard-mainContentContainer"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6 dashboard-mainContentCol userCommunitiesTableCol"},r.a.createElement("h1",null,"My Knowledge Building Communities"),r.a.createElement("table",{className:"dashboard-userCommunities table",id:"userCommunities"},r.a.createElement("tbody",null,this.state.userCommunityData.map((function(t){return r.a.createElement("tr",{key:t.communityId,onClick:function(){return e.enterCommunity(t)}},r.a.createElement("td",{className:"dashboard-userCommunities-row"},t.title,r.a.createElement("button",{className:"dashboard-enterButton",type:"button"},r.a.createElement("i",{className:"fas fa-door-open"}))))}))))),r.a.createElement("div",{className:"col-md-6 dashboard-mainContentCol"},r.a.createElement("h1",null,"Join Community"),r.a.createElement("form",{className:"col-lg-8 col-md-10 col-sm-12 dashboard-joinCommunityForm",id:"joinCommunityForm",autoComplete:"off"},r.a.createElement("label",{htmlFor:"server"},"Community:"),r.a.createElement("br",null),r.a.createElement(sa.a,{value:this.state.selectedCommunityToJoin,className:"dashboard-communityChoiceDropdown",id:"communityChoiceDropdown",options:this.state.serverCommunityData,onChange:this.handleCommunityDropDownChange,required:!0}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"communityKey"},"Community Registration Key:"),r.a.createElement("br",null),r.a.createElement("input",{className:"dashboard-communityKeyInput",type:"text",id:"communityKey",name:"communityRegistrationKey",required:!0,onChange:this.inputChangeHandler}),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("p",{style:{color:"red"},id:"errorMessage"},this.state.joinCommunityErrorMessage)),r.a.createElement("input",{className:"dashboard-joinButton",type:"button",value:"Join",onClick:function(){return tn(e.state.userId,e.state.currentServerURL,e.state.communityRegistrationKey,e.state.selectedCommunityToJoin.value,e)},id:"joinCommunityButton"})))))))}}]),a}(n.Component),cn={setGlobalToken:jt,setCurrentServer:Ct,setCommunityId:St,setViewId:Mt,fetchLoggedUser:Ht},sn=Object(u.b)(null,cn)(on),ln=a(340),un=a(341),dn=a(181),mn=a(346),pn=a(336),hn=a(178),bn=a(329),fn=a(330),vn=a(342),gn=a(328),yn=a(345),En=a(186),wn=a(331),In=a(332),Nn=a(333),On=a(334),jn=a(176),An=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleFilter=function(e){var t=e.target.value;if("scaffold"===t){var a=n.props.scaffolds[0].supports[0].to;n.setState({query:a}),n.props.setSearchQuery(a)}else n.setState({query:""}),n.props.setSearchQuery("");n.props.setSearchFilter(t)},n.handleInputChange=function(e){var t=e.target.value;n.setState({query:t}),""!==t&&"scaffold"!==n.props.filter||n.props.setSearchQuery(t)},n.handleSearchSubmit=function(e){n.props.setSearchQuery(n.state.query),e.preventDefault()},n.signUp=function(e){n.props.history.push("/")},n.state={query:""},n.handleChange=n.handleChange.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"logout",value:function(){sessionStorage.clear(),delete S.a.defaults.headers.common.Authorization,jt(null)}},{key:"handleChange",value:function(e){var t=e.target.value;this.props.onViewClick(t)}},{key:"componentDidUpdate",value:function(e,t){this.props.currentView===e.currentView&&this.props.viewId===e.viewId||(this.setState({query:""}),this.props.setSearchQuery(""),this.props.setSearchFilter("title"),document.getElementById("queryForm").reset())}},{key:"render",value:function(){var e,t=this.props.isAuthenticated,a=this.props.user?"".concat(this.props.user.firstName," ").concat(this.props.user.lastName):null,n=this.props.location.pathname.startsWith("/view/");return e="scaffold"===this.props.filter?r.a.createElement(gn.a,{type:"select",onChange:this.handleInputChange},this.props.scaffolds.map((function(e,t){return r.a.createElement("optgroup",{key:t,label:e.title},e.supports.map((function(e,t){return r.a.createElement("option",{key:t,value:e.to},e._to.title)})))}))):r.a.createElement(gn.a,{className:"form-control",value:this.state.query,placeholder:"Search",onChange:this.handleInputChange}),r.a.createElement(yn.a,{className:"viewNavBar"},r.a.createElement(yn.a.Brand,{className:"viewNavBar-brand d-none d-sm-block"},this.props.communityTitle),r.a.createElement(yn.a.Text,{className:"viewNavBar-dropdown-title"},"View:"),n?r.a.createElement(En.a,{className:"viewNavBar-dropdown"},this.props.view?r.a.createElement(bn.a,null,r.a.createElement(fn.a,{className:"viewNavBar-dropdown-formgroup"},r.a.createElement(gn.a,{type:"select",name:"viewId",value:this.props.view._id,onChange:this.handleChange},this.props.views.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id}," ",e.title," ")}))))):null):null,r.a.createElement(yn.a.Text,{className:"viewNavBar-dropdown-title"},"Search:"),r.a.createElement(bn.a,{id:"queryForm",onSubmit:this.handleSearchSubmit},r.a.createElement(wn.a,null,r.a.createElement(In.a,null,r.a.createElement(Nn.a,null,r.a.createElement(On.a,{addonType:"prepend"},r.a.createElement(gn.a,{type:"select",name:"filter",id:"filter",onChange:this.handleFilter},r.a.createElement("option",{key:"title",value:"title"},"Title"),r.a.createElement("option",{key:"scaffold",value:"scaffold"},"Scaffold"),r.a.createElement("option",{key:"content",value:"content"},"Content"),r.a.createElement("option",{key:"author",value:"author"},"Author"))),e,r.a.createElement(On.a,{addonType:"append"},r.a.createElement(jn.a,{style:{cursor:"pointer"},onClick:this.handleSearchSubmit},r.a.createElement("i",{className:"fa fa-search"}))))))),t?r.a.createElement(r.a.Fragment,null,r.a.createElement(En.a,{className:"ml-auto"},r.a.createElement(En.a.Link,{className:"white mr-auto d-none d-sm-block"}," ",a," "),r.a.createElement(E.a,{className:"ml-2 viewNavBar-logout-btn",href:"/",onClick:this.logout},"Logout"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(En.a,{className:"ml-auto"},r.a.createElement(En.a.Link,{onClick:this.signUp},"Signup"),r.a.createElement(En.a.Link,{href:"/"},"Login"))))}}]),a}(n.Component),kn={setViewId:Mt,setGlobalToken:jt,setSearchQuery:Vt,setSearchFilter:zt},Sn=Object(l.g)(Object(u.b)((function(e,t){return{communityId:e.globals.communityId,viewId:e.globals.viewId,isAuthenticated:e.globals.isAuthenticated,user:e.globals.author,views:e.globals.views,view:e.globals.view,viewNotes:e.notes.viewNotes,authors:e.users,scaffolds:e.scaffolds.items,supports:e.notes.supports,query:e.globals.searchQuery,filter:e.globals.searchFilter}}),kn)(An)),Cn=a(344),Mn=a(335),Tn=a(177),Zn=(a(257),function(e){var t=Object(u.d)((function(e){return e.globals.author})),a=Object(u.c)(),o=Object(n.useState)(0),i=Object(c.a)(o,2),s=i[0],l=i[1],d=function(t){e.onClose()},m=function(){var e=Object(O.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Array.from(t),l(0),n=[],a.forEach(function(){var e=Object(O.a)(N.a.mark((function e(t){var a,r,o,i;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.type.indexOf("image/")>=0)){e.next=12;break}return a=window.URL||window.webkitURL,e.next=4,p(a.createObjectURL(t));case 4:r=e.sent,o=r.naturalWidth||r.width,i=r.naturalHeight||r.height,t.width=o,t.height=i,n.push(h(t,"image")),e.next=13;break;case 12:t.type.startsWith("video")?n.push(h(t,"video")):n.push(h(t,"link"));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=6,Promise.all(n);case 6:d(),Ze({title:"Uploaded!",type:"success",message:"Attachments uploaded!"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){return new Promise((function(t,a){var n=document.createElement("img");n.onload=function(){return t(n)},n.onerror=a,n.src=e}))},h=function(){var a=Object(O.a)(N.a.mark((function a(n,r,o,i){var c,s,l,u,d;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,H(t.communityId,t._id);case 3:return c=a.sent,a.next=6,q(n,v);case 6:return s=a.sent,l=c.data,u=s.data,l.title=u.filename,l.status="active",u.version=l.data.version+1,l.data=u,l.tmpFilename=u.tmpFilename,a.next=16,Q(l,t.communityId,l._id);case 16:(d=a.sent).data.width=n.width,d.data.height=n.height,e.noteId?b(d,r):e.viewId&&f(d,o,i,r),a.next=25;break;case 22:a.prev=22,a.t0=a.catch(0),console.log(a.t0);case 25:return a.prev=25,a.finish(25);case 27:case"end":return a.stop()}}),a,null,[[0,22,25,27]])})));return function(e,t,n,r){return a.apply(this,arguments)}}(),b=function(){var t=Object(O.a)(N.a.mark((function t(n,r){var o,i,c;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B(e.noteId,n._id,"attach");case 2:a(gt(e.noteId,"from")),e.inlineAttach&&(o="".concat(C).concat(n.data.url),i=n.title,c="","image"===r?c='<img class="inline-attachment '+n._id+'" src="'+o+'" width="100px" alt="'+i+'" data-mce-src="'+o+'">':"video"===r?c='<video controls="controls" width="300" height="150"> <source src="'.concat(o,'" type="video/mp4" /></video>'):(c='<a class="inline-attachment '+n._id+'" href="'+o+'" target="_blank" download>',c+='<img src="'.concat(C,'/manual_assets/kf6images/03-toolbar-attachment.png" alt="')+i+'">'+i+"</a>"),e.onNewInlineAttach(c)),a(ft(e.noteId));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),f=function(){var t=Object(O.a)(N.a.mark((function t(a,n,r,o){var i,c,s,l,u,d;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n||200,c=r||200,s=200,l=200,u=!1,"image"===o&&(s=a.data.width,l=a.data.height,s>200&&(s=200),l=s*l/a.data.width,u=!0),t.next=8,B(e.viewId,a._id,"contains",{x:i,y:c,width:s,height:l});case 8:if(d=t.sent,!u){t.next=13;break}return d.data.showInPlace=!0,t.next=13,F(d._id,d);case 13:case"end":return t.stop()}}),t)})));return function(e,a,n,r){return t.apply(this,arguments)}}(),v=function(e){var t=Math.round(100*e.loaded/e.total);l(t)};return r.a.createElement(y.a,{show:e.attachPanel,onHide:d},r.a.createElement(y.a.Header,{closeButton:!0},r.a.createElement(y.a.Title,null,"Insert Attachment File")),r.a.createElement(y.a.Body,null,r.a.createElement(Cn.a.File,{id:"custom-file"},r.a.createElement(Cn.a.File.Input,{onChange:function(e){m(e.target.files)}})),r.a.createElement("div",{style:{width:"100%",color:"black"}},r.a.createElement(Tn.FileDrop,{onFrameDragEnter:function(e){return console.log("onFrameDragEnter",e)},onFrameDragLeave:function(e){return console.log("onFrameDragLeave",e)},onFrameDrop:function(e){return console.log("onFrameDrop",e)},onDragOver:function(e){return console.log("onDragOver",e)},onDragLeave:function(e){return console.log("onDragLeave",e)},onDrop:function(e,t){return m(e)}},"or drop some files here!")),r.a.createElement(Mn.a,{now:s})),r.a.createElement(y.a.Footer,null,r.a.createElement(E.a,{variant:"primary",onClick:d},"Close")))}),Ln=a(347),Gn=(a(258),{private:{r:!0,w:!0},protected:{r:!1,w:!0},public:{r:!1,w:!1}}),Dn=function(e,t){return xn(e,t)||Rn(e,t)},xn=function(e,t){return e.authors.includes(t._id)},Rn=function(e,t){return!!e._groupMembers&&e._groupMembers.includes(t._id)},Yn=function(e,t){return function(e,t,a){return!(!e||!t)&&("manager"===t.role||(!1===Gn[e.permission][a]||Dn(e,t)))}(e,t,"w")},Wn=(Object(A.b)("ADD_NOTE"),Object(A.c)({},{}),function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).noteList=[],n.handleSubmit=function(e){if(n.props.viewId===n.state.addView)n.setState({viewError:!0}),window.setTimeout((function(){n.setState({viewError:!1})}),1500);else{var t={x:1e3,y:1e3},a="".concat(M,"/links"),r={headers:{Authorization:"Bearer ".concat(n.state.token)}};n.props.checkedNotes.forEach((function(e){var a=n.props.viewLinks.filter((function(t){return t.to===e._id}))[0];t.x=Math.min(t.x,a.data.x),t.y=Math.min(t.y,a.data.y)})),n.props.checkedNotes.forEach((function(e){var o=e._id,i={from:n.state.addView,to:o,type:"contains",data:t};S.a.post(a,i,r).then((function(e){n.setState({visible:!0},(function(){window.setTimeout((function(){n.setState({visible:!1})}),1e3)}))}))}))}},n.handleRiseAbove=function(){var e=Object(O.a)(N.a.mark((function e(t){var a,r,o,i,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=n.props.checkedNotes.length)>0)){e.next=14;break}if(window.confirm("Are you sure to create riseabove using the selected "+a+" object(s)?")){e.next=5;break}return e.abrupt("return");case 5:return r=n.props.view,o=n.props.communityId,i=n.props.author._id,c=n.props.checkedNotes,e.next=11,n.props.createRiseAbove(r,o,i,c);case 11:n.props.fetchViewCommunityData(n.props.viewId),e.next=15;break;case 14:alert("Please select at least 1 note to create RiseAbove");case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.editNote=function(e,t){n.props.openContribution(e,t)},n.getRiseAboveNotes=function(e){return n.props.riseAboveViewNotes[e]?n.props.riseAboveViewNotes[e].map((function(e){return n.props.riseAboveNotes[e]})):null},n.openNote=function(e){n.props.openContribution(e,"read")},n.state={token:sessionStorage.getItem("token"),addView:n.props.viewId,communityId:sessionStorage.getItem("communityId"),visible:!1,viewError:!1},n.handleChange=n.handleChange.bind(Object(b.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(b.a)(n)),n.handleRiseAbove=n.handleRiseAbove.bind(Object(b.a)(n)),n.getRiseAboveNotes=n.getRiseAboveNotes.bind(Object(b.a)(n)),n.openNote=n.openNote.bind(Object(b.a)(n)),n.editNote=n.editNote.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"handleChange",value:function(e){e.persist();var t=e.target.value;this.setState({addView:t})}},{key:"render",value:function(){var e=this,t=new Intl.DateTimeFormat("default",Bt);return r.a.createElement(r.a.Fragment,null,r.a.createElement(bn.a,{className:"mrg-1-top"},r.a.createElement(pn.a,null,r.a.createElement(hn.a,{md:"6"},r.a.createElement(fn.a,null,r.a.createElement(gn.a,{type:"select",name:"viewId",onChange:this.handleChange},this.props.views.map((function(e,t){return r.a.createElement("option",{key:t,value:e._id}," ",e.title," ")}))))),r.a.createElement(hn.a,{md:"3"},r.a.createElement(E.a,{onClick:this.handleSubmit},"Add to View")),r.a.createElement(hn.a,{md:"3"},r.a.createElement(E.a,{onClick:this.handleRiseAbove},"create RiseAbove"))),r.a.createElement(pn.a,null,r.a.createElement(hn.a,null,r.a.createElement(Ln.a,{color:"danger",isOpen:this.state.viewError},"Please select a Different View."),r.a.createElement(Ln.a,{color:"info",isOpen:this.state.visible},"Notes added to View!")))),this.props.checkedNotes.map((function(a,n){var o,i,c,s=e.getRiseAboveNotes(a._id);if(s&&(o=r.a.createElement(pn.a,null,r.a.createElement(hn.a,{className:"pd-1-left"},r.a.createElement(pn.a,{className:"sz-1 primary-800 font-weight-bold"},"RiseAbove Notes"),s.map((function(t,a){return r.a.createElement(pn.a,{key:a},r.a.createElement(E.a,{variant:"light",className:"min-width-10 rounded-pill pd-05",onClick:function(){return e.openNote(t._id)}},t.title))}))))),e.props.query&&a.data.English){var l=a.data.English,u=l.indexOf(e.props.query);u>=0&&(i=l.substring(0,u)+"<span class='highlight'>"+l.substring(u,u+e.props.query.length)+"</span>"+l.substring(u+e.props.query.length))}else if(e.props.query&&a.data.body){var d=a.data.body,m=d.indexOf(e.props.query);m>=0&&(i=d.substring(0,m)+"<span class='highlight'>"+d.substring(m,m+e.props.query.length)+"</span>"+d.substring(m+e.props.query.length))}else i=a.data.English?a.data.English:a.data.body;for(;i&&i.includes('src="/attachments');)i=i.replace('src="/attachments','src="'+C+"/attachments");return c=!0===Yn(a,e.props.author)?r.a.createElement(E.a,{className:"float-right",variant:"outline-info",onClick:function(){return e.editNote(a._id,"write")}},"Edit Note"):r.a.createElement(E.a,{className:"float-right",variant:"outline-info",onClick:function(){return e.editNote(a._id,"read")}},"Read Note"),r.a.createElement(pn.a,{className:"min-height-2 mrg-05 border rounded mrg-1-bot pd-1",key:n},r.a.createElement(hn.a,null,r.a.createElement(pn.a,null,r.a.createElement(hn.a,{md:"10",className:"pd-1 primary-800 font-weight-bold"},a.title),r.a.createElement(hn.a,{md:"2"},r.a.createElement(E.a,{variant:"outline-secondary",className:"circular-border float-right",onClick:function(){return e.props.updateCheckedNotes({checked:!1,noteId:a._id})}},r.a.createElement("i",{className:"fas fa-times"})))),r.a.createElement(pn.a,null,r.a.createElement(hn.a,null,r.a.createElement("span",{className:"pd-1",dangerouslySetInnerHTML:{__html:i||(a.data.English?a.data.English:a.data.body)}}))),o,r.a.createElement(pn.a,null,r.a.createElement(hn.a,null,r.a.createElement(hn.a,null,r.a.createElement("div",{className:"primary-600 sz-075 pd-05 float-left"},e.props.users[a.authors[0]].firstName+" "+e.props.users[a.authors[0]].lastName," \xa0 ",t.format(new Date(a.created)))),r.a.createElement(hn.a,null,r.a.createElement(E.a,{className:"float-right mrg-1-left",variant:"outline-info",onClick:function(){return e.props.buildOn(a._id)}},"BuildOn")),r.a.createElement(hn.a,null,c)))))})))}}]),a}(n.Component)),Vn={openContribution:Et,updateCheckedNotes:at,createRiseAbove:function(e,t,a,n){return function(r){var o,i,c={},s=e._id;c.authors=a.split(","),c.communityId=t,c.permission=e.permission?e.permission:"public",c.status="active",c.title="riseabove:",c.type="View",c._groupMembers=e._groupMembers,console.log("OBJECT",c),_(t,c).then((function(a){o=a._id,console.log("Response",a);var r={};r.authors=c.authors,r.buildson=null,r.communityId=t,r.data={body:""},r.langInNote=[],r.permission="protected",r.status="unsaved",r.title="",r.type="Note",r._groupMembers=e._groupMembers,console.log("NOTE",r),_(t,r).then((function(e){console.log("noteResponse",e),i=e._id,e.data={body:"",riseabove:{viewId:"".concat(o)}},e.status="active",e.title="Riseabove",console.log("noteResponse noteResponse",e),Q(e,t,i).then((function(e){B(s,i,"contains",{x:200,y:200}).then((function(e){n.forEach((function(e){B(o,e._id,"contains",{x:20,y:20}).then((function(t){var a;(a=e._id,S.a.get("".concat(M,"/links/either/").concat(a))).then((function(e){var t=e.data.filter((function(e){return e.from.includes(s)}));U(t[0]._id)}))}))}))}))}))})).catch((function(e){console.log("error",e)}))})).catch((function(e){console.log("Error",e)}))}},fetchViewCommunityData:Xt},zn=Object(u.b)((function(e,t){var a=e.notes.viewNotes,n=e.users;return{viewId:e.globals.viewId,views:e.globals.views,view:e.globals.view,checkedNotes:e.notes.checkedNotes.map((function(t){return t in a?a[t]:e.notes.riseAboveNotes[t]})),viewLinks:e.notes.viewLinks,author:e.globals.author,communityId:e.globals.communityId,riseAboveViewNotes:e.notes.riseAboveViewNotes,riseAboveNotes:e.notes.riseAboveNotes,users:n}}),Vn)(Wn),Fn=a(175),Bn=a(69),Un=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).buildOn=function(e){n.props.newNote(n.props.view,n.props.communityId,n.props.authorObj._id,e)},n.editNote=function(e,t){n.props.openContribution(e,t)},n.setOpen=function(e){n.setState((function(e){return{open:!e.open}}))},n.checkNote=function(e,t){n.props.updateCheckedNotes({noteId:t,checked:e.target.checked})},n.updateNoteMobile=function(e,t){n.setState({isCheckedMobile:e.target.checked})},n.state={note:{},showNote:!1,open:!1,riseAboveData:{},isCheckedMobile:!1},n.checkNote=n.checkNote.bind(Object(b.a)(n)),n.editNote=n.editNote.bind(Object(b.a)(n)),n.buildOn=n.buildOn.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){for(var e,t,a=this,n=this.props.children&&0!==Object.keys(this.props.children).length,o=this.state.open?"fa-chevron-down":"fa-chevron-right",i=new Intl.DateTimeFormat("default",Bt),c=this.props.note.data.body;c.includes('src="/attachments');)c=c.replace('src="/attachments','src="'+C+"/attachments");return t=!0===Yn(this.props.note,this.props.authorObj)?r.a.createElement(E.a,{className:"float-right",variant:"outline-info",onClick:function(){return a.editNote(a.props.note._id,"write")}},"Edit Note"):r.a.createElement(E.a,{className:"float-right",variant:"outline-info",onClick:function(){return a.editNote(a.props.note._id,"read")}},"Read Note"),this.state.isCheckedMobile&&(e=r.a.createElement("div",null,r.a.createElement(pn.a,null,r.a.createElement(hn.a,null,r.a.createElement(pn.a,{dangerouslySetInnerHTML:{__html:c}}),r.a.createElement(pn.a,null,r.a.createElement(E.a,{className:"float-right mrg-1-left mrg-1-right",variant:"outline-info",onClick:function(){return a.buildOn(a.props.note._id)}},"BuildOn"),t))))),r.a.createElement(r.a.Fragment,null,r.a.createElement(Bn.Breakpoint,{medium:!0,up:!0},r.a.createElement("div",null,r.a.createElement(pn.a,null,r.a.createElement(hn.a,{className:"mr-auto rounded"},r.a.createElement(pn.a,{className:"pd-05"},r.a.createElement(hn.a,{md:"10",className:"primary-800 font-weight-bold"},n?r.a.createElement(E.a,{variant:"link",onClick:function(){return a.setOpen(!a.open)},"aria-controls":"example-collapse-text","aria-expanded":this.state.open},r.a.createElement("i",{className:"fa ".concat(o)})):null,this.props.note.title),r.a.createElement(hn.a,{md:"2"},r.a.createElement(bn.a,{className:"mrg-1-min pd-2-right"},r.a.createElement(fn.a,null,r.a.createElement(gn.a,{type:"checkbox",checked:this.props.isChecked,ref:this.props.note._id,onChange:function(e){return a.checkNote(e,a.props.note._id)}}))))),r.a.createElement(pn.a,{className:"primary-600 sz-075 pd-05"},r.a.createElement(hn.a,null,r.a.createElement("span",null," ",this.props.author," "),"\xa0 ",i.format(new Date(this.props.note.created))),r.a.createElement(hn.a,{md:"2"})),this.props.children?r.a.createElement(Fn.a,{in:this.state.open},r.a.createElement(pn.a,null,r.a.createElement(hn.a,{md:"1"}),r.a.createElement(hn.a,{md:"11"},r.a.createElement(Hn,{hierarchy:this.props.children})))):null)))),r.a.createElement(Bn.Breakpoint,{small:!0,down:!0},r.a.createElement("div",null,r.a.createElement(pn.a,null,r.a.createElement(hn.a,{className:"mr-auto rounded"},r.a.createElement(pn.a,{className:"pd-05"},r.a.createElement(hn.a,{md:"10",className:"primary-800 font-weight-bold"},n?r.a.createElement(E.a,{variant:"link",onClick:function(){return a.setOpen(!a.open)},"aria-controls":"example-collapse-text","aria-expanded":this.state.open},r.a.createElement("i",{className:"fa ".concat(o)})):null,this.props.note.title),r.a.createElement(hn.a,{md:"2"},r.a.createElement(bn.a,{className:"mrg-1-min pd-2-right"},r.a.createElement(fn.a,null,r.a.createElement(gn.a,{type:"checkbox",checked:this.state.isCheckedMobile,ref:this.props.note._id,onChange:function(e){return a.updateNoteMobile(e,a.props.note)}}))))),r.a.createElement(pn.a,{className:"primary-600 sz-075 pd-05"},r.a.createElement(hn.a,null,r.a.createElement("span",null," ",this.props.author," "),"\xa0 ",i.format(new Date(this.props.note.created))),r.a.createElement(hn.a,{md:"2"})),this.props.children?r.a.createElement(Fn.a,{in:this.state.open},r.a.createElement(pn.a,null,r.a.createElement(hn.a,{md:"1"}),r.a.createElement(hn.a,{md:"11"},r.a.createElement(Hn,{hierarchy:this.props.children})))):null)),e)))}}]),a}(n.Component),Pn={updateCheckedNotes:at,openContribution:Et,newNote:ht},Jn=Object(u.b)((function(e,t){var a=e.users[t.note.authors[0]];return{author:a&&"".concat(a.firstName," ").concat(a.lastName)||"NA",isChecked:e.notes.checkedNotes.includes(t.note._id),riseAboveViewNotes:e.notes.riseAboveViewNotes,riseAboveNotes:e.notes.riseAboveNotes,view:e.globals.view,communityId:e.globals.communityId,authorObj:e.globals.author}}),Pn)(Un),Qn=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).getNotes=n.getNotes.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){}},{key:"getNotes",value:function(){var e=[];for(var t in this.props.hierarchy)t in this.props.notes&&e.push(this.props.notes[t]);return e.sort((function(e,t){return new Date(t.created)-new Date(e.created)}))}},{key:"render",value:function(){var e=this,t=this.props.noteLinks||this.getNotes();return r.a.createElement(r.a.Fragment,null,t.map((function(t,a){var n=e.props.hierarchy&&e.props.hierarchy[t._id].children;return r.a.createElement("div",{key:a,className:"shadow p-1 mb-1 rounded"},r.a.createElement(Jn,{note:t,children:n,notes:e.props.notes}))})))}}]),a}(n.Component),Hn=Object(u.b)((function(e,t){return{notes:e.notes.viewNotes,riseAboveNotes:e.notes.riseAboveNotes}}),{})(Qn),_n=(a(145),a(266),function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).buildOn=function(e){n.props.newNote(n.props.view,n.props.communityId,n.props.author._id,e)},n.state={showView:!1,showRiseAbove:!1,filteredData:[]},n.getBuildOnHierarchy=n.getBuildOnHierarchy.bind(Object(b.a)(n)),n.onCloseDialog=n.onCloseDialog.bind(Object(b.a)(n)),n.onConfirmDrawDialog=n.onConfirmDrawDialog.bind(Object(b.a)(n)),n.filterResults=n.filterResults.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"getBuildOnHierarchy",value:function(){var e={};for(var t in this.props.viewNotes)e[t]={children:{}};this.props.buildsOn.forEach((function(t){var a=t.to,n=t.from;a in e||(e[a]={children:{}}),n in e?e[n].parent=a:e[n]={parent:a,children:{}},e[a].children[n]=e[n]}));for(var a={},n=0,r=Object.entries(e);n<r.length;n++){var o=Object(c.a)(r[n],2),i=o[0],s=o[1];"parent"in s||(a[i]=s)}return a}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e,t){this.props.searchQuery===e.searchQuery&&this.props.searchFilter===e.searchFilter||this.filterResults(this.props.searchQuery)}},{key:"newRiseAbove",value:function(){this.setState({showView:!1,showModel:!0})}},{key:"onConfirmDrawDialog",value:function(e){this.props.addDrawing(e),this.props.closeDrawDialog()}},{key:"onCloseDialog",value:function(e){this.props.removeNote(e.noteId),this.props.closeDialog(e.id)}},{key:"filterResults",value:function(e){var t=e||this.props.searchQuery,a=[],n=Object.values(this.props.viewNotes);if(t||this.props.searchFilter)switch(this.props.searchFilter){case"title":a=n.filter((function(e){return e.title.toLowerCase().includes(t.toLowerCase())}));break;case"content":a=n.filter((function(e){return e.data&&e.data.English?e.data.English.includes(t):!(!e.data||!e.data.body)&&e.data.body.includes(t)}));break;case"author":var r=[];Object.values(this.props.authors).forEach((function(e){"".concat(e.firstName," ").concat(e.lastName).toLowerCase().includes(t.toLowerCase())&&r.push(e._id)})),a=n.filter((function(e){return e.authors.some((function(e){return r.includes(e)}))}));break;case"scaffold":var o=this.props.supports.filter((function(e){return e.from===t})).map((function(e){return e.to}));a=n.filter((function(e){return o.includes(e._id)}))}this.setState({filteredData:a})}},{key:"render",value:function(){var e=this.getBuildOnHierarchy();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Bn.Breakpoint,{medium:!0,up:!0},r.a.createElement("div",{className:"row min-width"},r.a.createElement(hn.a,{md:"5",sm:"12",className:"mrg-1-top pd-2-right v-scroll"},""===this.props.searchQuery?r.a.createElement(Hn,{hierarchy:e}):r.a.createElement(Hn,{noteLinks:this.state.filteredData})),this.props.checkedNotes.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(hn.a,{md:"5",sm:"12",className:"mrg-1-top v-scroll"},r.a.createElement(zn,{query:this.props.searchQuery,buildOn:this.buildOn}))):null)),r.a.createElement(Bn.Breakpoint,{small:!0,down:!0},r.a.createElement("div",{className:"row min-width"},r.a.createElement(hn.a,{md:"5",sm:"12",className:"mrg-05-top pd-2-right primary-bg-50"},r.a.createElement(bn.a,{className:"mrg-1-bot"},r.a.createElement(pn.a,null,r.a.createElement(hn.a,null,r.a.createElement(Nn.a,null,r.a.createElement(On.a,{addonType:"prepend"},r.a.createElement(gn.a,{type:"select",name:"filter",id:"filter",onChange:this.handleFilter},r.a.createElement("option",{key:"title",value:"title"},"Search By Title"),r.a.createElement("option",{key:"scaffold",value:"scaffold"},"Search By Scaffold"),r.a.createElement("option",{key:"content",value:"content"},"Search By Content"),r.a.createElement("option",{key:"author",value:"author"},"Search By Author"))),r.a.createElement(gn.a,{className:"form-control",value:this.props.searchQuery,placeholder:"Search Your Note",onChange:this.handleInputChange}),r.a.createElement(On.a,{addonType:"append"},r.a.createElement(jn.a,null,r.a.createElement("i",{className:"fa fa-search"}))),r.a.createElement(On.a,{addonType:"append"},r.a.createElement(jn.a,{style:{cursor:"pointer"},onClick:this.clearSearch},r.a.createElement("i",{className:"fa fa-refresh"}))))))),""===this.props.searchQuery?r.a.createElement(Hn,{hierarchy:e}):r.a.createElement(Hn,{noteLinks:this.state.filteredData})))))}}]),a}(n.Component)),Xn={newNote:ht},Kn=Object(u.b)((function(e,t){return{communityId:e.globals.communityId,viewId:e.globals.viewId,view:e.globals.view,author:e.globals.author,authors:e.users,viewNotes:e.notes.viewNotes,checkedNotes:e.notes.checkedNotes,buildsOn:e.notes.buildsOn,supports:e.notes.supports,searchQuery:e.globals.searchQuery,searchFilter:e.globals.searchFilter}}),Xn)(_n),qn=(a(267),a(184)),$n=a(348),er=(a(271),{zIndex:999,display:"flex"}),tr=function(e){return r.a.createElement(qn.a,{id:"contrib-dialog-".concat(e.id),className:"contrib-dialog",style:Object(j.a)(Object(j.a)({},er),e.style),default:{x:400+window.pageXOffset,y:50+window.pageYOffset,width:920,height:500},onClick:e.onClick,onMouseDown:e.onMouseDown,dragHandleClassName:"dlg-card-header",bounds:"window"},r.a.createElement($n.a,{className:"dlg-card"},r.a.createElement($n.a.Header,{className:"dlg-card-header py-0",style:{alignItems:"center",display:"flex"}},r.a.createElement("span",null,e.title),r.a.createElement(E.a,{onClick:e.onClose,variant:"link",size:"sm",style:{marginLeft:"auto"}},"x")),r.a.createElement($n.a.Body,{className:"dlg-card-body",style:{position:"relative"}},e.children),r.a.createElement($n.a.Footer,{className:"dlg-card-footer py-0"},r.a.createElement(E.a,{size:"sm",className:"dlg-button",onClick:e.onConfirm,disabled:!e.editable},"Contribute"),e.buildon?r.a.createElement(E.a,{size:"sm",className:"dlg-button",onClick:e.onBuildOnClick},"Build-on"):"")))},ar=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).onConfirm=n.onConfirm.bind(Object(b.a)(n)),n.onLoad=n.onLoad.bind(Object(b.a)(n)),n.getIframeRef=n.getIframeRef.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"onConfirm",value:function(){var e=this.iframe_ref.contentWindow,t=e.svgCanvas.current_drawing_.all_layers[0],a=e.svgCanvas.current_drawing_.all_layers[1],n=a[1].getBBox().width,r=a[1].getBBox().height;if(0!==n&&0!==r){e.svgCanvas.current_drawing_.svgElem_.setAttribute("width",n),e.svgCanvas.current_drawing_.svgElem_.setAttribute("height",r),t[1].childNodes[1].setAttribute("width",n),t[1].childNodes[1].setAttribute("height",r),e.svgCanvas.selectAllInCurrentLayer(),e.svgCanvas.groupSelectedElements(),e.svgCanvas.alignSelectedElements("l","page"),e.svgCanvas.alignSelectedElements("t","page"),e.svgCanvas.ungroupSelectedElement(),e.svgCanvas.clearSelection(),e.svgCanvas.current_drawing_.svgElem_.setAttribute("padding","2em"),e.svgCanvas.setResolution("fit",100);var o=e.svgCanvas.getSvgString(),i=document.createElement("canvas");i.width=n+4,i.height=r+4;var c=i.getContext("2d"),s=document.createElement("img");s.setAttribute("src","data:image/svg+xml;base64,"+btoa(o)),s.onload=function(){c.drawImage(s,0,0);var e=i.toDataURL("image/png"),t="<img alt='"+o+"' src='"+e+"'/>";this.props.onConfirm(t)}.bind(this)}else this.props.onClose()}},{key:"getIframeRef",value:function(e){e&&(this.iframe_ref=e)}},{key:"onLoad",value:function(e){var t=this.props.svg;t&&e.target.contentWindow.svgCanvas.setSvgString(t)}},{key:"render",value:function(){return r.a.createElement(tr,{title:"DrawTool",style:{zIndex:3e3},onClose:this.props.onClose,onConfirm:this.onConfirm,editable:!0,confirmButton:"Add"},r.a.createElement("iframe",{onLoad:this.onLoad,title:"DrawingTool",src:"/drawing-tool/svg/index.html",ref:this.getIframeRef,width:"100%",height:"100%"}))}}]),a}(r.a.Component),nr=a(338),rr=a(339),or=a(182),ir=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(or.a,{value:this.props.value,apiKey:"arg05azt52qbujpnf831szuswhmyhoqute0q48btk5bqigoj",init:{setup:function(t){e.props.onEditorSetup(t)},content_css:"/editor.css",height:300,menubar:!1,statusbar:!1,media_live_embeds:!0,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code wordcount media help"],external_plugins:{drawingTool:"/drawing-tool/plugin.min.js"},toolbar:"styleselect | bold italic underline strikethrough | forecolor backcolor bullist numlist | link code | ltr rtl | charmap | drawingTool media"},onEditorChange:this.props.onEditorChange}))}}]),a}(r.a.Component),cr=a(337),sr=function(e,t){var a="";return a+=" ",a+=t?'<span class="kfSupportStartMark kfTemplateStartMark"> &nbsp; </span>':'<span class="kfSupportStartMark"> &nbsp; </span>',a+=" ",a=t?a+'<span class="kfSupportStartLabel kfTemplateStartLabel">'+e+"</span>":a+'<span class="kfSupportStartLabel">'+e+"</span>",a+=" "},lr=function(e){var t="";return t+=" ",t+=e?'<span class="kfSupportEndMark kfTemplateEndMark"> &nbsp; </span>':'<span class="kfSupportEndMark"> &nbsp; </span>',t+=" "},ur=function(e,t,a,n){return function(r){var o=(new Date).getTime().toString(),i='<span id="'+o+'"></span>'+r;n&&(i=" -&nbsp;"+i+"&nbsp;- ");var c="";return c+="<br>",c+="&nbsp;&nbsp;",c=a?c+'<span id="'+e+'" class="KFSupportStart KFTemplateStart mceNonEditable">':c+'<span id="'+e+'" class="KFSupportStart mceNonEditable">',c+=sr(t,a),c+="</span>",a&&(c+='<p class="kfTemplateContent">',c+="<br><br><br><br>"),c+=i,a&&(c+="</p>"),c=a?c+'<span id="'+e+'" class="KFSupportEnd KFTemplateEnd mceNonEditable">':c+'<span id="'+e+'" class="KFSupportEnd mceNonEditable">',c+=lr(a),c+="</span>",c+="&nbsp;&nbsp;",{tag:c+="<br>",supportContentId:o}}},dr=(a(272),function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).scaffoldSelected=function(e,t){if(n.props.returnSupport)n.props.onScaffoldSelected(t);else{var a=n.props.items[e],r=!0,o="",i=a.data&&a.data.isTemplate;i&&(r=!1,o="<br><br>");var c=t._to.title,s=ur(t.to,c,i,r);n.props.onScaffoldSelected(s,o)}},n.state={selected:e.initVal},n.onSelectChange=n.onSelectChange.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){if(!this.props.fetched){var e=this.props,t=e.communityId,a=e.contextId;this.props.fetchScaffolds(t,a)}}},{key:"onSelectChange",value:function(e){this.setState({selected:e.target.value})}},{key:"render",value:function(){var e=this,t=this.props.items,a=t.map((function(e,t){return r.a.createElement("option",{key:t,value:t},e.title)})),n="";return t.length&&t[this.state.selected].supports&&(n=t[this.state.selected].supports.map((function(t,a){return r.a.createElement(hn.a,{className:"mt-1 p-0",key:a,md:12},r.a.createElement("div",{className:"KFSupportButton",size:"sm",onClick:function(){return e.scaffoldSelected(e.state.selected,t)}},t._to.title))}))),r.a.createElement(cr.a,null,r.a.createElement(pn.a,null,r.a.createElement(hn.a,{className:"p-0"},r.a.createElement(Cn.a,null,r.a.createElement(Cn.a.Group,{className:"mb-1",controlId:"exampleForm.ControlSelect2"},r.a.createElement(Cn.a.Control,{className:"scaffold-select-input",size:"sm",as:"select",onChange:this.onSelectChange},a))))),r.a.createElement(pn.a,null,n))}}]),a}(r.a.Component)),mr={fetchScaffolds:be},pr=Object(u.b)((function(e,t){return Object(j.a)({communityId:e.globals.communityId,contextId:e.globals.contextId},e.scaffolds)}),mr)(dr),hr=(a(273),function(e){var t=Object(u.d)((function(t){var a=[];return e.attachments.forEach((function(e){var n=t.notes.attachments[e];n&&a.push(n)})),a})),a=Object(n.useState)([]),o=Object(c.a)(a,2),i=o[0],s=o[1];return r.a.createElement(hn.a,null,r.a.createElement(pn.a,null,r.a.createElement(hn.a,null,r.a.createElement("span",{className:""},"Insert image or file: "),r.a.createElement(E.a,{className:"attach-button mx-2",size:"sm",variant:"outline-dark",onClick:function(){return e.onNewAttachClick(!0)}},"Inline"),r.a.createElement(E.a,{className:"attach-button mx-2",size:"sm",variant:"outline-dark",onClick:function(){return e.onNewAttachClick(!1)}},"As an attachment"),r.a.createElement(E.a,{className:"attach-button mx-2",size:"sm",variant:"outline-dark",onClick:function(){var t=Array.from(document.getElementById("attachbox-".concat(e.noteId)).getElementsByClassName("selected"));if(0!==t.length){var a="";t.forEach((function(e){var t=e.tagName,n=e.naturalWidth;if(n>200&&(n=200),"IMG"===t){var r=e.getAttribute("src"),o="";e.classList.forEach((function(e){24===e.length&&(o+=e+" ")})),a+='<img class="inline-attachment '+o+'" src="'+r+'" width="'+n+'px" alt="" data-mce-src="'+r+'">'}})),e.onNewInlineAttach(a)}},disabled:0===i.length},"Insert"))),r.a.createElement(pn.a,{id:"attachbox-".concat(e.noteId),className:"attachment-box"},t.map((function(t){return r.a.createElement("div",{key:t._id,className:"attachment-inner-box col-auto"},r.a.createElement("div",{className:"attachment-thumbnail"},0===t.data.type.indexOf("image/")?r.a.createElement("img",{className:t._id+" "+(i.includes(t._id)?"selected":""),src:"".concat(C).concat(t.data.url),onClick:function(e){return a=t._id,void(i.includes(a)?s((function(e){return e.filter((function(e){return e!==a}))})):s((function(e){return[].concat(Object(fe.a)(e),[a])})));var a},alt:"attachment"}):r.a.createElement("a",{href:"".concat(C).concat(t.data.downloadUrl||t.data.url),title:t.title,download:!0},r.a.createElement("img",{className:t._id,src:"".concat(C,"/manual_assets/kf6images/03-toolbar-attachment.png"),title:"{attachment.title}",alt:"attachment"}))),r.a.createElement("div",{className:"attachment-buttons"},r.a.createElement("p",null,r.a.createElement("a",{href:"".concat(C).concat(t.data.downloadUrl||t.data.url),title:t.title,download:!0},r.a.createElement("img",{className:"download-attachment",src:"".concat(C,"/manual_assets/kf6images/cloud-download-2x.png"),alt:"Download",height:"15px"}))),r.a.createElement("p",null,r.a.createElement("button",{className:"delete-attachment",onClick:function(){return a=t._id,void(window.confirm("Are you sure to delete the attachment?")&&e.onAttachDelete(a));var a}},r.a.createElement("img",{src:"".concat(C,"/manual_assets/kf6images/trash.png"),alt:"Delete attachment",width:"10px",height:"15px"})))),r.a.createElement("div",{className:"attachment-info"},r.a.createElement("p",{title:"{attachment.title}"},t.title),r.a.createElement("p",null,t.data.size)))}))))}),br=(a(274),function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={inlineAttach:!0,attachPanel:!1},n.onScaffoldSelected=n.onScaffoldSelected.bind(Object(b.a)(n)),n.onNewAttachmentClick=n.onNewAttachmentClick.bind(Object(b.a)(n)),n.closeAttachPanel=n.closeAttachPanel.bind(Object(b.a)(n)),n.onNewInlineAttach=n.onNewInlineAttach.bind(Object(b.a)(n)),n.onAttachDelete=n.onAttachDelete.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"onScaffoldSelected",value:function(e,t){this.props.onChange({scaffold:{tagCreator:e,initialText:t}})}},{key:"onNewAttachmentClick",value:function(e){this.setState({inlineAttach:e,attachPanel:!0})}},{key:"onNewInlineAttach",value:function(e){this.props.onChange({attach:e})}},{key:"closeAttachPanel",value:function(){this.setState({attachPanel:!1})}},{key:"onAttachDelete",value:function(e){this.props.onChange({deleteAttach:e})}},{key:"render",value:function(){var e=this.props,t=e.note,a=e.onChange,n=e.onEditorSetup;return r.a.createElement(cr.a,{className:"write-container p-0"},r.a.createElement(pn.a,null,r.a.createElement(hn.a,null,r.a.createElement(Cn.a.Group,{className:"write-title-form",controlId:"note-title"},r.a.createElement(Cn.a.Control,{type:"text",className:"write-tab-input",size:"sm",placeholder:"Enter title",value:t.title,onChange:function(e){a({title:e.target.value})}})))),r.a.createElement(pn.a,null,r.a.createElement(hn.a,{md:2,className:"pr-0"},r.a.createElement(pr,{initVal:0,onScaffoldSelected:this.onScaffoldSelected})),r.a.createElement(hn.a,{md:10},r.a.createElement(ir,{value:t.data.body,onEditorSetup:n,onEditorChange:function(e,t){return a({data:{body:e}})}}),r.a.createElement("div",{className:"wordcount-bar text-right"},t.wordCount," words"))),r.a.createElement(pn.a,{className:"mt-2"},r.a.createElement(Zn,Object.assign({noteId:t._id,onClose:this.closeAttachPanel,onNewInlineAttach:this.onNewInlineAttach},this.state)),r.a.createElement(hr,{noteId:t._id,attachments:t.attachments,onNewAttachClick:this.onNewAttachmentClick,onNewInlineAttach:this.onNewInlineAttach,onAttachDelete:this.onAttachDelete})))}}]),a}(r.a.Component)),fr=function(e){var t=e.records.reduce((function(e,t){return"read"===t.type?e[0].push(t):e[1].push(t),e}),[[],[]]),a=Object(c.a)(t,2),n=a[0],o=a[1];return r.a.createElement("div",null,r.a.createElement("h5",null,"Edit logs:"),r.a.createElement("p",{className:"mb-0"},o.length," edits"),r.a.createElement("ul",null,o.map((function(e){return r.a.createElement("li",{key:e._id},e.date,": ",e.author)}))),r.a.createElement("h5",null,"Read logs:"),r.a.createElement("p",{className:"mb-0"},n.length," reads"),r.a.createElement("ul",null,n.map((function(e){return r.a.createElement("li",{key:e._id},e.date,": ",e.author)}))))},vr=function(e){var t=function(t){e.onChange({permission:t.target.value})};return r.a.createElement("div",{className:"m-2"},r.a.createElement("div",null,r.a.createElement("label",{className:"mt-1 font-weight-bold"},"Permission:"),r.a.createElement("div",null,r.a.createElement("table",{className:"KFPermission table table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\xa0"),r.a.createElement("th",null,"Authors"),r.a.createElement("th",null,"Group Members"),r.a.createElement("th",null,"Others"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("form",{action:""},r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"radio",name:"permission",value:"private",id:"contrib-permission1",onChange:t,checked:"private"===e.contribution.permission}),r.a.createElement("label",{className:"form-check-label font-weight-normal",htmlFor:"contrib-permission1"},"\xa0private")))),r.a.createElement("td",null,"rw"),r.a.createElement("td",null,"rw"),r.a.createElement("td",null,"-")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("form",{action:""},r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"radio",value:"protected",id:"contrib-permission2",name:"permission",onChange:t,checked:"protected"===e.contribution.permission}),r.a.createElement("label",{className:"form-check-label font-weight-normal",htmlFor:"contrib-permission2"},"\xa0protected")))),r.a.createElement("td",null,"rw"),r.a.createElement("td",null,"rw"),r.a.createElement("td",null,"r")),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("form",{action:""},r.a.createElement("div",{className:"form-check form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"radio",value:"public",id:"contrib-permission3",name:"public",onChange:t,checked:"public"===e.contribution.permission}),r.a.createElement("label",{className:"form-check-label font-weight-normal",htmlFor:"contrib-permission3"},"\xa0public")))),r.a.createElement("td",null,"rw"),r.a.createElement("td",null,"rw"),r.a.createElement("td",null,"rw"))))),r.a.createElement("label",{className:"mt-1 font-weight-bold"},"Status:"),r.a.createElement("div",{className:"ml-2"},e.contribution.status),r.a.createElement("label",{className:"mt-2 font-weight-bold"},"Template:"),r.a.createElement("form",{className:"ml-2",action:""},r.a.createElement("div",{className:"form-check  form-check-inline"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"c-isTemplate",checked:e.contribution.data.isTemplate,onChange:function(t){e.onChange({data:{isTemplate:t.target.checked}})}}),r.a.createElement("label",{className:"form-check-label font-weight-normal",htmlFor:"c-isTemplate"},"isTemplate")))))},gr=function(e){var t=Object.entries(e.authors).map((function(e){return{value:e[1]._id,label:"".concat(e[1].firstName," ").concat(e[1].lastName)}})),a=Object(n.useState)(null),o=Object(c.a)(a,2),i=o[0],s=o[1];return r.a.createElement("div",null,r.a.createElement(pn.a,null,r.a.createElement(hn.a,null,r.a.createElement(sa.a,{options:t,onChange:function(e){s(e)},isClearable:!0})),r.a.createElement(hn.a,{md:"auto"},r.a.createElement(E.a,{disabled:!i,onClick:function(){return e.onAuthorSelected(i)}},"Add"))),r.a.createElement("p",null,t.length," possible author(s) in this community."))},yr=function(e){var t=Object(u.d)((function(t){return e.contrib.authors.map((function(e){return t.users[e]}))})),a=Object(u.d)((function(e){return e.users})),n=Object(u.d)((function(e){return e.globals.community.groups})),o=n.map((function(e){return{value:e._id,label:e.title}})),i=n.find((function(t){return t._id===e.contrib.group})),c=i?{value:i._id,label:i.title}:{value:null,label:"No Group selected"};return r.a.createElement("div",{className:"authorTab mt-2",style:{height:"100%"}},r.a.createElement(pn.a,null,r.a.createElement(hn.a,null,r.a.createElement("h5",null,"Authors:"),r.a.createElement("ul",null,t.map((function(t,a){return r.a.createElement("li",{key:t._id,style:{cursor:"move"}},t.firstName," ",t.lastName,r.a.createElement(E.a,{size:"sm",className:"ml-1",onClick:function(){return function(t,a){0!==a?a>=0&&e.onChange({authors:e.contrib.authors.filter((function(e){return e!==t._id}))}):Ze({title:"Error!",type:"danger",message:"cannot remove the Primary Author"})}(t,a)}},"x"))})))),r.a.createElement(hn.a,null,r.a.createElement("div",null,r.a.createElement("h5",null,"Add author:"),r.a.createElement(gr,{authors:a,onAuthorSelected:function(t){e.contrib.authors.includes(t.value)||e.onChange({authors:[].concat(Object(fe.a)(e.contrib.authors),[t.value])})}})))),r.a.createElement(pn.a,null,r.a.createElement(hn.a,null,r.a.createElement("h5",null,"Group:"),r.a.createElement("div",null,r.a.createElement("form",{method:"",id:"",action:""},r.a.createElement(sa.a,{value:c,options:o,onChange:function(t){e.onChange({group:t&&t.value})},isClearable:!0}))))))},Er=a(70),wr=a.n(Er),Ir=(a(275),a(277),a(279),a(281),a(283),a(285),a(287),function(e,t,a,n){Annotator.Plugin.KFPlugin=function(){return{pluginInit:function(){this.annotator.subscribe("annotationCreated",(function(e){t&&t.annotationCreated(e)})).subscribe("annotationUpdated",(function(e){t&&t.annotationUpdated(e)})).subscribe("annotationDeleted",(function(e){t&&t.annotationDeleted(e)})).subscribe("annotationEditorShown",(function(e,a){t&&t.displayEditor(e,a)})).subscribe("annotationViewerShown",(function(e,a){t&&t.displayViewer(e,a)})).subscribe("annotationEditorHidden",(function(e,a){t&&t.editorHidden(e,a)})),t&&t.annotatorInitialized(this.annotator)}}};var r={}.hasOwnProperty;Annotator.Plugin.RichText=function(e){!function(e,t){for(var a in t)r.call(t,a)&&(e[a]=t[a]);function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype}(a,Annotator.Plugin);var t="";function a(e,t){return a.__super__.constructor.apply(this,arguments)}return a.prototype.options={tinymce:{selector:"li.annotator-item textarea",content_css:"/editor.css",height:"170px",statusbar:!1,plugins:"media image insertdatetime link code",menubar:!1,toolbar_items_size:"small",extended_valid_elements:"iframe[src|frameborder|style|scrolling|class|width|height|name|align|id]",toolbar:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | code | mysidebar"}},a.prototype.pluginInit=function(){var e=this.annotator,t=this.annotator.editor;Annotator.supported()&&(e.editor.addField({type:"input",load:this.updateEditor}),e.viewer.addField({load:this.updateViewer}),e.subscribe("annotationEditorShown",(function(){})),e.subscribe("annotationEditorHidden",(function(){})),this.options.tinymce.setup=function(e){a.prototype.mceditor=e,e.on("change",(function(e){$(t.element).find("textarea")[0].value=wr.a.activeEditor.getContent()})),e.on("Init",(function(e){$(".mce-container").css("z-index","3090000000000000000")})),e.on("remove",(function(){i.a.unmountComponentAtNode(a.prototype.scaffoldSidebar)})),e.ui.registry.addSidebar("mysidebar",{tooltip:"View Scaffold",icon:"settings",onSetup:function(e){var t=e.element();document.sidebar=t,t.style.width="200px",t.style.overflow="scroll",t.style.fontSize="0.7rem",i.a.render(n,t,null),a.prototype.scaffoldSidebar=t},onShow:function(e){},onHide:function(e){}})},wr.a.init(this.options.tinymce))},a.prototype.updateEditor=function(e,a){var n="undefined"!==typeof a.text?a.text:"",r=wr.a.editors.length;t=wr.a.editors[r-2].id,wr.a.get(t).setContent(n),$(e).remove()},a.prototype.updateViewer=function(e,t){var a=$(e.parentNode).find("div:first-of-type")[0];a.innerHTML=t.text,$(a).addClass("richText-annotation"),$(e).remove()},a}(),e.annotator("addPlugin","KFPlugin"),e.annotator("addPlugin","Tags"),e.annotator("addPlugin","RichText"),a&&e.annotator("addPlugin","Permissions",{user:a,permissions:{read:[a],update:[a],delete:[a],admin:[a]},showEditPermissionsCheckbox:!1})}),Nr=function(e){var t=0===e.permissions.read.length;e.permission=t?"protected":"private";var a=e.ranges[0];return 0===a.start.indexOf("/div[1]")&&(a.start=a.start.substring(7)),0===a.end.indexOf("/div[1]")&&(a.end=a.end.substring(7)),e},Or=(a(289),Object(A.a)({reducer:{dialogs:Ne,notes:mt,scaffolds:he,globals:Pt,users:ue},devTools:!0})),jr=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).contentRef=r.a.createRef(),n.annotatorInitialized=n.annotatorInitialized.bind(Object(b.a)(n)),n.annotationCreated=n.annotationCreated.bind(Object(b.a)(n)),n.annotationUpdated=n.annotationUpdated.bind(Object(b.a)(n)),n.annotator=null,n.displayEditor=n.displayEditor.bind(Object(b.a)(n)),n.displayViewer=n.displayViewer.bind(Object(b.a)(n)),n.fixPopupLocation=n.fixPopupLocation.bind(Object(b.a)(n)),n.editorHidden=n.editorHidden.bind(Object(b.a)(n)),n.loadAnnotations=n.loadAnnotations.bind(Object(b.a)(n)),n.onScaffoldSelected=n.onScaffoldSelected.bind(Object(b.a)(n)),n.dlg=null,n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=$(this.contentRef.current);e.annotator(),this.scaffoldElem=r.a.createElement(u.a,{store:Or},r.a.createElement(pr,{initVal:0,onScaffoldSelected:this.onScaffoldSelected})),Ir(e,{annotationCreated:this.annotationCreated,annotationUpdated:this.annotationUpdated,annotationDeleted:this.props.onDelete,displayEditor:this.displayEditor,displayViewer:this.displayViewer,annotatorInitialized:this.annotatorInitialized,editorHidden:this.editorHidden},this.props.author.userName,this.scaffoldElem),this.dlg=$("#contrib-dialog-".concat(this.props.containerId))}},{key:"componentDidUpdate",value:function(e,t){1===this.props.annotsFetched&&this.props.annotsFetched!==e.annotsFetched&&this.loadAnnotations()}},{key:"componentWillUnmount",value:function(){this.annotator&&this.annotator.plugins.RichText.mceditor&&this.annotator.plugins.RichText.mceditor.remove()}},{key:"editorHidden",value:function(e,t){$(e.element.find(".annotator-controls")).off()}},{key:"loadAnnotations",value:function(){var e=Object.values(this.props.annots).map((function(e){var t=Object.assign({},e.data);return t.ranges=Object(fe.a)(t.ranges),t.highlights=Object(fe.a)(t.highlights),function(e){var t=Object.assign({},e.ranges[0]);t.start="/div[1]"+t.start,t.end="/div[1]"+t.end,e.ranges[0]=t}(t),t}));this.annotator.loadAnnotations(e),this.props.onAnnotsLoaded()}},{key:"annotatorInitialized",value:function(e){this.annotator=e,this.loadAnnotations();var t=$("div.annotator-adder");t.attr("title","Annotation"),t.addClass("tooltip1"),t.append('<span class="tooltiptext">Annotation</span>'),document.annotator=this.annotator;var a=e.adder.get(0);this.observer=new MutationObserver(function(t){var n,r=Object(Kt.a)(t);try{for(r.s();!(n=r.n()).done;){if("attributes"===n.value.type&&"none"!==a.style.display)return this.fixPopupLocation(e.adder),void this.observer.takeRecords()}}catch(o){r.e(o)}finally{r.f()}}.bind(this)),this.observer.observe(a,{attributes:!0,attributeOldValue:!0})}},{key:"annotationCreated",value:function(e){this.props.onCreate(Nr(e))}},{key:"annotationUpdated",value:function(e){this.props.onUpdate(Nr(e))}},{key:"displayEditor",value:function(e,t){e.element.hasClass(e.classes.invert.y)||e.element.addClass(e.classes.invert.y)}},{key:"fixPopupLocation",value:function(e){var t=this.dlg.offset(),a=e.offset();e.offset({top:a.top-t.top,left:a.left-t.left})}},{key:"displayViewer",value:function(e,t){this.fixPopupLocation(e.element),e.element.addClass(e.classes.invert.y)}},{key:"onScaffoldSelected",value:function(e,t){var a=this.annotator.plugins.RichText.mceditor,n=a.selection.getContent(),r=e(n.length?n:t),o=r.tag,i=r.supportContentId;a.insertContent(o);var c=a.dom.get(i);c&&a.selection.setCursorLocation(c)}},{key:"render",value:function(){return r.a.createElement("div",{ref:this.contentRef},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.content}}))}}]),a}(r.a.Component),Ar=(a(290),function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={riseAboveNotes:!1,selectedTab:n.props.mode?n.props.mode:"write"},n.onEditorSetup=n.onEditorSetup.bind(Object(b.a)(n)),n.addDrawing=n.addDrawing.bind(Object(b.a)(n)),n.onNoteChange=n.onNoteChange.bind(Object(b.a)(n)),n.wordCount=n.wordCount.bind(Object(b.a)(n)),n.onTabSelected=n.onTabSelected.bind(Object(b.a)(n)),n.onAnnotationCreated=n.onAnnotationCreated.bind(Object(b.a)(n)),n.onAnnotationDeleted=n.onAnnotationDeleted.bind(Object(b.a)(n)),n.onAnnotationUpdated=n.onAnnotationUpdated.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){this.props.drawing&&e.drawing!==this.props.drawing&&(this.editor.insertContent(this.props.drawing),this.props.onDrawingInserted())}},{key:"onNoteChange",value:function(e){if(e.scaffold){var t=e.scaffold,a=t.tagCreator,n=t.initialText;this.addSupport(!0,n,a)}else e.attach?this.editor.insertContent(e.attach):e.deleteAttach?(this.props.deleteAttachment(this.props.note._id,e.deleteAttach),this.editor.dom.remove(this.editor.dom.select("."+e.deleteAttach))):e.data&&e.data.body?this.props.onNoteChange(Object(j.a)(Object(j.a)({},e),{},{wordCount:this.wordCount(e.data.body)})):this.props.onNoteChange(Object(j.a)({},e))}},{key:"wordCount",value:function(e){return this.editor.plugins.wordcount.getCount()-function(e){for(var t="<div>"+e+"</div>",a=je()(t).find(".kfSupportStartLabel"),n=0,r=0;r<a.length;r++)n+=a[r].innerHTML.split(" ").length;return n}(e)}},{key:"onEditorSetup",value:function(e){e.onDrawButton=this.props.onDrawToolOpen,this.editor=e}},{key:"addDrawing",value:function(e){this.editor.insertContent(e)}},{key:"addSupport",value:function(e,t,a){var n=this.editor.selection.getContent(),r=a(n.length?n:t),o=r.tag,i=r.supportContentId;if(this.editor.insertContent(o),e){var c=this.editor.dom.get(i);c&&this.editor.selection.setCursorLocation(c)}}},{key:"onTabSelected",value:function(e){this.setState({selectedTab:e}),"history"===e&&this.props.fetchRecords(this.props.note._id),"author"===e&&this.props.fetchCommGroups(this.props.note.communityId)}},{key:"onAnnotationCreated",value:function(e){console.log(e),this.props.createAnnotation(this.props.note.communityId,this.props.note._id,this.props.noteAuthor._id,e)}},{key:"onAnnotationDeleted",value:function(e){e.linkId&&e.modelId&&this.props.deleteAnnotation(e.linkId,this.props.note._id,e.modelId)}},{key:"onAnnotationUpdated",value:function(e){if(e.linkId&&e.modelId){var t=Object.assign({},this.props.note.annos[e.modelId]);t?(t.data=e,this.props.modifyAnnotation(t,this.props.note.communityId,this.props.note._id)):console.error("ERROR! model couldn't find")}else console.error("ERROR! annoVM doesn't have id on update")}},{key:"render",value:function(){var e=this,t=new Intl.DateTimeFormat("default",Bt);return r.a.createElement("div",null,r.a.createElement("div",{className:"contrib-info"},"Created By: ",this.props.noteAuthor.firstName," ",this.props.noteAuthor.lastName," ",r.a.createElement("br",null),"Last modified: ",t.format(new Date(this.props.note.modified))),r.a.createElement(nr.a,{activeKey:this.state.selectedTab,onSelect:this.onTabSelected},r.a.createElement(rr.a,{eventKey:"read",title:"read",mountOnEnter:!0,style:{height:"100%"}},r.a.createElement(pn.a,{style:{height:"100%"}},r.a.createElement(hn.a,null,r.a.createElement(jr,{containerId:this.props.dlgId,content:this.props.note.data.body,annots:this.props.note.annos,annotsFetched:this.props.note.annotsFetched,author:this.props.noteAuthor,onCreate:this.onAnnotationCreated,onUpdate:this.onAnnotationUpdated,onDelete:this.onAnnotationDeleted,onAnnotsLoaded:function(){return e.props.setAnnotationsLoaded({contribId:e.props.note._id,value:0})}})),this.props.note.data.riseabove&&this.props.raViewLinks&&this.props.raReadLinks?r.a.createElement(hn.a,{className:"border border-primary border-4 note-ra-col"},r.a.createElement(pn.a,null,r.a.createElement("div",{className:"note-ra-text"},"Riseabove View:",r.a.createElement(E.a,{className:"sm-button",variant:"primary",href:"/view/".concat(this.props.note.data.riseabove.viewId),target:"_blank"},"Open in Window"))),r.a.createElement(pn.a,{className:"note-ra-rowgraph"},r.a.createElement(Pa,{viewId:this.props.note.data.riseabove.viewId,viewLinks:this.props.raViewLinks,readLinks:this.props.raReadLinks,onNoteClick:function(t){return e.props.openContribution(t,"write")},onViewClick:function(e){window.open("/view/".concat(e),"_blank")}}))):"")),"read"!==this.props.mode?r.a.createElement(rr.a,{eventKey:"write",title:"write"},r.a.createElement(br,{note:this.props.note,onScaffoldSelected:this.scaffoldSelected,onChange:this.onNoteChange,onEditorSetup:this.onEditorSetup})):"",r.a.createElement(rr.a,{eventKey:"author",title:"author(s)"},r.a.createElement(yr,{contrib:this.props.note,onChange:this.onNoteChange})),r.a.createElement(rr.a,{eventKey:"history",title:"history"},r.a.createElement(fr,{records:this.props.note.records})),r.a.createElement(rr.a,{eventKey:"properties",title:"properties"},r.a.createElement(vr,{contribution:this.props.note,onChange:this.props.onNoteChange}))))}}]),a}(r.a.Component)),kr={fetchAttachments:ft,fetchRecords:yt,deleteAnnotation:function(e,t,a){return function(){var n=Object(O.a)(N.a.mark((function n(r){return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,U(e);case 2:return n.abrupt("return",r(qe({contribId:t,annoId:a})));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},fetchCommGroups:Qt,createAnnotation:function(e,t,a,n){return function(){var r=Object(O.a)(N.a.mark((function r(o){var i,c,s;return N.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i={communityId:e,type:"Annotation",title:"an Annotation",authors:[a],status:"active",permission:"private",data:n},r.next=3,_(e,i);case 3:return c=r.sent,r.next=6,B(c._id,t,"annotates");case 6:s=r.sent,n.linkId=s._id,n.modelId=c._id,o(Xe({contribId:t,annotation:c}));case 10:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},modifyAnnotation:function(e,t,a){return function(){var n=Object(O.a)(N.a.mark((function n(r){var o;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Q(e,t,e._id);case 2:return o=n.sent,n.abrupt("return",r(Xe({contribId:a,annotation:o})));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},setAnnotationsLoaded:Ke,deleteAttachment:function(e,t){return function(){var a=Object(O.a)(N.a.mark((function a(n,r){var o,i,c;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=r(),i=o.notes[e],c=i.fromLinks.filter((function(e){return e.to===t}))[0],a.next=5,U(c._id);case 5:n(Be({attId:t,noteId:e})),n(gt(e,"from"));case 7:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},openContribution:Et},Sr=Object(u.b)((function(e,t){var a,n,r,o,i,c;return{noteAuthor:t.note&&(e.users[t.note.authors[0]]||"NA"),currentAuthor:e.globals.author,editable:t.note&&t.note.authors.includes(e.globals.author._id),raViewLinks:(null===(a=t.note)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.riseabove)&&(null===(r=e.notes.raViews[t.note.data.riseabove.viewId])||void 0===r?void 0:r.viewLinks),raReadLinks:(null===(o=t.note)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.riseabove)&&(null===(c=e.notes.raViews[t.note.data.riseabove.viewId])||void 0===c?void 0:c.readLinks)}}),kr)(Ar),Cr=function(e){var t=e.dialog,a=Object(u.d)((function(e){return e.notes[t.contribId]})),o=Object(u.c)(),i=Object(n.useState)(null),s=Object(c.a)(i,2),l=s[0],d=s[1],m=Object(n.useState)(!1),p=Object(c.a)(m,2),h=p[0],b=p[1],f=Object(n.useState)(null),v=Object(c.a)(f,2),g=v[0],y=v[1],E=Object(n.useState)(null),w=Object(c.a)(E,2),I=w[0],N=w[1];Object(n.useEffect)((function(){d((function(e){return null===e?Object(j.a)({},a):Object(j.a)(Object(j.a)({},e),{},{attachments:a.attachments,records:a.records})}))}),[a]);var O=function(){y(null),b(!1)};return r.a.createElement("div",null,r.a.createElement(tr,{key:t.id,id:t.id,onMouseDown:e.onMouseDown,title:t.title,style:{zIndex:t.zIndex},onClose:function(){return o(ge((e=t).id)),void o(Ve(e.contribId));var e},onConfirm:function(){o(vt(l,t.id))},confirmButton:t.confirmButton,editable:t.editable,buildon:t.buildOn,onBuildOnClick:function(){return e=t.contribId,void o(bt(e));var e}},l?r.a.createElement(Sr,{key:t.contribId,dlgId:t.id,note:l,mode:t.editable?"write":"read",drawing:I,onNoteChange:function(e){d((function(t){var a=Object(j.a)(Object(j.a)({},t),e);return a.data=Object(j.a)(Object(j.a)({},t.data),e.data),a}))},onDrawToolOpen:function(e){e&&y(e),b(!0)},onDrawingInserted:function(){N(null)}}):null),h?r.a.createElement(ar,{onClose:O,onConfirm:function(e){N(e),O()},svg:g}):null)},Mr=function(e){var t=new Intl.DateTimeFormat("default",Bt).format(new Date(e.attachment.modified)),a=Object(u.d)((function(t){return t.users[e.attachment.authors[0]]||"NA"})),o=Object(u.c)(),i=Object(n.useState)("read"),s=Object(c.a)(i,2),l=s[0],d=s[1];return r.a.createElement("div",null,r.a.createElement("div",{className:"contrib-info"},"Created By: ",a.firstName," ",a.lastName," ",r.a.createElement("br",null),"Last modified: ",t),r.a.createElement(nr.a,{activeKey:l,transition:!1,onSelect:function(t){d(t),"history"===t&&o(yt(e.attachment._id)),"author"===t&&o(Qt(e.attachment.communityId))}},r.a.createElement(rr.a,{style:{height:"100%"},eventKey:"read",title:"read"},r.a.createElement("a",{href:"".concat(C).concat(e.attachment.data.url),title:e.attachment.title,download:!0},e.attachment.data.url),"application/pdf"===e.attachment.data.type?r.a.createElement("object",{data:"".concat(C).concat(e.attachment.data.url),type:"application/pdf",width:"100%",height:"100%"}):""),"read"!==e.mode?r.a.createElement(rr.a,{eventKey:"write",title:"write"},r.a.createElement(pn.a,null,r.a.createElement(hn.a,null,r.a.createElement(Cn.a.Group,{className:"write-title-form",controlId:"note-title"},r.a.createElement(Cn.a.Control,{type:"text",className:"write-tab-input",size:"sm",placeholder:"Enter title",value:e.attachment.title,onChange:function(t){e.onChange({title:t.target.value})}}))))):"",r.a.createElement(rr.a,{eventKey:"author",title:"author(s)"},r.a.createElement(yr,{contrib:e.attachment,onChange:e.onChange})),r.a.createElement(rr.a,{eventKey:"history",title:"history"},r.a.createElement(fr,{records:e.attachment.records})),r.a.createElement(rr.a,{eventKey:"properties",title:"properties"},r.a.createElement(vr,{contribution:e.attachment,onChange:e.onChange}))))},Tr=function(e){var t=e.dialog,a=Object(u.d)((function(e){return e.notes[t.contribId]})),n=Object(u.c)();return r.a.createElement("div",null,r.a.createElement(tr,{key:t.id,id:t.id,onMouseDown:e.onMouseDown,title:t.title,style:{zIndex:t.zIndex},onClose:function(){return n(ge((e=t).id)),void n(Ve(e.noteId));var e},onConfirm:function(){n(vt(a,t.id))},confirmButton:t.confirmButton,editable:t.editable,buildon:t.buildOn,onBuildOnClick:function(){return e=t.contribId,void n(bt(e));var e}},a?r.a.createElement(Mr,{key:t.contribId,dlgId:t.id,attachment:a,mode:t.editable?"write":"read",onChange:function(e){n(ze(Object(j.a)({_id:a._id},e)))}}):null))},Zr=function(e){var t,a=new Intl.DateTimeFormat("default",Bt),o=e.dialog,i=Object(u.d)((function(e){return e.notes[o.contribId]})),s=Object(u.d)((function(e){return e.users[i.authors[0]]||"NA"})),l=a.format(new Date(i.modified)),d=Object(u.c)(),m=Object(n.useState)("write"),p=Object(c.a)(m,2),h=p[0],b=p[1],f=function(e){d(ge(e.id)),d(Ve(e.noteId))},v=function(e){d(ze(Object(j.a)({_id:i._id},e)))};return r.a.createElement(tr,{key:o.id,id:o.id,onMouseDown:e.onMouseDown,title:o.title,style:{zIndex:o.zIndex},onClose:function(){return f(o)},onConfirm:function(){return function(){var e=t.contentWindow;e.svgCanvas.setResolution("fit",100);var a=e.svgCanvas.current_drawing_.all_layers[0],n=e.svgCanvas.current_drawing_.all_layers[1],r=n[1].getBBox().width,c=n[1].getBBox().height;if(0!==r&&0!==c){if("none"===a[1].children[1].attributes.fill.value)if(e.svgCanvas.current_drawing_.all_layers[1][1].childNodes.length>1){e.svgCanvas.current_drawing_.svgElem_.setAttribute("width",r+2),e.svgCanvas.current_drawing_.svgElem_.setAttribute("height",c+2);var s=e.svgCanvas.current_drawing_.all_layers[0];s[1].childNodes[1].setAttribute("width",r),s[1].childNodes[1].setAttribute("height",c),e.svgCanvas.selectAllInCurrentLayer(),e.svgCanvas.groupSelectedElements(),e.svgCanvas.alignSelectedElements("l","page"),e.svgCanvas.alignSelectedElements("t","page"),e.svgCanvas.ungroupSelectedElement(),e.svgCanvas.clearSelection()}e.svgCanvas.setResolution("fit","fit");var l=Object(j.a)({},i);l.data=Object(j.a)(Object(j.a)({},l.data),{},{svg:e.svgCanvas.svgCanvasToString()}),d(vt(l,o.id))}else f()}()},confirmButton:o.confirmButton,editable:o.editable,buildon:o.buildOn,onBuildOnClick:function(){return e=o.contribId,void d(bt(e));var e}},r.a.createElement("div",null,r.a.createElement("div",{className:"contrib-info"},"Created By: ",s.firstName," ",s.lastName," ",r.a.createElement("br",null),"Last modified: ",l),r.a.createElement(nr.a,{activeKey:h,transition:!1,onSelect:function(e){b(e),"history"===e&&d(yt(i._id)),"author"===e&&d(Qt(i.communityId))}},r.a.createElement(rr.a,{eventKey:"write",title:"write",style:{height:"90%"}},i?r.a.createElement(r.a.Fragment,null,r.a.createElement(pn.a,null,r.a.createElement(hn.a,null,r.a.createElement(Cn.a.Group,{className:"write-title-form",controlId:"note-title"},r.a.createElement(Cn.a.Control,{type:"text",className:"write-tab-input",size:"sm",placeholder:"Enter title",value:i.title,onChange:function(e){v({title:e.target.value})}})))),r.a.createElement("iframe",{onLoad:function(e){console.log("on load draw");var t=i.data.svg;t&&(e.target.contentWindow.svgCanvas.setSvgString(t),e.target.contentWindow.svgCanvas.setResolution("fit","fit"))},title:"DrawingTool",src:"/drawing-tool/svg/index.html",ref:function(e){e&&(t=e)},width:"100%",height:"100%"})):""),r.a.createElement(rr.a,{eventKey:"author",title:"author(s)"},r.a.createElement(yr,{contrib:i,onChange:v})),r.a.createElement(rr.a,{eventKey:"history",title:"history"},r.a.createElement(fr,{records:i.records})),r.a.createElement(rr.a,{eventKey:"properties",title:"properties"},r.a.createElement(vr,{contribution:i,onChange:v})))))},Lr=function(e){var t=Object(u.d)((function(e){return e.dialogs})),a=Object(u.c)(),o=Object(n.useCallback)((function(e){return a(ye(e))}),[a]);return r.a.createElement("div",null,t.dialogs.map((function(e,t){return"Note"===e.type?r.a.createElement(Cr,{key:e.id,dialog:e,onMouseDown:function(){return o(e.id)}}):"Attachment"===e.type?r.a.createElement(Tr,{key:e.id,dialog:e,onMouseDown:function(){return o(e.id)}}):"Drawing"===e.type?r.a.createElement(Zr,{key:e.id,dialog:e,onMouseDown:function(){return o(e.id)}}):""})))},Gr=function(e){var t=Object(n.useState)(""),a=Object(c.a)(t,2),o=a[0],i=a[1],s=Object(u.c)();return r.a.createElement(y.a,{show:e.show,onHide:e.handleClose},r.a.createElement(y.a.Header,{closeButton:!0},r.a.createElement(y.a.Title,null,"New RiseAbove")),r.a.createElement(y.a.Body,null,r.a.createElement(pn.a,null,r.a.createElement(hn.a,null,r.a.createElement(Cn.a.Group,{className:"ra-title-form",controlId:"ra-title"},r.a.createElement(Cn.a.Control,{type:"text",size:"sm",placeholder:"Enter title",value:o,onChange:function(e){i(e.target.value)}}))))),r.a.createElement(y.a.Footer,null,r.a.createElement(E.a,{variant:"secondary",onClick:e.handleClose},"Cancel"),r.a.createElement(E.a,{variant:"primary",onClick:function(){var t;s((t=o,function(){var e=Object(O.a)(N.a.mark((function e(a,n){var r,o,i,c,s,l,u,d;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().globals,o=r.author,i=r.communityId,c=r.view,s={permission:c.permission,group:c.group,_groupMembers:c._groupMembers},e.next=4,xe(t,o._id,i,s,!1);case 4:return l=e.sent,u=pt(i,o._id,s),e.next=8,x(i,u);case 8:return(d=e.sent.data).title=t,e.next=12,Re(d,l._id,i);case 12:d=e.sent,B(c._id,d._id,"contains",{x:200,y:200});case 14:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())),e.handleClose()}},"Create")))},Dr=a(180),xr=a.n(Dr),Rr=Object(n.createContext)(null),Yr=function(e){var t,a,n=e.children,o=Object(u.c)(),i=function(e){t.on(e+":save",(function(t){var a;"link"===e&&"contains"===t.type&&"active"===t._to.status&&o((a=t,function(){var e=Object(O.a)(N.a.mark((function e(t,n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n().globals.viewId!==a.from){e.next=8;break}if(t(rt(a)),"Note"!==a._to.type){e.next=8;break}return e.next=6,J(a.to);case 6:r=e.sent,t(et(r));case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()))})),t.on(e+":remove",(function(t){"link"===e&&"active"===t._to.status&&(o(ut(t)),o(dt({_id:t.to})))}))},c=function(e){t.emit("subscribe","linkfrom:".concat(e)),t.emit("subscribe","noteCount:".concat(e))};return a={socket:t,openConnection:function(e,a){t?(e&&c(e),a&&i(a)):((t=xr.a.connect(C,{path:"/socket.io-client",log:!0,"close timeout":60,"heartbeat timeout":60,"heartbeat interval":20})).on("connect",(function(){o(Ft(!0)),e&&c(e),a&&i(a)})),t.on("error",(function(e){console.log(e||"error"),t=null,o(Ft(!1))})),t.on("connect_failed",(function(e){console.log(e||"connect_failed"),t=null,o(Ft(!1))})),t.on("disconnect",(function(e){t=null,o(Ft(!1))})))},emit:function(e,a){t.emit(e,a)},unsyncUpdates:function(e){t.removeAllListeners(e+":save"),t.removeAllListeners(e+":remove")},syncUpdates:i,subscribeToView:c,unsubscribeToView:function(e){t.emit("unsubscribe","linkfrom:".concat(e)),t.emit("unsubscribe","noteCount:".concat(e))},disconnect:function(){t&&t.disconnect()}},r.a.createElement(Rr.Provider,{value:a},n)},Wr=function(e){Object(f.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).handleNewViewInput=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(w.a)({},a,r))},n.goToDashboard=function(){n.clearGraphViewProps(),n.props.history.push("/dashboard")},n.switchView=function(){var e="Enhanced"===n.state.currentView?"Light":"Enhanced";n.setState({currentView:e})},n.renderTooltip=function(e){return r.a.createElement(ln.a,Object.assign({id:"button-tooltip"},e),e.message)},n.state={token:sessionStorage.getItem("token"),currentView:void 0===n.props.location.state?"Enhanced":n.props.location.state.currentView,communityTitle:void 0===n.props.location.state?null:n.props.location.state.communityTitle,addView:"",showModal:!1,showView:!1,showAttachPanel:!1,showRiseAboveModal:!1},n.clearGraphViewProps=n.clearGraphViewProps.bind(Object(b.a)(n)),n.onViewClick=n.onViewClick.bind(Object(b.a)(n)),n.handleNewViewInput=n.handleNewViewInput.bind(Object(b.a)(n)),n.handleNewViewSubmit=n.handleNewViewSubmit.bind(Object(b.a)(n)),n.newView=n.newView.bind(Object(b.a)(n)),n.handleShow=n.handleShow.bind(Object(b.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.viewId?this.props.viewId:this.props.match.params.viewId;this.context.openConnection(e,"link"),this.props.fetchViewCommunityData(e)}},{key:"componentDidUpdate",value:function(e,t){this.props.viewId&&this.props.viewId!==e.viewId&&(this.props.fetchNewViewDifference(this.props.viewId),this.props.socketStatus&&e.viewId&&(this.context.unsubscribeToView(e.viewId),this.context.subscribeToView(this.props.viewId)))}},{key:"componentWillUnmount",value:function(){this.props.socketStatus&&(this.context.unsyncUpdates("link"),this.context.unsubscribeToView(this.props.viewId),this.context.disconnect())}},{key:"clearGraphViewProps",value:function(){this.props.setViewLinks([]),this.props.setBuildsOn([]),this.props.setReadLinks([]),this.props.clearAuthors([])}},{key:"onViewClick",value:function(e){this.handleShow(!1),this.props.setViewId(e),this.props.history.push({pathname:"/view/".concat(e),state:{currentView:this.state.currentView,communityTitle:this.state.communityTitle}})}},{key:"newView",value:function(){this.setState({showView:!0,showModel:!0})}},{key:"handleNewViewSubmit",value:function(e){var t=this;e.preventDefault();var a={headers:{Authorization:"Bearer ".concat(this.state.token)}},n="".concat(M,"/contributions/").concat(this.props.communityId),r={authors:[this.props.author._id],communityId:this.props.communityId,permission:"public",status:"active",title:this.state.addView,type:"View"};S.a.post(n,r,a).then((function(e){var a=e.data._id;R(t.props.communityId).then((function(e){e.data.views.push(a),Y(e.data,t.props.communityId).then((function(e){ee(t.props.communityId).then((function(e){B(t.props.viewId,a,"contains",{x:1e3,y:1e3}).then((function(e){alert("View Added"),window.location.reload(!1)}))}))}))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}},{key:"handleShow",value:function(e){this.setState({showModel:e})}},{key:"render",value:function(){var e=this,t="Enhanced"===this.state.currentView?r.a.createElement(Pa,{viewId:this.props.viewId,viewLinks:this.props.viewLinks,readLinks:this.props.readLinks,onViewClick:this.onViewClick,onNoteClick:function(t){return e.props.openContribution(t,"write")}}):r.a.createElement(Kn,null);return r.a.createElement("div",{className:"container-fluid d-flex flex-column",id:"container-fluid-for-view-js"},r.a.createElement(Lr,null),r.a.createElement(Zn,{attachPanel:this.state.showAttachPanel,viewId:this.props.viewId,onClose:function(){return e.setState({showAttachPanel:!1})}}),r.a.createElement(Gr,{show:this.state.showRiseAboveModal,handleClose:function(){return e.setState({showRiseAboveModal:!1})}}),r.a.createElement("div",{className:"row"},r.a.createElement(Sn,{currentView:this.state.currentView,onViewClick:this.onViewClick,communityTitle:this.state.communityTitle})),r.a.createElement("div",{className:"row flex-grow-1"},r.a.createElement("div",{className:"col-md",id:"sticky-sidebar"},r.a.createElement("div",{className:"row sidebar-list"},r.a.createElement("div",{className:"sidebar-list-col col-4 col-sm-4 col-md-12"},r.a.createElement(un.a,{drop:"right",className:"dropdown-btn-parent",title:r.a.createElement("i",{className:"fas fa-plus-circle"})},r.a.createElement(dn.a.Item,{onClick:function(){return e.props.newNote(e.props.view,e.props.communityId,e.props.author._id)}},"New Note"),r.a.createElement(dn.a.Item,{onClick:function(){return e.newView()}},"New View"),r.a.createElement(dn.a.Item,{onClick:function(){return e.setState({showAttachPanel:!0})}},"New Attachment"),r.a.createElement(dn.a.Item,{onClick:function(){return e.props.newDrawing(e.props.viewId,e.props.communityId,e.props.author._id)}},"New Drawing"),r.a.createElement(dn.a.Item,{onClick:function(){return e.setState({showRiseAboveModal:!0})}},"New RiseAbove"))),r.a.createElement("div",{className:"sidebar-list-col col-4 col-sm-4 col-md-12"},r.a.createElement(mn.a,{placement:"right",delay:{show:250,hide:400},overlay:this.renderTooltip({message:"Exit Community"})},r.a.createElement(E.a,{onClick:this.goToDashboard,className:"circle-button sidebar-btn"},r.a.createElement("i",{className:"fa fa-arrow-left"})))),r.a.createElement("div",{className:"sidebar-list-col col-4 col-sm-4 col-md-12"},r.a.createElement(mn.a,{placement:"right",delay:{show:250,hide:400},overlay:this.renderTooltip({message:"Change View"})},r.a.createElement(E.a,{onClick:this.switchView,className:"circle-button pad sidebar-btn"},r.a.createElement("i",{className:"fa fa-globe"})))))),r.a.createElement("div",{className:"col-md",id:"main-canvas"},t)),r.a.createElement(y.a,{show:this.state.showModel,onHide:function(){return e.handleShow(!1)}},this.state.showView?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a.Header,{closeButton:!0},r.a.createElement(y.a.Title,null,r.a.createElement(pn.a,null,r.a.createElement(hn.a,null,"Views")),r.a.createElement(pn.a,null,r.a.createElement(hn.a,null,r.a.createElement(pn.a,null,r.a.createElement(bn.a,{onSubmit:this.handleNewViewSubmit,className:"form"},r.a.createElement(hn.a,null,r.a.createElement(fn.a,null,r.a.createElement(vn.a,{htmlFor:"addView",style:{fontSize:"1rem"}},"Add View"),r.a.createElement(gn.a,{type:"text",id:"addView",placeholder:"Enter View Name",name:"addView",value:this.state.addView,onChange:this.handleNewViewInput}))),r.a.createElement(hn.a,null,r.a.createElement(E.a,{varient:"secondary",type:"submit"},"Add")))))))),r.a.createElement(y.a.Body,{style:{maxHeight:"calc(100vh - 210px)",overflowY:"auto"}},this.props.myViews.map((function(t,a){return r.a.createElement(pn.a,{key:a,value:t.title,className:"mrg-05-top"},r.a.createElement(hn.a,null,r.a.createElement(s.b,{onClick:function(){return e.onViewClick(t._id)}}," ",t.title," ")))})))):null,r.a.createElement(y.a.Footer,null,r.a.createElement(E.a,{variant:"secondary",onClick:function(){return e.handleShow(!1)}},"Close"))))}}]),a}(n.Component);Wr.contextType=Rr;var Vr={setViewId:Mt,setViewLinks:nt,setBuildsOn:ot,setReadLinks:lt,clearAuthors:function(){return function(e){e(le([]))}},fetchViewCommunityData:Xt,fetchNewViewDifference:function(e){return function(){var t=Object(O.a)(N.a.mark((function t(a){var n,r;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(tt([])),t.next=3,J(e);case 3:n=t.sent,r=n.communityId,a(Zt(n)),a(wt(n._id)),a(Ot(r,n._id));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},openContribution:Et,newNote:ht,newDrawing:function(e,t,a){return function(){var n=Object(O.a)(N.a.mark((function n(r){var o,i,c;return N.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o={communityId:t,type:"Drawing",title:"a Drawing",authors:[a],status:"unsaved",permission:"protected",data:{svg:'<svg width="200" height="200" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><g><title>Layer 1</title></g></svg>'}},n.next=3,x(t,o);case 3:i=n.sent.data,B(e,i._id,"contains",{x:100,y:100,showInPlace:!0}),c=Object(j.a)({records:[]},i),r(We(c)),r(ve({title:"New Drawing",confirmButton:"create",contribId:c._id,type:"Drawing",editable:!0}));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},zr=Object(u.b)((function(e,t){return{token:e.globals.token,currentServer:e.globals.currentServer,communityId:e.globals.communityId,viewId:e.globals.viewId,view:e.globals.view,author:e.globals.author,myViews:e.globals.views,socketStatus:e.globals.socketStatus,viewLinks:e.notes.viewLinks,readLinks:e.notes.readLinks}}),Vr)(Wr),Fr=a(185),Br=function(e){var t=e.component,a=Object(Fr.a)(e,["component"]),n=Object(u.d)((function(e){return e.globals.isAuthenticated}));return r.a.createElement(l.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(l.a,{to:"/"})}}))};a(322);var Ur=function(){var e=Object(u.c)(),t=ra(),a=Object(c.a)(t,2),n=a[0],o=a[1];return o&&(Z(o),T(n),e(jt(o)),e(Ct(n)),e(Ht())),r.a.createElement("div",{id:"sub-root"},r.a.createElement(m.a,null),r.a.createElement(s.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",component:$a}),r.a.createElement(Br,{exact:!0,path:"/dashboard",component:sn}),r.a.createElement(Br,{path:"/view/:viewId",component:zr}),r.a.createElement(Br,{component:sn}))))};i.a.render(r.a.createElement(u.a,{store:Or},r.a.createElement(Yr,null,r.a.createElement(Ur,null))),document.getElementById("root"))}},[[187,1,2]]]);
//# sourceMappingURL=main.b3a367ab.chunk.js.map